<!--
Params to pass here:
post: Model
-->
<div class="bg-[var(--background-clr-clear)] rounded-md shadow overflow-hidden flex">
  <%= render "shared/posts_like_unlike", post: post %>

  <div class="p-3 sm:p-4 flex-grow min-w-0 relative hover:bg-[var(--background-clr-thick)]">
    <%= link_to post_path(id: post.id), class: "absolute top-0 left-0 w-full h-full z-1" do %>
      <div class="text-xs text-[var(--txt-clr-subtle)] mb-1 truncate">
        <!-- TODO: For now we used user name, in future we need to get user or community name -->
        <a href="#" class="font-semibold text-[var(--txt-clr-default)] hover:underline relative z-3">k/communityName</a>
        <span class="mx-1">â€¢</span>
        <span>Posted by <a href="#" class="hover:underline"><%= post.user.username%></a></span>
        <span class="hidden sm:inline"><%= PostHelper.calculate_created_date(post.created_at) %></span>
        <% if (post.created_at - post.updated_at).abs > 1 %><span class="ml-1">Edited</span><% end %>
      </div>

    
      <h3 class="text-base sm:text-lg font-semibold text-[var(--txt-clr-strong)] mb-2">
      <p class="hover:text-[var(--primary-700)]"><%= post.title %></p>
      </h3>

      <div class="text-sm text-[var(--txt-clr-default)] mb-3 max-h-24 line-clamp-3">
        <%= post.description %>
      </div>
      <div class="flex items-center space-x-2 sm:space-x-4 text-xs font-medium text-[var(--txt-clr-subtle)]">
        <a href="#" class="flex items-center space-x-1 hover:bg-[var(--background-clr-thick)] p-1 rounded relative z-3">
          <%= icon(icon: :comment_icon, options: {class: "fa-fw text-base" }) %>
          <span class="hidden sm:inline"><%= post.comments.count %> Comments</span>
        </a>
        <button class="flex items-center space-x-1 hover:bg-[var(--background-clr-thick)] p-1 rounded relative z-3">
          <%= icon(icon: :share_icon, options: {class: "fa-fw text-base" }) %>
          <span class="hidden sm:inline">Share</span>
        </button>
        <button class="flex items-center space-x-1 hover:bg-[var(--background-clr-thick)] p-1 rounded relative z-3">
          <%= icon(icon: :save_icon, options: {class: "fa-fw text-base" }) %>
          <span class="hidden sm:inline">Save</span>
        </button>
        <button class="flex items-center space-x-1 hover:bg-[var(--background-clr-thick)] p-1 rounded ml-auto relative z-3">
          <%= icon(icon: :ellipsis_icon, options: {class: "fa-fw text-base" }) %>
        </button>
      </div>
    <% end %>
  </div>
</div>