<% content_for :page_javascript do %>
  <%= javascript_include_tag "site_settings", "data-turbo-track": "reload" %>
<% end %>
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8" x-data="header">
  <div class="bg-[var(--background-clr-clear)] shadow-xl rounded-lg overflow-hidden">
    <div class="px-6 py-8 sm:p-8">
      <h2 class="text-xl font-semibold text-[var(--txt-clr-strong)]">Appearance Settings</h2>
      <p class="mt-1 text-sm text-[var(--txt-clr-subtle)] mb-6">Customize how the site looks. Changes are saved automatically to your browser.</p>
      <div class="flex px-4 py-2 items-center justify-between">
        <span class="flex-grow flex flex-col">
          <span class="text-sm font-medium text-[var(--txt-clr-default)]">Dark Mode</span>
        </span>
        <label 
        :class="{'bg-[var(--primary-600)]' : dark_mode==true, 'bg-[var(--background-clr-strong)]' : dark_mode==false}"
        class="relative inline-flex flex-shrink-0 items-center h-5 w-9 border-2 border-[var(--border-clr-default)] rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-500)]">
          <input type="checkbox" class="w-0 h-0 opacity-0" :checked="dark_mode" @change="change_dark_mode" >
          <span
          :class="{ 'translate-x-4': dark_mode==true, 'translate-x-0': dark_mode==false }"
          class="pointer-events-none inline-block h-3 w-3 rounded-full bg-[var(--background-clr-clear)] shadow transform ring-0 transition ease-in-out duration-200"></span>
        </label>
      </div>
      <div class="space-y-6">
        <div class="py-4 border-t border-[var(--background-clr-strong)]">
          <span class="block text-sm font-medium text-[var(--txt-clr-strong)] mb-3">Theme Color</span>
          <div class="flex flex-wrap gap-4">
            <template x-for="(theme, key) in themes" :key="key">
              <button
              @click="setTheme(key)"
              type="button"
              class="w-10 h-10 rounded-full focus:outline-none flex items-center justify-center transition-all duration-150 ease-in-out"
              :class="[theme.swatchBg, activeTheme === key ? 'ring-4 ring-offset-2 ' + themes[activeTheme].ring : 'hover:opacity-80 focus:ring-2 ' + theme.ring]"
              :title="theme.name">
                <%= icon(icon: :tick_icon, options:{class:"text-[var(--white)] text-lg", "x-show"=>"activeTheme === key"}) %>
                <span class="sr-only" x-text="theme.name"></span>
              </button>
            </template>
          </div>
          <p class="mt-3 text-xs text-[var(--txt-clr-subtle)]">Current theme: <span x-text="themes[activeTheme].name" :class="themes[activeTheme].text" class="font-semibold"></span></p>
        </div>
      </div>
    </div>
  </div>
</div>