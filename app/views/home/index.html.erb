<div data-controller="home--index" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="md:col-span-2 space-y-4">
      <% @posts.each do |post| %>
        <%= render "shared/post", post: post %>
      <% end %>
    </div>
    <div class="hidden md:block space-y-4">
      <div class="bg-[var(--background-clr-clear)] p-4 rounded-md shadow">
        <h4 class="font-semibold mb-3 border-b pb-2">Community Info</h4>
        <p class="text-sm text-[var(--txt-clr-muted)] mb-2">Welcome to k/communityName! A place to discuss...</p>
        <button class="w-full bg-[var(--primary-600)] hover:bg-[var(--primary-700)] text-[var(--txt-clr-inverted)] text-sm font-bold py-2 px-4 rounded-full transition duration-150 ease-in-out">Join</button>
      </div>
      <div class="bg-[var(--background-clr-clear)] p-4 rounded-md shadow">
        <h4 class="font-semibold mb-3 border-b pb-2">Trending Topics</h4>
        <ul class="space-y-2 text-sm">
          <li><a href="#" class="text-[var(--primary-600)] hover:underline">#topic1</a></li>
          <li><a href="#" class="text-[var(--primary-600)] hover:underline">#very_long_topic_example</a></li>
          <li><a href="#" class="text-[var(--primary-600)] hover:underline">#topic3</a></li>
        </ul>
      </div>
      <div class="bg-[var(--background-clr-clear)] p-4 rounded-md shadow sticky top-20">
        <h4 class="font-semibold mb-3 border-b pb-2">Site Rules</h4>
        <ol class="list-decimal list-inside space-y-1 text-xs text-[var(--txt-clr-muted)]">
          <li>Be respectful.</li>
          <li>No spamming.</li>
          <li>Relevant content only.</li>
        </ol>
      </div>
    </div>
  </div>
</div>
<script>
  function scrollGallery(button, direction) {
      const galleryContainer = button.closest('.relative').querySelector('.overflow-x-auto');
      if (galleryContainer) {
          // Calculate the scroll amount (e.g., width of one image container)
          // Using clientWidth as an approximation for one item's visible width
          const scrollAmount = galleryContainer.clientWidth * 0.85; // Scroll slightly less than full width
          galleryContainer.scrollBy({
              left: scrollAmount * direction,
              behavior: 'smooth' // Smooth scrolling
          });
      }
  }
</script>