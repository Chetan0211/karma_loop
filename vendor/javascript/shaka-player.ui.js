var i=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;var r={};
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(){var o=typeof window!="undefined"?window:i;var s={};(function(r,o,s){var p;function ba(i){var r=0;return function(){return r<i.length?{done:!1,value:i[r++]}:{done:!0}}}var y="function"==typeof Object.defineProperties?Object.defineProperty:function(i,r,o){if(i==Array.prototype||i==Object.prototype)return i;i[r]=o.value;return i};function ea(i){i=["object"==typeof globalThis&&globalThis,i,"object"==typeof r&&r,"object"==typeof self&&self,"object"==typeof o&&o];for(var s=0;s<i.length;++s){var p=i[s];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var A=ea(this||i);function ha(i,r){if(r)e:{var o=A;i=i.split(".");for(var s=0;s<i.length-1;s++){var p=i[s];if(!(p in o))break e;o=o[p]}i=i[i.length-1];s=o[i];r=r(s);r!=s&&null!=r&&y(o,i,{configurable:!0,writable:!0,value:r})}}ha("Symbol",(function(r){function b(r){if((this||i)instanceof b)throw new TypeError("Symbol is not a constructor");return new c(o+(r||"")+"_"+s++,r)}function c(r,o){(this||i).g=r;y(this||i,"description",{configurable:!0,writable:!0,value:o})}if(r)return r;c.prototype.toString=function(){return(this||i).g};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",s=0;return b}));ha("Symbol.iterator",(function(r){if(r)return r;r=Symbol("Symbol.iterator");for(var o="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),s=0;s<o.length;s++){var p=A[o[s]];"function"===typeof p&&"function"!=typeof p.prototype[r]&&y(p.prototype,r,{configurable:!0,writable:!0,value:function(){return ia(ba(this||i))}})}return r}));function ia(r){r={next:r};r[Symbol.iterator]=function(){return this||i};return r}function t(i){var r="undefined"!=typeof Symbol&&Symbol.iterator&&i[Symbol.iterator];return r?r.call(i):{next:ba(i)}}function w(i){if(!(i instanceof Array)){i=t(i);for(var r,o=[];!(r=i.next()).done;)o.push(r.value);i=o}return i}var T,x="function"==typeof Object.create?Object.create:function(i){function b(){}b.prototype=i;return new b};if("function"==typeof Object.setPrototypeOf)T=Object.setPrototypeOf;else{var I;e:{var C={a:!0},M={};try{M.__proto__=C;I=M.a;break e}catch(i){}I=!1}T=I?function(i,r){i.__proto__=r;if(i.__proto__!==r)throw new TypeError(i+" is not extensible");return i}:null}var N=T;function pa(i,r){i.prototype=x(r.prototype);i.prototype.constructor=i;if(N)N(i,r);else for(var o in r)if("prototype"!=o)if(Object.defineProperties){var s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(i,o,s)}else i[o]=r[o];i.Bk=r.prototype}function qa(){(this||i).s=!1;(this||i).l=null;(this||i).h=void 0;(this||i).g=1;(this||i).j=(this||i).m=0;(this||i).C=(this||i).i=null}function ra(i){if(i.s)throw new TypeError("Generator is already running");i.s=!0}qa.prototype.u=function(r){(this||i).h=r};function sa(i,r){i.i={Qg:r,$g:!0};i.g=i.m||i.j}qa.prototype.return=function(r){(this||i).i={return:r};(this||i).g=(this||i).j};function D(i,r,o){i.g=o;return{value:r}}qa.prototype.F=function(r){(this||i).g=r};function F(i){i.g=0}function ta(i,r,o){i.m=r;void 0!=o&&(i.j=o)}function ua(i,r){i.m=0;i.j=r||0}function va(i,r,o){i.g=r;i.m=o||0}function wa(i,r){i.m=r||0;r=i.i.Qg;i.i=null;return r}function xa(i){i.C=[i.i];i.m=0;i.j=0}function ya(i,r){var o=i.C.splice(0)[0];(o=i.i=i.i||o)?o.$g?i.g=i.m||i.j:void 0!=o.F&&i.j<o.F?(i.g=o.F,i.i=null):i.g=i.j:i.g=r}function za(r){(this||i).g=new qa;(this||i).h=r}function Aa(i,r){ra(i.g);var o=i.g.l;if(o)return Ba(i,"return"in o?o.return:function(i){return{value:i,done:!0}},r,i.g.return);i.g.return(r);return Da(i)}function Ba(i,r,o,s){try{var p=r.call(i.g.l,o);if(!(p instanceof Object))throw new TypeError("Iterator result "+p+" is not an object");if(!p.done)return i.g.s=!1,p;var y=p.value}catch(r){return i.g.l=null,sa(i.g,r),Da(i)}i.g.l=null;s.call(i.g,y);return Da(i)}function Da(i){for(;i.g.g;)try{var r=i.h(i.g);if(r)return i.g.s=!1,{value:r.value,done:!1}}catch(r){i.g.h=void 0,sa(i.g,r)}i.g.s=!1;if(i.g.i){r=i.g.i;i.g.i=null;if(r.$g)throw r.Qg;return{value:r.return,done:!0}}return{value:void 0,done:!0}}function Ea(r){(this||i).next=function(i){ra(r.g);r.g.l?i=Ba(r,r.g.l.next,i,r.g.u):(r.g.u(i),i=Da(r));return i};(this||i).throw=function(i){ra(r.g);r.g.l?i=Ba(r,r.g.l.throw,i,r.g.u):(sa(r.g,i),i=Da(r));return i};(this||i).return=function(i){return Aa(r,i)};(this||i)[Symbol.iterator]=function(){return this||i}}function Fa(i){function b(r){return i.next(r)}function c(r){return i.throw(r)}return new Promise((function(r,o){function f(i){i.done?r(i.value):Promise.resolve(i.value).then(b,c).then(f,o)}f(i.next())}))}function K(i){return Fa(new Ea(new za(i)))}function Ga(){for(var r=Number(this||i),o=[],s=r;s<arguments.length;s++)o[s-r]=arguments[s];return o}ha("Promise",(function(r){function b(r){(this||i).h=0;(this||i).i=void 0;(this||i).g=[];(this||i).s=!1;var o=this.j();try{r(o.resolve,o.reject)}catch(i){o.reject(i)}}function c(){(this||i).g=null}function d(i){return i instanceof b?i:new b((function(r){r(i)}))}if(r)return r;c.prototype.h=function(r){if(null==(this||i).g){(this||i).g=[];var o=this||i;this.i((function(){o.l()}))}(this||i).g.push(r)};var o=A.setTimeout;c.prototype.i=function(i){o(i,0)};c.prototype.l=function(){for(;(this||i).g&&(this||i).g.length;){var r=(this||i).g;(this||i).g=[];for(var o=0;o<r.length;++o){var s=r[o];r[o]=null;try{s()}catch(i){this.j(i)}}}(this||i).g=null};c.prototype.j=function(i){this.i((function(){throw i}))};b.prototype.j=function(){function g(i){return function(s){o||(o=!0,i.call(r,s))}}var r=this||i,o=!1;return{resolve:g((this||i).H),reject:g((this||i).l)}};b.prototype.H=function(r){if(r===(this||i))this.l(new TypeError("A Promise cannot resolve to itself"));else if(r instanceof b)this.J(r);else{e:switch(typeof r){case"object":var o=null!=r;break e;case"function":o=!0;break e;default:o=!1}o?this.G(r):this.m(r)}};b.prototype.G=function(i){var r=void 0;try{r=i.then}catch(i){this.l(i);return}"function"==typeof r?this.K(r,i):this.m(i)};b.prototype.l=function(i){this.u(2,i)};b.prototype.m=function(i){this.u(1,i)};b.prototype.u=function(r,o){if(0!=(this||i).h)throw Error("Cannot settle("+r+", "+o+"): Promise already settled in state"+(this||i).h);(this||i).h=r;(this||i).i=o;2===(this||i).h&&this.I();this.C()};b.prototype.I=function(){var r=this||i;o((function(){if(r.D()){var i=A.console;"undefined"!==typeof i&&i.error(r.i)}}),1)};b.prototype.D=function(){if((this||i).s)return!1;var r=A.CustomEvent,o=A.Event,s=A.dispatchEvent;if("undefined"===typeof s)return!0;"function"===typeof r?r=new r("unhandledrejection",{cancelable:!0}):"function"===typeof o?r=new o("unhandledrejection",{cancelable:!0}):(r=A.document.createEvent("CustomEvent"),r.initCustomEvent("unhandledrejection",!1,!0,r));r.promise=this||i;r.reason=(this||i).i;return s(r)};b.prototype.C=function(){if(null!=(this||i).g){for(var r=0;r<(this||i).g.length;++r)s.h((this||i).g[r]);(this||i).g=null}};var s=new c;b.prototype.J=function(i){var r=this.j();i.Zd(r.resolve,r.reject)};b.prototype.K=function(i,r){var o=this.j();try{i.call(r,o.resolve,o.reject)}catch(i){o.reject(i)}};b.prototype.then=function(i,r){function k(i,r){return"function"==typeof i?function(r){try{o(i(r))}catch(i){s(i)}}:r}var o,s,p=new b((function(i,r){o=i;s=r}));this.Zd(k(i,o),k(r,s));return p};b.prototype.catch=function(i){return this.then(void 0,i)};b.prototype.Zd=function(r,o){function k(){switch(p.h){case 1:r(p.i);break;case 2:o(p.i);break;default:throw Error("Unexpected state: "+p.h)}}var p=this||i;null==(this||i).g?s.h(k):(this||i).g.push(k);(this||i).s=!0};b.resolve=d;b.reject=function(i){return new b((function(r,o){o(i)}))};b.race=function(i){return new b((function(r,o){for(var s=t(i),p=s.next();!p.done;p=s.next())d(p.value).Zd(r,o)}))};b.all=function(i){var r=t(i),o=r.next();return o.done?d([]):new b((function(i,s){function n(r){return function(o){p[r]=o;y--;0==y&&i(p)}}var p=[],y=0;do{p.push(void 0),y++,d(o.value).Zd(n(p.length-1),s),o=r.next()}while(!o.done)}))};return b}));function Ha(i,r){return Object.prototype.hasOwnProperty.call(i,r)}ha("WeakMap",(function(r){function b(r){(this||i).g=(s+=Math.random()+1).toString();if(r){r=t(r);for(var o;!(o=r.next()).done;)o=o.value,this.set(o[0],o[1])}}function c(){}function d(i){var r=typeof i;return"object"===r&&null!==i||"function"===r}function e(i){if(!Ha(i,o)){var r=new c;y(i,o,{value:r})}}function f(i){var r=Object[i];r&&(Object[i]=function(i){if(i instanceof c)return i;Object.isExtensible(i)&&e(i);return r(i)})}if(function(){if(!r||!Object.seal)return!1;try{var i=Object.seal({}),o=Object.seal({}),s=new r([[i,2],[o,3]]);if(2!=s.get(i)||3!=s.get(o))return!1;s.delete(i);s.set(o,4);return!s.has(i)&&4==s.get(o)}catch(i){return!1}}())return r;var o="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var s=0;b.prototype.set=function(r,s){if(!d(r))throw Error("Invalid WeakMap key");e(r);if(!Ha(r,o))throw Error("WeakMap key fail: "+r);r[o][(this||i).g]=s;return this||i};b.prototype.get=function(r){return d(r)&&Ha(r,o)?r[o][(this||i).g]:void 0};b.prototype.has=function(r){return d(r)&&Ha(r,o)&&Ha(r[o],(this||i).g)};b.prototype.delete=function(r){return!!(d(r)&&Ha(r,o)&&Ha(r[o],(this||i).g))&&delete r[o][(this||i).g]};return b}));ha("Map",(function(r){function b(){var i={};return i.Rb=i.next=i.head=i}function c(i,r){var o=i.g;return ia((function(){if(o){for(;o.head!=i.g;)o=o.Rb;for(;o.next!=o.head;)return o=o.next,{done:!1,value:r(o)};o=null}return{done:!0,value:void 0}}))}function d(i,r){var p=r&&typeof r;"object"==p||"function"==p?o.has(r)?p=o.get(r):(p=""+ ++s,o.set(r,p)):p="p_"+r;var y=i.h[p];if(y&&Ha(i.h,p))for(i=0;i<y.length;i++){var A=y[i];if(r!==r&&A.key!==A.key||r===A.key)return{id:p,list:y,index:i,entry:A}}return{id:p,list:y,index:-1,entry:void 0}}function e(r){(this||i).h={};(this||i).g=b();(this||i).size=0;if(r){r=t(r);for(var o;!(o=r.next()).done;)o=o.value,this.set(o[0],o[1])}}if(function(){if(!r||"function"!=typeof r||!r.prototype.entries||"function"!=typeof Object.seal)return!1;try{var i=Object.seal({x:4}),o=new r(t([[i,"s"]]));if("s"!=o.get(i)||1!=o.size||o.get({x:4})||o.set({x:4},"t")!=o||2!=o.size)return!1;var s=o.entries(),p=s.next();if(p.done||p.value[0]!=i||"s"!=p.value[1])return!1;p=s.next();return!(p.done||4!=p.value[0].x||"t"!=p.value[1]||!s.next().done)}catch(i){return!1}}())return r;var o=new WeakMap;e.prototype.set=function(r,o){r=0===r?0:r;var s=d(this||i,r);s.list||(s.list=(this||i).h[s.id]=[]);s.entry?s.entry.value=o:(s.entry={next:(this||i).g,Rb:(this||i).g.Rb,head:(this||i).g,key:r,value:o},s.list.push(s.entry),(this||i).g.Rb.next=s.entry,(this||i).g.Rb=s.entry,(this||i).size++);return this||i};e.prototype.delete=function(r){r=d(this||i,r);return!(!r.entry||!r.list)&&(r.list.splice(r.index,1),r.list.length||delete(this||i).h[r.id],r.entry.Rb.next=r.entry.next,r.entry.next.Rb=r.entry.Rb,r.entry.head=null,(this||i).size--,!0)};e.prototype.clear=function(){(this||i).h={};(this||i).g=(this||i).g.Rb=b();(this||i).size=0};e.prototype.has=function(r){return!!d(this||i,r).entry};e.prototype.get=function(r){return(r=d(this||i,r).entry)&&r.value};e.prototype.entries=function(){return c(this||i,(function(i){return[i.key,i.value]}))};e.prototype.keys=function(){return c(this||i,(function(i){return i.key}))};e.prototype.values=function(){return c(this||i,(function(i){return i.value}))};e.prototype.forEach=function(r,o){for(var s,p=this.entries();!(s=p.next()).done;)s=s.value,r.call(o,s[1],s[0],this||i)};e.prototype[Symbol.iterator]=e.prototype.entries;var s=0;return e}));function Ia(i,r){i instanceof String&&(i+="");var o=0,s=!1,p={next:function(){if(!s&&o<i.length){var p=o++;return{value:r(p,i[p]),done:!1}}s=!0;return{done:!0,value:void 0}}};p[Symbol.iterator]=function(){return p};return p}ha("Array.prototype.keys",(function(r){return r||function(){return Ia(this||i,(function(i){return i}))}}));ha("Set",(function(r){function b(r){(this||i).g=new Map;if(r){r=t(r);for(var o;!(o=r.next()).done;)this.add(o.value)}(this||i).size=(this||i).g.size}if(function(){if(!r||"function"!=typeof r||!r.prototype.entries||"function"!=typeof Object.seal)return!1;try{var i=Object.seal({x:4}),o=new r(t([i]));if(!o.has(i)||1!=o.size||o.add(i)!=o||1!=o.size||o.add({x:4})!=o||2!=o.size)return!1;var s=o.entries(),p=s.next();if(p.done||p.value[0]!=i||p.value[1]!=i)return!1;p=s.next();return!p.done&&p.value[0]!=i&&4==p.value[0].x&&p.value[1]==p.value[0]&&s.next().done}catch(i){return!1}}())return r;b.prototype.add=function(r){r=0===r?0:r;(this||i).g.set(r,r);(this||i).size=(this||i).g.size;return this||i};b.prototype.delete=function(r){r=(this||i).g.delete(r);(this||i).size=(this||i).g.size;return r};b.prototype.clear=function(){(this||i).g.clear();(this||i).size=0};b.prototype.has=function(r){return(this||i).g.has(r)};b.prototype.entries=function(){return(this||i).g.entries()};b.prototype.values=function(){return(this||i).g.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(r,o){var s=this||i;(this||i).g.forEach((function(i){return r.call(o,i,i,s)}))};return b}));ha("Array.from",(function(i){return i||function(i,r,o){r=null!=r?r:function(i){return i};var s=[],p="undefined"!=typeof Symbol&&Symbol.iterator&&i[Symbol.iterator];if("function"==typeof p){i=p.call(i);for(var y=0;!(p=i.next()).done;)s.push(r.call(o,p.value,y++))}else for(p=i.length,y=0;y<p;y++)s.push(r.call(o,i[y],y));return s}}));function Ja(i,r,o){i instanceof String&&(i=String(i));for(var s=i.length,p=0;p<s;p++){var y=i[p];if(r.call(o,y,p,i))return{Xg:p,v:y}}return{Xg:-1,v:void 0}}ha("Array.prototype.findIndex",(function(r){return r||function(r,o){return Ja(this||i,r,o).Xg}}));ha("Object.is",(function(i){return i||function(i,r){return i===r?0!==i||1/i===1/r:i!==i&&r!==r}}));ha("Array.prototype.includes",(function(r){return r||function(r,o){var s=this||i;s instanceof String&&(s=String(s));var p=s.length;o=o||0;for(0>o&&(o=Math.max(o+p,0));o<p;o++){var y=s[o];if(y===r||Object.is(y,r))return!0}return!1}}));function Ka(i,r,o){if(null==i)throw new TypeError("The 'this' value for String.prototype."+o+" must not be null or undefined");if(r instanceof RegExp)throw new TypeError("First argument to String.prototype."+o+" must not be a regular expression");return i+""}ha("String.prototype.includes",(function(r){return r||function(r,o){return-1!==Ka(this||i,r,"includes").indexOf(r,o||0)}}));ha("Array.prototype.find",(function(r){return r||function(r,o){return Ja(this||i,r,o).v}}));ha("String.prototype.startsWith",(function(r){return r||function(r,o){var s=Ka(this||i,r,"startsWith"),p=s.length,y=r.length;o=Math.max(0,Math.min(o|0,s.length));for(var A=0;A<y&&o<p;)if(s[o++]!=r[A++])return!1;return A>=y}}));ha("WeakSet",(function(r){function b(r){(this||i).g=new WeakMap;if(r){r=t(r);for(var o;!(o=r.next()).done;)this.add(o.value)}}if(function(){if(!r||!Object.seal)return!1;try{var i=Object.seal({}),o=Object.seal({}),s=new r([i]);if(!s.has(i)||s.has(o))return!1;s.delete(i);s.add(o);return!s.has(i)&&s.has(o)}catch(i){return!1}}())return r;b.prototype.add=function(r){(this||i).g.set(r,!0);return this||i};b.prototype.has=function(r){return(this||i).g.has(r)};b.prototype.delete=function(r){return(this||i).g.delete(r)};return b}));var _="function"==typeof Object.assign?Object.assign:function(i,r){for(var o=1;o<arguments.length;o++){var s=arguments[o];if(s)for(var p in s)Ha(s,p)&&(i[p]=s[p])}return i};ha("Object.assign",(function(i){return i||_}));ha("Array.prototype.values",(function(r){return r||function(){return Ia(this||i,(function(i,r){return r}))}}));ha("Promise.prototype.finally",(function(i){return i||function(i){return this.then((function(r){return Promise.resolve(i()).then((function(){return r}))}),(function(r){return Promise.resolve(i()).then((function(){throw r}))}))}}));ha("Array.prototype.entries",(function(r){return r||function(){return Ia(this||i,(function(i,r){return[i,r]}))}}));ha("String.prototype.repeat",(function(r){return r||function(r){var o=Ka(this||i,null,"repeat");if(0>r||1342177279<r)throw new RangeError("Invalid count value");r|=0;for(var s="";r;)(r&1&&(s+=o),r>>>=1)&&(o+=o);return s}}));ha("Number.isNaN",(function(i){return i||function(i){return"number"===typeof i&&isNaN(i)}}));ha("Number.isFinite",(function(i){return i||function(i){return"number"===typeof i&&(!isNaN(i)&&Infinity!==i&&-Infinity!==i)}}));ha("Object.values",(function(i){return i||function(i){var r,o=[];for(r in i)Ha(i,r)&&o.push(i[r]);return o}}));ha("Math.log2",(function(i){return i||function(i){return Math.log(i)/Math.LN2}}));ha("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991}));ha("Math.trunc",(function(i){return i||function(i){i=Number(i);if(isNaN(i)||Infinity===i||-Infinity===i||0===i)return i;var r=Math.floor(Math.abs(i));return 0>i?-r:r}}));ha("Object.entries",(function(i){return i||function(i){var r,o=[];for(r in i)Ha(i,r)&&o.push([r,i[r]]);return o}}));var j=this||i||self;function L(i,r){i=i.split(".");var o=j;i[0]in o||"undefined"==typeof o.execScript||o.execScript("var "+i[0]);for(var s;i.length&&(s=i.shift());)i.length||void 0===r?o=o[s]&&o[s]!==Object.prototype[s]?o[s]:o[s]={}:o[s]=r}
/*
      @license
      Shaka Player
      Copyright 2016 Google LLC
      SPDX-License-Identifier: Apache-2.0
      */
function O(o,s){if(s)if(s instanceof Map)for(var p=t(s.keys()),y=p.next();!y.done;y=p.next())y=y.value,Object.defineProperty(this||i,y,{value:s.get(y),writable:!0,enumerable:!0});else for(p in s)Object.defineProperty(this||i,p,{value:s[p],writable:!0,enumerable:!0});(this||i).defaultPrevented=(this||i).cancelable=(this||i).bubbles=!1;(this||i).timeStamp=r.performance&&r.performance.now?r.performance.now():Date.now();(this||i).type=o;(this||i).isTrusted=!1;(this||i).target=(this||i).currentTarget=null;(this||i).g=!1}function Na(i){var r,o=new O(i.type);for(r in i)Object.defineProperty(o,r,{value:i[r],writable:!0,enumerable:!0});return o}O.prototype.preventDefault=function(){(this||i).cancelable&&((this||i).defaultPrevented=!0)};O.prototype.stopImmediatePropagation=function(){(this||i).g=!0};O.prototype.stopPropagation=function(){};L("shaka.util.FakeEvent",O);var B={Aj:"abrstatuschanged",Bj:"adaptation",Cj:"buffering",Dj:"complete",Ej:"downloadfailed",Fj:"downloadheadersreceived",Gj:"drmsessionupdate",Ij:"emsg",Yj:"prft",Error:"error",Jj:"expirationupdated",Kj:"firstquartile",Lj:"gapjumped",Oj:"keystatuschanged",Qj:"loaded",Rj:"loading",Tj:"manifestparsed",Uj:"manifestupdated",Vj:"mediaqualitychanged",Metadata:"metadata",Wj:"midpoint",Xj:"onstatechange",$j:"ratechange",bk:"segmentappended",ck:"sessiondata",dk:"stalldetected",ek:"started",fk:"statechanged",gk:"streaming",hk:"textchanged",ik:"texttrackvisibility",jk:"thirdquartile",kk:"timelineregionadded",lk:"timelineregionenter",nk:"timelineregionexit",pk:"trackschanged",rk:"unloading",vk:"variantchanged"};function Pa(){}function Qa(){}function Ra(){}function Sa(i){var r=Ga.apply(1,arguments);z.has(i)||(z.add(i),Ra.apply(Pa,w(r)))}function Va(){}function Wa(){}function Xa(){}function Ya(){}var z=new Set;r.console&&(Ra=function(){return console.warn.apply(console,w(Ga.apply(0,arguments)))},Qa=function(){console.error.apply(console,w(Ga.apply(0,arguments)))});function Za(){(this||i).g={}}p=Za.prototype;p.push=function(r,o){(this||i).g.hasOwnProperty(r)?(this||i).g[r].push(o):(this||i).g[r]=[o]};p.get=function(r){return(r=(this||i).g[r])?r.slice():null};p.remove=function(r,o){r in(this||i).g&&((this||i).g[r]=(this||i).g[r].filter((function(i){return i!=o})),0==(this||i).g[r].length&&delete(this||i).g[r])};p.forEach=function(r){for(var o in(this||i).g)r(o,(this||i).g[o])};p.size=function(){return Object.keys((this||i).g).length};p.keys=function(){return Object.keys((this||i).g)};function $a(){(this||i).Aa=new Za;(this||i).we=this||i}$a.prototype.addEventListener=function(r,o){(this||i).Aa&&(this||i).Aa.push(r,o)};$a.prototype.removeEventListener=function(r,o){(this||i).Aa&&(this||i).Aa.remove(r,o)};$a.prototype.dispatchEvent=function(r){if(!(this||i).Aa)return!0;var o=(this||i).Aa.get(r.type)||[],s=(this||i).Aa.get("All");s&&(o=o.concat(s));o=t(o);for(s=o.next();!s.done;s=o.next()){s=s.value;r.target=(this||i).we;r.currentTarget=(this||i).we;try{s.handleEvent?s.handleEvent(r):s.call(this||i,r)}catch(i){}if(r.g)break}return r.defaultPrevented};$a.prototype.release=function(){(this||i).Aa=null};function ab(i,r){var o=[];i=t(i);for(var s=i.next();!s.done;s=i.next())o.push(r(s.value));return o}function bb(i,r){i=t(i);for(var o=i.next();!o.done;o=i.next())if(!r(o.value))return!1;return!0}function cb(i,r){i=t(i);for(var o=i.next();!o.done;o=i.next())if(r(o.value))return!0;return!1}function db(i,r){var o=[];i=t(i);for(var s=i.next();!s.done;s=i.next())s=s.value,r(s)&&o.push(s);return o}
/*
      @license
      Copyright 2008 The Closure Library Authors
      SPDX-License-Identifier: Apache-2.0
      */
var G=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
                                                                                                                                       @license
                                                                                                                                       Copyright 2006 The Closure Library Authors
                                                                                                                                       SPDX-License-Identifier: Apache-2.0
                                                                                                                                       */function fb(r){var o;r instanceof fb?(gb(this||i,r.wb),(this||i).Bc=r.Bc,hb(this||i,r.Kb),jb(this||i,r.Tc),(this||i).Ya=r.Ya,kb(this||i,r.g.clone()),(this||i).pc=r.pc):r&&(o=String(r).match(G))?(gb(this||i,o[1]||"",!0),(this||i).Bc=lb(o[2]||""),hb(this||i,o[3]||"",!0),jb(this||i,o[4]),(this||i).Ya=lb(o[5]||"",!0),kb(this||i,o[6]||"",!0),(this||i).pc=lb(o[7]||"")):(this||i).g=new mb(null)}p=fb.prototype;p.wb="";p.Bc="";p.Kb="";p.Tc=null;p.Ya="";p.pc="";p.toString=function(){var r=[],o=(this||i).wb;o&&r.push(nb(o,q,!0),":");if(o=(this||i).Kb){r.push("//");var s=(this||i).Bc;s&&r.push(nb(s,q,!0),"@");r.push(encodeURIComponent(o).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));o=(this||i).Tc;null!=o&&r.push(":",String(o))}(o=(this||i).Ya)&&((this||i).Kb&&"/"!=o.charAt(0)&&r.push("/"),r.push(nb(o,"/"==o.charAt(0)?Y:H,!0)));(o=(this||i).g.toString())&&r.push("?",o);(o=(this||i).pc)&&r.push("#",nb(o,J));return r.join("")};p.resolve=function(r){var o=this.clone();"data"===o.wb&&(o=new fb);var s=!!r.wb;s?gb(o,r.wb):s=!!r.Bc;s?o.Bc=r.Bc:s=!!r.Kb;s?hb(o,r.Kb):s=null!=r.Tc;var p=r.Ya;if(s)jb(o,r.Tc);else if(s=!!r.Ya){if("/"!=p.charAt(0))if((this||i).Kb&&!(this||i).Ya)p="/"+p;else{var y=o.Ya.lastIndexOf("/");-1!=y&&(p=o.Ya.substr(0,y+1)+p)}if(".."==p||"."==p)p="";else if(-1!=p.indexOf("./")||-1!=p.indexOf("/.")){y=0==p.lastIndexOf("/",0);p=p.split("/");for(var A=[],T=0;T<p.length;){var x=p[T++];"."==x?y&&T==p.length&&A.push(""):".."==x?((1<A.length||1==A.length&&""!=A[0])&&A.pop(),y&&T==p.length&&A.push("")):(A.push(x),y=!0)}p=A.join("/")}}s?o.Ya=p:s=""!==r.g.toString();s?kb(o,r.g.clone()):s=!!r.pc;s&&(o.pc=r.pc);return o};p.clone=function(){return new fb(this||i)};function gb(i,r,o){i.wb=o?lb(r,!0):r;i.wb&&(i.wb=i.wb.replace(/:$/,""))}function hb(i,r,o){i.Kb=o?lb(r,!0):r}function jb(i,r){if(r){r=Number(r);if(isNaN(r)||0>r)throw Error("Bad port number "+r);i.Tc=r}else i.Tc=null}function kb(i,r,o){r instanceof mb?i.g=r:(o||(r=nb(r,Q)),i.g=new mb(r))}function lb(i,r){return i?r?decodeURI(i):decodeURIComponent(i):""}function nb(i,r,o){return null!=i?(i=encodeURI(i).replace(r,vb),o&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function vb(i){i=i.charCodeAt(0);return"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var q=/[#\/\?@]/g,H=/[#\?:]/g,Y=/[#\?]/g,Q=/[#\?@]/g,J=/#/g;function mb(r){(this||i).g=r||null}function wb(i){if(!i.Oa&&(i.Oa={},i.rd=0,i.g))for(var r=i.g.split("&"),o=0;o<r.length;o++){var s=r[o].indexOf("="),p=null;if(0<=s){var y=r[o].substring(0,s);p=r[o].substring(s+1)}else y=r[o];y=decodeURIComponent(y.replace(/\+/g," "));p=p||"";i.add(y,decodeURIComponent(p.replace(/\+/g," ")))}}p=mb.prototype;p.Oa=null;p.rd=null;function xb(i){wb(i);return i.rd}p.add=function(r,o){wb(this||i);(this||i).g=null;var s=(this||i).Oa.hasOwnProperty(r)?(this||i).Oa[r]:null;s||((this||i).Oa[r]=s=[]);s.push(o);(this||i).rd++;return this||i};p.set=function(r,o){wb(this||i);(this||i).g=null;(this||i).Oa.hasOwnProperty(r)?(this||i).Oa[r]=[o]:this.add(r,o);return this||i};p.get=function(r){wb(this||i);return(this||i).Oa[r]||[]};p.toString=function(){if((this||i).g)return(this||i).g;if(!(this||i).Oa)return"";var r,o=[];for(r in(this||i).Oa)for(var s=encodeURIComponent(r),p=(this||i).Oa[r],y=0;y<p.length;y++){var A=s;""!==p[y]&&(A+="="+encodeURIComponent(p[y]));o.push(A)}return(this||i).g=o.join("&")};p.clone=function(){var r=new mb;r.g=(this||i).g;if((this||i).Oa){var o,s={};for(o in(this||i).Oa)s[o]=(this||i).Oa[o].concat();r.Oa=s;r.rd=(this||i).rd}return r};function P(r,o,s){var p=Ga.apply(3,arguments);(this||i).severity=r;(this||i).category=o;(this||i).code=s;(this||i).data=p;(this||i).handled=!1;(this||i).message="Shaka Error "+(this||i).code;if($)try{throw Error((this||i).message||"Shaka Error")}catch(r){(this||i).stack=r.stack}}P.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this||i,null,"  ")};L("shaka.util.Error",P);var $=!0;P.Severity={RECOVERABLE:1,CRITICAL:2};P.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};P.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function zb(i,r){if(0==r.length)return i;if(1==i.length&&1==r.length){var o=new fb(i[0]);r=new fb(r[0]);return[o.resolve(r).toString()]}r=r.map((function(i){return new fb(i)}));o=[];i=t(i);for(var s=i.next();!s.done;s=i.next()){s=new fb(s.value);for(var p=t(r),y=p.next();!y.done;y=p.next())o.push(s.resolve(y.value).toString())}return o}function Ab(i,r){return{keySystem:i,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r||[],keyIds:new Set}}function Bb(i,r){if(1==r.length)return r[0];i=Cb(i,r);if(null!=i)return i;throw new P(2,4,4025,r)}function Cb(i,r){for(var o=t(xe[i]),s=o.next();!s.done;s=o.next()){s=s.value;for(var p=t(r),y=p.next();!y.done;y=p.next())if(y=y.value,s.test(y.trim()))return y.trim()}return i==ne?"":null}var ne="text",re={ia:"video",U:"audio",Da:ne,cf:"image",yj:"application"},xe={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Ib(){}function Jb(i,r){i=Kb(i);r=Kb(r);return i.split("-")[0]==r.split("-")[0]}function Mb(i,r){i=Kb(i);r=Kb(r);i=i.split("-");r=r.split("-");return i[0]==r[0]&&1==i.length&&2==r.length}function Nb(i,r){i=Kb(i);r=Kb(r);i=i.split("-");r=r.split("-");return 2==i.length&&2==r.length&&i[0]==r[0]}function Kb(i){i=t(i.split("-x-"));var r=i.next().value;r=void 0===r?"":r;i=i.next().value;i=void 0===i?"":i;var o=t(r.split("-"));r=o.next().value;r=void 0===r?"":r;o=o.next().value;o=void 0===o?"":o;i=i?"x-"+i:"";r=r.toLowerCase();r=Ne.get(r)||r;o=o.toUpperCase();return(o?r+"-"+o:r)+(i?"-"+i:"")}function Pb(i,r){var o=Qb(i),s=Qb(r);return i!=o&&r!=s&&o==s}function Rb(i,r){i=Kb(i);r=Kb(r);return r==i?4:Mb(r,i)?3:Nb(r,i)?2:Mb(i,r)?1:0}function Qb(i){var r=i.indexOf("-");i=0<=r?i.substring(0,r):i;i=i.toLowerCase();return Ne.get(i)||i}function Sb(i){return i.language?Kb(i.language):i.audio&&i.audio.language?Kb(i.audio.language):i.video&&i.video.language?Kb(i.video.language):"und"}function Tb(i,r){i=Kb(i);var o=new Set,s=t(r);for(r=s.next();!r.done;r=s.next())o.add(Kb(r.value));s=t(o);for(r=s.next();!r.done;r=s.next())if(r=r.value,r==i)return r;s=t(o);for(r=s.next();!r.done;r=s.next())if(r=r.value,Mb(r,i))return r;s=t(o);for(r=s.next();!r.done;r=s.next())if(r=r.value,Nb(r,i))return r;o=t(o);for(r=o.next();!r.done;r=o.next())if(r=r.value,Mb(i,r))return r;return null}L("shaka.util.LanguageUtils",Ib);Ib.findClosestLocale=Tb;Ib.getLocaleForVariant=Sb;Ib.getLocaleForText=function(i){return Kb(i.language||"und")};Ib.getBase=Qb;Ib.relatedness=Rb;Ib.areSiblings=Pb;Ib.normalize=Kb;Ib.isSiblingOf=Nb;Ib.isParentOf=Mb;Ib.areLanguageCompatible=Jb;Ib.areLocaleCompatible=function(i,r){i=Kb(i);r=Kb(r);return i==r};var Ne=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Ub(r){$a.call(this||i);(this||i).j=Kb(r);(this||i).i=new Map;(this||i).g=new Set;(this||i).h=new Map}pa(Ub,$a);p=Ub.prototype;p.release=function(){$a.prototype.release.call(this||i)};p.Ig=function(r){var o=this||i;(this||i).g.clear();r=t(r);for(var s=r.next();!s.done;s=r.next())(this||i).g.add(Kb(s.value));Vb(this||i);r=db((this||i).g,(function(i){return!o.h.has(i)}));r.length&&this.dispatchEvent(new O("unknown-locales",(new Map).set("locales",r)));r=db((this||i).g,(function(i){return o.h.has(i)}));r=(new Map).set("locales",r.length?r:[(this||i).j]);this.dispatchEvent(new O("locale-changed",r))};p.ya=function(r,o,s){r=Kb(r);void 0===s&&(s=_e);var p=(this||i).h.get(r)||new Map;o.forEach((function(i,r){p.has(r)&&s!=_e||p.set(r,i)}));(this||i).h.set(r,p);Vb(this||i);this.dispatchEvent(new O("locale-updated"));return this||i};p.ij=function(i){for(var r=t(i.keys()),o=r.next();!o.done;o=r.next())o=o.value,i.set(o,this.resolve(o))};p.resolve=function(r){var o=(this||i).i.get(r);if(o)return o;r=(new Map).set("locales",Array.from((this||i).g)).set("missing",r);this.dispatchEvent(new O("unknown-localization",r));return""};p.bi=function(){return(this||i).g};function Vb(i){for(var r=i.h,o=i.j,s=i.g,p=new Set,y={},A=t(s),T=A.next();!T.done;y={Fc:y.Fc},T=A.next()){y.Fc=T.value;p.add(y.Fc);p.add(Qb(y.Fc));T=db(r.keys(),function(i){return function(r){return Pb(r,i.Fc)}}(y));T.sort();var x=t(T);for(T=x.next();!T.done;T=x.next())p.add(T.value);T=db(r.keys(),function(i){return function(r){return Qb(r)==i.Fc}}(y));T.sort();x=t(T);for(T=x.next();!T.done;T=x.next())p.add(T.value)}p.add(o);o=[];p=t(p);for(T=p.next();!T.done;T=p.next())(T=r.get(T.value))&&o.push(T);o.reverse();i.i.clear();r=t(o);for(T=r.next();!T.done;T=r.next())T.value.forEach((function(r,o){i.i.set(o,r)}));r=i.i.keys();p=new Set;o=t(i.g);for(T=o.next();!T.done;T=o.next())T=i.h.get(T.value)||new Map,Xb(T,r,p);0<p.size&&(s=(new Map).set("locales",Array.from(s)).set("missing",Array.from(p)),i.dispatchEvent(new O("missing-localizations",s)))}function Xb(i,r,o){r=t(r);for(var s=r.next();!s.done;s=r.next())s=s.value,i.get(s)||o.add(s)}L("shaka.ui.Localization",Ub);Ub.prototype.getCurrentLocales=Ub.prototype.bi;Ub.prototype.resolve=Ub.prototype.resolve;Ub.prototype.resolveDictionary=Ub.prototype.ij;Ub.prototype.insert=Ub.prototype.ya;Ub.prototype.changeLocale=Ub.prototype.Ig;Ub.prototype.release=Ub.prototype.release;var _e=1;Ub.ConflictResolution={USE_OLD:0,USE_NEW:_e};Ub.UNKNOWN_LOCALES="unknown-locales";Ub.UNKNOWN_LOCALIZATION="unknown-localization";Ub.MISSING_LOCALIZATIONS="missing-localizations";Ub.LOCALE_CHANGED="locale-changed";Ub.LOCALE_UPDATED="locale-updated";function Yb(r){(this||i).g=Math.exp(Math.log(.5)/r);(this||i).i=(this||i).h=0}Yb.prototype.sample=function(r,o){var s=Math.pow((this||i).g,r);o=o*(1-s)+s*(this||i).h;isNaN(o)||((this||i).h=o,(this||i).i+=r)};function Zb(i){return i.h/(1-Math.pow(i.g,i.i))}function $b(){(this||i).h=new Yb(2);(this||i).j=new Yb(5);(this||i).g=0;(this||i).i=128e3;(this||i).l=16e3}$b.prototype.configure=function(r){(this||i).i=r.minTotalBytes;(this||i).l=r.minBytes;(this||i).h.g=Math.exp(Math.log(.5)/r.fastHalfLife);(this||i).j.g=Math.exp(Math.log(.5)/r.slowHalfLife)};$b.prototype.sample=function(r,o){if(!(o<(this||i).l)){var s=8e3*o/r;r/=1e3;(this||i).g+=o;(this||i).h.sample(r,s);(this||i).j.sample(r,s)}};$b.prototype.getBandwidthEstimate=function(r){return(this||i).g<(this||i).i?r:Math.min(Zb((this||i).h),Zb((this||i).j))};function ac(i){if(Ke.has(i))return Ke.get(i);if(r.ManagedMediaSource){var o=ManagedMediaSource.isTypeSupported(i);Ke.set(i,o);return o}return!!r.MediaSource&&(o=MediaSource.isTypeSupported(i),Ke.set(i,o),o)}function fc(){return!!r.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var Ke=new Map;function gc(){}gc.prototype.extract=function(){};gc.prototype.decode=function(){return[]};gc.prototype.clear=function(){};gc.prototype.getStreams=function(){return[]};function hc(){}hc.prototype.init=function(){};hc.prototype.parse=function(){return[]};function ic(){}function jc(i,r){if(!i&&!r)return!0;if(!i||!r||i.byteLength!=r.byteLength)return!1;if(kc(i)==kc(r)&&(i.byteOffset||0)==(r.byteOffset||0))return!0;var o=lc(i);r=lc(r);for(var s=0;s<i.byteLength;s++)if(o[s]!=r[s])return!1;return!0}function kc(i){return i instanceof ArrayBuffer?i:i.buffer}function mc(i){return i instanceof ArrayBuffer?i:0==i.byteOffset&&i.byteLength==i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer}function lc(i,r,o){o=void 0===o?Infinity:o;return nc(i,void 0===r?0:r,o,Uint8Array)}function oc(i,r,o){o=void 0===o?Infinity:o;return nc(i,void 0===r?0:r,o,Uint16Array)}function pc(i,r,o){o=void 0===o?Infinity:o;return nc(i,void 0===r?0:r,o,DataView)}function nc(i,r,o,s){var p=kc(i),y=1;"BYTES_PER_ELEMENT"in s&&(y=s.BYTES_PER_ELEMENT);var A=((i.byteOffset||0)+i.byteLength)/y;i=Math.floor(Math.max(0,Math.min(((i.byteOffset||0)+r)/y,A)));return new s(p,i,Math.floor(Math.min(i+Math.max(o,0),A))-i)}L("shaka.util.BufferUtils",ic);ic.toDataView=pc;ic.toUint16=oc;ic.toUint8=lc;ic.toArrayBuffer=mc;ic.equal=jc;function qc(){}qc.prototype.init=function(){};qc.prototype.i=function(){};qc.prototype.h=function(){};qc.prototype.j=function(){};L("shaka.media.IClosedCaptionParser",qc);function rc(r){(this||i).l=new hc;(r=qe[r.toLowerCase()])&&((this||i).l=r());(this||i).g=new gc;(r=Ze)&&((this||i).g=r())}rc.prototype.init=function(r){(this||i).l.init(r)};rc.prototype.i=function(r){r=(this||i).l.parse(r);r=t(r);for(var o=r.next();!o.done;o=r.next()){o=o.value;var s=lc(o.packet);0<s.length&&(this||i).g.extract(s,o.pts)}return(this||i).g.decode()};rc.prototype.h=function(){(this||i).g.clear()};rc.prototype.j=function(){return(this||i).g.getStreams()};L("shaka.media.ClosedCaptionParser",rc);rc.findDecoder=function(){return Ze};rc.unregisterDecoder=function(){Ze=null};rc.registerDecoder=function(i){Ze=i};rc.findParser=function(i){return qe[i]};rc.unregisterParser=function(i){delete qe[i]};rc.registerParser=function(i,r){qe[i]=r};var qe={},Ze=null;function uc(i,r){return!("number"!==typeof i||"number"!==typeof r||!isNaN(i)||!isNaN(r))||i===r}function vc(i,r){r=i.indexOf(r);-1<r&&i.splice(r,1)}function wc(i,r,o){o||(o=uc);if(i.length!=r.length)return!1;r=r.slice();var s={};i=t(i);for(var p=i.next();!p.done;s={Ue:s.Ue},p=i.next()){s.Ue=p.value;p=r.findIndex(function(i){return function(r){return o(i.Ue,r)}}(s));if(-1==p)return!1;r[p]=r[r.length-1];r.pop()}return 0==r.length}function xc(i,r,o){o||(o=uc);if(i.length!=r.length)return!1;for(var s=0;s<i.length;s++)if(!o(i[s],r[s]))return!1;return!0}function yc(r,o,s){(this||i).startTime=r;(this||i).endTime=o;(this||i).payload=s;(this||i).region=new zc;(this||i).position=null;(this||i).positionAlign=rt;(this||i).size=0;(this||i).textAlign=st;(this||i).direction=ln;(this||i).writingMode=Ln;(this||i).lineInterpretation=_n;(this||i).line=null;(this||i).lineHeight="";(this||i).lineAlign=Kn;(this||i).displayAlign=Bt;(this||i).fontSize=(this||i).border=(this||i).backgroundImage=(this||i).backgroundColor=(this||i).color="";(this||i).fontWeight=Li;(this||i).fontStyle=Pi;(this||i).linePadding=(this||i).letterSpacing=(this||i).fontFamily="";(this||i).opacity=1;(this||i).textCombineUpright="";(this||i).textDecoration=[];(this||i).textStrokeWidth=(this||i).textStrokeColor=(this||i).textShadow="";(this||i).wrapLine=!0;(this||i).id="";(this||i).nestedCues=[];(this||i).lineBreak=(this||i).isContainer=!1;(this||i).rubyTag=null;(this||i).cellResolution={mc:32,rows:15}}function Kc(i,r){i=new yc(i,r,"");i.lineBreak=!0;return i}yc.prototype.clone=function(){var r,o=new yc(0,0,"");for(r in this||i)o[r]=(this||i)[r],o[r]&&o[r].constructor==Array&&(o[r]=o[r].slice());return o};function Mc(i,r){if(i.startTime!=r.startTime||i.endTime!=r.endTime||i.payload!=r.payload)return!1;for(var o in i)if("startTime"!=o&&"endTime"!=o&&"payload"!=o)if("nestedCues"==o){if(!xc(i.nestedCues,r.nestedCues,Mc))return!1}else if("region"==o||"cellResolution"==o){for(var s in i[o])if(i[o][s]!=r[o][s])return!1}else if(Array.isArray(i[o])){if(!xc(i[o],r[o]))return!1}else if(i[o]!=r[o])return!1;return!0}L("shaka.text.Cue",yc);yc.equal=Mc;yc.prototype.clone=yc.prototype.clone;var rt="auto";yc.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:rt};var st="center",_t={LEFT:"left",RIGHT:"right",CENTER:st,START:"start",END:"end"};yc.textAlign=_t;var Bt="after",Ht={BEFORE:"before",CENTER:"center",AFTER:Bt};yc.displayAlign=Ht;var ln="ltr";yc.direction={HORIZONTAL_LEFT_TO_RIGHT:ln,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ln="horizontal-tb";yc.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ln,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var _n=0;yc.lineInterpretation={LINE_NUMBER:_n,PERCENTAGE:1};var Kn="start",Jn={CENTER:"center",START:Kn,END:"end"};yc.lineAlign=Jn;var Si={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};yc.defaultTextColor=Si;var Ii={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};yc.defaultTextBackgroundColor=Ii;var Li=400;yc.fontWeight={NORMAL:Li,BOLD:700};var Pi="normal",_i={NORMAL:Pi,ITALIC:"italic",OBLIQUE:"oblique"};yc.fontStyle=_i;yc.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function zc(){(this||i).id="";(this||i).regionAnchorY=(this||i).regionAnchorX=(this||i).viewportAnchorY=(this||i).viewportAnchorX=0;(this||i).height=(this||i).width=100;(this||i).viewportAnchorUnits=(this||i).widthUnits=(this||i).heightUnits=ji;(this||i).scroll=Bi}L("shaka.text.CueRegion",zc);var ji=1;zc.units={PX:0,PERCENTAGE:ji,LINES:2};var Bi="";zc.scrollMode={NONE:Bi,UP:"up"};function Vc(){}Vc.prototype.destroy=function(){};function Wc(i,r,o){Ki[i.toLowerCase().split(";")[0]+"-"+o]={priority:o,Ge:r}}function Yc(i,r){for(var o=i.toLowerCase().split(";")[0],s=t([hr,Ji,Hi,Gi]),p=s.next();!p.done;p=s.next())if(p=Ki[o+"-"+p.value]){var y=p.Ge(),A=y.isSupported(i,r);y.destroy();if(A)return p.Ge}return null}L("shaka.transmuxer.TransmuxerEngine",Vc);Vc.findTransmuxer=Yc;Vc.unregisterTransmuxer=function(i,r){delete Ki[i.toLowerCase().split(";")[0]+"-"+r]};Vc.registerTransmuxer=Wc;Vc.prototype.destroy=Vc.prototype.destroy;var Ki={},Gi=1,Hi=2,Ji=3,hr=4;Vc.PluginPriority={FALLBACK:Gi,PREFERRED_SECONDARY:Hi,PREFERRED:Ji,APPLICATION:hr};function cd(){}function dd(i,r){var o=i;r&&!_r.includes(i)&&(o+='; codecs="'+r+'"');return o}function fd(i,r){r&&(i+='; codecs="'+r+'"');return i}function gd(i,r,o){var s=dd(i,r);r=fd(i,r);Yc(r)?(i=Yc(r))?(i=i(),o=i.convertCodecs(o,r),i.destroy()):o=r:o="video/mp2t"!=i&&"audio"==o?s.replace("video","audio"):s;return o}function hd(i){var r=kd(i);i=r[0];r=r[1].toLowerCase();switch(!0){case"mp4a"===i&&"69"===r:case"mp4a"===i&&"6b"===r:case"mp4a"===i&&"40.34"===r:return"mp3";case"mp4a"===i&&"66"===r:case"mp4a"===i&&"67"===r:case"mp4a"===i&&"68"===r:case"mp4a"===i&&"40.2"===r:case"mp4a"===i&&"40.02"===r:case"mp4a"===i&&"40.5"===r:case"mp4a"===i&&"40.05"===r:case"mp4a"===i&&"40.29"===r:case"mp4a"===i&&"40.42"===r:return"aac";case"mp4a"===i&&"a5"===r:return"ac-3";case"mp4a"===i&&"a6"===r:return"ec-3";case"mp4a"===i&&"b2"===r:return"dtsx";case"mp4a"===i&&"a9"===r:return"dtsc";case"avc1"===i:case"avc3"===i:return"avc";case"hvc1"===i:case"hev1"===i:return"hevc";case"dvh1"===i:case"dvhe"===i:return"dovi"}return i}function ld(i){var r=[];i=t(i.split(","));for(var o=i.next();!o.done;o=i.next())o=kd(o.value),r.push(o[0]);return r.sort().join(",")}function md(i){return i.split(";")[0]}function nd(i){i=i.split(/ *; */);i.shift();return(i=i.find((function(i){return i.startsWith("codecs=")})))?i.split("=")[1].replace(/^"|"$/g,""):""}function kd(i){i=i.split(".");var r=i[0];i.shift();return[r,i.join(".")]}L("shaka.util.MimeUtils",cd);cd.getFullTypeWithAllCodecs=fd;cd.getFullType=dd;(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var _r=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function od(r){(this||i).i=null;(this||i).j=r;(this||i).C=!1;(this||i).l=(this||i).u=0;(this||i).m=Infinity;(this||i).h=(this||i).g=null;(this||i).D="";(this||i).s=new Map}function pd(i){return!!Xr[i]||("application/cea-608"==i||"application/cea-708"==i)&&!!Ze}od.prototype.destroy=function(){(this||i).j=(this||i).i=null;(this||i).s.clear();return Promise.resolve()};function rd(i,r,o,s,p){var y,A,T,x;return K((function(I){if(1==I.g)return D(I,Promise.resolve(),2);if(!i.i||!i.j)return I.return();if(null==o||null==s)return i.i.parseInit(lc(r)),I.return();y=i.C?o:i.u;A={periodStart:i.u,segmentStart:o,segmentEnd:s,vttOffset:y};T=i.i.parseMedia(lc(r),A,p);x=T.filter((function(r){return r.startTime>=i.l&&r.startTime<i.m}));i.j.append(x);null==i.g&&(i.g=Math.max(o,i.l));i.h=Math.min(s,i.m);F(I)}))}od.prototype.remove=function(r,o){var s=this||i;return K((function(i){if(1==i.g)return D(i,Promise.resolve(),2);!s.j||!s.j.remove(r,o)||null==s.g||o<=s.g||r>=s.h||(r<=s.g&&o>=s.h?s.g=s.h=null:r<=s.g&&o<s.h?s.g=o:r>s.g&&o>=s.h&&(s.h=r));F(i)}))};function sd(i,r,o){i.l=r;i.m=o}function td(i,r,o){i.D=r;if(r=i.s.get(r))for(var s=t(r.keys()),p=s.next();!p.done;p=s.next())(p=r.get(p.value).filter((function(i){return i.endTime<=o})))&&i.j.append(p)}function ud(i,r,o){r.startTime+=o;r.endTime+=o;r=t(r.nestedCues);for(var s=r.next();!s.done;s=r.next())ud(i,s.value,o)}function wd(i,r,o,s,p){var y=o+" "+s,A=new Map;r=t(r);for(var T=r.next();!T.done;T=r.next()){var x=T.value;T=x.stream;x=x.cue;A.has(T)||A.set(T,new Map);A.get(T).has(y)||A.get(T).set(y,[]);ud(i,x,p);x.startTime>=i.l&&x.startTime<i.m&&(A.get(T).get(y).push(x),T==i.D&&i.j.append([x]))}p=t(A.keys());for(y=p.next();!y.done;y=p.next())for(y=y.value,i.s.has(y)||i.s.set(y,new Map),r=t(A.get(y).keys()),T=r.next();!T.done;T=r.next())T=T.value,x=A.get(y).get(T),i.s.get(y).set(T,x);i.g=null==i.g?Math.max(o,i.l):Math.min(i.g,Math.max(o,i.l));i.h=Math.max(i.h,Math.min(s,i.m))}L("shaka.text.TextEngine",od);od.prototype.destroy=od.prototype.destroy;od.findParser=function(i){return Xr[i]};od.unregisterParser=function(i){delete Xr[i]};od.registerParser=function(i,r){Xr[i]=r};var Xr={};function xd(i,r){return i.concat(r)}function yd(){}function zd(i){return null!=i}function Ad(i){function b(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||i.buffer&&i.buffer.constructor==ArrayBuffer)return i;if(r.has(i))return null;var o=i.constructor==Array;if(i.constructor!=Object&&!o)return null;r.add(i);var s,p=o?[]:{};for(s in i)p[s]=b(i[s]);o&&(p.length=i.length);return p}}var r=new WeakSet;return b(i)}function Bd(i){var r,o={};for(r in i)o[r]=i[r];return o}function Cd(r){(this||i).h=r;(this||i).g=null}Cd.prototype.S=function(o){var s=this||i;this.stop();var p=!0,y=null;(this||i).g=function(){r.clearTimeout(y);p=!1};y=r.setTimeout((function(){p&&s.h()}),1e3*o);return this||i};Cd.prototype.stop=function(){(this||i).g&&(this.g(),(this||i).g=null)};function Dd(r){(this||i).h=r;(this||i).g=null}Dd.prototype.Qa=function(){this.stop();this.h();return this||i};Dd.prototype.S=function(r){var o=this||i;this.stop();(this||i).g=new Cd((function(){o.h()})).S(r);return this||i};Dd.prototype.za=function(r){var o=this||i;this.stop();(this||i).g=new Cd((function(){o.g.S(r);o.h()})).S(r);return this||i};Dd.prototype.stop=function(){(this||i).g&&((this||i).g.stop(),(this||i).g=null)};L("shaka.util.Timer",Dd);Dd.prototype.stop=Dd.prototype.stop;Dd.prototype.tickEvery=Dd.prototype.za;Dd.prototype.tickAfter=Dd.prototype.S;Dd.prototype.tickNow=Dd.prototype.Qa;function Ed(){var i=r.ManagedMediaSource||r.MediaSource;return!(!i||!i.isTypeSupported)}function Fd(i){return""!=Gd().canPlayType(i)}function Hd(){return!!navigator.userAgent.match(/Edge?\//)}function Id(){return Jd("Xbox One")}function Kd(){return Jd("Tizen")}function Ld(){return Jd("Tizen 3")}function Md(){return Jd("Tizen 2")}function Nd(){return Jd("Web0S")&&Jd("Chrome/38.0.2125.122 Safari/537.36")}function Od(){return Jd("CrKey")}function Pd(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Kd()&&!Jd("PC=EOS")&&!Jd("PC=APL")&&!Jd("VirginMedia")&&!Jd("SOPOpenBrowser")&&!Qd()&&!Jd("AFT")&&!Jd("WPE")}function Qd(){return Jd("PlayStation 4")}function Rd(){if(!Pd())return null;var i=navigator.userAgent.match(/Version\/(\d+)/);return i||(i=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(i[1],10):null}function Jd(i){return(navigator.userAgent||"").includes(i)}function Gd(){if(na)return na;Yr||(Yr=new Dd((function(){na=null})));(na=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(na=document.createElement("video"));Yr.S(1);return na}var Yr=null,na=null;function Yd(){}function Zd(i,r,o,s){var p=i.variants;(r.length||o.length)&&(p=$d(p,r,o));if(s.length){r=new Za;o=t(p);for(p=o.next();!p.done;p=o.next())p=p.value,r.push(String(p.video.width||0),p);var y=[];r.forEach((function(i,r){i=0;var o=[],p={};r=t(r);for(var A=r.next();!A.done;p={md:p.md},A=r.next())p.md=A.value,A=s.filter(function(i){return function(r){return i.md.decodingInfos[0][r]}}(p)).length,A>i?(i=A,o=[p.md]):A==i&&o.push(p.md);y.push.apply(y,w(o))}));p=y}o=new Set;r=new Set;var A=t(p);for(p=A.next();!p.done;p=A.next())p=p.value,p.audio&&o.add(p.audio),p.video&&r.add(p.video);o=Array.from(o).sort((function(i,r){return i.bandwidth-r.bandwidth}));var T=[];p=new Map;o=t(o);for(A=o.next();!A.done;A=o.next()){A=A.value;var x=A.language+(A.channelsCount||0)+(A.audioSamplingRate||0)+A.roles.join(",")+A.label+A.groupId+A.fastSwitching,I=p.get(x)||[];if(I.length){var C=I[I.length-1],M=hd(C.codecs),N=hd(A.codecs);M==N&&A.bandwidth>C.bandwidth&&(I.push(A),T.push(A.id))}else I.push(A),T.push(A.id);p.set(x,I)}o=Array.from(r).sort((function(i,r){return i.bandwidth&&r.bandwidth?i.bandwidth-r.bandwidth:i.width-r.width}));r=fc();var _=[];p=new Map;o=t(o);for(A=o.next();!A.done;A=o.next()){A=A.value;x=Math.round(A.frameRate||0)+(A.hdr||"")+A.fastSwitching;I=p.get(x)||[];if(I.length){C=I[I.length-1];if(!r&&(M=hd(C.codecs),N=hd(A.codecs),M!==N))continue;A.width>C.width||A.height>C.height?(I.push(A),_.push(A.id)):A.width==C.width&&A.height==C.height&&(M=hd(C.codecs),N=hd(A.codecs),M==N&&A.bandwidth>C.bandwidth&&(I.push(A),_.push(A.id)))}else I.push(A),_.push(A.id);p.set(x,I)}i.variants=i.variants.filter((function(i){var r=i.audio;i=i.video;return!(r&&!T.includes(r.id)||i&&!_.includes(i.id))}))}function $d(i,r,o){var s={};r=t(r);for(var p=r.next();!p.done;s={bf:s.bf},p=r.next())if(s.bf=p.value,p=i.filter(function(i){return function(r){return r.video&&r.video.codecs.startsWith(i.bf)}}(s)),p.length){i=p;break}s={};o=t(o);for(r=o.next();!r.done;s={Se:s.Se},r=o.next())if(s.Se=r.value,r=i.filter(function(i){return function(r){return r.audio&&r.audio.codecs.startsWith(i.Se)}}(s)),r.length){i=r;break}return i}function ae(i,r,o){i.variants=i.variants.filter((function(i){return be(i,r,o)}))}function be(i,r,o){function d(i,r,o){return i>=r&&i<=o}var s=i.video;return!(s&&s.width&&s.height&&(!d(s.width,r.minWidth,Math.min(r.maxWidth,o.width))||!d(s.height,r.minHeight,Math.min(r.maxHeight,o.height))||!d(s.width*s.height,r.minPixels,r.maxPixels))||i&&i.video&&i.video.frameRate&&!d(i.video.frameRate,r.minFrameRate,r.maxFrameRate)||!d(i.bandwidth,r.minBandwidth,r.maxBandwidth))}function ce(i,r,o){var s=!1;i=t(i);for(var p=i.next();!p.done;p=i.next()){p=p.value;var y=p.allowedByApplication;p.allowedByApplication=be(p,r,o);y!=p.allowedByApplication&&(s=!0)}return s}function de(i,r){return K((function(o){if(1==o.g)return D(o,ee(i,r,0<r.offlineSessionIds.length),2);fe(r);return D(o,ge(r),0)}))}function ee(i,r,o){var s,p,y,A,T;return K((function(x){if(1==x.g)return D(x,he(r.variants,o,!1,[]),2);s=null;i&&(p=i.g)&&(s=p.keySystem);y=re;A=Id();T=Jd("Firefox")&&Jd("Android");r.variants=r.variants.filter((function(i){var r=i.video,o=r&&r.width||0,p=r&&r.height||0;if(A&&r&&(1920<o||1080<p)&&(r.codecs.includes("avc1.")||r.codecs.includes("avc3.")))return Wa(ie(i)),!1;if(r){o=je(r.codecs);if(r.codecs.includes(",")){p=r.codecs.split(",");o=Bb(y.ia,p);o=je(o);p=Bb(y.U,p);p=ke(p);var x=gd(r.mimeType,p,y.U);if(!ac(x))return!1;o=[o,p].join()}p=gd(r.mimeType,o,y.ia);if(!ac(p))return!1;r.codecs=o}r=i.audio;if(T&&r&&r.encrypted&&r.codecs.toLowerCase().includes("opus"))return Wa(ie(i)),!1;if(r){o=ke(r.codecs);p=gd(r.mimeType,o,y.U);if(!ac(p))return!1;r.codecs=o}(r=i.decodingInfos.some((function(i){return!(!i.supported||s&&(i=i.keySystemAccess)&&i.keySystem!=s)})))||Wa(ie(i));return r}));F(x)}))}function le(i){var r=[];for(o in i)r.push(o);r.sort();var o=[];r=t(r);for(var s=r.next();!s.done;s=r.next()){var p=s.value;s=JSON.stringify(p);p=i[p];p instanceof Object?(p=le(p),o.push(s+":"+p)):(p=JSON.stringify(p),o.push(s+":"+p))}return"{"+o.join(",")+"}"}function me(i,r){var o,s,p,y,A,T,x;return K((function(I){if(1==I.g)return o=le(r),s=aa,s[o]?(i.decodingInfos.push(s[o]),I.F(0)):D(I,oe(r),3);if((p=I.h)&&p.length){y=null;A=t(p);for(T=A.next();!T.done;T=A.next())x=T.value,y?(y.supported=y.supported&&x.supported,y.powerEfficient=y.powerEfficient&&x.powerEfficient,y.smooth=y.smooth&&x.smooth,x.keySystemAccess||(y.keySystemAccess=null)):y=x;y&&(s[o]=y,i.decodingInfos.push(y))}F(I)}))}function oe(i){var r=[""];i.video&&(r=nd(i.video.contentType).split(","));var o=[""];i.audio&&(o=nd(i.audio.contentType).split(","));var s=[];r=t(r);for(var p=r.next();!p.done;p=r.next()){p=p.value;for(var y={},A=t(o),T=A.next();!T.done;y={ic:y.ic},T=A.next())T=T.value,y.ic=Ad(i),i.video&&(y.ic.video.contentType=dd(md(y.ic.video.contentType),p)),i.audio&&(y.ic.audio.contentType=dd(md(y.ic.audio.contentType),T)),s.push(new Promise(function(i){return function(r,o){navigator.mediaCapabilities.decodingInfo(i.ic).then((function(i){r(i)})).catch(o)}}(y)))}return Promise.all(s).catch((function(){JSON.stringify(i);return null}))}function he(i,r,o,s){var p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H;return K((function(Y){switch(Y.g){case 1:if(i.some((function(i){return i.decodingInfos.length})))return Y.return();p={};y=t(s);A=y.next();case 2:if(A.done){Y.F(4);break}p.We=A.value;T=!1;x=t(i);I=x.next();case 5:if(I.done){Y.F(7);break}C=I.value;M=pe(C,r,o).filter(function(i){return function(r){return(r.keySystemConfiguration&&r.keySystemConfiguration.keySystem)===i.We}}(p));N=t(M);_=N.next();case 8:if(_.done){Y.F(10);break}j=_.value;return D(Y,me(C,j),9);case 9:_=N.next();Y.F(8);break;case 10:C.decodingInfos.length&&(T=!0);I=x.next();Y.F(5);break;case 7:if(T)return Y.return();p={We:p.We};A=y.next();Y.F(2);break;case 4:B=t(i),I=B.next();case 12:if(I.done){Y.F(0);break}z=I.value;G=pe(z,r,o).filter((function(i){i=i.keySystemConfiguration&&i.keySystemConfiguration.keySystem;return!i||!s.includes(i)}));q=t(G);_=q.next();case 15:if(_.done){I=B.next();Y.F(12);break}H=_.value;return D(Y,me(z,H),16);case 16:_=q.next(),Y.F(15)}}))}function pe(i,r,o){var s=i.audio,p=i.video;o={type:o?"file":"media-source"};if(p){var y=p.codecs;if(p.codecs.includes(",")){var A=p.codecs.split(",");y=Bb("video",A);y=je(y);A=Bb("audio",A);A=ke(A);A=gd(p.mimeType,A,"audio");o.audio={contentType:A,channels:2,bitrate:i.bandwidth||1,samplerate:1,spatialRendering:!1}}y=je(y);y=gd(p.mimeType,y,"video");o.video={contentType:y,width:p.width||64,height:p.height||64,bitrate:p.bandwidth||i.bandwidth||1,framerate:p.frameRate||1};if(p.hdr)switch(p.hdr){case"SDR":o.video.transferFunction="srgb";break;case"PQ":o.video.transferFunction="pq";break;case"HLG":o.video.transferFunction="hlg"}}s&&(y=ke(s.codecs),y=gd(s.mimeType,y,"audio"),o.audio={contentType:y,channels:s.channelsCount||2,bitrate:s.bandwidth||i.bandwidth||1,samplerate:s.audioSamplingRate||1,spatialRendering:s.spatialAudio});A=(i.video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]);if(!A.length)return[o];i=[];y=new Map;A=t(A);for(var T=A.next();!T.done;T=A.next()){var x=T.value;y.get(x.keySystem)||y.set(x.keySystem,[]);y.get(x.keySystem).push(x)}A=r?"required":"optional";r=r?["persistent-license"]:["temporary"];x=t(y.keys());for(var I=x.next();!I.done;I=x.next()){var C=I.value;I=Object.assign({},o);var M=y.get(C);C={keySystem:C,initDataType:"cenc",persistentState:A,distinctiveIdentifier:"optional",sessionTypes:r};M=t(M);for(T=M.next();!T.done;T=M.next()){T=T.value;if(T.initData&&T.initData.length){for(var N=new Set,_=t(T.initData),j=_.next();!j.done;j=_.next())N.add(j.value.initDataType);C.initDataType=T.initData[0].initDataType}T.distinctiveIdentifierRequired&&(C.distinctiveIdentifier="required");T.persistentStateRequired&&(C.persistentState="required");T.sessionType&&(C.sessionTypes=[T.sessionType]);s&&(""!=T.audioRobustness?C.audio?C.audio.robustness=C.audio.robustness||T.audioRobustness:C.audio={robustness:T.audioRobustness}:C.audio||(C.audio={}));p&&(""!=T.videoRobustness?C.video?C.video.robustness=C.video.robustness||T.videoRobustness:C.video={robustness:T.videoRobustness}:C.video||(C.video={}))}I.keySystemConfiguration=C;i.push(I)}return i}function ke(i){return"fLaC"!==i||Rd()?"Opus"===i?"opus":i:"flac"}function je(i){if(i.includes("avc1")){var r=i.split(".");if(3==r.length)return i=r.shift()+".",i+=parseInt(r.shift(),10).toString(16),i+("000"+parseInt(r.shift(),10).toString(16)).slice(-4)}else if("vp9"==i)return"vp09.00.41.08";return i}function fe(i){i.textStreams=i.textStreams.filter((function(i){i=dd(i.mimeType,i.codecs);return pd(i)}))}function ge(i){var r,o,s,p,y,A,T;return K((function(x){switch(x.g){case 1:r=[],o=t(i.imageStreams),s=o.next();case 2:if(s.done){x.F(4);break}p=s.value;y=p.mimeType;"application/mp4"==y&&"mjpg"==p.codecs&&(y="image/jpg");if(la.has(y)){x.F(5);break}A=ca.get(y);if(!A){la.set(y,!1);x.F(5);break}return D(x,se(A),7);case 7:T=x.h,la.set(y,T);case 5:la.get(y)&&r.push(p);s=o.next();x.F(2);break;case 4:i.imageStreams=r,F(x)}}))}function se(i){return new Promise((function(r){var o=new Image;o.src=i;"decode"in o?o.decode().then((function(){r(!0)})).catch((function(){r(!1)})):o.onload=o.onerror=function(){r(2===o.height)}}))}function te(i){var r=i.audio,o=i.video,s=r?r.mimeType:null,p=o?o.mimeType:null,y=r?r.codecs:null,A=o?o.codecs:null,T=[];A&&T.push(A);y&&T.push(y);var x=[];o&&x.push(o.mimeType);r&&x.push(r.mimeType);x=x[0]||null;var I=[];r&&I.push(r.kind);o&&I.push(o.kind);I=I[0]||null;var C=new Set;if(r)for(var M=t(r.roles),N=M.next();!N.done;N=M.next())C.add(N.value);if(o)for(M=t(o.roles),N=M.next();!N.done;N=M.next())C.add(N.value);i={id:i.id,active:!1,type:"variant",bandwidth:i.bandwidth,language:i.language,label:null,kind:I,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:x,audioMimeType:s,videoMimeType:p,codecs:T.join(", "),audioCodec:y,videoCodec:A,primary:i.primary,roles:Array.from(C),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null};o&&(i.videoId=o.id,i.originalVideoId=o.originalId,i.width=o.width||null,i.height=o.height||null,i.frameRate=o.frameRate||null,i.pixelAspectRatio=o.pixelAspectRatio||null,i.videoBandwidth=o.bandwidth||null,i.hdr=o.hdr||null,i.videoLayout=o.videoLayout||null);r&&(i.audioId=r.id,i.originalAudioId=r.originalId,i.channelsCount=r.channelsCount,i.audioSamplingRate=r.audioSamplingRate,i.audioBandwidth=r.bandwidth||null,i.spatialAudio=r.spatialAudio,i.label=r.label,i.audioRoles=r.roles,i.accessibilityPurpose=r.accessibilityPurpose,i.originalLanguage=r.originalLanguage);return i}function ue(i){return{id:i.id,active:!1,type:ne,bandwidth:0,language:i.language,label:i.label,kind:i.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:i.mimeType,audioMimeType:null,videoMimeType:null,codecs:i.codecs||null,audioCodec:null,videoCodec:null,primary:i.primary,roles:i.roles,audioRoles:null,forced:i.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:i.originalId,originalImageId:null,accessibilityPurpose:i.accessibilityPurpose,originalLanguage:i.originalLanguage}}function ve(i){var r=i.width||null,o=i.height||null,s=null;i.segmentIndex&&(s=i.segmentIndex.get(0));var p=i.tilesLayout;s&&(p=s.tilesLayout||p);p&&null!=r&&(r/=Number(p.split("x")[0]));p&&null!=o&&(o/=Number(p.split("x")[1]));return{id:i.id,active:!1,type:"image",bandwidth:i.bandwidth||0,language:"",label:null,kind:null,width:r,height:o,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:i.mimeType,audioMimeType:null,videoMimeType:null,codecs:i.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:p||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:i.originalId,accessibilityPurpose:null,originalLanguage:null}}function we(i){i.__shaka_id||(i.__shaka_id=oa++);return i.__shaka_id}function ye(i){var r=ze(i);r.active="disabled"!=i.mode;r.type="text";r.originalTextId=i.id;"captions"==i.kind&&(r.mimeType="application/cea-608");"subtitles"==i.kind&&(r.mimeType="text/vtt");i.kind&&(r.roles=[i.kind]);"forced"==i.kind&&(r.forced=!0);return r}function Ae(i){var r=ze(i);r.active=i.enabled;r.type="variant";r.originalAudioId=i.id;"main"==i.kind&&(r.primary=!0);i.kind&&(r.roles=[i.kind],r.audioRoles=[i.kind],r.label=i.label);return r}function ze(i){var r=i.language;return{id:we(i),active:!1,type:"",bandwidth:0,language:Kb(r||"und"),label:i.label,kind:i.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:r}}function Be(i){return i.allowedByApplication&&i.allowedByKeySystem&&0==i.disabledUntilTime}function Ce(i){return i.filter((function(i){return Be(i)}))}function De(i,r,o,s){var p=i,y=i.filter((function(i){return i.primary}));y.length&&(p=y);var A=p.length?p[0].language:"";p=p.filter((function(i){return i.language==A}));if(r){var T=Tb(Kb(r),i.map((function(i){return i.language})));T&&(p=i.filter((function(i){return Kb(i.language)==T})))}p=p.filter((function(i){return i.forced==s}));if(o){if(i=Ee(p,o),i.length)return i}else if(i=p.filter((function(i){return 0==i.roles.length})),i.length)return i;i=p.map((function(i){return i.roles})).reduce(xd,[]);return i.length?Ee(p,i[0]):p}function Ee(i,r){return i.filter((function(i){return i.roles.includes(r)}))}function ie(i){var r=[];i.audio&&r.push(Fe(i.audio));i.video&&r.push(Fe(i.video));return r.join(", ")}function Fe(i){return"audio"==i.type?"type=audio codecs="+i.codecs+" bandwidth="+i.bandwidth+" channelsCount="+i.channelsCount+" audioSamplingRate="+i.audioSamplingRate:"video"==i.type?"type=video codecs="+i.codecs+" bandwidth="+i.bandwidth+" frameRate="+i.frameRate+" width="+i.width+" height="+i.height:"unexpected stream type"}L("shaka.util.StreamUtils",Yd);Yd.meetsRestrictions=be;var aa={},oa=0,la=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),ca=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Ge(){var r=this||i;(this||i).u=null;(this||i).l=!1;(this||i).i=new $b;(this||i).D=null;navigator.connection&&navigator.connection.addEventListener&&((this||i).D=function(){if(r.l&&r.g.useNetworkInformation){r.i=new $b;r.g&&r.i.configure(r.g.advanced);var i=r.chooseVariant();i&&navigator.onLine&&r.u(i,r.g.clearBufferSwitch,r.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",(this||i).D));(this||i).s=[];(this||i).G=1;(this||i).I=!1;(this||i).h=(this||i).m=(this||i).g=(this||i).C=null;(this||i).H=new Dd((function(){if(r.g.restrictToElementSize){var i=r.chooseVariant();i&&r.u(i,r.g.clearBufferSwitch,r.g.safeMarginSwitch)}}));(this||i).j=null}p=Ge.prototype;p.stop=function(){(this||i).u=null;(this||i).l=!1;(this||i).s=[];(this||i).G=1;(this||i).m=(this||i).C=null;(this||i).h&&((this||i).h.disconnect(),(this||i).h=null);(this||i).H.stop();(this||i).j=null};p.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",(this||i).D),(this||i).D=null);(this||i).H=null};p.init=function(r){(this||i).u=r};p.chooseVariant=function(o){o=void 0!==o&&o;var s=Infinity,p=Infinity;(this||i).g.restrictToScreenSize&&(p=(this||i).g.ignoreDevicePixelRatio?1:r.devicePixelRatio,s=r.screen.height*p,p*=r.screen.width);if((this||i).h&&(this||i).g.restrictToElementSize){var y=(this||i).g.ignoreDevicePixelRatio?1:r.devicePixelRatio;s=Math.min(s,(this||i).m.clientHeight*y);p=Math.min(p,(this||i).m.clientWidth*y)}var A=(this||i).s.filter((function(i){return!(i.audio&&i.audio.fastSwitching||i.video&&i.video.fastSwitching)}));A.length||(A=(this||i).s);y=A;o&&A.length!=(this||i).s.length&&(y=(this||i).s.filter((function(i){return!!(i.audio&&i.audio.fastSwitching||i.video&&i.video.fastSwitching)})));o=He(this||i,(this||i).g.restrictions,y,Infinity,Infinity);if(Infinity!=s||Infinity!=p){o=Ie(o);o=t(o);for(A=o.next();!A.done;A=o.next())if(A=A.value,A.height>=s&&A.width>=p){s=A.height;p=A.width;break}o=He(this||i,(this||i).g.restrictions,y,s,p)}s=this.getBandwidthEstimate();y.length&&!o.length&&(o=He(this||i,null,y,Infinity,Infinity),o=[o[0]]);p=o[0]||null;for(y=0;y<o.length;y++){A=o[y];for(var T=isNaN((this||i).G)?1:Math.abs((this||i).G),x=T*A.bandwidth/(this||i).g.bandwidthDowngradeTarget,I={bandwidth:Infinity},C=y+1;C<o.length;C++)if(A.bandwidth!=o[C].bandwidth){I=o[C];break}T=T*I.bandwidth/(this||i).g.bandwidthUpgradeTarget;s>=x&&s<=T&&p.bandwidth!=A.bandwidth&&(p=A)}(this||i).C=Date.now();return p};p.enable=function(){(this||i).l=!0};p.disable=function(){(this||i).l=!1};p.segmentDownloaded=function(r,o,s){(this||i).i.sample(r,o);s&&null!=(this||i).C&&(this||i).l&&Je(this||i)};p.trySuggestStreams=function(){null!=(this||i).C&&(this||i).l&&Je(this||i)};p.getBandwidthEstimate=function(){var r=(this||i).g.defaultBandwidthEstimate;navigator.connection&&navigator.connection.downlink&&(this||i).g.useNetworkInformation&&(r=1e6*navigator.connection.downlink);r=(this||i).i.getBandwidthEstimate(r);return(this||i).j?(this||i).j.getBandwidthEstimate(r):r};p.setVariants=function(r){(this||i).s=r};p.playbackRateChanged=function(r){(this||i).G=r};p.setMediaElement=function(o){var s=this||i;(this||i).m=o;(this||i).h&&((this||i).h.disconnect(),(this||i).h=null);(this||i).m&&"ResizeObserver"in r&&((this||i).h=new ResizeObserver((function(){s.H.S(da)})),(this||i).h.observe((this||i).m))};p.setCmsdManager=function(r){(this||i).j=r};p.configure=function(r){(this||i).g=r;(this||i).i&&(this||i).g&&(this||i).i.configure((this||i).g.advanced)};function Je(i){if(i.I){if(Date.now()-i.C<1e3*i.g.switchInterval)return}else{var r=i.i;if(!(r.g>=r.i))return;i.I=!0}r=i.chooseVariant();i.getBandwidthEstimate();r&&i.u(r,i.g.clearBufferSwitch,i.g.safeMarginSwitch)}function He(i,r,o,s,p){if(i.j){var y=i.j.Ug();y&&(o=o.filter((function(i){return!i.bandwidth||!y||i.bandwidth<=y})))}r&&(o=o.filter((function(i){return be(i,r,{width:p,height:s})})));return o.sort((function(i,r){return i.bandwidth-r.bandwidth}))}function Ie(i){var r=[];i=t(i);for(var o=i.next();!o.done;o=i.next())(o=o.value.video)&&o.height&&o.width&&r.push({height:o.height,width:o.width});return r.sort((function(i,r){return i.width-r.width}))}L("shaka.abr.SimpleAbrManager",Ge);Ge.prototype.configure=Ge.prototype.configure;Ge.prototype.setCmsdManager=Ge.prototype.setCmsdManager;Ge.prototype.setMediaElement=Ge.prototype.setMediaElement;Ge.prototype.playbackRateChanged=Ge.prototype.playbackRateChanged;Ge.prototype.setVariants=Ge.prototype.setVariants;Ge.prototype.getBandwidthEstimate=Ge.prototype.getBandwidthEstimate;Ge.prototype.trySuggestStreams=Ge.prototype.trySuggestStreams;Ge.prototype.segmentDownloaded=Ge.prototype.segmentDownloaded;Ge.prototype.disable=Ge.prototype.disable;Ge.prototype.enable=Ge.prototype.enable;Ge.prototype.chooseVariant=Ge.prototype.chooseVariant;Ge.prototype.init=Ge.prototype.init;Ge.prototype.release=Ge.prototype.release;Ge.prototype.stop=Ge.prototype.stop;var da=1;function Le(r,o){(this||i).g=r;(this||i).h=o}Le.prototype.toString=function(){return"v"+(this||i).g+"."+(this||i).h};function Me(i,r){var o=new Le(5,0),s=fa,p=s.g,y=o.h-p.h;(0<(o.g-p.g||y)?s.i:s.h)(s.g,o,i,r)}function Oe(i,r,o,s){Ra([o,"has been deprecated and will be removed in",r,". We are currently at version",i,". Additional information:",s].join(" "))}function Pe(i,r,o,s){Qa([o,"has been deprecated and has been removed in",r,". We are now at version",i,". Additional information:",s].join(" "))}var fa=null;L("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});L("shaka.config.CodecSwitchingStrategy",{Zj:"reload",Eh:"smooth"});function Qe(r,o,s,p){s=void 0===s||s;p=void 0!==p&&p;(this||i).h=r;(this||i).g=new Set([r]);o=o||[];r=t(o);for(o=r.next();!o.done;o=r.next())this.add(o.value,s,p)}Qe.prototype.add=function(r,o,s){return!!Re((this||i).h,r,void 0===o||o,void 0!==s&&s)&&((this||i).g.add(r),!0)};function Re(i,r,o,s){var p;if(!(p=!!i.audio!=!!r.audio||!!i.video!=!!r.video||i.language!=r.language)&&(p=i.audio&&r.audio)){p=i.audio;var y=r.audio;p=!!((!p.channelsCount||!y.channelsCount||2<p.channelsCount||2<y.channelsCount)&&p.channelsCount!=y.channelsCount||o&&!Se(p,y)||!Te(p.roles,y.roles)||s&&p.groupId!==y.groupId)}!(s=p)&&(s=i.video&&r.video)&&(i=i.video,r=r.video,s=!((!o||Se(i,r))&&Te(i.roles,r.roles)));return!s}Qe.prototype.values=function(){return(this||i).g.values()};function Se(i,r){if(i.mimeType!=r.mimeType)return!1;i=i.codecs.split(",").map((function(i){return ld(i)}));r=r.codecs.split(",").map((function(i){return ld(i)}));if(i.length!=r.length)return!1;i.sort();r.sort();for(var o=0;o<i.length;o++)if(i[o]!=r[o])return!1;return!0}function Te(i,r){i=new Set(i);r=new Set(r);i.delete("main");r.delete("main");if(i.size!=r.size)return!1;i=t(i);for(var o=i.next();!o.done;o=i.next())if(!r.has(o.value))return!1;return!0}function Ue(r,o,s){o=void 0===o?"reload":o;s=void 0!==s&&s;(this||i).i=r;(this||i).h=o;(this||i).g=s;(this||i).j=new Ve(r.language,"",r.audio&&r.audio.channelsCount?r.audio.channelsCount:0,"",!1,"","","",o,s)}Ue.prototype.create=function(r){var o=this||i,s="smooth"==(this||i).h&&fc(),p=r.filter((function(i){return Re(o.i,i,!s,o.g)}));return p.length?new Qe(p[0],p,!s,(this||i).g):(this||i).j.create(r)};function Ve(r,o,s,p,y,A,T,x,I,C){(this||i).u=r;(this||i).C=o;(this||i).h=s;(this||i).i=p;(this||i).D=y;(this||i).l=A;(this||i).g=void 0===T?"":T;(this||i).j=void 0===x?"":x;(this||i).m=void 0===I?"reload":I;(this||i).s=void 0!==C&&C}Ve.prototype.create=function(r){var o=[];o=We(r,(this||i).u);var s=r.filter((function(i){return i.primary}));o=o.length?o:s.length?s:r;r=Xe(o,(this||i).C);r.length&&(o=r);(this||i).l&&(r=Ye(o,(this||i).l),r.length&&(o=r));(this||i).i&&(r=$e(o,(this||i).i),r.length&&(o=r));(this||i).h&&(r=af(o,(this||i).h),r.length&&(o=r));(this||i).g&&(r=bf(o,(this||i).g),r.length&&(o=r));(this||i).j&&(r=cf(o,(this||i).j),r.length&&(o=r));r=df(o,(this||i).D);r.length&&(o=r);return new Qe(o[0],o,!("smooth"==(this||i).m&&fc()),(this||i).s)};function We(i,r){r=Kb(r);var o=Tb(r,i.map((function(i){return Sb(i)})));return o?i.filter((function(i){return o==Sb(i)})):[]}function Xe(i,r){return i.filter((function(i){return!!i.audio&&(r?i.audio.roles.includes(r):0==i.audio.roles.length)}))}function bf(i,r){return i.filter((function(i){return!(!i.audio||!i.audio.label)&&i.audio.label.toLowerCase()==r.toLowerCase()}))}function cf(i,r){return i.filter((function(i){return!(!i.video||!i.video.label)&&i.video.label.toLowerCase()==r.toLowerCase()}))}function af(i,r){return i.filter((function(i){return!i.audio||!i.audio.channelsCount||i.audio.channelsCount==r}))}function $e(i,o){"AUTO"==o&&(o=r.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");return i.filter((function(i){return!i.video||!i.video.hdr||i.video.hdr==o}))}function Ye(i,r){return i.filter((function(i){return!i.video||!i.video.videoLayout||i.video.videoLayout==r}))}function df(i,r){return i.filter((function(i){return!i.audio||i.audio.spatialAudio==r}))}function ef(){(this||i).g=ma;(this||i).h=(new Map).set(ma,2).set(ga,1)}function hf(i,r,o){i.h.set(ma,o).set(ga,r)}var ga=0,ma=1;function jf(r,o){var s=kf();(this||i).l=null==r.maxAttempts?s.maxAttempts:r.maxAttempts;(this||i).j=null==r.baseDelay?s.baseDelay:r.baseDelay;(this||i).s=null==r.fuzzFactor?s.fuzzFactor:r.fuzzFactor;(this||i).m=null==r.backoffFactor?s.backoffFactor:r.backoffFactor;(this||i).g=0;(this||i).h=(this||i).j;((this||i).i=void 0!==o&&o)&&((this||i).g=1)}function lf(i){var r,o;return K((function(s){if(1==s.g){if(i.g>=i.l){if(!i.i)throw new P(2,7,1010);i.g=1,i.h=i.j}r=i.g;i.g++;if(0==r)return s.return();o=i.h*(1+(2*Math.random()-1)*i.s);return D(s,new Promise((function(i){new Dd(i).S(o/1e3)})),2)}i.h*=i.m;F(s)}))}function kf(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function mf(){var i,r,o=new Promise((function(o,s){i=o;r=s}));o.resolve=i;o.reject=r;return o}mf.prototype.resolve=function(){};mf.prototype.reject=function(){};function nf(r,o){(this||i).promise=r;(this||i).i=o;(this||i).g=!1}function of(i){return new nf(Promise.reject(i),(function(){return Promise.resolve()}))}function pf(){var i=Promise.reject(new P(2,7,7001));i.catch((function(){}));return new nf(i,(function(){return Promise.resolve()}))}function qf(i){return new nf(Promise.resolve(i),(function(){return Promise.resolve()}))}function rf(i){return new nf(i,(function(){return i.catch((function(){}))}))}nf.prototype.abort=function(){(this||i).g=!0;return this.i()};function sf(i){return new nf(Promise.all(i.map((function(i){return i.promise}))),(function(){return Promise.all(i.map((function(i){return i.abort()})))}))}nf.prototype.finally=function(r){(this||i).promise.then((function(){return r(!0)}),(function(){return r(!1)}));return this||i};nf.prototype.Fa=function(r,o){function c(i){return function(A){if(s.g&&i)p.reject(y);else{var T=i?r:o;T?d=tf(T,A,p):(i?p.resolve:p.reject)(A)}}}function d(){p.reject(y);return s.abort()}var s=this||i,p=new mf,y=new P(2,7,7001);(this||i).promise.then(c(!0),c(!1));return new nf(p,(function(){return d()}))};function tf(i,r,o){try{var s=i(r);if(s&&s.promise&&s.abort)return o.resolve(s.promise),function(){return s.abort()};o.resolve(s);return function(){return Promise.resolve(s).then((function(){}),(function(){}))}}catch(i){return o.reject(i),function(){return Promise.resolve()}}}L("shaka.util.AbortableOperation",nf);nf.prototype.chain=nf.prototype.Fa;nf.prototype.finally=nf.prototype.finally;nf.all=sf;nf.prototype.abort=nf.prototype.abort;nf.notAbortable=rf;nf.completed=qf;nf.aborted=pf;nf.failed=of;function uf(){(this||i).g=[]}function vf(i,r){i.g.push(r.finally((function(){vc(i.g,r)})))}uf.prototype.destroy=function(){for(var r=[],o=t((this||i).g),s=o.next();!s.done;s=o.next())s=s.value,s.promise.catch((function(){})),r.push(s.abort());(this||i).g=[];return Promise.all(r)};function wf(r,o,s,p,y){$a.call(this||i);(this||i).i=!1;(this||i).m=new uf;(this||i).g=new Set;(this||i).h=new Set;(this||i).l=r||null;(this||i).j=o||null;(this||i).u=s||null;(this||i).C=p||null;(this||i).D=y||null;(this||i).s=!1}pa(wf,$a);p=wf.prototype;p.mg=function(r){(this||i).s=r};function xf(i,r,o,s){o=o||ka;var p=Ca[i];(!p||o>=p.priority)&&(Ca[i]={priority:o,Ge:r,$i:void 0!==s&&s})}p.aj=function(r){(this||i).g.add(r)};p.uj=function(r){(this||i).g.delete(r)};p.Lh=function(){(this||i).g.clear()};p.bj=function(r){(this||i).h.add(r)};p.vj=function(r){(this||i).h.delete(r)};p.Mh=function(){(this||i).h.clear()};function Af(i,r,o){return{uris:i,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:r,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===o?null:o}}p.destroy=function(){(this||i).i=!0;(this||i).g.clear();(this||i).h.clear();$a.prototype.release.call(this||i);return(this||i).m.destroy()};p.request=function(r,o,s){var p=this||i,y=new Bf;if((this||i).i){var A=Promise.reject(new P(2,7,7001));A.catch((function(){}));return new Cf(A,(function(){return Promise.resolve()}),y)}o.method=o.method||"GET";o.headers=o.headers||{};o.retryParameters=o.retryParameters?Ad(o.retryParameters):kf();o.uris=Ad(o.uris);A=Df(this||i,r,o,s);var T=A.Fa((function(){return Ef(p,r,o,s,new jf(o.retryParameters,!1),0,null,y)})),x=T.Fa((function(i){return Ff(p,r,i,s)})),I=Date.now(),C=0;A.promise.then((function(){C=Date.now()-I}),(function(){}));var M=0;T.promise.then((function(){M=Date.now()}),(function(){}));var N=x.Fa((function(i){var y=Date.now()-M,A=i.response;A.timeMs+=C;A.timeMs+=y;i.Gi||!p.l||A.fromCache||"HEAD"==o.method||r!=Ta||p.l(A.timeMs,A.data.byteLength,Hf(s));return A}),(function(i){i&&(i.severity=2);throw i}));A=new Cf(N.promise,(function(){return N.abort()}),y);vf((this||i).m,A);return A};function Df(i,r,o,s){function e(i){p=p.Fa((function(){o.body&&(o.body=mc(o.body));return i(r,o,s)}))}var p=qf(void 0);i.C&&e(i.C);i=t(i.g);for(var y=i.next();!y.done;y=i.next())e(y.value);return p.Fa(void 0,(function(i){if(i instanceof P&&7001==i.code)throw i;throw new P(2,1,1006,i)}))}function Ef(i,r,o,s,p,y,A,T){i.s&&(o.uris[y]=o.uris[y].replace("http://","https://"));0<y&&i.D&&i.D(r,s,o.uris[y],o.uris[y-1]);var x=new fb(o.uris[y]),I=x.wb,C=!1;I||(I=location.protocol,I=I.slice(0,-1),gb(x,I),o.uris[y]=x.toString());I=I.toLowerCase();var M=(I=Ca[I])?I.Ge:null;if(!M)return of(new P(2,1,1e3,x));var N,_=I.$i,j=null,B=null,z=!1,G=!1;return rf(lf(p)).Fa((function(){if(i.i)return pf();N=Date.now();var p=M(o.uris[y],o,r,(function(o,p,y){j&&j.stop();B&&B.S(x/1e3);i.l&&r==Ta&&(i.l(o,p,Hf(s)),C=!0,T.g=y)}),(function(s){i.j&&i.j(s,o,r);G=!0}));if(!_)return p;var A=o.retryParameters.connectionTimeout;A&&(j=new Dd((function(){z=!0;p.abort()})),j.S(A/1e3));var x=o.retryParameters.stallTimeout;x&&(B=new Dd((function(){z=!0;p.abort()})));return p})).Fa((function(s){j&&j.stop();B&&B.stop();void 0==s.timeMs&&(s.timeMs=Date.now()-N);var p={response:s,Gi:C};!G&&i.j&&i.j(s.headers,o,r);return p}),(function(x){j&&j.stop();B&&B.stop();if(i.u){var I=null,C=0;x instanceof P&&(I=x,1001==x.code&&(C=x.data[1]));i.u(o,I,C,z)}if(i.i)return pf();z&&(x=new P(1,1,1003,o.uris[y],r));if(x instanceof P){if(7001==x.code)throw x;if(1010==x.code)throw A;if(1==x.severity)return I=(new Map).set("error",x),I=new O("retry",I),i.dispatchEvent(I),y=(y+1)%o.uris.length,Ef(i,r,o,s,p,y,x,T)}throw x}))}function Ff(i,r,o,s){var p=qf(void 0),y={};i=t(i.h);for(var A=i.next();!A.done;y={Ye:y.Ye},A=i.next())y.Ye=A.value,p=p.Fa(function(i){return function(){var p=o.response;p.data&&(p.data=mc(p.data));return i.Ye(r,p,s)}}(y));return p.Fa((function(){return o}),(function(i){var r=2;if(i instanceof P){if(7001==i.code)throw i;r=i.severity}throw new P(r,1,1007,i)}))}function Hf(i){if(i){var r=i.segment;i=i.stream;if(r&&i&&i.fastSwitching&&r.Fd)return!1}return!0}L("shaka.net.NetworkingEngine",wf);wf.prototype.request=wf.prototype.request;wf.prototype.destroy=wf.prototype.destroy;wf.makeRequest=Af;wf.defaultRetryParameters=function(){return kf()};wf.prototype.clearAllResponseFilters=wf.prototype.Mh;wf.prototype.unregisterResponseFilter=wf.prototype.vj;wf.prototype.registerResponseFilter=wf.prototype.bj;wf.prototype.clearAllRequestFilters=wf.prototype.Lh;wf.prototype.unregisterRequestFilter=wf.prototype.uj;wf.prototype.registerRequestFilter=wf.prototype.aj;wf.unregisterScheme=function(i){delete Ca[i]};wf.registerScheme=xf;wf.prototype.setForceHTTPS=wf.prototype.mg;function Bf(){(this||i).g=0}wf.NumBytesRemainingClass=Bf;function Cf(r,o,s){nf.call(this||i,r,o);(this||i).h=s}pa(Cf,nf);wf.PendingRequest=Cf;var Ta=1;wf.RequestType={MANIFEST:0,SEGMENT:Ta,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8};wf.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var ka=3;wf.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:ka};var Ca={};function If(r){(this||i).g=!1;(this||i).h=new mf;(this||i).i=r}If.prototype.destroy=function(){var r=this||i;if((this||i).g)return(this||i).h;(this||i).g=!0;return this.i().then((function(){r.h.resolve()}),(function(){r.h.resolve()}))};function Jf(i,r){if(i.g){if(r instanceof P&&7003==r.code)throw r;throw new P(2,7,7003,r)}}function Kf(){(this||i).g=new Za}p=Kf.prototype;p.release=function(){this.ub();(this||i).g=null};p.o=function(r,o,s,p){(this||i).g&&(r=new Lf(r,o,s,p),(this||i).g.push(o,r))};p.na=function(r,o,s,p){function e(i){y.hc(r,o,e);s(i)}var y=this||i;this.o(r,o,e,p)};p.hc=function(r,o,s){if((this||i).g){var p=(this||i).g.get(o)||[];p=t(p);for(var y=p.next();!y.done;y=p.next())y=y.value,y.target!=r||s!=y.listener&&s||(y.hc(),(this||i).g.remove(o,y))}};p.ub=function(){if((this||i).g){var r,o=(this||i).g,s=[];for(r in o.g)s.push.apply(s,w(o.g[r]));o=t(s);for(s=o.next();!s.done;s=o.next())s.value.hc();(this||i).g.g={}}};L("shaka.util.EventManager",Kf);Kf.prototype.removeAll=Kf.prototype.ub;Kf.prototype.unlisten=Kf.prototype.hc;Kf.prototype.listenOnce=Kf.prototype.na;Kf.prototype.listen=Kf.prototype.o;Kf.prototype.release=Kf.prototype.release;function Lf(r,o,s,p){(this||i).target=r;(this||i).type=o;(this||i).listener=s;(this||i).g=Mf(r,p);(this||i).target.addEventListener(o,s,(this||i).g)}Lf.prototype.hc=function(){(this||i).target.removeEventListener((this||i).type,(this||i).listener,(this||i).g);(this||i).listener=(this||i).target=null;(this||i).g=!1};function Mf(i,r){if(void 0==r)return!1;if("boolean"==typeof r)return r;var o=new Set(["passive","capture"]);Object.keys(r).filter((function(i){return!o.has(i)}));return Nf(i)?r:r.capture||!1}function Nf(i){var r=Ma;if(void 0==r){r=!1;try{var o={},s={get:function(){r=!0;return!1}};Object.defineProperty(o,"passive",s);Object.defineProperty(o,"capture",s);s=function(){};i.addEventListener("test",s,o);i.removeEventListener("test",s,o)}catch(i){r=!1}Ma=r}return r||!1}var Ma=void 0;function Pf(r){(this||i).h=r;(this||i).g=void 0}Pf.prototype.value=function(){void 0==(this||i).g&&((this||i).g=this.h());return(this||i).g};function Qf(i){for(var r=new Map,o=t(Object.keys(i)),s=o.next();!s.done;s=o.next())s=s.value,r.set(s,i[s]);return r}function Rf(i){var r={};i.forEach((function(i,o){r[o]=i}));return r}function Sf(){}function Tf(i){if(!i)return"";i=lc(i);239==i[0]&&187==i[1]&&191==i[2]&&(i=i.subarray(3));if(r.TextDecoder&&!Qd())return i=(new TextDecoder).decode(i),i.includes("")&&Qa('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),i;for(var o="",s=0;s<i.length;++s){var p=65533;0==(i[s]&128)?p=i[s]:i.length>=s+2&&192==(i[s]&224)&&128==(i[s+1]&192)?(p=(i[s]&31)<<6|i[s+1]&63,s+=1):i.length>=s+3&&224==(i[s]&240)&&128==(i[s+1]&192)&&128==(i[s+2]&192)?(p=(i[s]&15)<<12|(i[s+1]&63)<<6|i[s+2]&63,s+=2):i.length>=s+4&&240==(i[s]&241)&&128==(i[s+1]&192)&&128==(i[s+2]&192)&&128==(i[s+3]&192)&&(p=(i[s]&7)<<18|(i[s+1]&63)<<12|(i[s+2]&63)<<6|i[s+3]&63,s+=3);if(65535>=p)o+=String.fromCharCode(p);else{p-=65536;var y=p&1023;o+=String.fromCharCode(55296+(p>>10));o+=String.fromCharCode(56320+y)}}return o}function Uf(i,r,o){if(!i)return"";if(!o&&0!=i.byteLength%2)throw new P(2,2,2004);o=Math.floor(i.byteLength/2);var s=new Uint16Array(o);i=pc(i);for(var p=0;p<o;p++)s[p]=i.getUint16(2*p,r);return La.value()(s)}function Wf(i){function b(i){return r.byteLength<=i||32<=r[i]&&126>=r[i]}if(!i)return"";var r=lc(i);if(239==r[0]&&187==r[1]&&191==r[2])return Tf(r);if(254==r[0]&&255==r[1])return Uf(r.subarray(2),!1);if(255==r[0]&&254==r[1])return Uf(r.subarray(2),!0);if(0==r[0]&&0==r[2])return Uf(i,!1);if(0==r[1]&&0==r[3])return Uf(i,!0);if(b(0)&&b(1)&&b(2)&&b(3))return Tf(i);throw new P(2,2,2003)}function Xf(i){if(r.TextEncoder&&!Qd()){var o=new TextEncoder;return mc(o.encode(i))}i=encodeURIComponent(i);i=unescape(i);o=new Uint8Array(i.length);for(var s=0;s<i.length;s++)o[s]=i[s].charCodeAt(0);return mc(o)}function Yf(i,r){for(var o=new ArrayBuffer(2*i.length),s=new DataView(o),p=0;p<i.length;++p)s.setUint16(2*p,i.charCodeAt(p),r);return o}L("shaka.util.StringUtils",Sf);Sf.resetFromCharCode=function(){La.g=void 0};Sf.toUTF16=Yf;Sf.toUTF8=Xf;Sf.fromBytesAutoDetect=Wf;Sf.fromUTF16=Uf;Sf.fromUTF8=Tf;var La=new Pf((function(){function a(i){try{var r=new Uint8Array(i);return 0<String.fromCharCode.apply(null,r).length}catch(i){return!1}}for(var i={Wb:65536};0<i.Wb;i={Wb:i.Wb},i.Wb/=2)if(a(i.Wb))return function(i){return function(r){for(var o="",s=0;s<r.length;s+=i.Wb)o+=String.fromCharCode.apply(null,r.subarray(s,s+i.Wb));return o}}(i);return null}));function Zf(r,o){(this||i).h=pc(r);(this||i).i=o==Ua;(this||i).g=0}p=Zf.prototype;p.xa=function(){return(this||i).g<(this||i).h.byteLength};p.Ga=function(){return(this||i).g};p.getLength=function(){return(this||i).h.byteLength};p.ra=function(){try{var r=(this||i).h.getUint8((this||i).g);(this||i).g+=1;return r}catch(i){throw ag()}};p.Ua=function(){try{var r=(this||i).h.getUint16((this||i).g,(this||i).i);(this||i).g+=2;return r}catch(i){throw ag()}};p.O=function(){try{var r=(this||i).h.getUint32((this||i).g,(this||i).i);(this||i).g+=4;return r}catch(i){throw ag()}};p.ih=function(){try{var r=(this||i).h.getInt32((this||i).g,(this||i).i);(this||i).g+=4;return r}catch(i){throw ag()}};p.Uc=function(){try{if((this||i).i){var r=(this||i).h.getUint32((this||i).g,!0);var o=(this||i).h.getUint32((this||i).g+4,!0)}else o=(this||i).h.getUint32((this||i).g,!1),r=(this||i).h.getUint32((this||i).g+4,!1)}catch(i){throw ag()}if(2097151<o)throw new P(2,3,3001);(this||i).g+=8;return o*Math.pow(2,32)+r};p.Sb=function(r){if((this||i).g+r>(this||i).h.byteLength)throw ag();var o=lc((this||i).h,(this||i).g,r);(this||i).g+=r;return o};p.skip=function(r){if((this||i).g+r>(this||i).h.byteLength)throw ag();(this||i).g+=r};p.jj=function(r){if((this||i).g<r)throw ag();(this||i).g-=r};p.seek=function(r){if(0>r||r>(this||i).h.byteLength)throw ag();(this||i).g=r};p.Hd=function(){for(var r=(this||i).g;this.xa()&&0!=(this||i).h.getUint8((this||i).g);)(this||i).g+=1;r=lc((this||i).h,r,(this||i).g-r);(this||i).g+=1;return Tf(r)};function ag(){return new P(2,3,3e3)}L("shaka.util.DataViewReader",Zf);Zf.prototype.readTerminatedString=Zf.prototype.Hd;Zf.prototype.seek=Zf.prototype.seek;Zf.prototype.rewind=Zf.prototype.jj;Zf.prototype.skip=Zf.prototype.skip;Zf.prototype.readBytes=Zf.prototype.Sb;Zf.prototype.readUint64=Zf.prototype.Uc;Zf.prototype.readInt32=Zf.prototype.ih;Zf.prototype.readUint32=Zf.prototype.O;Zf.prototype.readUint16=Zf.prototype.Ua;Zf.prototype.readUint8=Zf.prototype.ra;Zf.prototype.getLength=Zf.prototype.getLength;Zf.prototype.getPosition=Zf.prototype.Ga;Zf.prototype.hasMoreData=Zf.prototype.xa;var Ua=1;Zf.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Ua};function bg(){(this||i).i=[];(this||i).h=[];(this||i).g=!1}p=bg.prototype;p.box=function(r,o){r=cg(r);(this||i).i[r]=Oa;(this||i).h[r]=o;return this||i};p.T=function(r,o){r=cg(r);(this||i).i[r]=_a;(this||i).h[r]=o;return this||i};p.stop=function(){(this||i).g=!0};p.parse=function(r,o,s){r=new Zf(r,0);for((this||i).g=!1;r.xa()&&!(this||i).g;)this.Ed(0,r,o,s)};p.Ed=function(r,o,s,p){var y=o.Ga();if(p&&y+8>o.getLength())(this||i).g=!0;else{var A=o.O(),T=o.O(),x=fg(T),I=!1;switch(A){case 0:A=o.getLength()-y;break;case 1:if(p&&o.Ga()+8>o.getLength()){(this||i).g=!0;return}A=o.Uc();I=!0}var C=(this||i).h[T];if(C){var M=null,N=null;if((this||i).i[T]==_a){if(p&&o.Ga()+4>o.getLength()){(this||i).g=!0;return}N=o.O();M=N>>>24;N&=16777215}T=y+A;s&&T>o.getLength()&&(T=o.getLength());p&&T>o.getLength()?(this||i).g=!0:(p=T-o.Ga(),o=0<p?o.Sb(p):new Uint8Array(0),o=new Zf(o,0),C({name:x,parser:this||i,partialOkay:s||!1,version:M,flags:N,reader:o,size:A,start:y+r,has64BitSize:I}))}else o.skip(Math.min(y+A-o.Ga(),o.getLength()-o.Ga()))}};function gg(i){for(var r=hg(i);i.reader.xa()&&!i.parser.g;)i.parser.Ed(i.start+r,i.reader,i.partialOkay)}function ig(i){for(var r=hg(i),o=i.reader.O(),s=0;s<o&&(i.parser.Ed(i.start+r,i.reader,i.partialOkay),!i.parser.g);s++);}function jg(i){var r=hg(i);for(i.reader.skip(78);i.reader.xa()&&!i.parser.g;)i.parser.Ed(i.start+r,i.reader,i.partialOkay)}function kg(i){return function(r){i(r.reader.Sb(r.reader.getLength()-r.reader.Ga()))}}function cg(i){var r=0;i=t(i);for(var o=i.next();!o.done;o=i.next())r=r<<8|o.value.charCodeAt(0);return r}function fg(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function hg(i){return 8+(i.has64BitSize?8:0)+(null!=i.flags?4:0)}L("shaka.util.Mp4Parser",bg);bg.headerSize=hg;bg.typeToString=fg;bg.allData=kg;bg.visualSampleEntry=jg;bg.sampleDescription=ig;bg.children=gg;bg.prototype.parseNext=bg.prototype.Ed;bg.prototype.parse=bg.prototype.parse;bg.prototype.stop=bg.prototype.stop;bg.prototype.fullBox=bg.prototype.T;bg.prototype.box=bg.prototype.box;var Oa=0,_a=1;function lg(){}function og(i){i=lc(i);i=La.value()(i);return btoa(i)}function pg(i,r){r=void 0==r||r;i=og(i).replace(/\+/g,"-").replace(/\//g,"_");return r?i:i.replace(/[=]*$/,"")}function qg(i){i=r.atob(i.replace(/-/g,"+").replace(/_/g,"/"));for(var o=new Uint8Array(i.length),s=0;s<i.length;++s)o[s]=i.charCodeAt(s);return o}function rg(i){for(var o=i.length/2,s=new Uint8Array(o),p=0;p<o;p++)s[p]=r.parseInt(i.substr(2*p,2),16);return s}function sg(i){var r=lc(i);i="";r=t(r);for(var o=r.next();!o.done;o=r.next())o=o.value,o=o.toString(16),1==o.length&&(o="0"+o),i+=o;return i}function tg(){for(var i=Ga.apply(0,arguments),r=0,o=0;o<i.length;++o)r+=i[o].byteLength;r=new Uint8Array(r);for(var s=o=0;s<i.length;++s){var p=i[s];p instanceof Uint8Array?r.set(p,o):r.set(lc(p),o);o+=p.byteLength}return r}L("shaka.util.Uint8ArrayUtils",lg);lg.concat=tg;lg.toHex=sg;lg.fromHex=rg;lg.fromBase64=qg;lg.toBase64=pg;lg.toStandardBase64=og;function ug(r){var o=this||i;(this||i).g=[];(this||i).h=[];(this||i).data=[];(new bg).box("moov",gg).box("moof",gg).T("pssh",(function(i){if(!(1<i.version)){var r=lc(i.reader.h,-12,i.size);o.data.push(r);o.g.push(sg(i.reader.Sb(16)));if(0<i.version){r=i.reader.O();for(var s=0;s<r;s++){var p=sg(i.reader.Sb(16));o.h.push(p)}}}})).parse(r)}function vg(i,r,o,s){var p=i.length,y=r.length+16+p;0<s&&(y+=4+16*o.size);var A=new Uint8Array(y),T=pc(A),x=0;T.setUint32(x,y);x+=4;T.setUint32(x,1886614376);x+=4;1>s?T.setUint32(x,0):T.setUint32(x,16777216);x+=4;A.set(r,x);x+=r.length;if(0<s)for(T.setUint32(x,o.size),x+=4,r=t(o),o=r.next();!o.done;o=r.next())o=rg(o.value),A.set(o,x),x+=o.length;T.setUint32(x,p);A.set(i,x+4);return A}function wg(i,r){i=xg(i,r);return 1!=i.length?null:i[0]}function yg(i,r,o){i=zg(i,r,o);return 1!=i.length?null:i[0]}function xg(i,r){var o=[];i=t(i.childNodes);for(var s=i.next();!s.done;s=i.next())s=s.value,s instanceof Element&&s.tagName==r&&o.push(s);return o}function Ag(i){return Array.from(i.childNodes).filter((function(i){return i instanceof Element}))}function zg(i,r,o){var s=[];i=t(i.childNodes);for(var p=i.next();!p.done;p=i.next())p=p.value,p instanceof Element&&p.localName==o&&p.namespaceURI==r&&s.push(p);return s}function Bg(i,r,o){return i.hasAttributeNS(r,o)?i.getAttributeNS(r,o):null}function Cg(i,r,o){r=t(r);for(var s=r.next();!s.done;s=r.next())if(s=s.value,i.hasAttributeNS(s,o))return i.getAttributeNS(s,o);return null}function Dg(i){return Array.from(i.childNodes).every(Eg)?i.textContent.trim():null}function Eg(i){return i.nodeType==Node.TEXT_NODE||i.nodeType==Node.CDATA_SECTION_NODE}function Fg(i,r,o,s){s=void 0===s?null:s;var p=null;i=i.getAttribute(r);null!=i&&(p=o(i));return null==p?s:p}function Gg(i){if(!i)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z");i=Date.parse(i);return isNaN(i)?null:i/1e3}function Hg(i){if(!i)return null;i=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(i);if(!i)return null;i=31536e3*Number(i[1]||null)+2592e3*Number(i[2]||null)+86400*Number(i[3]||null)+3600*Number(i[4]||null)+60*Number(i[5]||null)+Number(i[6]||null);return isFinite(i)?i:null}function Ig(i){var r=/([0-9]+)-([0-9]+)/.exec(i);if(!r)return null;i=Number(r[1]);if(!isFinite(i))return null;r=Number(r[2]);return isFinite(r)?{start:i,end:r}:null}function Jg(i){i=Number(i);return 0===i%1?i:null}function Kg(i){i=Number(i);return 0===i%1&&0<i?i:null}function Lg(i){i=Number(i);return 0===i%1&&0<=i?i:null}function Mg(i){i=Number(i);return isNaN(i)?null:i}function Ng(i){return!!i&&"true"===i.toLowerCase()}function Og(i){var r;var o=(r=i.match(/^(\d+)\/(\d+)$/))?Number(r[1])/Number(r[2]):Number(i);return isNaN(o)?null:o}function Pg(i,r){var o=new DOMParser,s=ja.value()(i);i=null;try{i=o.parseFromString(s,"text/xml")}catch(i){return null}o=i.documentElement;if(!o||o.getElementsByTagName("parsererror").length||o.tagName!=r)return null;if(!("createNodeIterator"in document))return o;for(r=document.createNodeIterator(i,NodeFilter.SHOW_ALL);i=r.nextNode();)if(i instanceof HTMLElement||i instanceof SVGElement)return null;return o}function Rg(i,r){try{var o=Wf(i);return Pg(o,r)}catch(i){return null}}var ja=new Pf((function(){if("undefined"!==typeof trustedTypes){var i=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(i){return i}});return function(r){return i.createHTML(r)}}return function(i){return i}}));function Sg(r,o){var s=this||i;o=void 0===o?1:o;(this||i).G=r;(this||i).J=new Set;(this||i).m=(this||i).u=null;(this||i).ha=(this||i).$=!1;(this||i).K=0;(this||i).g=null;(this||i).D=new Kf;(this||i).i=new Map;(this||i).C=new Map;(this||i).l=new mf;(this||i).h=null;(this||i).s=function(i){2==i.severity&&s.l.reject(i);r.onError(i)};(this||i).V=new Map;(this||i).aa=new Map;(this||i).W=new Dd((function(){return Tg(s)}));(this||i).M=!1;(this||i).L=[];(this||i).N=!1;(this||i).Aa=new Dd((function(){Ug(s)})).za(o);(this||i).l.catch((function(){}));(this||i).j=new If((function(){return Vg(s)}));(this||i).Z=!1;(this||i).H=(this||i).I=null}p=Sg.prototype;p.destroy=function(){return(this||i).j.destroy()};function Vg(i){return K((function(r){switch(r.g){case 1:return i.D.release(),i.D=null,i.l.reject(),i.Aa.stop(),i.Aa=null,i.W.stop(),i.W=null,D(r,Wg(i),2);case 2:if(!i.m){r.F(3);break}ta(r,4);return D(r,i.m.setMediaKeys(null),6);case 6:va(r,5);break;case 4:wa(r);case 5:i.m=null;case 3:i.g=null,i.J.clear(),i.u=null,i.C=new Map,i.h=null,i.s=function(){},i.G=null,i.Z=!1,i.I=null,F(r)}}))}p.configure=function(r){(this||i).h=r};function Xg(i,r,o){i.ha=!0;i.C=new Map;i.M=o;return Yg(i,r)}function Zg(i,r,o){i.C=new Map;o=t(o);for(var s=o.next();!s.done;s=o.next())i.C.set(s.value,{initData:null,initDataType:null});o=t(i.h.persistentSessionsMetadata);for(s=o.next();!s.done;s=o.next())s=s.value,i.C.set(s.sessionId,{initData:s.initData,initDataType:s.initDataType});i.M=0<i.C.size;return Yg(i,r)}function $g(i,r,o,s,p,y){var A=new Map;p={audioCapabilities:p,videoCapabilities:y,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:r};p.drmInfos=[{keySystem:r,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:s,serverCertificateUri:"",initData:null,keyIds:null}];A.set(r,p);return ah(i,A,[])}function Yg(i,r){var o,s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q;return K((function(H){if(1==H.g){if(o=bh(i))for(s=t(r),p=s.next();!p.done;p=s.next())y=p.value,y.video&&(y.video.drmInfos=[o]),y.audio&&(y.audio.drmInfos=[o]);A=r.some((function(i){return!!(i.video&&i.video.drmInfos.length||i.audio&&i.audio.drmInfos.length)}));A||(T=Qf(i.h.servers),ch(r,T));x=new Set;I=t(r);for(p=I.next();!p.done;p=I.next())for(C=p.value,M=dh(C),N=t(M),_=N.next();!_.done;_=N.next())j=_.value,x.add(j);B=t(x);for(_=B.next();!_.done;_=B.next())z=_.value,eh(z,Qf(i.h.servers),Qf(i.h.advanced||{}),i.h.keySystemsMapping);return D(H,he(r,i.M,i.Z,i.h.preferredKeySystems),2)}G=A||Object.keys(i.h.servers).length;if(!G)return i.$=!0,H.return(Promise.resolve());q=ah(i,void 0,r);return H.return(A?q:q.catch((function(){})))}))}function fh(i){var r;return K((function(o){switch(o.g){case 1:if(i.m.mediaKeys)return o.return();if(!i.I){o.F(2);break}return D(o,i.I,3);case 3:return Jf(i.j),o.return();case 2:return ta(o,4),i.I=i.m.setMediaKeys(i.u),D(o,i.I,6);case 6:va(o,5);break;case 4:r=wa(o),i.s(new P(2,6,6003,r.message));case 5:Jf(i.j),F(o)}}))}function gh(i,r){return K((function(o){if(1==o.g)return D(o,fh(i),2);hh(i,r.initDataType,lc(r.initData));F(o)}))}p.Gc=function(r){var o=this||i;return K((function(i){if(1==i.g){if(!o.u)return o.D.na(r,"encrypted",(function(){o.s(new P(2,6,6010))})),i.return();o.m=r;o.D.na(o.m,"play",(function(){for(var i=t(o.L),r=i.next();!r.done;r=i.next())ih(o,r.value);o.N=!0;o.L=[]}));"webkitCurrentPlaybackTargetIsWireless"in o.m&&o.D.o(o.m,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Wg(o)}));o.H=o.g&&o.g.initData.find((function(i){return 0<i.initData.length}))||null;return o.H||"com.apple.fps"!==o.g.keySystem||o.C.size?D(i,fh(o),2):i.F(2)}jh(o).catch((function(){}));o.H||o.C.size||o.h.parseInbandPsshEnabled||o.D.o(o.m,"encrypted",(function(i){return gh(o,i)}));F(i)}))};function kh(i){var r,o,s,p,y;return K((function(A){switch(A.g){case 1:if(!i.u||!i.g)return A.return();if(!i.g.serverCertificateUri||i.g.serverCertificate&&i.g.serverCertificate.length){A.F(2);break}r=Af([i.g.serverCertificateUri],i.h.retryParameters);ta(A,3);o=i.G.zc.request(5,r);return D(A,o.promise,5);case 5:s=A.h;i.g.serverCertificate=lc(s.data);va(A,4);break;case 3:throw p=wa(A),new P(2,6,6017,p);case 4:if(i.j.g)return A.return();case 2:if(!i.g.serverCertificate||!i.g.serverCertificate.length)return A.return();ta(A,6);return D(A,i.u.setServerCertificate(i.g.serverCertificate),8);case 8:va(A,0);break;case 6:throw y=wa(A),new P(2,6,6004,y.message)}}))}function lh(i,r){var o,s,p;return K((function(y){if(1==y.g)return D(y,mh(i,r,{initData:null,initDataType:null}),2);if(3!=y.g){o=y.h;if(!o)return y.return();s=[];(p=i.i.get(o))&&(p.Db=new mf,s.push(p.Db));s.push(o.remove());return D(y,Promise.all(s),3)}i.i.delete(o);F(y)}))}function jh(i){var r,o,s,p,y;return K((function(A){if(1==A.g){if(!i.C.size)return A.F(2);i.C.forEach((function(r,o){mh(i,o,r)}));return D(A,i.l,3)}if(2!=A.g){r=i.g&&i.g.keyIds||new Set([]);if(0<r.size&&nh(i))return A.return(i.l);i.l=new mf;i.l.catch((function(){}))}o=(i.g?i.g.initData:[])||[];s=t(o);for(p=s.next();!p.done;p=s.next())y=p.value,hh(i,y.initDataType,y.initData);o.length||i.l.resolve();return A.return(i.l)}))}function hh(i,r,o){if(o.length){var s=i.i.values();s=t(s);for(var p=s.next();!p.done;p=s.next())if(jc(o,p.value.initData)&&i.h.ignoreDuplicateInitData)return;0<i.i.size&&oh(i)&&(i.l.resolve(),i.l=new mf,i.l.catch((function(){})));ph(i,r,o,i.g.sessionType)}}function qh(i){return!!i&&!!i.match(/^com\.(microsoft|chromecast)\.playready/)}function rh(i){i=i.i.keys();i=ab(i,(function(i){return i.sessionId}));return Array.from(i)}p.Ff=function(){var r=this||i,o=(this||i).i.keys();o=ab(o,(function(i){var o=r.i.get(i);return{sessionId:i.sessionId,sessionType:o.type,initData:o.initData,initDataType:o.initDataType}}));return Array.from(o)};p.td=function(){var r=Infinity,o=(this||i).i.keys();o=t(o);for(var s=o.next();!s.done;s=o.next())s=s.value,isNaN(s.expiration)||(r=Math.min(r,s.expiration));return r};p.ge=function(){return Rf((this||i).aa)};function ah(i,r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G;return K((function(q){switch(q.g){case 1:s=new Map;if(o.length){p=sh(i,o,s);q.F(2);break}return D(q,th(i,r),3);case 3:p=q.h;case 2:y=p;if(!y)throw new P(2,6,6001);Jf(i.j);ta(q,4);i.J.clear();A=y.getConfiguration();T=A.audioCapabilities||[];x=A.videoCapabilities||[];I=t(T);for(C=I.next();!C.done;C=I.next())M=C.value,i.J.add(M.contentType.toLowerCase());N=t(x);for(C=N.next();!C.done;C=N.next())_=C.value,i.J.add(_.contentType.toLowerCase());if(o.length){var H=y.keySystem;var Y=s.get(y.keySystem);var Q=[],J=[],$=[],ne=[],re=new Set;uh(Y,Q,$,J,ne,re);var xe=i.M?"persistent-license":"temporary";H={keySystem:H,licenseServerUri:Q[0],distinctiveIdentifierRequired:Y[0].distinctiveIdentifierRequired,persistentStateRequired:Y[0].persistentStateRequired,sessionType:Y[0].sessionType||xe,audioRobustness:Y[0].audioRobustness||"",videoRobustness:Y[0].videoRobustness||"",serverCertificate:$[0],serverCertificateUri:J[0],initData:ne,keyIds:re};Y=t(Y);for(Q=Y.next();!Q.done;Q=Y.next())Q=Q.value,Q.distinctiveIdentifierRequired&&(H.distinctiveIdentifierRequired=Q.distinctiveIdentifierRequired),Q.persistentStateRequired&&(H.persistentStateRequired=Q.persistentStateRequired);Y=H}else Y=y.keySystem,H=r.get(y.keySystem),Q=[],J=[],$=[],ne=[],re=new Set,uh(H.drmInfos,Q,$,J,ne,re),Y={keySystem:Y,licenseServerUri:Q[0],distinctiveIdentifierRequired:"required"==H.distinctiveIdentifier,persistentStateRequired:"required"==H.persistentState,sessionType:H.sessionTypes[0]||"temporary",audioRobustness:(H.audioCapabilities?H.audioCapabilities[0].robustness:"")||"",videoRobustness:(H.videoCapabilities?H.videoCapabilities[0].robustness:"")||"",serverCertificate:$[0],serverCertificateUri:J[0],initData:ne,keyIds:re};i.g=Y;if(!i.g.licenseServerUri)throw new P(2,6,6012,i.g.keySystem);return D(q,y.createMediaKeys(),6);case 6:j=q.h;Jf(i.j);i.u=j;if(!(""!=i.h.minHdcpVersion&&"getStatusForPolicy"in i.u)){q.F(7);break}ta(q,8);return D(q,i.u.getStatusForPolicy({minHdcpVersion:i.h.minHdcpVersion}),10);case 10:B=q.h;if("usable"!=B)throw new P(2,6,6018);Jf(i.j);va(q,7,4);break;case 8:z=wa(q,4);if(z instanceof P)throw z;throw new P(2,6,6019,z.message);case 7:return i.$=!0,D(q,kh(i),11);case 11:Jf(i.j);va(q,0);break;case 4:G=wa(q);Jf(i.j,G);i.g=null;i.J.clear();if(G instanceof P)throw G;throw new P(2,6,6002,G.message)}}))}function sh(i,r,o){for(var s=t(r),p=s.next();!p.done;p=s.next()){var y=t(dh(p.value));for(p=y.next();!p.done;p=y.next())p=p.value,o.has(p.keySystem)||o.set(p.keySystem,[]),o.get(p.keySystem).push(p)}if(1==o.size&&o.has(""))throw new P(2,6,6e3);s={};i=t(i.h.preferredKeySystems);for(p=i.next();!p.done;s={Xe:s.Xe},p=i.next())for(s.Xe=p.value,y=t(r),p=y.next();!p.done;p=y.next())if(p=p.value.decodingInfos.find(function(i){return function(r){return r.supported&&null!=r.keySystemAccess&&r.keySystemAccess.keySystem==i.Xe}}(s)))return p.keySystemAccess;i=t([!0,!1]);for(p=i.next();!p.done;p=i.next())for(s=p.value,y=t(r),p=y.next();!p.done;p=y.next()){var A=t(p.value.decodingInfos);for(p=A.next();!p.done;p=A.next()){var T=p.value;if(T.supported&&T.keySystemAccess){p=o.get(T.keySystemAccess.keySystem);var x=t(p);for(p=x.next();!p.done;p=x.next())if(!!p.value.licenseServerUri==s)return T.keySystemAccess}}}return null}function th(i,r){var o,s,p,y,A,T,x,I,C,M,N,_,j,B,z;return K((function(G){switch(G.g){case 1:if(1==r.size&&r.has(""))throw new P(2,6,6e3);s=t(r.values());for(p=s.next();!p.done;p=s.next())y=p.value,0==y.audioCapabilities.length&&delete y.audioCapabilities,0==y.videoCapabilities.length&&delete y.videoCapabilities;A=t(i.h.preferredKeySystems);T=A.next();case 2:if(T.done){G.F(4);break}x=T.value;if(!r.has(x)){G.F(3);break}I=r.get(x);ta(G,6);return D(G,navigator.requestMediaKeySystemAccess(x,[I]),8);case 8:return o=G.h,G.return(o);case 6:wa(G);case 7:Jf(i.j);case 3:T=A.next();G.F(2);break;case 4:C=t([!0,!1]),M=C.next();case 9:if(M.done){G.F(11);break}N=M.value;_=t(r.keys());T=_.next();case 12:if(T.done){M=C.next();G.F(9);break}j=T.value;B=r.get(j);z=B.drmInfos.some((function(i){return!!i.licenseServerUri}));if(z!=N){G.F(13);break}ta(G,15);return D(G,navigator.requestMediaKeySystemAccess(j,[B]),17);case 17:return o=G.h,G.return(o);case 15:wa(G);case 16:Jf(i.j);case 13:T=_.next();G.F(12);break;case 11:return G.return(o)}}))}function bh(i){i=Qf(i.h.clearKeys);if(0==i.size)return null;var o=[],s=[];i.forEach((function(i,r){var p=r;22!=p.length&&(p=pg(rg(r),!1));r=i;22!=r.length&&(r=pg(rg(i),!1));i={kty:"oct",kid:p,k:r};o.push(i);s.push(i.kid)}));i=JSON.stringify({keys:o});var p=JSON.stringify({kids:s});p=[{initData:lc(Xf(p)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+r.btoa(i),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:p,keyIds:new Set(s)}}function vh(i){oh(i)&&i.l.resolve()}function wh(i,r){new Dd((function(){r.loaded=!0;vh(i)})).S(ro)}function mh(i,r,o){var s,p,y,A,T,x,I;return K((function(C){switch(C.g){case 1:try{s=i.u.createSession("persistent-license")}catch(r){return p=new P(2,6,6005,r.message),i.s(p),C.return(Promise.reject(p))}i.D.o(s,"message",(function(r){i.m&&i.h.delayLicenseRequestUntilPlayed&&i.m.paused&&!i.N?i.L.push(r):ih(i,r)}));i.D.o(s,"keystatuseschange",(function(r){return yh(i,r)}));y={initData:o.initData,initDataType:o.initDataType,loaded:!1,Yf:Infinity,Db:null,type:"persistent-license"};i.i.set(s,y);ta(C,2);return D(C,s.load(r),4);case 4:return A=C.h,Jf(i.j),A||(i.i.delete(s),T=i.h.persistentSessionOnlinePlayback?1:2,i.s(new P(T,6,6013)),y.loaded=!0),wh(i,y),vh(i),C.return(s);case 2:x=wa(C),Jf(i.j,x),i.i.delete(s),I=i.h.persistentSessionOnlinePlayback?1:2,i.s(new P(I,6,6005,x.message)),y.loaded=!0,vh(i);case 3:return C.return(Promise.resolve())}}))}function ph(i,r,o,s){try{var p=i.u.createSession(s)}catch(r){i.s(new P(2,6,6005,r.message));return}i.D.o(p,"message",(function(r){i.m&&i.h.delayLicenseRequestUntilPlayed&&i.m.paused&&!i.N?i.L.push(r):ih(i,r)}));i.D.o(p,"keystatuseschange",(function(r){return yh(i,r)}));i.i.set(p,{initData:o,initDataType:r,loaded:!1,Yf:Infinity,Db:null,type:s});try{o=i.h.initDataTransform(o,r,i.g)}catch(o){r=o;o instanceof P||(r=new P(2,6,6016,o));i.s(r);return}i.h.logLicenseExchange&&pg(o);p.generateRequest(r,o).catch((function(r){if(!i.j.g){i.i.delete(p);var o=r.errorCode;if(o&&o.systemCode){var s=o.systemCode;0>s&&(s+=Math.pow(2,32));s="0x"+s.toString(16)}i.s(new P(2,6,6006,r.message,r,s))}}))}function ih(i,r){var o,s,p,y,A,T,x,I,C,M,N,_,j;K((function(B){switch(B.g){case 1:o=r.target;i.h.logLicenseExchange&&pg(r.message);s=i.i.get(o);p=i.g.licenseServerUri;y=i.h.advanced[i.g.keySystem];"individualization-request"==r.messageType&&y&&y.individualizationServer&&(p=y.individualizationServer);A=Af([p],i.h.retryParameters);A.body=r.message;A.method="POST";A.licenseRequestType=r.messageType;A.sessionId=o.sessionId;A.drmInfo=i.g;s&&(A.initData=s.initData,A.initDataType=s.initDataType);if(qh(i.g.keySystem)){var z=Uf(A.body,!0,!0);if(z.includes("PlayReadyKeyMessage")){z=Pg(z,"PlayReadyKeyMessage");for(var G=t(z.getElementsByTagName("HttpHeader")),q=G.next();!q.done;q=G.next())q=q.value,A.headers[q.getElementsByTagName("name")[0].textContent]=q.getElementsByTagName("value")[0].textContent;A.body=qg(z.getElementsByTagName("Challenge")[0].textContent)}else A.headers["Content-Type"]="text/xml; charset=utf-8"}T=Date.now();ta(B,2);I=i.G.zc.request(2,A);return D(B,I.promise,4);case 4:x=B.h;va(B,3);break;case 2:return C=wa(B),M=new P(2,6,6007,C),i.s(M),s&&s.Db&&s.Db.reject(M),B.return();case 3:if(i.j.g)return B.return();i.K+=(Date.now()-T)/1e3;i.h.logLicenseExchange&&pg(x.data);ta(B,5);return D(B,o.update(x.data),7);case 7:va(B,6);break;case 5:return N=wa(B),_=new P(2,6,6008,N.message),i.s(_),s&&s.Db&&s.Db.reject(_),B.return();case 6:if(i.j.g)return B.return();j=new O("drmsessionupdate");i.G.onEvent(j);s&&(s.Db&&s.Db.resolve(),wh(i,s));F(B)}}))}function yh(i,r){r=r.target;var o=i.i.get(r),s=!1;r.keyStatuses.forEach((function(r,p){if("string"==typeof p){var y=p;p=r;r=y}if(qh(i.g.keySystem)&&16==p.byteLength&&(Hd()||Qd())){y=pc(p);var A=y.getUint32(0,!0),T=y.getUint16(4,!0),x=y.getUint16(6,!0);y.setUint32(0,A,!1);y.setUint16(4,T,!1);y.setUint16(6,x,!1)}"status-pending"!=r&&(o.loaded=!0);"expired"==r&&(s=!0);p=sg(p).slice(0,32);i.V.set(p,r)}));var p=r.expiration-Date.now();(0>p||s&&1e3>p)&&o&&!o.Db&&(i.i.delete(r),r.close().catch((function(){})));oh(i)&&(i.l.resolve(),i.W.S(oo))}function Tg(i){var r=i.V,o=i.aa;o.clear();r.forEach((function(i,r){return o.set(r,i)}));r=Array.from(o.values());r.length&&r.every((function(i){return"expired"==i}))&&i.s(new P(2,6,6014));i.G.Fe(Rf(o))}function Ah(){var i,r,o,s,p,y,A,T;return K((function(x){return 1==x.g?(i="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),r=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],o={initDataTypes:["cenc"],videoCapabilities:r},s={videoCapabilities:r,persistentState:"required",sessionTypes:["persistent-license"]},p=[s,o],y=new Map,A=function(i){var r,o,s;return K((function(A){switch(A.g){case 1:ta(A,2);if("org.w3.clearkey"===i&&Rd())throw Error("Unsupported keySystem");return D(A,navigator.requestMediaKeySystemAccess(i,p),4);case 4:return r=A.h,s=!!(o=r.getConfiguration().sessionTypes)&&o.includes("persistent-license"),Ld()&&(s=!1),y.set(i,{persistentState:s}),D(A,r.createMediaKeys(),5);case 5:va(A,0);break;case 2:wa(A),y.set(i,null),F(A)}}))},T=i.map((function(i){return A(i)})),D(x,Promise.all(T),2)):x.return(Rf(y))}))}function Bh(i){var r;return K((function(o){if(1==o.g)return r=new Promise((function(i,r){new Dd(r).S(to)})),ta(o,2),D(o,Promise.race([Promise.all([i.close(),i.closed]),r]),4);if(2!=o.g)return va(o,0);wa(o);F(o)}))}function Wg(i){var r;return K((function(o){r=Array.from(i.i.entries());i.i.clear();return D(o,Promise.all(r.map((function(r){r=t(r);var o=r.next().value,s=r.next().value;return K((function(r){if(1==r.g)return ta(r,2),i.ha||i.C.has(o.sessionId)||"persistent-license"!==s.type||i.h.persistentSessionOnlinePlayback?D(r,Bh(o),5):D(r,o.remove(),5);if(2!=r.g)return va(r,0);wa(r);F(r)}))}))),0)}))}function Dh(i,r){return!i.length||!r.length||i===r||0<Eh(i,r).length}function Eh(i,r){if(!i.length)return r;if(!r.length)return i;var o=[];i=t(i);for(var s=i.next();!s.done;s=i.next()){s=s.value;for(var p=t(r),y=p.next();!y.done;y=p.next())if(y=y.value,s.keySystem==y.keySystem){p=new Map;for(var A=t((s.initData||[]).concat(y.initData||[])),T=A.next();!T.done;T=A.next())T=T.value,p.set(T.keyId,T);p=Array.from(p.values());A=s.keyIds&&y.keyIds?new Set([].concat(w(s.keyIds),w(y.keyIds))):s.keyIds||y.keyIds;o.push({keySystem:s.keySystem,licenseServerUri:s.licenseServerUri||y.licenseServerUri,distinctiveIdentifierRequired:s.distinctiveIdentifierRequired||y.distinctiveIdentifierRequired,persistentStateRequired:s.persistentStateRequired||y.persistentStateRequired,videoRobustness:s.videoRobustness||y.videoRobustness,audioRobustness:s.audioRobustness||y.audioRobustness,serverCertificate:s.serverCertificate||y.serverCertificate,serverCertificateUri:s.serverCertificateUri||y.serverCertificateUri,initData:p,keyIds:A});break}}return o}function dh(i){return(i.video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[])}function Ug(i){i.i.forEach((function(r,o){var s=r.Yf,p=o.expiration;isNaN(p)&&(p=Infinity);p!=s&&(i.G.onExpirationUpdated(o.sessionId,p),r.Yf=p)}))}function oh(i){i=i.i.values();return bb(i,(function(i){return i.loaded}))}function nh(i){for(var r=t(i.g&&i.g.keyIds||new Set([])),o=r.next();!o.done;o=r.next())if("usable"!==i.V.get(o.value))return!1;return!0}function ch(i,r){var o=[];r.forEach((function(i,r){o.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}));i=t(i);for(r=i.next();!r.done;r=i.next())r=r.value,r.video&&(r.video.drmInfos=o),r.audio&&(r.audio.drmInfos=o)}function uh(i,r,o,s,p,y){var A={};i=t(i);for(var T=i.next();!T.done;A={Va:A.Va},T=i.next()){A.Va=T.value;r.includes(A.Va.licenseServerUri)||r.push(A.Va.licenseServerUri);s.includes(A.Va.serverCertificateUri)||s.push(A.Va.serverCertificateUri);A.Va.serverCertificate&&(o.some(function(i){return function(r){return jc(r,i.Va.serverCertificate)}}(A))||o.push(A.Va.serverCertificate));if(A.Va.initData){T={};for(var x=t(A.Va.initData),I=x.next();!I.done;T={Sd:T.Sd},I=x.next())T.Sd=I.value,p.some(function(i){return function(r){var o=i.Sd;return!(!r.keyId||r.keyId!=o.keyId)||r.initDataType==o.initDataType&&jc(r.initData,o.initData)}}(T))||p.push(T.Sd)}if(A.Va.keyIds)for(T=t(A.Va.keyIds),x=T.next();!x.done;x=T.next())y.add(x.value)}}function eh(i,o,s,p){var y=i.keySystem;if(y&&("org.w3.clearkey"!=y||!i.licenseServerUri)){o.size&&(o=o.get(y)||"",i.licenseServerUri=o);i.keyIds||(i.keyIds=new Set);(s=s.get(y))&&(i.distinctiveIdentifierRequired||(i.distinctiveIdentifierRequired=s.distinctiveIdentifierRequired),i.persistentStateRequired||(i.persistentStateRequired=s.persistentStateRequired),i.videoRobustness||(i.videoRobustness=s.videoRobustness),i.audioRobustness||(i.audioRobustness=s.audioRobustness),i.serverCertificate||(i.serverCertificate=s.serverCertificate),s.sessionType&&(i.sessionType=s.sessionType),i.serverCertificateUri||(i.serverCertificateUri=s.serverCertificateUri));p[y]&&(i.keySystem=p[y]);r.cast&&r.cast.__platform__&&"com.microsoft.playready"==y&&(i.keySystem="com.chromecast.playready")}}var to=1,ro=5,oo=.5,so=new Pf((function(){return mc(new Uint8Array([0]))}));function Gh(){}function Hh(i,r){if(r){var o=uo[r.toLowerCase()];if(o)return o}throw new P(2,4,4e3,i,r)}L("shaka.media.ManifestParser",Gh);Gh.unregisterParserByMime=function(i){delete uo[i]};Gh.registerParserByMime=function(i,r){uo[i]=r};Gh.registerParserByExtension=function(){Me("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")};Gh.AccessibilityPurpose={tk:"visually impaired",Mj:"hard of hearing"};var uo={};function Jh(i){function b(){o=!0}function c(i){s.push(i);gg(i)}i=lc(i);var r,o=!1,s=[],p=[];(new bg).box("moov",c).box("trak",c).box("mdia",c).box("minf",c).box("stbl",c).T("stsd",(function(i){r=i;s.push(i);ig(i)})).T("encv",b).T("enca",b).T("dvav",(function(i){p.push({box:i,cb:1701733238})})).T("dva1",(function(i){p.push({box:i,cb:1701733238})})).T("dvh1",(function(i){p.push({box:i,cb:1701733238})})).T("dvhe",(function(i){p.push({box:i,cb:1701733238})})).T("hev1",(function(i){p.push({box:i,cb:1701733238})})).T("hvc1",(function(i){p.push({box:i,cb:1701733238})})).T("avc1",(function(i){p.push({box:i,cb:1701733238})})).T("avc3",(function(i){p.push({box:i,cb:1701733238})})).T("ac-3",(function(i){p.push({box:i,cb:1701733217})})).T("ec-3",(function(i){p.push({box:i,cb:1701733217})})).T("ac-4",(function(i){p.push({box:i,cb:1701733217})})).T("mp4a",(function(i){p.push({box:i,cb:1701733217})})).parse(i);if(o)return i;if(0==p.length||!r)throw Ya(sg(i)),new P(2,3,3019);p.reverse();for(var y=t(p),A=y.next();!A.done;A=y.next())A=A.value,i=Kh(i,r,A.box,s,A.cb);return i}function Kh(i,r,o,s,p){var y=po.value(),A=i.subarray(o.start,o.start+o.size),T=pc(A),x=new Uint8Array(o.size+y.byteLength);x.set(A,0);A=pc(x);A.setUint32(4,p);x.set(y,o.size);p=T.getUint32(4);A.setUint32(o.size+16,p);Mh(x,0,x.byteLength);p=new Uint8Array(i.byteLength+x.byteLength);o=Id()?o.start:o.start+o.size;y=i.subarray(o);p.set(i.subarray(0,o));p.set(x,o);p.set(y,o+x.byteLength);i=t(s);for(s=i.next();!s.done;s=i.next())s=s.value,Mh(p,s.start,s.size+x.byteLength);x=pc(p,r.start);r=hg(r);i=x.getUint32(r);x.setUint32(r,i+1);return p}function Mh(i,r,o){i=pc(i,r);r=i.getUint32(0);0!=r&&(1==r?(i.setUint32(8,o>>32),i.setUint32(12,o&4294967295)):i.setUint32(0,o))}var po=new Pf((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function Nh(r,o,s,p,y,A,T){(this||i).ba=r;(this||i).hb=o;(this||i).Na=s;(this||i).Uf=void 0===p?null:p;(this||i).timescale=void 0===y?null:y;(this||i).g=void 0===A?null:A;(this||i).aes128Key=void 0===T?null:T;(this||i).mimeType=(this||i).codecs=null}Nh.prototype.Pb=function(){return(this||i).hb};Nh.prototype.Mb=function(){return(this||i).Na};function Oh(i,r){return i===r||(i&&r?i.Pb()==r.Pb()&&i.Mb()==r.Mb()&&xc(i.ba().sort(),r.ba().sort())&&jc(i.g,r.g):i==r)}L("shaka.media.InitSegmentReference",Nh);Nh.prototype.getEndByte=Nh.prototype.Mb;Nh.prototype.getStartByte=Nh.prototype.Pb;function Ph(r,o,s,p,y,A,T,x,I,C,M,N,_,j,B,z){C=void 0===C?[]:C;j=void 0===j?vo:j;(this||i).startTime=r;(this||i).h=(this||i).endTime=o;(this||i).D=s;(this||i).hb=p;(this||i).Na=y;(this||i).ka=A;(this||i).timestampOffset=T;(this||i).appendWindowStart=x;(this||i).appendWindowEnd=I;(this||i).g=C;(this||i).tilesLayout=void 0===M?"":M;(this||i).C=void 0===N?null:N;(this||i).oa=void 0===_?null:_;(this||i).status=j;(this||i).l=!1;(this||i).j=!0;(this||i).m=!1;(this||i).aes128Key=void 0===B?null:B;(this||i).u=null;(this||i).i=0;(this||i).s=void 0!==z&&z;(this||i).ue=(this||i).Fd=!1;r=t((this||i).g);for(o=r.next();!o.done;o=r.next())o.value.eh();(this||i).s&&(this||i).g.length&&(this||i).g[(this||i).g.length-1].dh();(this||i).mimeType=(this||i).codecs=null}p=Ph.prototype;p.ba=function(){return this.D()};p.getStartTime=function(){return(this||i).startTime};p.di=function(){return(this||i).endTime};p.Pb=function(){return(this||i).hb};p.Mb=function(){return(this||i).Na};p.Bi=function(){return(this||i).tilesLayout};p.Ai=function(){return(this||i).C};p.sc=function(){return(this||i).status};p.Ti=function(){(this||i).status=yo};p.Tf=function(){(this||i).l=!0};p.Ni=function(){return(this||i).l};p.xe=function(){(this||i).j=!1};p.Ki=function(){return(this||i).j};p.eh=function(){(this||i).Fd=!0};p.Mi=function(){return(this||i).Fd};p.dh=function(){(this||i).ue=!0};p.Li=function(){return(this||i).ue};p.bh=function(){(this||i).m=!0};p.Hi=function(){return(this||i).m};p.rh=function(r){(this||i).u=r};p.zi=function(){return(this||i).u};p.offset=function(r){(this||i).startTime+=r;(this||i).endTime+=r;(this||i).h+=r;for(var o=t((this||i).g),s=o.next();!s.done;s=o.next())s=s.value,s.startTime+=r,s.endTime+=r,s.h+=r};p.sg=function(r){null==(this||i).oa?Qa("Sync attempted without sync time!"):(r=(this||i).oa-r-(this||i).startTime,.001<=Math.abs(r)&&this.offset(r))};L("shaka.media.SegmentReference",Ph);Ph.prototype.syncAgainst=Ph.prototype.sg;Ph.prototype.offset=Ph.prototype.offset;Ph.prototype.getThumbnailSprite=Ph.prototype.zi;Ph.prototype.setThumbnailSprite=Ph.prototype.rh;Ph.prototype.hasByterangeOptimization=Ph.prototype.Hi;Ph.prototype.markAsByterangeOptimization=Ph.prototype.bh;Ph.prototype.isLastPartial=Ph.prototype.Li;Ph.prototype.markAsLastPartial=Ph.prototype.dh;Ph.prototype.isPartial=Ph.prototype.Mi;Ph.prototype.markAsPartial=Ph.prototype.eh;Ph.prototype.isIndependent=Ph.prototype.Ki;Ph.prototype.markAsNonIndependent=Ph.prototype.xe;Ph.prototype.isPreload=Ph.prototype.Ni;Ph.prototype.markAsPreload=Ph.prototype.Tf;Ph.prototype.markAsUnavailable=Ph.prototype.Ti;Ph.prototype.getStatus=Ph.prototype.sc;Ph.prototype.getTileDuration=Ph.prototype.Ai;Ph.prototype.getTilesLayout=Ph.prototype.Bi;Ph.prototype.getEndByte=Ph.prototype.Mb;Ph.prototype.getStartByte=Ph.prototype.Pb;Ph.prototype.getEndTime=Ph.prototype.di;Ph.prototype.getStartTime=Ph.prototype.getStartTime;Ph.prototype.getUris=Ph.prototype.ba;var vo=0,yo=1;Ph.Status={zj:vo,qk:yo,Sj:2};function Sh(i){return!i||1==i.length&&1e-6>i.end(0)-i.start(0)?null:i.length?i.end(i.length-1):null}function Th(i,r){return!(!i||!i.length||1==i.length&&1e-6>i.end(0)-i.start(0)||r>i.end(i.length-1))&&r>=i.start(0)}function Uh(i,r){if(!i||!i.length||1==i.length&&1e-6>i.end(0)-i.start(0))return 0;var o=0;i=t(Vh(i));for(var s=i.next();!s.done;s=i.next()){var p=s.value;s=p.start;p=p.end;p>r&&(o+=p-Math.max(s,r))}return o}function Wh(i,r,o){if(!i||!i.length||1==i.length&&1e-6>i.end(0)-i.start(0))return null;i=Vh(i).findIndex((function(i,s,p){return i.start>r&&(0==s||p[s-1].end-r<=o)}));return 0<=i?i:null}function Vh(i){if(!i)return[];for(var r=[],o=0;o<i.length;o++)r.push({start:i.start(o),end:i.end(o)});return r}
/*
      @license
      Shaka Player
      Copyright 2022 Google LLC
      SPDX-License-Identifier: Apache-2.0
      */
function Xh(){}function Yh(i,r){return r+10<=i.length&&73===i[r]&&68===i[r+1]&&51===i[r+2]&&255>i[r+3]&&255>i[r+4]&&128>i[r+6]&&128>i[r+7]&&128>i[r+8]&&128>i[r+9]}function Zh(i,r){return r+10<=i.length&&51===i[r]&&68===i[r+1]&&73===i[r+2]&&255>i[r+3]&&255>i[r+4]&&128>i[r+6]&&128>i[r+7]&&128>i[r+8]&&128>i[r+9]}function $h(i,r){var o=(i[r]&127)<<21;o|=(i[r+1]&127)<<14;o|=(i[r+2]&127)<<7;return o|i[r+3]&127}function ai(i){var r={key:i.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===i.type){if(2>i.size||3!==i.data[0])return null;var o=i.data.subarray(1).indexOf(0);if(-1===o)return null;var s=Tf(lc(i.data,1,o)),p=i.data[2+o],y=i.data.subarray(3+o).indexOf(0);if(-1===y)return null;var A,T=Tf(lc(i.data,3+o,y));A="--\x3e"===s?Tf(lc(i.data,4+o+y)):mc(i.data.subarray(4+o+y));r.mimeType=s;r.pictureType=p;r.description=T;r.data=A;return r}if("TXXX"===i.type){if(2>i.size||3!==i.data[0])return null;s=i.data.subarray(1).indexOf(0);if(-1===s)return null;o=Tf(lc(i.data,1,s));i=Tf(lc(i.data,2+s)).replace(/\0*$/,"");r.description=o;r.data=i;return r}if("WXXX"===i.type){if(2>i.size||3!==i.data[0])return null;s=i.data.subarray(1).indexOf(0);if(-1===s)return null;o=Tf(lc(i.data,1,s));i=Tf(lc(i.data,2+s)).replace(/\0*$/,"");r.description=o;r.data=i;return r}if("PRIV"===i.type){if(2>i.size)return null;o=i.data.indexOf(0);if(-1===o)return null;o=Tf(lc(i.data,0,o));r.description=o;"com.apple.streaming.transportStreamTimestamp"==o?(o=i.data.subarray(o.length+1),i=o[3]&1,o=(o[4]<<23)+(o[5]<<15)+(o[6]<<7)+o[7],o/=45,i&&(o+=47721858.84),r.data=o):(i=mc(i.data.subarray(o.length+1)),r.data=i);return r}if("T"===i.type[0]){if(2>i.size||3!==i.data[0])return null;i=Tf(i.data.subarray(1)).replace(/\0*$/,"");r.data=i;return r}return"W"===i.type[0]?(i=Tf(i.data).replace(/\0*$/,""),r.data=i,r):i.data?(r.data=mc(i.data),r):null}function bi(i){for(var r=0,o=[];Yh(i,r);){var s=$h(i,r+6);i[r+5]>>6&1&&(r+=10);r+=10;for(s=r+s;r+10<s;){var p=i.subarray(r),y=$h(p,4);p={type:String.fromCharCode(p[0],p[1],p[2],p[3]),size:y,data:p.subarray(10,10+y)};(y=ai(p))&&o.push(y);r+=p.size+10}Zh(i,r)&&(r+=10)}return o}function ci(i,r){for(var o=r=void 0===r?0:r,s=0;Yh(i,r);)i[r+5]>>6&1&&(s+=10),s+=10,s+=$h(i,r+6),Zh(i,r+10)&&(s+=10),r+=s;return 0<s?i.subarray(o,o+s):new Uint8Array([])}L("shaka.util.Id3Utils",Xh);Xh.getID3Data=ci;Xh.getID3Frames=bi;function di(i,r){var o=null,s=null,p=null,y=i.O();r&1&&(p=i.Uc());r&2&&i.skip(4);r&8&&(o=i.O());r&16&&(s=i.O());return{trackId:y,Og:o,Qh:s,wk:p}}function ei(i,r){return 1==r?(r=i.O(),i=i.O(),{baseMediaDecodeTime:r*Math.pow(2,32)+i}):{baseMediaDecodeTime:i.O()}}function fi(i,r){1==r?(i.skip(8),i.skip(8)):(i.skip(4),i.skip(4));r=i.O();i.skip(4);i=i.Ua();return{timescale:r,language:String.fromCharCode(96+(i>>10))+String.fromCharCode(96+((i&960)>>5))+String.fromCharCode(96+(i&31))}}function gi(i,r,o){var s=i.O(),p=[],y=null;o&1&&(y=i.O());o&4&&i.skip(4);for(var A=0;A<s;A++){var T={gg:null,sampleSize:null,Ke:null};o&256&&(T.gg=i.O());o&512&&(T.sampleSize=i.O());o&1024&&i.skip(4);o&2048&&(T.Ke=0==r?i.O():i.ih());p.push(T)}return{Ak:s,lh:p,Ph:y}}function hi(i,r){1==r?(i.skip(8),i.skip(8)):(i.skip(4),i.skip(4));var o=i.O();1==r?i.skip(8):i.skip(4);i.skip(4);i.skip(8);i.skip(2);i.skip(2);i.skip(2);i.skip(2);i.skip(36);r=i.Ua()+i.Ua()/16;i=i.Ua()+i.Ua()/16;return{trackId:o,width:r,height:i}}function ii(i){for(var r,o,s="mp4a";i.xa();){r=i.ra();for(var p=i.ra();p&128;)p=i.ra();if(3==r)i.Ua(),p=i.ra(),p&128&&i.Ua(),p&64&&i.skip(i.ra()),p&32&&i.Ua();else if(4==r)o=i.ra(),i.skip(12);else if(5==r)break}o&&(s+="."+this.g(o),5==r&&i.xa()&&(r=i.ra(),o=(r&248)>>3,31===o&&i.xa()&&(o=32+((r&7)<<3)+((i.ra()&224)>>5)),s+="."+o));return{wa:s}}function ki(i,r){i.skip(87);return{wa:r+"."+this.g(i.ra())+this.g(i.ra())+this.g(i.ra())}}function li(i){i=i.O();return{wa:fg(i)}}function mi(r,o){(this||i).j=r;if(void 0===o?0:o){o=new Uint8Array(r.byteLength);for(var s=0,p=0;p<r.byteLength;p++)2<=p&&3==r[p]&&0==r[p-1]&&0==r[p-2]||(o[s]=r[p],s++);(this||i).j=lc(o,0,s)}(this||i).i=(this||i).j.byteLength;(this||i).g=(this||i).h=0}function ni(i){var r=i.j.byteLength-i.i,o=new Uint8Array(4),s=Math.min(4,i.i);0!==s&&(o.set(i.j.subarray(r,r+s)),i.h=new Zf(o,0).O(),i.g=8*s,i.i-=s)}function oi(i,r){if(i.g<=r){r-=i.g;var o=Math.floor(r/8);r-=8*o;i.g-=o;ni(i)}i.h<<=r;i.g-=r}function pi(i,r){var o=Math.min(i.g,r),s=i.h>>>32-o;i.g-=o;0<i.g?i.h<<=o:0<i.i&&ni(i);o=r-o;return 0<o?s<<o|pi(i,o):s}function qi(i){var r;for(r=0;r<i.g;++r)if(0!==(i.h&2147483648>>>r))return i.h<<=r,i.g-=r,r;ni(i);return r+qi(i)}function ri(i){oi(i,1+qi(i))}function R(i){var r=qi(i);return pi(i,r+1)-1}function si(i){i=R(i);return 1&i?1+i>>>1:-1*(i>>>1)}function S(i){return 1===pi(i,1)}function ti(i){return pi(i,8)}function ui(i,r){for(var o=8,s=8,p=0;p<r;p++)0!==s&&(s=si(i),s=(o+s+256)%256),o=0===s?o:s}function vi(i){ti(i);R(i);return R(i)}L("shaka.util.ExpGolomb",mi);function wi(){(this||i).D=null;(this||i).G=!1;(this||i).m=(this||i).H=null;(this||i).j=[];(this||i).g=[];(this||i).s=(this||i).u=null;(this||i).i=[];(this||i).h=[];(this||i).C=null;(this||i).l=[]}p=wi.prototype;p.clearData=function(){(this||i).j=[];(this||i).g=[];(this||i).i=[];(this||i).h=[];(this||i).l=[]};p.parse=function(r){if(564>r.length)return this||i;for(var o=Math.max(0,xi(r)),s=r.length-(r.length+o)%188,p=!1,y=o;y<s;y+=188)if(71==r[y]){var A=!!(r[y+1]&64),T=((r[y+1]&31)<<8)+r[y+2];if(1<(r[y+3]&48)>>4){var x=y+5+r[y+4];if(x==y+188)continue}else x=y+4;switch(T){case 0:A&&(x+=r[x]+1);(this||i).D=(r[x+10]&31)<<8|r[x+11];break;case 17:case 8191:break;case(this||i).D:A&&(x+=r[x]+1);A=r;T={audio:-1,video:-1,pe:-1,audioCodec:"",videoCodec:""};var I=x+3+((A[x+1]&15)<<8|A[x+2])-4;for(x+=12+((A[x+10]&15)<<8|A[x+11]);x<I;){var C=(A[x+1]&31)<<8|A[x+2],M=(A[x+3]&15)<<8|A[x+4];switch(A[x]){case 6:if(-1==T.audio&&0<M)for(var N=x+5,_=M;2<_;){switch(A[N]){case 106:T.audio=C;T.audioCodec="ac3";break;case 122:T.audio=C,T.audioCodec="ec3"}var j=A[N+1]+2;N+=j;_-=j}break;case 15:-1==T.audio&&(T.audio=C,T.audioCodec="aac");break;case 21:-1==T.pe&&(T.pe=C);break;case 27:-1==T.video&&(T.video=C,T.videoCodec="avc");break;case 3:case 4:-1==T.audio&&(T.audio=C,T.audioCodec="mp3");break;case 36:-1==T.video&&(T.video=C,T.videoCodec="hvc");break;case 129:-1==T.audio&&(T.audio=C,T.audioCodec="ac3");break;case 132:case 135:-1==T.audio&&(T.audio=C,T.audioCodec="ec3")}x+=M+5}A=T;-1!=A.video&&((this||i).H=A.video,(this||i).m=A.videoCodec);-1!=A.audio&&((this||i).u=A.audio,(this||i).s=A.audioCodec);-1!=A.pe&&((this||i).C=A.pe);p&&!(this||i).G&&(p=!1,y=o-188);(this||i).G=!0;break;case(this||i).H:x=r.subarray(x,y+188);A?(this||i).j.push([x]):(this||i).j.length&&(this||i).j[(this||i).j.length-1]&&(this||i).j[(this||i).j.length-1].push(x);break;case(this||i).u:x=r.subarray(x,y+188);A?(this||i).i.push([x]):(this||i).i.length&&(this||i).i[(this||i).i.length-1]&&(this||i).i[(this||i).i.length-1].push(x);break;case(this||i).C:x=r.subarray(x,y+188);A?(this||i).l.push([x]):(this||i).l.length&&(this||i).l[(this||i).l.length-1]&&(this||i).l[(this||i).l.length-1].push(x);break;default:p=!0}}return this||i};function yi(i){if(1!==(i[0]<<16|i[1]<<8|i[2]))return null;var r={data:new Uint8Array(0),packetLength:i[4]<<8|i[5],pts:null,dts:null,nalus:[]};if(r.packetLength&&r.packetLength>i.byteLength-6)return null;var o=i[7];o&192&&(r.pts=536870912*(i[9]&14)+4194304*(i[10]&255)+16384*(i[11]&254)+128*(i[12]&255)+(i[13]&254)/2,r.dts=r.pts,o&64&&(r.dts=536870912*(i[14]&14)+4194304*(i[15]&255)+16384*(i[16]&254)+128*(i[17]&255)+(i[18]&254)/2));o=i[8]+9;if(i.byteLength<=o)return null;r.data=i.subarray(o);return r}p.Zi=function(i){Me("TsParser.parseAvcNalus","Please use parseNalus function instead.");return this.ag(i)};p.ag=function(r,o,s){var p=r.pts?r.pts/9e4:null;r=r.data;var y=r.byteLength,A=1;"hvc"==(this||i).m&&(A=2);for(var T,x=s||0,I=[],C=-1,M=0,N=0;N<y;++N){var _=r[N];if(_){if(2<=x&&1==_){o&&!I.length&&-1==C&&(_=N-(3<x?3:x),s&&0!=_&&(_=r.subarray(0,_),o.data=tg(o.data,_),o.fullData=tg(o.fullData,_)));0<=C?(x=N-((3<x?3:x)+1),I.push({data:r.subarray(C+A,x+1),fullData:r.subarray(C,x+1),type:M,time:p})):o&&!I.length&&(C=N-x,0<C&&(C=r.subarray(0,C),o.data=tg(o.data,C),o.fullData=tg(o.fullData,C)));if(N>=y-A)return I;N++;C=N;M="hvc"==(this||i).m?r[N]>>1&63:r[N]&31}x=0}else x++;N>=y-1&&0<=C&&0<=x&&(T={data:r.subarray(C+A,y),fullData:r.subarray(C,y),type:M,time:p})}T&&I.push(T);!I.length&&o&&(o.data=tg(o.data,r),o.fullData=tg(o.fullData,r));return I};p.getMetadata=function(){for(var r=[],o=t((this||i).l),s=o.next();!s.done;s=o.next())s=tg.apply(lg,w(s.value)),(s=yi(s))&&r.push({cueTime:s.pts?s.pts/9e4:null,data:s.data,frames:bi(s.data),dts:s.dts,pts:s.pts});return r};p.qc=function(){if((this||i).i.length&&!(this||i).h.length){for(var r=!1,o=t((this||i).i),s=o.next();!s.done;s=o.next()){var p=tg.apply(lg,w(s.value)),y=yi(p);s=(this||i).h.length?(this||i).h[(this||i).h.length-1]:null;y&&null!=y.pts&&null!=y.dts&&(!s||s.pts!=y.pts&&s.dts!=y.dts)?((this||i).h.length&&y.dts<(s.dts||0)&&(r=!0),(this||i).h.push(y)):(this||i).h.length&&(p=y?y.data:p)&&(s=(this||i).h.pop(),s.data=tg(s.data,p),(this||i).h.push(s))}r&&((this||i).h=(this||i).h.sort((function(i,r){var o=(i.pts||0)-(r.pts||0);return(i.dts||0)-(r.dts||0)||o})))}return(this||i).h};p.Oc=function(r){r=void 0===r||r;if((this||i).j.length&&!(this||i).g.length){for(var o=!1,s=t((this||i).j),p=s.next();!p.done;p=s.next()){var y=tg.apply(lg,w(p.value)),A=yi(y);p=(this||i).g.length?(this||i).g[(this||i).g.length-1]:null;A&&null!=A.pts&&null!=A.dts&&(!p||p.pts!=A.pts&&p.dts!=A.dts)?((this||i).g.length&&A.dts<(p.dts||0)&&(o=!0),(this||i).g.push(A)):(this||i).g.length&&(y=A?A.data:y)&&(p=(this||i).g.pop(),p.data=tg(p.data,y),(this||i).g.push(p))}if(r){var T;s=t((this||i).g);for(p=s.next();!p.done;p=s.next())p=p.value,p.nalus=this.ag(p,T,void 0),p.nalus.length&&(T=p.nalus[p.nalus.length-1]);(this||i).g=(this||i).g.filter((function(i){return i.nalus.length}))}o&&((this||i).g=(this||i).g.sort((function(i,r){var o=(i.pts||0)-(r.pts||0);return(i.dts||0)-(r.dts||0)||o})))}return r?(this||i).g:(r=(this||i).g,(this||i).g=[],r)};p.getStartTime=function(i){if("audio"==i){i=null;var r=this.qc();r.length&&(i=r[0],i=Math.min(i.dts,i.pts)/9e4);return i}return"video"==i?(i=null,r=this.Oc(!1),r.length&&(i=r[0],i=Math.min(i.dts,i.pts)/9e4),i):null};p.sd=function(){return{audio:(this||i).s,video:(this||i).m}};p.le=function(){for(var i=[],r=t(this.Oc()),o=r.next();!o.done;o=r.next())i.push.apply(i,w(o.value.nalus));return i};p.Ei=function(){Me("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var i=this.Lf();return{height:i.height,width:i.width}};p.Lf=function(){return"hvc"==(this||i).m?zi(this||i):Ai(this||i)};function Ai(i){var r={height:null,width:null,wa:null};i=i.le();if(!i.length)return r;i=i.find((function(i){return 7==i.type}));if(!i)return r;i=new mi(i.data);var o=ti(i),s=ti(i),p=ti(i);ri(i);if(wo.includes(o)){var y=R(i);3===y&&oi(i,1);ri(i);ri(i);oi(i,1);if(S(i)){y=3!==y?8:12;for(var A=0;A<y;A++)S(i)&&ui(i,6>A?16:64)}}ri(i);y=R(i);if(0===y)R(i);else if(1===y)for(oi(i,1),ri(i),ri(i),y=R(i),A=0;A<y;A++)ri(i);ri(i);oi(i,1);y=R(i);A=R(i);var T=pi(i,1);0===T&&oi(i,1);oi(i,1);var x=0,I=0,C=0,M=0;S(i)&&(x=R(i),I=R(i),C=R(i),M=R(i));r.height=String((2-T)*(A+1)*16-2*C-2*M);r.width=String(16*(y+1)-2*x-2*I);r.wa="avc1."+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+s.toString(16).toUpperCase()).slice(-2)+("0"+p.toString(16).toUpperCase()).slice(-2);return r}function zi(i){var r={height:null,width:null,wa:null};i=i.le();if(!i.length)return r;i=i.find((function(i){return 33==i.type}));if(!i)return r;var o=new mi(i.fullData,!0);ti(o);ti(o);pi(o,4);var s=pi(o,3);S(o);var p=pi(o,2),y=pi(o,1),A=pi(o,5),T=pi(o,32);i=ti(o);for(var x=ti(o),I=ti(o),C=ti(o),M=ti(o),N=ti(o),_=ti(o),j=[],B=[],z=0;z<s;z++)j.push(S(o)),B.push(S(o));if(0<s)for(z=s;8>z;z++)pi(o,2);for(z=0;z<s;z++)j[z]&&pi(o,88),B[z]&&ti(o);R(o);s=R(o);3==s&&pi(o,1);j=R(o);B=R(o);var G=z=0,q=0,H=0;S(o)&&(z+=R(o),G+=R(o),q+=R(o),H+=R(o));r.width=String(j-(z+G)*(1===s||2===s?2:1));r.height=String(B-(q+H)*(1===s?2:1));o=function(i){for(var r=0,o=0;32>o;o++)r|=(i>>o&1)<<31-o;return r>>>0}(T);y=1==y?"H":"L";p="hvc1."+["","A","B","C"][p]+A;p+="."+o.toString(16).toUpperCase();p+="."+y+_;N&&(p+="."+N.toString(16).toUpperCase());M&&(p+="."+M.toString(16).toUpperCase());C&&(p+="."+C.toString(16).toUpperCase());I&&(p+="."+I.toString(16).toUpperCase());x&&(p+="."+x.toString(16).toUpperCase());i&&(p+="."+i.toString(16).toUpperCase());r.wa=p;return r}function Ci(i){return!(0>xi(i))}function xi(i){for(var r=Math.min(1e3,i.length-564),o=0;o<r;){if(71==i[o]&&71==i[o+188]&&71==i[o+376])return o;o++}return-1}L("shaka.util.TsParser",wi);wi.syncOffset=xi;wi.probe=Ci;wi.prototype.getVideoInfo=wi.prototype.Lf;wi.prototype.getVideoResolution=wi.prototype.Ei;wi.prototype.getVideoNalus=wi.prototype.le;wi.prototype.getCodecs=wi.prototype.sd;wi.prototype.getStartTime=wi.prototype.getStartTime;wi.prototype.getVideoData=wi.prototype.Oc;wi.prototype.getAudioData=wi.prototype.qc;wi.prototype.getMetadata=wi.prototype.getMetadata;wi.prototype.parseNalus=wi.prototype.ag;wi.prototype.parseAvcNalus=wi.prototype.Zi;wi.prototype.parse=wi.prototype.parse;wi.prototype.clearData=wi.prototype.clearData;wi.Timescale=9e4;var wo=[100,110,122,244,44,83,86,118,128,138,139,134];function Di(r,o,s){(this||i).g=null;(this||i).s=-1;(this||i).l=r;(this||i).i=o;(this||i).m=s;(this||i).j=!1;e:{"undefined"===typeof libDPIModule&&Ra("Could not find LCEVC Library dependencies on this page");if("undefined"!==typeof LCEVCdec)(this||i).h=LCEVCdec;else{if("undefined"===typeof LcevcDil){Ra("Could not find LCEVC Library on this page");r=!1;break e}(this||i).h=LcevcDil,(this||i).j=!0,Me("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}"undefined"===typeof(this||i).h.SupportObject?(Ra("Could not find LCEVC Library on this page"),r=!1):((this||i).h.SupportObject.SupportStatus||Ra((this||i).h.SupportObject.SupportError),r="undefined"!==typeof(this||i).h&&"undefined"!==typeof libDPIModule&&(this||i).i instanceof HTMLCanvasElement&&(this||i).h.SupportObject.SupportStatus)}r&&!(this||i).g&&(this||i).h.SupportObject.webGLSupport((this||i).i)&&((this||i).i.classList.remove("shaka-hidden"),(this||i).g=(this||i).j?new(this||i).h.LcevcDil((this||i).l,(this||i).i,(this||i).m):new(this||i).h.LCEVCdec((this||i).l,(this||i).i,(this||i).m))}function Ei(i){i.g&&i.i.classList.add("shaka-hidden")}Di.prototype.release=function(){(this||i).g&&((this||i).g.close(),(this||i).g=null)};function Fi(i,r,o){var s=xo,p=qo;switch(r.mimeType){case"video/webm":s=Do;break;case"video/mp4":s=_o}switch(o){case"DASH":p=Go;break;case"HLS":p=Bo}i.g&&(i.s=r.id,i.g.setLevelSwitching(r.id,!0),i.g.setContainerFormat(s),i.j||i.g.setStreamingFormat(p))}L("shaka.lcevc.Dec",Di);Di.prototype.release=Di.prototype.release;var xo=0,Do=1,_o=2,Bo=0,Go=1,qo=-1;function Mi(r,o,s,p){var y=this||i;(this||i).i=r;(this||i).G=null;(this||i).H=o;(this||i).g={};(this||i).I={};(this||i).ha={};(this||i).h=null;(this||i).Z=!1;(this||i).ua=s||function(){};(this||i).N=p||null;(this||i).j={};(this||i).u=new Kf;(this||i).m={};(this||i).J=null;(this||i).L=new mf;(this||i).M="";(this||i).$=!1;(this||i).l=Ni(this||i,(this||i).L);(this||i).D=!1;(this||i).K=new If((function(){return Oi(y)}));(this||i).C=!1;(this||i).W="UNKNOWN";(this||i).Aa=(this||i).sa=!1;(this||i).va=new mf;(this||i).s=!1;(this||i).aa=!0;(this||i).V=null}function Ni(i,o){if(r.ManagedMediaSource){i.i.disableRemotePlayback=!0;var s=new ManagedMediaSource;i.u.o(s,"startstreaming",(function(){i.aa=!0}));i.u.o(s,"endstreaming",(function(){i.aa=!1}));i.u.na(s,"sourceopen",(function(){URL.revokeObjectURL(i.M);o.resolve()}));i.u.na(i.i,"playing",(function(){i.$=!0}));i.M=Ho(s);i.i.src=i.M;return s}s=new MediaSource;i.u.na(s,"sourceopen",(function(){URL.revokeObjectURL(i.M);o.resolve()}));i.u.na(i.i,"playing",(function(){i.$=!0}));i.M=Ho(s);i.i.src=i.M;return s}p=Mi.prototype;p.destroy=function(){return(this||i).K.destroy()};function Oi(i){var r,o,s,p,y,A,T,x;return K((function(I){if(1==I.g){r=[];for(o in i.j)for(s=i.j[o],p=s[0],i.j[o]=s.slice(0,1),p&&r.push(p.p.catch(yd)),y=t(s.slice(1)),A=y.next();!A.done;A=y.next())T=A.value,T.p.reject(new P(2,7,7003,void 0));i.h&&r.push(i.h.destroy());i.H&&r.push(i.H.destroy());for(x in i.m)r.push(i.m[x].destroy());return D(I,Promise.all(r),2)}i.u&&(i.u.release(),i.u=null);i.i&&(i.i.removeAttribute("src"),i.i.load(),i.i=null);i.G=null;i.l=null;i.h=null;i.H=null;i.g={};i.m={};i.J=null;i.j={};i.N=null;F(I)}))}p.init=function(r,o,s,p){o=void 0!==o&&o;s=void 0===s?"UNKNOWN":s;p=void 0!==p&&p;var y,A,T,x,I,C=this||i;return K((function(i){if(1==i.g)return y=re,D(i,C.L,2);C.C=o;C.W=s;C.sa=p;C.Aa=!C.C&&"HLS"==C.W&&!C.sa;A=t(r.keys());for(T=A.next();!T.done;T=A.next())x=T.value,I=r.get(x),Qi(C,x,I,I.codecs),C.s?(C.j[y.U]=[],C.j[y.ia]=[]):C.j[x]=[];F(i)}))};function Qi(i,r,o,s,p){p=void 0!==p&&p;var y=dd(o.mimeType,s);if(r==ne)Ri(i,y,i.C,o.external);else{var A=i.G.forceTransmux||p;(!ac(y)||!i.C&&_r.includes(y))&&(A=!0);p=fd(o.mimeType,s);if(A){A=Cb("audio",(s||"").split(","));s=Cb("video",(s||"").split(","));if(A&&s){i.s=!0;Qi(i,"audio",o,A,!0);Qi(i,"video",o,s,!0);return}(s=Yc(p))&&(y=s(),i.m[r]=y,y=y.convertCodecs(r,p))}p=y+i.G.sourceBufferExtraFeatures;Jf(i.K);try{var T=i.l.addSourceBuffer(p)}catch(r){throw new P(2,3,3015,r,"The mediaSource_ status was "+i.l.readyState+" expected 'open'")}i.C&&(T.mode=Jo);i.u.o(T,"error",(function(){i.j[r][0].p.reject(new P(2,3,3014,i.i.error?i.i.error.code:0))}));i.u.o(T,"updateend",(function(){return Ti(i,r)}));i.g[r]=T;i.I[r]=y;i.ha[r]=!!o.drmInfos.length}}p.configure=function(r){(this||i).G=r};function Ri(i,r,o,s){i.h||(i.h=new od(i.H));var p=i.h;s=s||i.Z;i=i.W;"application/cea-608"==r||"application/cea-708"==r?p.i=null:(p.i=(0,Xr[r])(),p.i.setSequenceMode?p.i.setSequenceMode(o):Ra('Text parsers should have a "setSequenceMode" method!'),p.i.setManifestType?p.i.setManifestType(i):Ra('Text parsers should have a "setManifestType" method!'),p.C=s)}function Ui(i){return!i.D&&(!i.l||"ended"==i.l.readyState)}function Vi(i,r){i.D||!Object.keys(i.g).length?i=null:r==ne?i=i.h.g:(i=Wi(i,r),i=!i||1==i.length&&1e-6>i.end(0)-i.start(0)?null:1==i.length&&0>i.start(0)?0:i.length?i.start(0):null);return i}function Xi(i,r){return i.D?null:r==ne?i.h.h:Sh(Wi(i,r))}function Yi(i,r,o){if(i.D)return 0;if(r==ne)return i=i.h,null==i.h||i.h<o?0:i.h-Math.max(o,i.g);i=Wi(i,r);return Uh(i,o)}p.Lb=function(){var r={total:(this||i).D?[]:Vh((this||i).i.buffered),audio:(this||i).D?[]:Vh(Wi(this||i,"audio")),video:(this||i).D?[]:Vh(Wi(this||i,"video")),text:[]};if((this||i).h){var o=(this||i).h.g,s=(this||i).h.h;null!=o&&null!=s&&r.text.push({start:o,end:s})}return r};function Wi(i,r){try{return i.g[r].buffered}catch(i){return null}}function Zi(i,r,o,s,p,y){var A=null,T=lc(o);if(_r.includes(p))y=bi(T),y.length&&s&&((r=y.find((function(i){return"com.apple.streaming.transportStreamTimestamp"===i.description})))&&r.data&&(A=Math.round(r.data)/1e3),i.ua([{cueTime:s.startTime,data:T,frames:y,dts:s.startTime,pts:s.startTime}],0,s.endTime));else if(p.includes("/mp4")&&s&&0==s.timestampOffset&&s.ka&&s.ka.timescale){var x=s.ka.timescale;if(!isNaN(x)){var I=0,C=!1;(new bg).box("moof",gg).box("traf",gg).T("tfdt",(function(i){I=ei(i.reader,i.version).baseMediaDecodeTime/x;C=!0;i.parser.stop()})).parse(o,!0);C&&(A=I)}}else p.includes("/mp4")||p.includes("/webm")||!Ci(T)||(T=(new wi).parse(T),r=T.getStartTime(r),null!=r&&(A=r),T=T.getMetadata(),T.length&&i.ua(T,y,s?s.endTime:null));return A}function $i(i,r,o,s,p,y,A,T,x,I){A=void 0!==A&&A;T=void 0!==T&&T;x=void 0!==x&&x;I=void 0!==I&&I;var C,M,N,_,j,B,z,G,q,H,Y;return K((function(Q){switch(Q.g){case 1:C=re;if(r!=C.Da){Q.F(2);break}if(!i.C){Q.F(3);break}return D(Q,i.va,4);case 4:M=Q.h,i.h.u=M;case 3:return D(Q,rd(i.h,o,s?s.startTime:null,s?s.endTime:null,s?s.ba()[0]:null),5);case 5:return Q.return();case 2:if(I||!i.s){Q.F(6);break}return D(Q,$i(i,C.U,o,s,p,y,A,T,x,!0),7);case 7:return D(Q,$i(i,C.ia,o,s,p,y,A,T,x,!0),8);case 8:return Q.return();case 6:if(!i.g[r])return Q.return();N=i.g[r].timestampOffset;_=i.I[r];i.m[r]&&(_=i.m[r].getOriginalMimeType());s&&(j=Zi(i,r,o,s,_,N),null!=j&&(B=s.startTime-j,z=Math.abs(N-B),(.001<=z||A||T)&&(!x||0<B||!N)&&(N=B,i.Aa&&(aj(i,r,(function(){return bj(i,r)})),aj(i,r,(function(){return cj(i,r,N)})))),G=r==C.ia||!(C.ia in i.g),i.C&&G&&i.va.resolve(N)));y&&r==C.ia&&(i.h||Ri(i,"application/cea-608",i.C,!1),i.J||(q=_.split(";",1)[0],i.J=new rc(q)),s?(H=i.J.i(o),H.length&&wd(i.h,H,s.startTime,s.endTime,N)):i.J.init(o));if(!i.m[r]){Q.F(9);break}return D(Q,i.m[r].transmux(o,p,s,i.l.duration,r),10);case 10:o=Q.h;case 9:return o=dj(i,o,s?s.startTime:null,r),s&&i.C&&r!=C.Da&&(A||T)&&(Y=s.startTime,aj(i,r,(function(){return bj(i,r)})),aj(i,r,(function(){return cj(i,r,Y)}))),D(Q,aj(i,r,(function(){var s=o;if("video"==r&&i.N){var p=i.N;p.g&&p.g.appendBuffer(s,"video",p.s,-N)}i.g[r].appendBuffer(s)})),11);case 11:F(Q)}}))}function ej(i,r){var o=Xi(i,"video")||0;td(i.h,r,o)}function fj(i){i.h&&td(i.h,"",0)}p.remove=function(r,o,s){var p,y=this||i;return K((function(i){return 1==i.g?(p=re,r==p.Da?D(i,y.h.remove(o,s),0):D(i,aj(y,r,(function(){return gj(y,r,o,s)})),4)):y.s?D(i,aj(y,p.U,(function(){return gj(y,p.U,o,s)})),0):i.F(0)}))};function hj(i,r){var o;return K((function(s){return 1==s.g?(o=re,r==o.Da?i.h?D(s,i.h.remove(0,Infinity),0):s.return():D(s,aj(i,r,(function(){return gj(i,r,0,i.l.duration)})),4)):i.s?D(s,aj(i,o.U,(function(){return gj(i,o.U,0,i.l.duration)})),0):s.F(0)}))}p.flush=function(r){var o,s=this||i;return K((function(i){return 1==i.g?(o=re,r==o.Da?i.return():D(i,aj(s,r,(function(){s.i.currentTime-=.001;Ti(s,r)})),2)):s.s?D(i,aj(s,o.U,(function(){var i=o.U;s.i.currentTime-=.001;Ti(s,i)})),0):i.F(0)}))};function ij(i,r,o,s,p,y,A,T,x){var I,C,M;return K((function(N){if(1==N.g){I=re;if(r==I.Da)return y||(i.h.u=o),sd(i.h,s,p),N.return();C=[];return D(N,jj(i,r,A,T,x),2)}M=N.h;M||(C.push(aj(i,r,(function(){return bj(i,r)}))),i.s&&C.push(aj(i,I.U,(function(){return bj(i,I.U)}))));y||(C.push(aj(i,r,(function(){return cj(i,r,o)}))),i.s&&C.push(aj(i,I.U,(function(){return cj(i,I.U,o)}))));C.push(aj(i,r,(function(){i.g[r].appendWindowStart=0;i.g[r].appendWindowEnd=p;i.g[r].appendWindowStart=s;Ti(i,r)})));i.s&&C.push(aj(i,I.U,(function(){var r=I.U;i.g[r].appendWindowStart=0;i.g[r].appendWindowEnd=p;i.g[r].appendWindowStart=s;Ti(i,r)})));return D(N,Promise.all(C),0)}))}function kj(i,r,o){var s;return K((function(p){if(1==p.g){s=re;if(r==s.Da)return p.return();aj(i,r,(function(){return bj(i,r)}));i.s&&aj(i,s.U,(function(){return bj(i,s.U)}));return D(p,aj(i,r,(function(){return cj(i,r,o)})),2)}return i.s?D(p,aj(i,s.U,(function(){return cj(i,s.U,o)})),0):p.F(0)}))}p.endOfStream=function(r){var o=this||i;return K((function(i){return D(i,lj(o,(function(){Ui(o)||"closed"===o.l.readyState||(r?o.l.endOfStream(r):o.l.endOfStream())})),0)}))};p.gb=function(r){var o=this||i;return K((function(i){return D(i,lj(o,(function(){if(r<o.l.duration)for(var i in o.g){var s={start:function(){},p:new mf};o.j[i].unshift(s)}o.l.duration=r;o.V=r})),0)}))};p.getDuration=function(){return(this||i).l.duration};function gj(i,r,o,s){s<=o?Ti(i,r):i.g[r].remove(o,s)}function bj(i,r){var o=i.g[r].appendWindowStart,s=i.g[r].appendWindowEnd;i.g[r].abort();i.g[r].appendWindowStart=o;i.g[r].appendWindowEnd=s;Ti(i,r)}function cj(i,r,o){0>o&&(o+=.001);i.g[r].timestampOffset=o;Ti(i,r)}function Ti(i,r){if(!i.D){var o=i.j[r][0];o&&(o.p.resolve(),mj(i,r))}}function aj(i,r,o){Jf(i.K);o={start:o,p:new mf};i.j[r].push(o);1==i.j[r].length&&nj(i,r);return o.p}function lj(i,r){var o,s,p,y,A,T,x;return K((function(I){switch(I.g){case 1:Jf(i.K);o=[];s={};for(p in i.g)s.dd=new mf,y={start:function(i){return function(){return i.dd.resolve()}}(s),p:s.dd},i.j[p].push(y),o.push(s.dd),1==i.j[p].length&&y.start(),s={dd:s.dd};ta(I,2);return D(I,Promise.all(o),4);case 4:va(I,3);break;case 2:throw A=wa(I),A;case 3:return ta(I,5,6),D(I,r(),6);case 6:xa(I);for(T in i.g)mj(i,T);ya(I,0);break;case 5:throw x=wa(I),new P(2,3,3015,x,i.i.error||"No error in the media element")}}))}function mj(i,r){i.j[r].shift();nj(i,r)}function nj(i,r){var o=i.j[r][0];if(o)try{o.start()}catch(s){"QuotaExceededError"==s.name?o.p.reject(new P(2,3,3017,r)):o.p.reject(new P(2,3,3015,s,i.i.error||"No error in the media element")),mj(i,r)}}function dj(i,r,o,s){var p=i.ha[s];i.G.insertFakeEncryptionInInit&&null==o&&p&&(Kd()||Id()||Jd("SOPOpenBrowser"))&&"mp4"==i.I[s].split(";")[0].split("/")[1]&&(r=Jh(r));return r}function oj(i,r,o,s){return aj(i,r,(function(){r!==ne&&(fc()&&(i.m[r]&&(i.m[r].destroy(),delete i.m[r]),s&&(i.m[r]=s),i.g[r].changeType(o+i.G.sourceBufferExtraFeatures),i.I[r]=o),Ti(i,r))}))}function pj(i,r){var o,s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q,J,$,ne;return K((function(xe){switch(xe.g){case 1:o=re;i.D=!0;i.s=!1;s=i.i.currentTime;p=i.i.autoplay;y=i.i.paused;i.$&&(i.i.autoplay=!1);ua(xe,2);i.u.ub();A=[];for(T in i.m)A.push(i.m[T].destroy());for(x in i.j)for(I=i.j[x],C=I[0],i.j[x]=I.slice(0,1),C&&A.push(C.p.catch(yd)),M=t(I.slice(1)),N=M.next();!N.done;N=M.next())_=N.value,_.p.reject(new P(2,7,7003,void 0));for(j in i.g){B=i.g[j];try{i.l.removeSourceBuffer(B)}catch(i){}}return D(xe,Promise.all(A),4);case 4:return i.m={},i.g={},z=i.l.duration,i.L=new mf,i.l=Ni(i,i.L),D(xe,i.L,5);case 5:!isNaN(z)&&z?i.l.duration=z:!isNaN(i.V)&&i.V&&(i.l.duration=i.V);G=new mf;q=i.l.sourceBuffers;H=r.size;Y=0;i.u.o(q,"addsourcebuffer",(function(){Y++;Y===H&&G.resolve()}));Q=t(r.keys());for(J=Q.next();!J.done;J=Q.next())$=J.value,ne=r.get($),Qi(i,$,ne,ne.codecs),i.s?(i.j[o.U]=[],i.j[o.ia]=[]):i.j[$]=[];i.i.currentTime=s;return D(xe,G,2);case 2:xa(xe),i.D=!1,Jf(i.K),i.u.na(i.i,"canplaythrough",(function(){Jf(i.K);i.i.autoplay=p;y||i.i.play()})),ya(xe,0)}}))}function qj(i,r){return lj(i,(function(){return pj(i,r)}))}function jj(i,r,o,s,p){var y,A,T,x,I,C,M,N,_,j,B,z,G,q,H;return K((function(Y){if(1==Y.g){y=re;if(r==y.Da)return Y.return(!1);A=ld(nd(i.I[r]));T=md(i.I[r]);I=!1;C=dd(o,s);M=i.G.forceTransmux;(!ac(C)||!i.C&&_r.includes(C)||s.includes(","))&&(M=!0);M&&(N=fd(o,s),_=Yc(N))&&(x=_(),j=Cb(y.U,(s||"").split(",")),B=Cb(y.ia,(s||"").split(",")),j&&B?(I=!0,z=B,r==y.U&&(z=j),C=x.convertCodecs(r,fd(o,z))):C=x.convertCodecs(r,N));G=ld(nd(C));q=md(C);if(A===G&&T===q)return Y.return(!1);H=!0;(i.s||I&&x&&!i.m[r])&&(H=!1);if(H&&"smooth"===i.G.codecSwitchingStrategy&&fc())return D(Y,oj(i,r,C,x),3);x&&x.destroy();return D(Y,qj(i,p),3)}return Y.return(!0)}))}function rj(i,r,o){if(r==ne)var s=!1;else{s=ld(nd(i.I[r]));var p=md(i.I[r]),y=dd(o.mimeType,o.codecs),A=i.G.forceTransmux;(!ac(y)||!i.C&&_r.includes(y)||o.codecs.includes(","))&&(A=!0);o=fd(o.mimeType,o.codecs);A&&(A=Yc(o))&&(A=A(),y=A.convertCodecs(r,o),A.destroy());r=ld(nd(y));y=md(y);s=s!==r||p!==y}return!!s&&("smooth"!==i.G.codecSwitchingStrategy||!fc()||i.s)}var Ho=r.URL.createObjectURL,Jo="sequence";function sj(r,o,s){(this||i).i=r;(this||i).s=o;(this||i).C=(this||i).j=Infinity;(this||i).g=1;(this||i).h=(this||i).l=null;(this||i).u=0;(this||i).G=!0;(this||i).H=0;(this||i).D=void 0===s||s;(this||i).I=0;(this||i).m=!1}p=sj.prototype;p.getDuration=function(){return(this||i).j};p.mi=function(){return(this||i).g};p.og=function(r){(this||i).i=r};p.gb=function(r){(this||i).j=r};p.pi=function(){return(this||i).i};p.nh=function(r){(this||i).u=r};p.Vc=function(r){(this||i).G=r};p.Ne=function(r){(this||i).C=r};p.oh=function(r){(this||i).s=r};p.ci=function(){return(this||i).s};p.hh=function(r,o){if(0!=r.length){var s=r[r.length-1].end+o;this.Ce(r[0].start+o);(this||i).g=r.reduce((function(i,r){return Math.max(i,r.end-r.start)}),(this||i).g);(this||i).h=Math.max((this||i).h,s);null!=(this||i).i&&(this||i).D&&!(this||i).m&&((this||i).i=(Date.now()+(this||i).u)/1e3-(this||i).h-(this||i).g)}};p.Dd=function(r){if(0!=r.length){var o=r[0].startTime,s=r[0].endTime,p=(Date.now()+(this||i).u)/1e3;r=t(r);for(var y=r.next();!y.done;y=r.next())y=y.value,p<y.startTime||(o=Math.min(o,y.startTime),s=Math.max(s,y.endTime),(this||i).g=Math.max((this||i).g,y.endTime-y.startTime));this.Ce(o);(this||i).h=Math.max((this||i).h,s);null!=(this||i).i&&(this||i).D&&!(this||i).m&&((this||i).i=p-(this||i).h-(this||i).g)}};p.ve=function(){(this||i).m=!0};p.Pi=function(){return(this||i).m};p.Ce=function(r){(this||i).l=null==(this||i).l?r:Math.min((this||i).l,r)};p.Wf=function(r){(this||i).g=Math.max((this||i).g,r)};p.offset=function(r){null!=(this||i).l&&((this||i).l+=r);null!=(this||i).h&&((this||i).h+=r)};p.R=function(){return Infinity==(this||i).j&&!(this||i).G};p.wc=function(){return Infinity!=(this||i).j&&!(this||i).G};p.Ab=function(){return Math.max((this||i).H,this.ac()-(this||i).C)};p.sh=function(r){(this||i).H=r};p.ac=function(){return this.R()||this.wc()?Math.min(Math.max(0,(Date.now()+(this||i).u)/1e3-(this||i).g-(this||i).i)+(this||i).I,(this||i).j):(this||i).h?Math.min((this||i).h,(this||i).j):(this||i).j};p.ud=function(r){var o=Math.max((this||i).l,(this||i).H);return Infinity==(this||i).C?Math.ceil(1e3*o)/1e3:Math.max(o,Math.min(this.ac()-(this||i).C+r,this.Ob()))};p.Nc=function(){return this.ud(0)};p.Ob=function(){return Math.max(0,this.ac()-(this.R()||this.wc()?(this||i).s:0))};p.yh=function(){return!(null==(this||i).i||null!=(this||i).h&&(this||i).D)};p.mh=function(r){(this||i).I=r};L("shaka.media.PresentationTimeline",sj);sj.prototype.setAvailabilityTimeOffset=sj.prototype.mh;sj.prototype.usingPresentationStartTime=sj.prototype.yh;sj.prototype.getSeekRangeEnd=sj.prototype.Ob;sj.prototype.getSeekRangeStart=sj.prototype.Nc;sj.prototype.getSafeSeekRangeStart=sj.prototype.ud;sj.prototype.getSegmentAvailabilityEnd=sj.prototype.ac;sj.prototype.setUserSeekStart=sj.prototype.sh;sj.prototype.getSegmentAvailabilityStart=sj.prototype.Ab;sj.prototype.isInProgress=sj.prototype.wc;sj.prototype.isLive=sj.prototype.R;sj.prototype.offset=sj.prototype.offset;sj.prototype.notifyMaxSegmentDuration=sj.prototype.Wf;sj.prototype.notifyMinSegmentStartTime=sj.prototype.Ce;sj.prototype.isStartTimeLocked=sj.prototype.Pi;sj.prototype.lockStartTime=sj.prototype.ve;sj.prototype.notifySegments=sj.prototype.Dd;sj.prototype.notifyTimeRange=sj.prototype.hh;sj.prototype.getDelay=sj.prototype.ci;sj.prototype.setDelay=sj.prototype.oh;sj.prototype.setSegmentAvailabilityDuration=sj.prototype.Ne;sj.prototype.setStatic=sj.prototype.Vc;sj.prototype.setClockOffset=sj.prototype.nh;sj.prototype.getPresentationStartTime=sj.prototype.pi;sj.prototype.setDuration=sj.prototype.gb;sj.prototype.setPresentationStartTime=sj.prototype.og;sj.prototype.getMaxSegmentDuration=sj.prototype.mi;sj.prototype.getDuration=sj.prototype.getDuration;function tj(r,o,s){(this||i).j=s;(this||i).l=r;(this||i).u=uj(r);(this||i).g=r.g.currentTime;(this||i).m=Date.now()/1e3;(this||i).h=!1;(this||i).s=0;(this||i).C=o;(this||i).i=function(){}}tj.prototype.release=function(){(this||i).j=(this||i).l=null;(this||i).i=function(){}};function vj(i,r){i.i=r}function wj(r){(this||i).g=r}function uj(i){if(i.g.paused||0==i.g.buffered.length)var r=!1;else e:{r=i.g.currentTime;i=t(Vh(i.g.buffered));for(var o=i.next();!o.done;o=i.next())if(o=o.value,!(r<o.start-.1||r>o.end-.5)){r=!0;break e}r=!1}return r}function xj(r,o,s,p,y){var A=this||i;(this||i).C=y;(this||i).g=r;(this||i).D=o;(this||i).u=s;(this||i).l=new Kf;(this||i).j=!1;(this||i).H=r.readyState;(this||i).G=(this||i).i=0;(this||i).h=p;(this||i).s=!1;(this||i).l.o(r,"waiting",(function(){return yj(A)}));(this||i).m=new Dd((function(){yj(A)})).za((this||i).u.gapJumpTimerTime)}xj.prototype.release=function(){(this||i).l&&((this||i).l.release(),(this||i).l=null);null!=(this||i).m&&((this||i).m.stop(),(this||i).m=null);(this||i).h&&((this||i).h.release(),(this||i).h=null);(this||i).g=(this||i).D=(this||i).C=null};xj.prototype.Zf=function(){(this||i).s=!0;yj(this||i)};function yj(i){if(0!=i.g.readyState){if(i.g.seeking){if(!i.j)return}else i.j=!1;if(!i.g.paused||i.g.currentTime==i.i&&(i.g.autoplay||i.g.currentTime!=i.i)){i.g.readyState!=i.H&&(i.H=i.g.readyState);var r;if(!(r=!i.h)){r=i.h;var o=r.l,s=uj(o),p=o.g.currentTime,y=Date.now()/1e3;r.g==p&&r.u==s||(r.m=y,r.g=p,r.u=s,r.h=!1);p=y-r.m;(s=p>=r.C&&s&&!r.h)&&(r.i(r.g,p),r.h=!0,r.g=o.g.currentTime,r.s++,r.j(new O("stalldetected")));r=!s}r&&(r=i.g.currentTime,o=i.g.buffered,s=Wh(o,r,i.u.gapDetectionThreshold),null==s||0==s&&!i.s||(p=o.start(s),p>=i.D.Ob()||.001>p-r||(0!=s&&o.end(s-1),i.g.currentTime=p,r==i.i&&(i.i=p),i.G++,i.C(new O("gapjumped")))))}}}function zj(i,r,o,s){r==HTMLMediaElement.HAVE_NOTHING||i.readyState>=r?s():(r=ts.value().get(r),o.na(i,r,s))}var ts=new Pf((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function Bj(r,o,s,p){var y=this||i;(this||i).g=r;(this||i).m=o;(this||i).u=s;(this||i).l=null;(this||i).j=function(){null==y.l&&(y.l=p());return y.l};(this||i).s=!1;(this||i).h=new Kf;(this||i).i=new Cj(r);zj((this||i).g,HTMLMediaElement.HAVE_METADATA,(this||i).h,(function(){Dj(y,y.j())}))}Bj.prototype.release=function(){(this||i).h&&((this||i).h.release(),(this||i).h=null);null!=(this||i).i&&((this||i).i.release(),(this||i).i=null);(this||i).m=function(){};(this||i).g=null};function Ej(i){return i.s?i.g.currentTime:i.j()}function Fj(i,r){0<i.g.readyState?Gj(i.i,r):zj(i.g,HTMLMediaElement.HAVE_METADATA,i.h,(function(){Dj(i,i.j())}))}function Dj(i,r){.001>Math.abs(i.g.currentTime-r)?Hj(i):(i.h.na(i.g,"seeking",(function(){Hj(i)})),Gj(i.i,i.g.currentTime&&0!=i.g.currentTime?i.g.currentTime:r))}function Hj(i){i.s=!0;i.h.o(i.g,"seeking",(function(){return i.m()}));i.u(i.g.currentTime)}function Cj(r){var o=this||i;(this||i).h=r;(this||i).m=10;(this||i).l=(this||i).j=(this||i).i=0;(this||i).g=new Dd((function(){0>=o.i||o.h.currentTime!=o.j?o.g.stop():(o.h.currentTime=o.l,o.i--)}))}Cj.prototype.release=function(){(this||i).g&&((this||i).g.stop(),(this||i).g=null);(this||i).h=null};function Gj(i,r){i.j=i.h.currentTime;i.l=r;i.i=i.m;i.h.currentTime=r;i.g.za(.1)}function Ij(r){(this||i).g=r;(this||i).j=!1;(this||i).h=null;(this||i).i=new Kf}p=Ij.prototype;p.df=function(){function a(){null==r.h||0==r.h?r.j=!0:(r.i.na(r.g,"seeking",(function(){r.j=!0})),r.g.currentTime=Math.max(0,r.g.currentTime+r.h))}var r=this||i;zj((this||i).g,HTMLMediaElement.HAVE_CURRENT_DATA,(this||i).i,(function(){a()}))};p.release=function(){(this||i).i&&((this||i).i.release(),(this||i).i=null);(this||i).g=null};p.ef=function(r){(this||i).h=(this||i).j?(this||i).h:r};p.Yd=function(){return((this||i).j?(this||i).g.currentTime:(this||i).h)||0};p.Cg=function(){return 0};p.Bg=function(){return 0};p.gh=function(){};function Jj(r,o,s,p,y,A){var T=this||i;(this||i).i=r;(this||i).g=o.presentationTimeline;(this||i).D=o.minBufferTime||0;(this||i).l=s;(this||i).C=y;(this||i).u=null;(this||i).s=Kj(r,s,A);(this||i).j=new xj(r,o.presentationTimeline,s,(this||i).s,A);(this||i).h=new Bj(r,(function(){var i=T.j;i.j=!0;i.s=!1;var r=Ej(T.h);i=Lj(T,r);if(.001<Math.abs(i-r)&&(r=Date.now()/1e3,!T.u||T.u<r-1)){T.u=r;Fj(T.h,i);i=void 0}else{T.C();i=void 0}return i}),(function(i){var r=T.j;r.g.seeking&&!r.j&&(r.j=!0,r.i=i)}),(function(){var i=p;null==i?i=Infinity>T.g.getDuration()?T.g.Nc():T.g.Ob():0>i&&(i=T.g.Ob()+i);return Mj(T,Nj(T,i))}));(this||i).m=new Dd((function(){if(0!=T.i.readyState&&!T.i.paused){var i=Ej(T.h),r=T.g.Nc(),o=T.g.Ob();3>o-r&&(r=o-3);i<r&&(i=Lj(T,i),T.i.currentTime=i)}}))}p=Jj.prototype;p.df=function(){(this||i).m.za(.25)};p.release=function(){(this||i).h&&((this||i).h.release(),(this||i).h=null);(this||i).j&&((this||i).j.release(),(this||i).j=null);(this||i).m&&((this||i).m.stop(),(this||i).m=null);(this||i).i=(this||i).h=(this||i).g=(this||i).l=null;(this||i).C=function(){}};p.ef=function(r){Fj((this||i).h,r)};p.Yd=function(){var r=Ej((this||i).h);return 0<(this||i).i.readyState&&!(this||i).i.paused?Nj(this||i,r):r};p.Cg=function(){return(this||i).s?(this||i).s.s:0};p.Bg=function(){return(this||i).j.G};p.gh=function(){(this||i).j.Zf()};function Mj(i,r){var o=i.g.getDuration();return r>=o?o-i.l.durationBackoff:r}function Lj(i,r){var o=Math.max(i.D,i.l.rebufferingGoal),s=i.l.safeSeekOffset,p=i.g.Nc(),y=i.g.Ob(),A=i.g.getDuration();3>y-p&&(p=y-3);var T=i.g.ud(o),x=i.g.ud(s);o=i.g.ud(o+s);return r>=A?Mj(i,r):r>y?y:r<p?Th(i.i.buffered,x)?x:o:r>=T||Th(i.i.buffered,r)?r:o}function Nj(i,r){var o=i.g.Nc();if(r<o)return o;i=i.g.Ob();return r>i?i:r}function Kj(i,r,o){if(!r.stallEnabled)return null;var s=r.stallSkip;r=new tj(new wj(i),r.stallThreshold,o);vj(r,(function(){s?i.currentTime+=s:(i.pause(),i.play())}));return r}function Oj(r){(this||i).g=r;(this||i).m=null;(this||i).j=0;(this||i).s=!1}p=Oj.prototype;p.$b=function(){return(this||i).g.length};p.release=function(){(this||i).s||((this||i).g=[],(this||i).m&&(this||i).m.stop(),(this||i).m=null)};p.Ui=function(){(this||i).s=!0};function Pj(i,r){i=t(i.g);for(var o=i.next();!o.done;o=i.next())r(o.value)}p.find=function(r){for(var o=(this||i).g.length-1,s=o;0<=s;--s){var p=(this||i).g[s],y=s<o?(this||i).g[s+1].startTime:p.endTime;if(r>=p.startTime&&r<y)return s+(this||i).j}return(this||i).g.length&&r<(this||i).g[0].startTime?(this||i).j:null};p.get=function(r){if(0==(this||i).g.length)return null;r-=(this||i).j;return 0>r||r>=(this||i).g.length?null:(this||i).g[r]};p.offset=function(r){if(!(this||i).s)for(var o=t((this||i).g),s=o.next();!s.done;s=o.next())s.value.offset(r)};p.ze=function(r){if(!(this||i).s&&r.length){var o=Math.round(1e3*r[0].startTime)/1e3;(this||i).g=(this||i).g.filter((function(i){return Math.round(1e3*i.startTime)/1e3<o}));(this||i).g.push.apply((this||i).g,w(r))}};p.Cd=function(r,o){var s=this||i;r=r.filter((function(i){return i.endTime>o&&(0==s.g.length||i.endTime>s.g[0].startTime)}));this.ze(r);this.yb(o)};p.yb=function(r){if(!(this||i).s){var o=(this||i).g.length;(this||i).g=(this||i).g.filter((function(i){return i.endTime>r}));(this||i).j+=o-(this||i).g.length}};p.Ic=function(r,o,s){s=void 0!==s&&s;if(!(this||i).s){for(;(this||i).g.length;){if(!((this||i).g[(this||i).g.length-1].startTime>=o))break;(this||i).g.pop()}for(;(this||i).g.length;){if(!((this||i).g[0].endTime<=r))break;(this||i).g.shift(),s||(this||i).j++}0!=(this||i).g.length&&(r=(this||i).g[(this||i).g.length-1],(this||i).g[(this||i).g.length-1]=new Ph(r.startTime,o,r.D,r.hb,r.Na,r.ka,r.timestampOffset,r.appendWindowStart,r.appendWindowEnd,r.g,r.tilesLayout,r.C,r.oa,r.status,r.aes128Key),(this||i).g[(this||i).g.length-1].i=r.i)}};p.Qe=function(r,o){var s=this||i;(this||i).s||((this||i).m&&(this||i).m.stop(),(this||i).m=new Dd((function(){var i=o();i?s.g.push.apply(s.g,w(i)):(s.m.stop(),s.m=null)})),(this||i).m.za(r))};Oj.prototype[Symbol.iterator]=function(){return this.rc(0)};Oj.prototype.rc=function(r){var o=this.find(r);if(null==o)return null;o--;var s=this.get(o+1),p=-1;if(s&&0<s.g.length)for(var y=s.g.length-1;0<=y;--y){var A=s.g[y];if(r>=A.startTime&&r<A.endTime){for(;y&&!A.j;)y--,A=s.g[y];if(!A.j)return Qa("No independent partial segment found!"),null;o++;p=y-1;break}}return new Qj(this||i,o,p)};function Rj(i,r,o){i=new Ph(i,i+r,(function(){return o}),0,null,null,i,i,i+r);return new Oj([i])}L("shaka.media.SegmentIndex",Oj);Oj.forSingleSegment=Rj;Oj.prototype.getIteratorForTime=Oj.prototype.rc;Oj.prototype.updateEvery=Oj.prototype.Qe;Oj.prototype.fit=Oj.prototype.Ic;Oj.prototype.evict=Oj.prototype.yb;Oj.prototype.mergeAndEvict=Oj.prototype.Cd;Oj.prototype.offset=Oj.prototype.offset;Oj.prototype.get=Oj.prototype.get;Oj.prototype.find=Oj.prototype.find;Oj.prototype.markImmutable=Oj.prototype.Ui;Oj.prototype.release=Oj.prototype.release;function Qj(r,o,s){(this||i).i=r;(this||i).g=o;(this||i).h=s}Qj.prototype.Oh=function(){return(this||i).g};Qj.prototype.current=function(){var r=(this||i).i.get((this||i).g);r&&0<r.g.length&&r.s&&(this||i).h>=r.g.length&&((this||i).g++,(this||i).h=0,r=(this||i).i.get((this||i).g));return r&&0<r.g.length?r.g[(this||i).h]:r};Qj.prototype.next=function(){var r=(this||i).i.get((this||i).g);r&&0<r.g.length?((this||i).h++,r.s&&(this||i).h==r.g.length&&((this||i).g++,(this||i).h=0)):((this||i).g++,(this||i).h=0);r=this.current();return{value:r,done:!r}};L("shaka.media.SegmentIterator",Qj);Qj.prototype.next=Qj.prototype.next;Qj.prototype.current=Qj.prototype.current;Qj.prototype.currentPosition=Qj.prototype.Oh;function Sj(){Oj.call(this||i,[]);(this||i).h=[]}pa(Sj,Oj);p=Sj.prototype;p.clone=function(){var r=new Sj;r.h=(this||i).h.slice();return r};p.release=function(){for(var r=t((this||i).h),o=r.next();!o.done;o=r.next())o.value.release();(this||i).h=[]};p.find=function(r){for(var o=0,s=t((this||i).h),p=s.next();!p.done;p=s.next()){p=p.value;var y=p.find(r);if(null!=y)return y+o;o+=p.j+p.$b()}return null};p.get=function(r){for(var o=0,s=t((this||i).h),p=s.next();!p.done;p=s.next()){p=p.value;var y=p.get(r-o);if(y)return y;o+=p.j+p.$b()}return null};p.offset=function(){};p.ze=function(){};p.yb=function(){};p.Cd=function(){};p.Ic=function(){};p.Qe=function(){};L("shaka.media.MetaSegmentIndex",Sj);Sj.prototype.updateEvery=Sj.prototype.Qe;Sj.prototype.fit=Sj.prototype.Ic;Sj.prototype.mergeAndEvict=Sj.prototype.Cd;Sj.prototype.evict=Sj.prototype.yb;Sj.prototype.merge=Sj.prototype.ze;Sj.prototype.offset=Sj.prototype.offset;Sj.prototype.get=Sj.prototype.get;Sj.prototype.find=Sj.prototype.find;Sj.prototype.release=Sj.prototype.release;function Tj(r){var o=this||i;(this||i).g=r;(this||i).h=(this||i).g.ke();(this||i).i=new Dd((function(){o.g.fh(.25*o.h)}))}Tj.prototype.release=function(){this.set(this.Lc());(this||i).i&&((this||i).i.stop(),(this||i).i=null);(this||i).g=null};Tj.prototype.set=function(r){if((this||i).h!=r)e:{(this||i).h=r,(this||i).i.stop();if(0<=(this||i).h)try{var o=(this||i).h;(this||i).g.ke()!=o&&(this||i).g.pg(o);break e}catch(i){}(this||i).i.za(.25);0!=(this||i).g.ke()&&(this||i).g.pg(0)}};Tj.prototype.Lc=function(){return(this||i).g.Lc()};function Uj(r){var o=this||i;(this||i).h=r;(this||i).g=new Set;(this||i).i=new Dd((function(){Vj(o,!1)})).za(.25)}Uj.prototype.release=function(){(this||i).i.stop();for(var r=t((this||i).g),o=r.next();!o.done;o=r.next())o.value.release();(this||i).g.clear()};function Vj(i,r){for(var o=t(i.g),s=o.next();!s.done;s=o.next())s.value.j(i.h.currentTime,r)}function Wj(r){$a.call(this||i);(this||i).g=new Map;(this||i).h=r}pa(Wj,$a);Wj.prototype.release=function(){(this||i).g.clear();$a.prototype.release.call(this||i)};function Xj(i,r){var o=i.g.get(r);o||(o={Gd:[],Mg:null,contentType:r},i.g.set(r,o));return o}function Yj(i,r,o){var s=Xj(i,r.contentType);Zj(i,s);i={Uf:r,position:o};s=s.Gd;r=s.findIndex((function(i){return i.position>=o}));0<=r?s.splice(r,s[r].position==o?1:0,i):s.push(i)}Wj.prototype.j=function(r){for(var o=t((this||i).g.values()),s=o.next();!s.done;s=o.next()){s=s.value;e:{var p=s.Gd;for(var y=p.length-1;0<=y;y--){var A=p[y];if(A.position<=r){p=A.Uf;break e}}p=null}(y=p)&&(y=s.Mg,y=!(y===p||y&&p&&y.bandwidth==p.bandwidth&&y.audioSamplingRate==p.audioSamplingRate&&y.codecs==p.codecs&&y.contentType==p.contentType&&y.frameRate==p.frameRate&&y.height==p.height&&y.mimeType==p.mimeType&&y.channelsCount==p.channelsCount&&y.pixelAspectRatio==p.pixelAspectRatio&&y.width==p.width));if(y)e:{y=r;A=p.contentType;if((A=this.h()[A])&&0<A.length){var T=A[A.length-1].end;if(y>=A[0].start&&y<T){y=!0;break e}}y=!1}y&&(s.Mg=p,JSON.stringify(p),s=new O("qualitychange",new Map([["quality",p],["position",r]])),this.dispatchEvent(s))}};function Zj(i,r){if((i=i.h()[r.contentType])&&0<i.length){var o=i[0].start,s=i[i.length-1].end,p=r.Gd;r.Gd=p.filter((function(i,r){return!(i.position<=o&&r+1<p.length&&p[r+1].position<=o||i.position>=s)}))}else r.Gd=[]}function ak(r){$a.call(this||i);var o=this||i;(this||i).g=new Set;(this||i).i=r;(this||i).h=new Dd((function(){for(var i=o.i(),r=t(o.g),s=r.next();!s.done;s=r.next())s=s.value,s.endTime<i.start&&(o.g.delete(s),s=new O("regionremove",new Map([["region",s]])),o.dispatchEvent(s))})).za(2)}pa(ak,$a);ak.prototype.release=function(){(this||i).g.clear();(this||i).h.stop();$a.prototype.release.call(this||i)};function bk(r,o){$a.call(this||i);var s=this||i;(this||i).i=r;(this||i).l=o;(this||i).g=new Map;(this||i).m=[{Dc:null,Cc:ys,vc:function(i,r){return dk(s,"enter",i,r)}},{Dc:vs,Cc:ys,vc:function(i,r){return dk(s,"enter",i,r)}},{Dc:ws,Cc:ys,vc:function(i,r){return dk(s,"enter",i,r)}},{Dc:ys,Cc:vs,vc:function(i,r){return dk(s,"exit",i,r)}},{Dc:ys,Cc:ws,vc:function(i,r){return dk(s,"exit",i,r)}},{Dc:vs,Cc:ws,vc:function(i,r){return dk(s,"skip",i,r)}},{Dc:ws,Cc:vs,vc:function(i,r){return dk(s,"skip",i,r)}}];(this||i).h=new Kf;(this||i).h.o((this||i).i,"regionremove",(function(i){s.g.delete(i.region)}))}pa(bk,$a);bk.prototype.release=function(){(this||i).i=null;(this||i).g.clear();(this||i).h.release();(this||i).h=null;$a.prototype.release.call(this||i)};bk.prototype.j=function(r,o){if(!(this||i).l||0!=r){(this||i).l=!1;for(var s=t((this||i).i.g),p=s.next();!p.done;p=s.next()){p=p.value;var y=(this||i).g.get(p),A=r<p.startTime?vs:r>p.endTime?ws:ys;(this||i).g.set(p,A);for(var T=t((this||i).m),x=T.next();!x.done;x=T.next())x=x.value,x.Dc==y&&x.Cc==A&&x.vc(p,o)}}};function dk(i,r,o,s){r=new O(r,new Map([["region",o],["seeking",s]]));i.dispatchEvent(r)}var vs=1,ys=2,ws=3;function gk(r,o,s){(this||i).i=r;(this||i).h=o;(this||i).j=0;(this||i).l=s;(this||i).g=new Map}function hk(i,r,o){o=void 0!==o&&o;if(i.h.segmentIndex){var s=i.h.segmentIndex.rc(Math.max(r.startTime,i.j));if(s){var p=r;o&&(p=s.next().value)&&p.startTime==r.startTime&&p.endTime==r.endTime&&(p=null);for(;i.g.size<i.i&&null!=p;){r=!0;p.l&&null!=p.Na&&(r=!1);2==p.sc()&&(r=!1);r&&!i.g.has(p)&&(r=new ik(i.l),jk(r,p,i.h),i.g.set(p,r));i.j=p.startTime;if(i.h.fastSwitching&&p.Fd&&p.ue)break;p=s.next().value}}}}function kk(i,r){if(i.h.segmentIndex&&i.g.size<i.i&&!i.g.has(r)){var o=new ik(i.l);jk(o,r,i.h);i.g.set(r,o)}}function lk(i){if(0!==i.g.size){for(var r=t(i.g.keys()),o=r.next();!o.done;o=r.next())(o=o.value)&&mk(i,o);i.j=0}}function nk(i,r){r&&r!==i.h&&(lk(i),i.h=r)}function mk(i,r){var o=i.g.get(r);i.g.delete(r);o&&o.abort()}function ik(r){(this||i).i=r;(this||i).g=(this||i).h=null}function jk(i,r,o){var s=new Uint8Array(0);i.g=i.i(r,o,(function(r){return K((function(o){if(1==o.g)return s=0<s.byteLength?tg(s,r):r,i.h?D(o,i.h(s),3):o.F(0);s=new Uint8Array(0);F(o)}))}))}ik.prototype.abort=function(){(this||i).g&&(this||i).g.abort()};function ok(i,r,o,s,p){i=Af(i,s,p);0==r&&null==o||(i.headers.Range=o?"bytes="+r+"-"+o:"bytes="+r+"-");return i}function pk(r,o){var s=this||i;(this||i).g=o;(this||i).m=r;(this||i).h=null;(this||i).C=1;(this||i).s=(this||i).j=null;(this||i).H=0;(this||i).G=!1;(this||i).i=new Map;(this||i).D=!1;(this||i).I=null;(this||i).u=!1;(this||i).l=new If((function(){return qk(s)}));(this||i).J=Date.now()/1e3}p=pk.prototype;p.destroy=function(){return(this||i).l.destroy()};function qk(i){var r,o,s,p;return K((function(y){if(1==y.g){r=[];o=t(i.i.values());for(s=o.next();!s.done;s=o.next())p=s.value,rk(p),r.push(sk(p));return D(y,Promise.all(r),2)}i.i.clear();i.g=null;i.m=null;i.h=null;F(y)}))}p.configure=function(r){(this||i).h=r;(this||i).I=new jf({maxAttempts:Math.max(r.retryParameters.maxAttempts,2),baseDelay:r.retryParameters.baseDelay,backoffFactor:r.retryParameters.backoffFactor,fuzzFactor:r.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var o=t((this||i).i.keys()),s=o.next();!s.done;s=o.next())if(s=(this||i).i.get(s.value),s.Ia){var p=s.Ia,y=r.segmentPrefetchLimit;p.i=y;for(var A=Array.from(p.g.keys());A.length>y;){var T=A.pop();T&&mk(p,T)}0<r.segmentPrefetchLimit||(s.Ia=null)}else 0<r.segmentPrefetchLimit&&(s.Ia=tk(this||i,s.stream))};p.start=function(){var r=this||i;return K((function(i){if(1==i.g)return D(i,uk(r),2);Jf(r.l);r.D=!0;F(i)}))};function vk(i,r){var o,s,p,y,A,T;K((function(x){switch(x.g){case 1:return o=re,i.H++,s=i.H,ta(x,2),D(x,hj(i.g.Y,o.Da),4);case 4:va(x,3);break;case 2:(p=wa(x),i.g)&&i.g.onError(p);case 3:y=dd(r.mimeType,r.codecs),Ri(i.g.Y,y,i.m.sequenceMode,r.external),A=i.g.Y.H,(A.isTextVisible()||i.h.alwaysStreamText)&&i.H==s&&(T=wk(i,r),i.i.set(o.Da,T),xk(i,T,0)),F(x)}}))}function yk(i){var r=i.i.get(ne);r&&(rk(r),sk(r).catch((function(){})),i.i.delete(ne));i.s=null}function zk(i,r){var o=i.i.get("video");if(o){var s=o.stream;s&&(r?(r=s.trickModeVideo)&&!o.Ac&&(Ak(i,r,!1,0,!1),o.Ac=s):(s=o.Ac)&&(o.Ac=null,Ak(i,s,!0,0,!1)))}}function Bk(i,r,o,s,p,y){o=void 0!==o&&o;s=void 0===s?0:s;p=void 0!==p&&p;y=void 0!==y&&y;i.j=r;i.D&&(r.video&&Ak(i,r.video,o,s,p,y),r.audio&&Ak(i,r.audio,o,s,p,y))}function Ck(i,r){K((function(o){if(1==o.g)return i.s=r,i.D?r.segmentIndex?o.F(2):D(o,r.createSegmentIndex(),2):o.return();Ak(i,r,!0,0,!1);F(o)}))}function Ak(i,r,o,s,p,y){var A=i.i.get(r.type);A||r.type!=ne?A&&(A.Ac&&(r.trickModeVideo?(A.Ac=r,r=r.trickModeVideo):A.Ac=null),A.stream!=r||p)&&(A.Ia&&nk(A.Ia,r),r.type==ne&&(p=dd(r.mimeType,r.codecs),Ri(i.g.Y,p,i.m.sequenceMode,r.external)),A.stream.closeSegmentIndex&&A.stream.closeSegmentIndex(),A.stream=r,A.ea=null,A.Dg=!!y,o&&(A.pd?A.Re=!0:A.Ta?(A.Ub=!0,A.be=s,A.Re=!0):(rk(A),Dk(i,A,!0,s).catch((function(r){i.g&&i.g.onError(r)})))),Ek(i,A).catch((function(r){i.g&&i.g.onError(r)}))):vk(i,r)}function Ek(i,r){var o,s;return K((function(p){if(1==p.g){if(!r.eb)return p.return();o=r.stream;s=r.eb;return o.segmentIndex?p.F(2):D(p,o.createSegmentIndex(),2)}if(r.eb!=s||r.stream!=o)return p.return();var y=i.g.je();var A=Xi(i.g.Y,r.type),T=r.stream.segmentIndex.find(r.Sa?r.Sa.endTime:y),x=null==T?null:r.stream.segmentIndex.get(T);T=x&&x.Na?x.Na-x.hb:null;x&&!T&&(T=(x.endTime-x.getStartTime())*(r.stream.bandwidth||0)/8);T?((x=x.ka)&&(T+=(x.Na?x.Na-x.hb:null)||0),x=i.g.getBandwidthEstimate(),y=8*T/x<(A||0)-y-Math.max(i.m.minBufferTime||0,i.h.rebufferingGoal)||r.eb.h.g>T):y=!1;y&&r.eb.abort();F(p)}))}p.Kd=function(){if((this||i).g)for(var r=(this||i).g.je(),o=t((this||i).i.keys()),s=o.next();!s.done;s=o.next()){var p=s.value;s=(this||i).i.get(p);var y=null;s.ea&&(y=s.ea.current());(!y||y.startTime>r||y.endTime<r)&&(s.ea=null);y=(this||i).g.Y;y.D?y=!1:p==ne?(y=y.h,y=null!=y.g&&null!=y.h&&(r>=y.g&&r<y.h)):(y=Wi(y,p),y=Th(y,r));y||((null!=Xi((this||i).g.Y,p)||s.Ta)&&Fk(this||i,s),s.eb&&(s.eb.abort(),s.eb=null),p===ne&&(p=(this||i).g.Y,p.J&&p.J.h()),s.Kd=!0)}};function Fk(i,r){r.pd||r.Ub||(r.Ta?(r.Ub=!0,r.be=0):null==Vi(i.g.Y,r.type)?null==r.Eb&&xk(i,r,0):(rk(r),Dk(i,r,!1,0).catch((function(r){i.g&&i.g.onError(r)}))))}function uk(i){var r,o,s,p,y,A,T,x,I;return K((function(C){if(1==C.g){r=re;if(!i.j)throw new P(2,5,5006);o=new Map;s=new Set;i.j.audio&&(o.set(r.U,i.j.audio),s.add(i.j.audio));i.j.video&&(o.set(r.ia,i.j.video),s.add(i.j.video));i.s&&(o.set(r.Da,i.s),s.add(i.s));p=i.g.Y;return D(C,p.init(o,i.m.sequenceMode,i.m.type,i.m.ignoreManifestTimestampsInSegmentsMode),2)}Jf(i.l);i.updateDuration();y=t(o.keys());for(A=y.next();!A.done;A=y.next())T=A.value,x=o.get(T),i.i.has(T)||(I=wk(i,x),i.i.set(T,I),xk(i,I,0));F(C)}))}function wk(i,r){return{stream:r,type:r.type,ea:null,Ia:tk(i,r),Sa:null,ec:null,Rf:null,Pf:null,Of:null,Ac:null,endOfStream:!1,Ta:!1,Eb:null,Ub:!1,be:0,Re:!1,pd:!1,Kd:!0,Vf:!1,dg:!1,wd:!1,eb:null}}function tk(i,r){return"video"!==r.type&&"audio"!==r.type?null:0<i.h.segmentPrefetchLimit?new gk(i.h.segmentPrefetchLimit,r,(function(r,o,s){return Gk(i,r,o,s)})):null}p.updateDuration=function(){var r=(this||i).m.presentationTimeline.getDuration();Infinity>r?(this||i).g.Y.gb(r):(this||i).g.Y.gb(Math.pow(2,32))};function Hk(i,r){var o,s,p,y,A;return K((function(T){switch(T.g){case 1:Jf(i.l);if(r.Ta||null==r.Eb||r.pd)return T.return();r.Eb=null;if(!r.Ub){T.F(2);break}return D(T,Dk(i,r,r.Re,r.be),3);case 3:return T.return();case 2:if(r.stream.segmentIndex){T.F(4);break}o=r.stream;return D(T,r.stream.createSegmentIndex(),5);case 5:if(o!=r.stream)return o.closeSegmentIndex&&o.closeSegmentIndex(),r.Ta||r.Eb||xk(i,r,0),T.return();case 4:ta(T,6);s=Ik(i,r);null!=s&&(xk(i,r,s),r.wd=!1);va(T,7);break;case 6:return p=wa(T),D(T,Jk(i,r,p),8);case 8:return T.return();case 7:y=Array.from(i.i.values());if(!i.D||!y.every((function(i){return i.endOfStream}))){T.F(0);break}return D(T,i.g.Y.endOfStream(),10);case 10:Jf(i.l),A=i.g.Y.getDuration(),0!=A&&A<i.m.presentationTimeline.getDuration()&&i.m.presentationTimeline.gb(A),F(T)}}))}function Ik(i,r){if(Kk(r))return ej(i.g.Y,r.stream.originalId||""),null;r.type==ne&&fj(i.g.Y);if(!i.g.Y.aa&&r.type!=ne)return i.h.updateIntervalSeconds/2;var o=i.g.je(),s=r.Sa?r.Sa.endTime:o,p=Yi(i.g.Y,r.type,o),y=Math.max(1,Math.max(i.m.minBufferTime||0,i.h.rebufferingGoal,i.h.bufferingGoal)*i.C),A=i.m.presentationTimeline.getDuration()-s,T=Xi(i.g.Y,r.type);if(1e-6>A&&T)return r.endOfStream=!0,"video"==r.type&&(i=i.i.get(ne))&&Kk(i)&&(i.endOfStream=!0),null;r.endOfStream=!1;if(p>=y)return i.h.updateIntervalSeconds/2;p=Lk(i,r,o,T);if(!p)return i.h.updateIntervalSeconds;y=Infinity;A=Array.from(i.i.values());A=t(A);for(T=A.next();!T.done;T=A.next())T=T.value,Kk(T)||T.ea&&!T.ea.current()||(y=Math.min(y,T.Sa?T.Sa.endTime:o));if(s>=y+i.m.presentationTimeline.g)return i.h.updateIntervalSeconds;r.Ia&&r.ea&&(s=p.ka,!s||r.Sa&&Oh(s,r.ec)||kk(r.Ia,s),hk(r.Ia,p));Mk(i,r,o,p).catch((function(){}));return null}function Lk(i,r,o,s){if(r.ea)return r.ea.current();if(r.Sa||s)return o=r.Sa?r.Sa.endTime:s,r.Vf=!0,r.ea=r.stream.segmentIndex.rc(o),r.ea&&r.ea.next().value;i=i.h.inaccurateManifestTolerance;s=Math.max(o-i,0);var p=null;i&&(r.ea=r.stream.segmentIndex.rc(s),p=r.ea&&r.ea.next().value);p||(r.ea=r.stream.segmentIndex.rc(o),p=r.ea&&r.ea.next().value);return p}function Mk(i,o,s,p){var y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y;return K((function(Q){switch(Q.g){case 1:y=re;A=o.stream;T=o.ea;o.Ta=!0;ta(Q,2);if(2==p.sc())throw new P(1,1,1011);return D(Q,Nk(i,o,p),4);case 4:Jf(i.l);if(i.u)return Q.return();x="video/mp4"==A.mimeType||"audio/mp4"==A.mimeType;I=r.ReadableStream;if(i.h.lowLatencyMode&&I&&x&&("HLS"!=i.m.type||p.m))return N=new Uint8Array(0),j=_=!1,z=function(r){var y,T,x;return K((function(I){switch(I.g){case 1:if(_)return I.return();j=!0;Jf(i.l);if(i.u)return I.return();ta(I,2);N=Ok(N,r);y=!1;T=0;(new bg).box("mdat",(function(i){T=i.size+i.start;y=!0})).parse(N,!1,!0);if(!y){I.F(4);break}x=N.subarray(0,T);N=N.subarray(T);return D(I,Pk(i,o,s,A,p,x,!0),5);case 5:o.Ia&&o.ea&&hk(o.Ia,p,!0);case 4:va(I,0);break;case 2:B=wa(I),F(I)}}))},D(Q,Qk(i,o,p,z),9);C=Qk(i,o,p);return D(Q,C,7);case 7:M=Q.h;Jf(i.l);if(i.u)return Q.return();Jf(i.l);return o.Ub?(o.Ta=!1,xk(i,o,0),Q.return()):D(Q,Pk(i,o,s,A,p,M),6);case 9:G=Q.h;if(B)throw B;if(j){Q.F(10);break}_=!0;Jf(i.l);return i.u?Q.return():o.Ub?(o.Ta=!1,xk(i,o,0),Q.return()):D(Q,Pk(i,o,s,A,p,G),10);case 10:o.Ia&&o.ea&&hk(o.Ia,p,!0);case 6:Jf(i.l);if(i.u)return Q.return();o.Sa=p;T.next();o.Ta=!1;o.dg=!1;q=i.g.Y.Lb();H=q[o.type];Xa(JSON.stringify(H));o.Ub||i.g.Zf(p,o.stream);xk(i,o,0);va(Q,0);break;case 2:Y=wa(Q);Jf(i.l,Y);if(i.u)return Q.return();o.Ta=!1;if(7001==Y.code)o.Ta=!1,rk(o),xk(i,o,0),Q.F(0);else if(o.type==y.Da&&i.h.ignoreTextStreamFailures)i.i.delete(y.Da),Q.F(0);else{if(3017!=Y.code)return o.wd=!0,Y.severity=2,D(Q,Jk(i,o,Y),0);Rk(i,o,Y),Q.F(0)}}}))}function Sk(i,o,s){var p,y,A,T;return K((function(x){if(1==x.g)return p=o,p.cryptoKey?x.F(2):D(x,p.fetchKey(),3);y=p.iv;if(!y)for(y=lc(new ArrayBuffer(16)),A=p.firstMediaSequenceNumber+s,T=y.byteLength-1;0<=T;T--)y[T]=A&255,A>>=8;return x.return(r.crypto.subtle.decrypt({name:"AES-CBC",iv:y},p.cryptoKey,i))}))}function Ok(i,r){var o=new Uint8Array(i.length+r.length);o.set(i);o.set(r,i.length);return o}function Rk(i,r,o){if(!Array.from(i.i.values()).some((function(i){return i!=r&&i.dg}))){if(0<i.h.maxDisabledTime&&i.g.ce(r.stream,i.h.maxDisabledTime))return;var s=Math.round(100*i.C);if(20<s)i.C-=.2;else{if(!(4<s)){r.wd=!0;i.u=!0;i.g.onError(o);return}i.C-=.04}r.dg=!0}xk(i,r,4)}function Nk(i,r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B;return K((function(z){if(1==z.g){s=re;p=[];y=Math.max(0,o.appendWindowStart-.1);A=o.appendWindowEnd+.01;T=ld(r.stream.codecs);x=md(r.stream.mimeType);I=o.timestampOffset;if(I==r.Rf&&y==r.Pf&&A==r.Of&&T==r.Qf&&x==r.ah)return z.F(2);(C=r.Qf&&r.ah&&rj(i.g.Y,r.type,r.stream))&&(M=null,r.type===s.ia?M=i.i.get(s.U):r.type===s.U&&(M=i.i.get(s.ia)),M&&(M.ec=null,Fk(i,M),sk(M).catch((function(){}))));N=function(){var p,M,N,_;return K((function(j){if(1==j.g)return p=new Map,i.j.audio&&p.set(s.U,i.j.audio),i.j.video&&p.set(s.ia,i.j.video),ta(j,2),r.Pf=y,r.Of=A,r.Qf=T,r.ah=x,r.Rf=I,M=i.m.sequenceMode||"HLS"==i.m.type,D(j,ij(i.g.Y,r.type,I,y,A,M,o.mimeType||r.stream.mimeType,o.codecs||r.stream.codecs,p),4);if(2!=j.g)return C&&(N=null,r.type===s.ia?N=i.i.get(s.U):r.type===s.U&&(N=i.i.get(s.ia)),N&&(N.Ub=!1,N.Ta=!1,Fk(i,N))),va(j,0);_=wa(j);r.Pf=null;r.Of=null;r.Qf=null;r.Rf=null;throw _}))};return D(z,N(),2)}Oh(o.ka,r.ec)||(r.ec=o.ka,o.j&&o.ka&&(_=Qk(i,r,o.ka),j=function(){var p,y,A,T,x,I;return K((function(C){switch(C.g){case 1:return ta(C,2),D(C,_,4);case 4:return p=C.h,Jf(i.l),y=null,A=new Map,T=new bg,T.box("moov",gg).box("trak",gg).box("mdia",gg).T("mdhd",(function(i){y=fi(i.reader,i.version).timescale})).box("hdlr",(function(i){i=i.reader;i.skip(8);i=i.Sb(4);var r=String.fromCharCode(i[0]);r+=String.fromCharCode(i[1]);r+=String.fromCharCode(i[2]);r+=String.fromCharCode(i[3]);switch(r){case"soun":A.set(s.U,y);break;case"vide":A.set(s.ia,y)}y=null})).parse(p),A.has(r.type)?o.ka.timescale=A.get(r.type):null!=y&&(o.ka.timescale=y),x=r.stream.closedCaptions&&0<r.stream.closedCaptions.size,D(C,i.g.Gg(r.type,p),5);case 5:return D(C,$i(i.g.Y,r.type,p,null,r.stream,x),6);case 6:va(C,0);break;case 2:throw I=wa(C),r.ec=null,I}}))},i.g.Wi(o.startTime,o.ka),p.push(j())));i.m.sequenceMode&&(B=r.Sa?r.Sa.i:null,o.i!=B||r.Vf)&&(r.Vf=!1,p.push(kj(i.g.Y,r.type,o.startTime)));return D(z,Promise.all(p),0)}))}function Pk(i,r,o,s,p,y,A){A=void 0!==A&&A;var T,x,I,C,M,N;return K((function(_){switch(_.g){case 1:T=s.closedCaptions&&0<s.closedCaptions.size;I=null!=s.emsgSchemeIdUris&&0<s.emsgSchemeIdUris.length||i.h.dispatchAllEmsgBoxes;C=i.h.parsePrftBox&&!i.G;(I||C)&&(x=new bg);I&&x.T("emsg",(function(r){var o=s.emsgSchemeIdUris;if(0===r.version){var y=r.reader.Hd();var A=r.reader.Hd();var T=r.reader.O();var x=r.reader.O();var I=r.reader.O();var C=r.reader.O();var M=p.startTime+x/T}else T=r.reader.O(),M=r.reader.Uc()/T+p.timestampOffset,x=M-p.startTime,I=r.reader.O(),C=r.reader.O(),y=r.reader.Hd(),A=r.reader.Hd();r=r.reader.Sb(r.reader.getLength()-r.reader.Ga());(o&&o.includes(y)||i.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==y?i.g.Xi():(o=(new Map).set("detail",{startTime:M,endTime:M+I/T,schemeIdUri:y,value:A,timescale:T,presentationTimeDelta:x,eventDuration:I,id:C,messageData:r}),o=new O("emsg",o),o.cancelable=!0,i.g.onEvent(o),o.defaultPrevented||"https://aomedia.org/emsg/ID3"!=y&&"https://developer.apple.com/streaming/emsg-id3"!=y||(y=bi(r),y.length&&p&&i.g.Yi([{cueTime:p.startTime,data:r,frames:y,dts:p.startTime,pts:p.startTime}],0,p.endTime))))}));C&&x.T("prft",(function(r){if(!i.G&&p.ka.timescale){var o=r.reader,s=r.version;o.O();r=o.O();var y=o.O();r=1e3*r+y/Math.pow(2,32)*1e3;0===s?o=o.O():(s=o.O(),o=o.O(),o=s*Math.pow(2,32)+o);r=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+r).getTime();o=(new Map).set("detail",{wallClockTime:r,programStartDate:new Date(r-o/p.ka.timescale*1e3)});o=new O("prft",o);i.g.onEvent(o);i.G=!0}}));(I||C)&&x.parse(y);return D(_,Tk(i,r,o),2);case 2:return Jf(i.l),M=r.Kd,r.Kd=!1,N=r.Dg,r.Dg=!1,D(_,i.g.Gg(r.type,y),3);case 3:return D(_,$i(i.g.Y,r.type,y,p,s,T,M,N,A),4);case 4:Jf(i.l),F(_)}}))}function Tk(i,r,o){var s,p,y,A;return K((function(T){if(1==T.g){s=Math.max(i.h.bufferBehind,i.m.presentationTimeline.g);p=Vi(i.g.Y,r.type);if(null==p)return T.return();y=o-p;A=y-s;return 1>=A?T.return():D(T,i.g.Y.remove(r.type,p,p+A),2)}Jf(i.l);F(T)}))}function Kk(i){return i&&i.type==ne&&("application/cea-608"==i.stream.mimeType||"application/cea-708"==i.stream.mimeType)}function Qk(i,r,o,s){var p,y,A,T,x;return K((function(I){switch(I.g){case 1:if(o instanceof Nh&&(p=o.g))return I.return(p);y=null;if(r.Ia){var C=r.Ia;if(C.g.has(o)){var M=C.g.get(o);s&&(M.h=s);C.g.delete(o);y=M.g}else y=null}y||(y=Gk(i,o,r.stream,s));A=0;r.ea&&(A=r.ea.g);r.eb=y;return D(I,y.promise,2);case 2:T=I.h;r.eb=null;x=T.data;if(!o.aes128Key){I.F(3);break}return D(I,Sk(x,o.aes128Key,A),4);case 4:x=I.h;case 3:return I.return(x)}}))}function Gk(i,r,o,s){var p=r instanceof Ph?r:void 0,y=p?1:0;r=ok(r.ba(),r.hb,r.Na,i.h.retryParameters,s);return i.g.zc.request(Ta,r,{type:y,stream:o,segment:p})}function Dk(i,r,o,s){var p,y;return K((function(A){if(1==A.g)return r.Ub=!1,r.Re=!1,r.be=0,r.pd=!0,r.Sa=null,r.ec=null,r.ea=null,r.Ia&&lk(r.Ia),s?(p=i.g.je(),y=i.g.Y.getDuration(),D(A,i.g.Y.remove(r.type,p+s,y),3)):D(A,hj(i.g.Y,r.type),4);if(3!=A.g)return Jf(i.l),o?D(A,i.g.Y.flush(r.type),3):A.F(3);Jf(i.l);r.pd=!1;r.endOfStream=!1;r.Ta||r.Eb||xk(i,r,0);F(A)}))}function xk(i,r,o){var s=r.type;(s!=ne||i.i.has(s))&&(r.Eb=new Cd((function(){var o;return K((function(s){if(1==s.g)return ta(s,2),D(s,Hk(i,r),4);if(2!=s.g)return va(s,0);o=wa(s);i.g&&i.g.onError(o);F(s)}))})).S(o))}function rk(i){null!=i.Eb&&(i.Eb.stop(),i.Eb=null)}function sk(i){return K((function(r){return i.eb?D(r,i.eb.abort(),0):r.F(0)}))}function Jk(i,r,o){var s;return K((function(p){if(1==p.g)return D(p,lf(i.I),2);Jf(i.l);s=0===i.h.maxDisabledTime&&1011==o.code?1:i.h.maxDisabledTime;1===o.category&&0<s&&(o.handled=i.g.ce(r.stream,s),o.handled&&(o.severity=1));i.g.onError(o);o.handled||i.h.failureCallback(o);F(p)}))}function Uk(i){var r,o,s,p,y,A;return K((function(T){if(1==T.g){r=Date.now()/1e3;o=i.h.minTimeBetweenRecoveries;if(!i.h.allowMediaSourceRecoveries||r-i.J<o)return T.return(!1);i.J=r;s=re;(p=i.i.get(s.U))&&(p.ec=null,Fk(i,p),sk(p).catch((function(){})));(y=i.i.get(s.ia))&&(y.ec=null,Fk(i,y),sk(y).catch((function(){})));A=new Map;i.j.audio&&A.set(s.U,i.j.audio);i.j.video&&A.set(s.ia,i.j.video);return D(T,qj(i.g.Y,A),2)}return T.return(!0)}))}function Vk(i,r,o){var s,p,y,A,T,x,I;return K((function(C){switch(C.g){case 1:var M=new fb(i).Ya.split("/").pop().split(".");s=1==M.length?"":M.pop().toLowerCase();if(p=_s[s])return C.return(p);y=0;A=Af([i],o);ta(C,2);A.method="HEAD";return D(C,r.request(y,A).promise,4);case 4:T=C.h;p=T.headers["content-type"];va(C,3);break;case 2:x=wa(C);if(!x||1002!=x.code&&1001!=x.code){C.F(3);break}A.method="GET";return D(C,r.request(y,A).promise,6);case 6:I=C.h,p=I.headers["content-type"];case 3:return C.return(p?p.toLowerCase().split(";").shift():"")}}))}var _s={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Xk(i,r){if(i.lineBreak)return"\n";if(i.nestedCues.length)return i.nestedCues.map((function(r){return Xk(r,i)})).join("");var o=[],s=700<=i.fontWeight,p="italic"==i.fontStyle,y=i.textDecoration.includes("underline");s&&o.push(["b"]);p&&o.push(["i"]);y&&o.push(["u"]);p=i.color;""==p&&r&&(p=r.color);s="";(p=Yk(p))&&(s+="."+p);p=i.backgroundColor;""==p&&r&&(p=r.backgroundColor);(r=Yk(p))&&(s+=".bg_"+r);s&&o.push(["c",s]);return o.reduceRight((function(i,r){var o=t(r);r=o.next().value;o=o.next().value;return"<"+r+(void 0===o?"":o)+">"+i+"</"+r+">"}),i.payload)}function Yk(i){i=i.toLowerCase();var r=i.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);r?i="#"+(parseInt(r[1],10)|256).toString(16).slice(1)+(parseInt(r[2],10)|256).toString(16).slice(1)+(parseInt(r[3],10)|256).toString(16).slice(1):i.startsWith("#")&&7<i.length&&(i=i.slice(0,7));switch(i){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Zk(i,r){var o=[];i=t(i);for(var s=i.next();!s.done;s=i.next())if(s=s.value,s.isContainer)o.push.apply(o,w(Zk(s.nestedCues,s)));else{var p=s.clone();p.nestedCues=[];p.payload=Xk(s,r);o.push(p)}return o}function $k(r,o){(this||i).g=null;for(var s=t(Array.from(r.textTracks)),p=s.next();!p.done;p=s.next())p=p.value,p.mode="disabled",p.label==o&&((this||i).g=p);(this||i).g||((this||i).g=r.addTextTrack("subtitles",o));(this||i).g.mode="hidden"}p=$k.prototype;p.remove=function(r,o){if(!(this||i).g)return!1;al((this||i).g,(function(i){return i.startTime<o&&i.endTime>r}));return!0};p.append=function(r){var o=Zk(r),s=[];r=(this||i).g.cues?Array.from((this||i).g.cues):[];var p={};o=t(o);for(var y=o.next();!y.done;p={Ec:p.Ec},y=o.next())p.Ec=y.value,r.some(function(i){return function(r){return r.startTime==i.Ec.startTime&&r.endTime==i.Ec.endTime&&r.text==i.Ec.payload}}(p))||(y=bl(p.Ec))&&s.push(y);r=s.slice().sort((function(i,r){return i.startTime!=r.startTime?i.startTime-r.startTime:i.endTime!=r.endTime?i.endTime-r.startTime:"line"in VTTCue.prototype?s.indexOf(r)-s.indexOf(i):s.indexOf(i)-s.indexOf(r)}));r=t(r);for(p=r.next();!p.done;p=r.next())(this||i).g.addCue(p.value)};p.destroy=function(){(this||i).g&&(al((this||i).g,(function(){return!0})),(this||i).g.mode="disabled");(this||i).g=null;return Promise.resolve()};p.isTextVisible=function(){return"showing"==(this||i).g.mode};p.setTextVisibility=function(r){(this||i).g.mode=r?"showing":"hidden"};function bl(i){if(i.startTime>=i.endTime)return null;var r=new VTTCue(i.startTime,i.endTime,i.payload);r.lineAlign=i.lineAlign;r.positionAlign=i.positionAlign;i.size&&(r.size=i.size);try{r.align=i.textAlign}catch(i){}"center"==i.textAlign&&"center"!=r.align&&(r.align="middle");"vertical-lr"==i.writingMode?r.vertical="lr":"vertical-rl"==i.writingMode&&(r.vertical="rl");1==i.lineInterpretation&&(r.snapToLines=!1);null!=i.line&&(r.line=i.line);null!=i.position&&(r.position=i.position);return r}function al(i,r){var o=i.mode;i.mode="showing"==o?"showing":"hidden";for(var s=t(Array.from(i.cues)),p=s.next();!p.done;p=s.next())(p=p.value)&&r(p)&&i.removeCue(p);i.mode=o}L("shaka.text.SimpleTextDisplayer",$k);$k.prototype.setTextVisibility=$k.prototype.setTextVisibility;$k.prototype.isTextVisible=$k.prototype.isTextVisible;$k.prototype.destroy=$k.prototype.destroy;$k.prototype.append=$k.prototype.append;$k.prototype.remove=$k.prototype.remove;
/*
                                               @license
                                               Shaka Player
                                               Copyright 2023 Google LLC
                                               SPDX-License-Identifier: Apache-2.0
                                               */function cl(){}p=cl.prototype;p.remove=function(){};p.append=function(){};p.destroy=function(){};p.isTextVisible=function(){return!1};p.setTextVisibility=function(){};L("shaka.text.StubTextDisplayer",cl);cl.prototype.setTextVisibility=cl.prototype.setTextVisibility;cl.prototype.isTextVisible=cl.prototype.isTextVisible;cl.prototype.destroy=cl.prototype.destroy;cl.prototype.append=cl.prototype.append;cl.prototype.remove=cl.prototype.remove;function dl(){}function U(i){return document.createElement(i)}function el(){var i=document.createElement("button");i.setAttribute("type","button");return i}function fl(i){for(;i.firstChild;)i.removeChild(i.firstChild)}L("shaka.util.Dom",dl);dl.removeAllChildren=fl;function gl(o,s){var p=this||i;(this||i).m=!1;(this||i).i=[];(this||i).D=o;(this||i).u=s;(this||i).j=null;(this||i).g=U("div");(this||i).g.classList.add("shaka-text-container");(this||i).g.style.textAlign="center";(this||i).g.style.display="flex";(this||i).g.style.flexDirection="column";(this||i).g.style.alignItems="center";(this||i).g.style.justifyContent="flex-end";(this||i).u.appendChild((this||i).g);(this||i).G=new Dd((function(){hl(p)})).za(.25);(this||i).h=new Map;(this||i).l=new Kf;(this||i).l.o(document,"fullscreenchange",(function(){hl(p,!0)}));(this||i).l.o((this||i).D,"resize",(function(){var i=p.D,r=i.videoWidth;i=i.videoHeight;p.j=r&&i?r/i:null}));(this||i).s=null;"ResizeObserver"in r&&((this||i).s=new ResizeObserver((function(){hl(p,!0)})),(this||i).s.observe((this||i).g));(this||i).C=new Map}p=gl.prototype;p.append=function(r){var o=[].concat(w((this||i).i)),s={};r=t(r);for(var p=r.next();!p.done;s={Rd:s.Rd},p=r.next())s.Rd=p.value,o.some(function(i){return function(r){return Mc(r,i.Rd)}}(s))||(this||i).i.push(s.Rd);hl(this||i)};p.destroy=function(){if(!(this||i).g)return Promise.resolve();(this||i).u.removeChild((this||i).g);(this||i).g=null;(this||i).m=!1;(this||i).i=[];(this||i).G&&(this||i).G.stop();(this||i).h.clear();(this||i).l&&((this||i).l.release(),(this||i).l=null);(this||i).s&&((this||i).s.disconnect(),(this||i).s=null);return Promise.resolve()};p.remove=function(r,o){if(!(this||i).g)return!1;var s=(this||i).i.length;(this||i).i=(this||i).i.filter((function(i){return i.startTime<r||i.endTime>=o}));hl(this||i,s>(this||i).i.length);return!0};p.isTextVisible=function(){return(this||i).m};p.setTextVisibility=function(r){(this||i).m=r};function il(i,r){for(;null!=r;){if(r==i.g)return!0;r=r.parentElement}return!1}function jl(i,r,o,s,p){var y=!1,A=[],T=[];r=t(r);for(var x=r.next();!x.done;x=r.next()){x=x.value;p.push(x);var I=i.h.get(x),C=x.startTime<=s&&x.endTime>s,M=I?I.Ch:null;I&&(A.push(I.nf),I.Id&&A.push(I.Id),C||(y=!0,i.h.delete(x),I=null));C&&(T.push(x),I?il(i,M)||(y=!0):(kl(i,x,p),I=i.h.get(x),M=I.Ch,y=!0));0<x.nestedCues.length&&M&&jl(i,x.nestedCues,M,s,p);p.pop()}if(y){s=t(A);for(p=s.next();!p.done;p=s.next())p=p.value,p.parentElement&&p.parentElement.removeChild(p);T.sort((function(i,r){return i.startTime!=r.startTime?i.startTime-r.startTime:i.endTime-r.endTime}));T=t(T);for(x=T.next();!x.done;x=T.next())s=i.h.get(x.value),s.Id?(o.appendChild(s.Id),s.Id.appendChild(s.nf)):o.appendChild(s.nf)}}function hl(i,r){if(i.g){var o=i.D.currentTime;if(!i.m||(void 0===r?0:r)){r=t(i.C.values());for(var s=r.next();!s.done;s=r.next())fl(s.value);fl(i.g);i.h.clear();i.C.clear()}if(i.m){r=new Map;s=t(i.h.keys());for(var p=s.next();!p.done;p=s.next())p=p.value,r.set(p,i.h.get(p));jl(i,i.i,i.g,o,[])}}}function kl(i,r,o){var s=1<o.length,p=s?"span":"div";r.lineBreak&&(p="br");r.rubyTag&&(p=r.rubyTag);s=!s&&0<r.nestedCues.length;var y=U(p);"br"!=p&&ll(i,y,r,o,s);o=null;if(r.region&&r.region.id){o=r.region;p=i.j===4/3?2.5:1.9;var A=o.id+"_"+o.width+"x"+o.height+(o.heightUnits==ji?"%":"px")+"-"+o.viewportAnchorX+"x"+o.viewportAnchorY+(o.viewportAnchorUnits==ji?"%":"px");if(i.C.has(A))o=i.C.get(A);else{var T=U("span"),x=o.heightUnits==ji?"%":"px",I=o.widthUnits==ji?"%":"px",C=o.viewportAnchorUnits==ji?"%":"px";T.id="shaka-text-region---"+A;T.classList.add("shaka-text-region");T.style.position="absolute";2===o.heightUnits&&2===o.widthUnits?(T.style.height=5.33*o.height+"%",T.style.width=o.width*p+"%"):(T.style.height=o.height+x,T.style.width=o.width+I);2===o.viewportAnchorUnits?(x=o.viewportAnchorY/75*100,I=o.viewportAnchorX/(i.j===4/3?160:210)*100,x-=o.regionAnchorY*o.height*5.33/100,I-=o.regionAnchorX*o.width*p/100,T.style.top=x+"%",T.style.left=I+"%"):(T.style.top=o.viewportAnchorY-o.regionAnchorY*o.height/100+C,T.style.left=o.viewportAnchorX-o.regionAnchorX*o.width/100+C);T.style.display="flex";T.style.flexDirection="column";T.style.alignItems="center";T.style.justifyContent="before"==r.displayAlign?"flex-start":"center"==r.displayAlign?"center":"flex-end";i.C.set(A,T);o=T}}p=y;s&&(p=U("span"),p.classList.add("shaka-text-wrapper"),p.style.backgroundColor=r.backgroundColor,p.style.lineHeight="normal",y.appendChild(p));i.h.set(r,{nf:y,Ch:p,Id:o})}function ml(i){var r=i.direction,o=i.positionAlign;i=i.textAlign;return o!==rt?o:"left"===i||"start"===i&&r===ln||"end"===i&&"rtl"===r?"line-left":"right"===i||"start"===i&&"rtl"===r||"end"===i&&r===ln?"line-right":"center"}function ll(i,r,o,s,p){var y=r.style,A=0==o.nestedCues.length,T=1<s.length;y.whiteSpace="pre-wrap";var x=o.payload.replace(/\s+$/g,(function(i){return" ".repeat(i.length)}));y.webkitTextStrokeColor=o.textStrokeColor;y.webkitTextStrokeWidth=o.textStrokeWidth;y.color=o.color;y.direction=o.direction;y.opacity=o.opacity;y.paddingLeft=nl(o.linePadding,o,i.u);y.paddingRight=nl(o.linePadding,o,i.u);y.textCombineUpright=o.textCombineUpright;y.textShadow=o.textShadow;if(o.backgroundImage)y.backgroundImage="url('"+o.backgroundImage+"')",y.backgroundRepeat="no-repeat",y.backgroundSize="contain",y.backgroundPosition="center",y.width="100%",y.height="100%";else{if(o.nestedCues.length)var I=r;else I=U("span"),r.appendChild(I);o.border&&(I.style.border=o.border);!p&&((r=ol(s,(function(i){return i.backgroundColor})))?I.style.backgroundColor=r:x&&(I.style.backgroundColor="rgba(0, 0, 0, 0.8)"),r=ol(s,(function(i){return i.fontFamily})))&&(I.style.fontFamily=r);x&&(I.textContent=x)}T&&!s[s.length-1].isContainer?y.display="inline":(y.display="flex",y.flexDirection="column",y.alignItems="center",y.justifyContent="before"==o.displayAlign?"flex-start":"center"==o.displayAlign?"center":"flex-end");A||(y.margin="0");y.fontFamily=o.fontFamily;y.fontWeight=o.fontWeight.toString();y.fontStyle=o.fontStyle;y.letterSpacing=o.letterSpacing;y.fontSize=nl(o.fontSize,o,i.u);s=o.line;null!=s&&(A=o.lineInterpretation,A==_n&&(A=1,T=16,i.j&&1>i.j&&(T=32),s=0>s?100+s/T*100:s/T*100),1==A&&(y.position="absolute",o.writingMode==Ln?(y.width="100%",o.lineAlign==Kn?y.top=s+"%":"end"==o.lineAlign&&(y.bottom=100-s+"%")):"vertical-lr"==o.writingMode?(y.height="100%",o.lineAlign==Kn?y.left=s+"%":"end"==o.lineAlign&&(y.right=100-s+"%")):(y.height="100%",o.lineAlign==Kn?y.right=s+"%":"end"==o.lineAlign&&(y.left=100-s+"%"))));y.lineHeight=o.lineHeight;null!=o.position&&(o.writingMode==Ln?y.paddingLeft=o.position:y.paddingTop=o.position);i=ml(o);"line-left"==i?y.cssFloat="left":"line-right"==i&&(y.cssFloat="right");y.textAlign=o.textAlign;y.textDecoration=o.textDecoration.join(" ");y.writingMode=o.writingMode;"writingMode"in document.documentElement.style&&y.writingMode==o.writingMode||(y.webkitWritingMode=o.writingMode);o.size&&(o.writingMode==Ln?y.width=o.size+"%":y.height=o.size+"%")}function nl(i,r,o){var s=(s=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(i))?{value:Number(s[1]),unit:s[2]}:null;if(!s)return i;var p=s.value;switch(s.unit){case"%":return p/100*o.clientHeight/r.cellResolution.rows+"px";case"c":return o.clientHeight*p/r.cellResolution.rows+"px";default:return i}}function ol(i,r){for(var o=i.length-1;0<=o;o--){var s=r(i[o]);if(s||0===s)return s}return null}L("shaka.text.UITextDisplayer",gl);gl.prototype.setTextVisibility=gl.prototype.setTextVisibility;gl.prototype.isTextVisible=gl.prototype.isTextVisible;gl.prototype.remove=gl.prototype.remove;gl.prototype.destroy=gl.prototype.destroy;gl.prototype.append=gl.prototype.append;function pl(i,r){function c(i){for(var o=i,s=t(r),p=s.next();!p.done;p=s.next())p=p.value,p.end&&p.start<i&&(o+=p.end-p.start);i=Math.floor(o/3600);s=Math.floor(o/60%60);p=Math.floor(o%60);o=Math.floor(1e3*o%1e3);return(10>i?"0":"")+i+":"+(10>s?"0":"")+s+":"+(10>p?"0":"")+p+"."+(100>o?10>o?"00":"0":"")+o}var o=Zk(i);i="WEBVTT\n\n";o=t(o);for(var s=o.next();!s.done;s=o.next())s=s.value,i+=c(s.startTime)+" --\x3e "+c(s.endTime)+function(i){var r=[];switch(i.textAlign){case"left":r.push("align:left");break;case"right":r.push("align:right");break;case st:r.push("align:middle");break;case"start":r.push("align:start");break;case"end":r.push("align:end")}switch(i.writingMode){case"vertical-lr":r.push("vertical:lr");break;case"vertical-rl":r.push("vertical:rl")}return r.length?" "+r.join(" "):""}(s)+"\n",i+=s.payload+"\n\n";return i}L("shaka.text.WebVttGenerator",(function(){}));function ql(r,o){(this||i).h=r;(this||i).g=o;(this||i).m=void 0;(this||i).i=!1;(this||i).l=!0;(this||i).j=!1}ql.prototype.configure=function(r){(this||i).g=r};function rl(i,r,o){try{if(!i.g.enabled)return r;var s=sl(i);e:{switch(o.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var p=Xs;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":p=iu;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":p=Ws;break e}p=void 0}s.ot=p;s.su=!0;var y=wl(s);return xl(r,y)}catch(i){return Sa("CMCD_SRC_ERROR","Could not generate src CMCD data.",i),r}}function sl(i){i.g.sessionId||(i.g.sessionId=r.crypto.randomUUID());return{v:1,sf:i.m,sid:i.g.sessionId,cid:i.g.contentId,mtp:i.h.getBandwidthEstimate()/1e3}}function zl(i,r,o){o=void 0===o?{}:o;var s=void 0===s?i.g.useHeaders:s;if(i.g.enabled){Object.assign(o,sl(i));o.pr=i.h.Nb();var p=o.ot===Ys||o.ot===iu;i.j&&p&&(o.bs=!0,o.su=!0,i.j=!1);null==o.su&&(o.su=i.l);if(s)i=Bl(o),Object.keys(i).length&&Object.assign(r.headers,i);else{var y=wl(o);y&&(r.uris=r.uris.map((function(i){return xl(i,y)})))}}}function Cl(i){if(0===i.type)return su;if(i=i.stream){var r=i.type;if("video"==r)return i.codecs&&i.codecs.includes(",")?iu:Ys;if("audio"==r)return Xs;if("text"==r)return"application/mp4"===i.mimeType?Su:fu}}function Gl(i,r){r=i.h.Lb()[r];if(!r.length)return NaN;var o=i.h.getCurrentTime();return(i=r.find((function(i){return i.start<=o&&i.end>=o})))?1e3*(i.end-o):NaN}function Hl(i,r){var o=i.h.mb();if(!o.length)return NaN;i=o[0];o=t(o);for(var s=o.next();!s.done;s=o.next())s=s.value,"variant"===s.type&&s.bandwidth>i.bandwidth&&(i=s);switch(r){case Ys:return i.videoBandwidth||NaN;case Xs:return i.audioBandwidth||NaN;default:return i.bandwidth}}function wl(i){function b(i){return 100*c(i/100)}function c(i){return Math.round(i)}function d(i){return!Number.isNaN(i)&&null!=i&&""!==i&&!1!==i}var r=[],o={br:c,d:c,bl:b,dl:b,mtp:b,nor:function(i){return encodeURIComponent(i)},rtp:b,tb:c},s=Object.keys(i||{}).sort();s=t(s);for(var p=s.next();!p.done;p=s.next()){p=p.value;var y=i[p];if(d(y)&&("v"!==p||1!==y)&&("pr"!=p||1!==y)){var A=o[p];A&&(y=A(y));A=typeof y;var T=void 0;T="string"===A&&"ot"!==p&&"sf"!==p&&"st"!==p?p+"="+JSON.stringify(y):"boolean"===A?p:"symbol"===A?p+"="+y.description:p+"="+y;r.push(T)}}return r.join(",")}function Bl(i){var r=Object.keys(i),o={},s=["Object","Request","Session","Status"],p=[{},{},{},{}],y={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};r=t(r);for(var A=r.next();!A.done;A=r.next())A=A.value,p[null!=y[A]?y[A]:1][A]=i[A];for(i=0;i<p.length;i++)(y=wl(p[i]))&&(o["CMCD-"+s[i]]=y);return o}function xl(i,r){if(!r||i.includes("offline:"))return i;i=new fb(i);i.g.set("CMCD",r);return i.toString()}var Ws="m",Xs="a",Ys="v",iu="av",su="i",fu="c",Su="tt";L("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Eh:"s",OTHER:"o"});function Il(r){(this||i).h=r;(this||i).g=null}p=Il.prototype;p.configure=function(r){(this||i).h=r};p.Ug=function(){return(this||i).h.enabled&&(this||i).h.applyMaximumSuggestedBitrate&&(this||i).g&&(this||i).g.has(Lu)?1e3*(this||i).g.get(Lu):null};p.Tg=function(){return(this||i).h.enabled&&(this||i).g&&(this||i).g.has(Mu)?1e3*(this||i).g.get(Mu):null};p.ri=function(){return(this||i).h.enabled&&(this||i).g&&(this||i).g.has(Pu)?(this||i).g.get(Pu):null};p.si=function(){return(this||i).h.enabled&&(this||i).g&&(this||i).g.has(Ru)?(this||i).g.get(Ru):null};p.getBandwidthEstimate=function(r){var o=this.Tg();if(!o)return r;var s=(this||i).h.estimatedThroughputWeightRatio;return 0<s&&1>=s?r*(1-s)+o*s:r};function Nl(i){return!i||"false"!==i.toLowerCase()&&(/^[-0-9]/.test(i)?parseInt(i,10):i.replace(/["]+/g,""))}L("shaka.util.CmsdManager",Il);Il.prototype.getBandwidthEstimate=Il.prototype.getBandwidthEstimate;Il.prototype.getRoundTripTime=Il.prototype.si;Il.prototype.getResponseDelay=Il.prototype.ri;Il.prototype.getEstimatedThroughput=Il.prototype.Tg;Il.prototype.getMaxBitrate=Il.prototype.Ug;var Mu="etp",Lu="mb",Pu="rd",Ru="rtt";function Ol(){}function Pl(i,r,o,s,p){var y,A=p in s,T=!0;for(y in r){var x=p+"."+y,I=A?s[p]:o[y];A||y in o?void 0===r[y]?void 0===I||A?delete i[y]:i[y]=Ad(I):I.constructor==Object&&r[y]&&r[y].constructor==Object?(i[y]||(i[y]=Ad(I)),x=Pl(i[y],r[y],I,s,x),T=T&&x):typeof r[y]!=typeof I||null==r[y]||"function"!=typeof r[y]&&r[y].constructor!=I.constructor?(Qa("Invalid config, wrong type for "+x),T=!1):("function"==typeof o[y]&&o[y].length!=r[y].length&&Ra("Unexpected number of arguments for "+x),i[y]=r[y]):(Qa("Invalid config, unrecognized key "+x),T=!1)}return T}function Ql(i,r){for(var o={},s=o,p=0,y=0;;){p=i.indexOf(".",p);if(0>p)break;0!=p&&"\\"==i[p-1]||(y=i.substring(y,p).replace(/\\\./g,"."),s[y]={},s=s[y],y=p+1);p+=1}s[i.substring(y).replace(/\\\./g,".")]=r;return o}function Rl(i,r){return i&&r}L("shaka.util.ConfigUtils",Ol);Ol.convertToConfigObject=Ql;Ol.mergeConfigObjects=Pl;function Sl(){(this||i).g=null;(this||i).h=[]}function Tl(i,r){return K((function(o){if(1==o.g)return i.g?D(o,new Promise((function(r){return i.h.push(r)})),2):o.F(2);i.g=r;F(o)}))}Sl.prototype.release=function(){0<(this||i).h.length?(this||i).h.shift()():(this||i).g=null};function Ul(){}function Vl(i){i=Wf(i);return new fb(i).Kb}function Wl(i,r,o){function d(i){pc(p).setUint32(y,i.byteLength,!0);y+=4;p.set(lc(i),y);y+=i.byteLength}if(!o||!o.byteLength)throw new P(2,6,6015);var s;s="string"==typeof r?Yf(r,!0):r;i=Wf(i);i=Yf(i,!0);var p=new Uint8Array(12+i.byteLength+s.byteLength+o.byteLength),y=0;d(i);d(s);d(o);return p}function Xl(i,r,o){if("skd"!==r)return i;r=o.serverCertificate;o=Wf(i).split("skd://").pop();return Wl(i,o,r)}function Yl(i,r){2===i&&(r.headers["Content-Type"]="application/octet-stream")}L("shaka.util.FairPlayUtils",Ul);Ul.commonFairPlayResponse=function(i,r){if(2===i){try{var o=Tf(r.data)}catch(i){return}i=!1;o=o.trim();"<ckc>"===o.substr(0,5)&&"</ckc>"===o.substr(-6)&&(o=o.slice(5,-6),i=!0);try{var s=JSON.parse(o);s.ckc&&(o=s.ckc,i=!0);s.CkcMessage&&(o=s.CkcMessage,i=!0);s.License&&(o=s.License,i=!0)}catch(i){}i&&(r.data=mc(qg(o)))}};Ul.expressplayFairPlayRequest=function(i,r){Yl(i,r)};Ul.conaxFairPlayRequest=function(i,r){Yl(i,r)};Ul.ezdrmFairPlayRequest=function(i,r){Yl(i,r)};Ul.verimatrixFairPlayRequest=function(i,r){2===i&&(i=lc(r.body),i=pg(i),r.headers["Content-Type"]="application/x-www-form-urlencoded",r.body=Xf("spc="+i))};Ul.expressplayInitDataTransform=function(i,r,o){return Xl(i,r,o)};Ul.conaxInitDataTransform=function(i,o,s){if("skd"!==o)return i;o=s.serverCertificate;s=Wf(i).split("skd://").pop().split("?").shift();s=r.atob(s);var p=new ArrayBuffer(2*s.length);p=oc(p);for(var y=0,A=s.length;y<A;y++)p[y]=s.charCodeAt(y);return Wl(i,p,o)};Ul.ezdrmInitDataTransform=function(i,r,o){if("skd"!==r)return i;r=o.serverCertificate;o=Wf(i).split(";").pop();return Wl(i,o,r)};Ul.verimatrixInitDataTransform=function(i,r,o){return Xl(i,r,o)};Ul.initDataTransform=Wl;Ul.defaultGetContentId=Vl;Ul.isFairPlaySupported=function(){var i;return K((function(r){if(1==r.g)return i={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ta(r,2),D(r,navigator.requestMediaKeySystemAccess("com.apple.fps",[i]),4);if(2!=r.g)return r.return(!0);wa(r);return r.return(!1)}))};function Zl(){}function $l(){var i=Infinity;navigator.connection&&navigator.connection.saveData&&(i=360);var o={retryParameters:kf(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(i,o,s){r.shakaMediaKeysPolyfill&&"skd"==o&&(o=s.serverCertificate,s=Vl(i),i=Wl(i,s,o));return i},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Id(),minHdcpVersion:"",ignoreDuplicateInitData:!Md()},s="reload",p=!1;Md()||Ld()||Jd("Tizen 4")||Nd()||navigator.userAgent.match(/webOS\/4/i)||navigator.userAgent.match(/webOS\/5/i)||(s="smooth",p=!0);p={retryParameters:kf(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(i){return Rl([i],i)},sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:p},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Ld()||Md()||Nd()||Qd()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:function(i){return Rl([i],i)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var y={retryParameters:kf(),failureCallback:function(i){return Rl([i])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5};(Jd("Web0S")||Kd()||Od()||Jd("Hisense")||Jd("VIDAA"))&&(y.stallSkip=0);var A={trackSelectionCallback:function(i){return K((function(r){return r.return(i)}))},downloadSizeCallback:function(i){var r;return K((function(o){if(1==o.g)return navigator.storage&&navigator.storage.estimate?D(o,navigator.storage.estimate(),3):o.return(!0);r=o.h;return o.return(r.usage+i<.95*r.quota)}))},progressCallback:function(i,r){return Rl([i,r])},usePersistentLicense:!0,numberOfParallelDownloads:5},T={drm:o,manifest:p,streaming:y,mediaSource:{codecSwitchingStrategy:s,sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:A,abrFactory:function(){return new Ge},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:i,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},playRangeStart:0,playRangeEnd:Infinity,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};A.trackSelectionCallback=function(i){return K((function(r){return r.return(am(i,T.preferredAudioLanguage,T.preferredVideoHdrLevel))}))};return T}function bm(i,r,o){var s={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Pl(i,r,o||$l(),s,"")}function am(i,o,s){var p=s;"AUTO"==p&&(p=r.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var y=i.filter((function(i){return!("variant"!=i.type||i.hdr&&i.hdr!=p)}));s=[];var A=Tb(o,y.map((function(i){return i.language})));A&&(s=y.filter((function(i){return Kb(i.language)==A})));0==s.length&&(s=y.filter((function(i){return i.primary})));0==s.length&&(y.map((function(i){return i.language})),s=y);var T=s.filter((function(i){return i.height&&480>=i.height}));T.length&&(T.sort((function(i,r){return r.height-i.height})),s=T.filter((function(i){return i.height==T[0].height})));o=[];s.length&&(y=Math.floor(s.length/2),s.sort((function(i,r){return i.bandwidth-r.bandwidth})),o.push(s[y]));i=t(i);for(s=i.next();!s.done;s=i.next())s=s.value,s.type!=ne&&"image"!=s.type||o.push(s);return o}L("shaka.util.PlayerConfiguration",Zl);Zl.mergeConfigObjects=bm;Zl.createDefault=$l;function cm(){(this||i).g=null;(this||i).h=[]}function dm(i,r){var o=0;i.g&&i.g.state==r&&(o+=i.g.duration);i=t(i.h);for(var s=i.next();!s.done;s=i.next())s=s.value,o+=s.state==r?s.duration:0;return o}function em(i){function b(i){return{timestamp:i.timestamp,state:i.state,duration:i.duration}}for(var r=[],o=t(i.h),s=o.next();!s.done;s=o.next())r.push(b(s.value));i.g&&r.push(b(i.g));return r}function fm(){(this||i).i=(this||i).h=null;(this||i).g=[]}function gm(i,r,o){i.i!=r&&(i.i=r,i.g.push({timestamp:Date.now()/1e3,id:r.id,type:"text",fromAdaptation:o,bandwidth:null}))}function hm(){(this||i).C=(this||i).D=(this||i).I=(this||i).G=(this||i).u=(this||i).j=(this||i).H=(this||i).m=(this||i).i=(this||i).M=(this||i).N=(this||i).J=(this||i).K=(this||i).L=(this||i).l=(this||i).s=NaN;(this||i).g=new cm;(this||i).h=new fm}function V(o,s){$a.call(this||i);var p=this||i;(this||i).l=Ou;(this||i).oe=(this||i).h=null;(this||i).$=!1;(this||i).Be=new Kf;(this||i).Fb=new Kf;(this||i).s=new Kf;(this||i).va=new Kf;(this||i).G=(this||i).I=(this||i).m=(this||i).J=null;(this||i).He=0;(this||i).W=new Sl;(this||i).ha=(this||i).aa=(this||i).i=(this||i).Ie=(this||i).H=(this||i).j=(this||i).sa=(this||i).L=(this||i).Bh=(this||i).Z=(this||i).V=(this||i).ua=(this||i).M=(this||i).K=(this||i).xb=null;(this||i).Xa=!1;(this||i).fg=(this||i).u=null;(this||i).Ag=1e9;(this||i).tc=[];(this||i).N=NaN;(this||i).g=jm(this||i);(this||i).Ee={width:Infinity,height:Infinity};(this||i).C=null;(this||i).Ra=new Ve((this||i).g.preferredAudioLanguage,(this||i).g.preferredVariantRole,(this||i).g.preferredAudioChannelCount,(this||i).g.preferredVideoHdrLevel,(this||i).g.preferSpatialAudio,(this||i).g.preferredVideoLayout,(this||i).g.preferredAudioLabel,(this||i).g.preferredVideoLabel,(this||i).g.mediaSource.codecSwitchingStrategy,(this||i).g.manifest.dash.enableAudioGroups);(this||i).Wa=(this||i).g.preferredTextLanguage;(this||i).nc=(this||i).g.preferredTextRole;(this||i).Xb=(this||i).g.preferForcedSubs;(this||i).Ib=[];s&&s(this||i);(this||i).V=km(this||i);(this||i).Z=new Il((this||i).g.cmsd);(this||i).J=lm(this||i);(this||i).J.mg((this||i).g.streaming.forceHTTPS);(this||i).D=null;Yu&&((this||i).D=Yu(),(this||i).D.configure((this||i).g.ads));(this||i).Be.o(r,"online",(function(){nm(p);p.eg()}));(this||i).se=new Dd((function(){return om(p)}));o&&(Me("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Gc(o,!0))}pa(V,$a);function pm(i){null!=i.L&&(Ei(i.L),i.L.release(),i.L=null)}function qm(i,r){if(r.lcevc.enabled){var o=i.mb();o&&o[0]&&"video/mp2t"==o[0].videoMimeType&&(Hd()||navigator.userAgent.match(/Edge\//))&&(r.mediaSource.forceTransmux||Ra("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled."));pm(i);null==i.L&&(i.L=new Di(i.h,i.Bh,r.lcevc),i.I&&(i.I.N=i.L))}else pm(i)}function rm(i,r){return new O(i,r)}p=V.prototype;p.destroy=function(){var r,o=this||i;return K((function(i){switch(i.g){case 1:if(o.l==Uu)return i.return();pm(o);r=o.detach();o.l=Uu;return D(i,r,2);case 2:o.Be&&(o.Be.release(),o.Be=null);o.Fb&&(o.Fb.release(),o.Fb=null);o.s&&(o.s.release(),o.s=null);o.va&&(o.va.release(),o.va=null);o.fg=null;o.g=null;o.C=null;o.oe=null;o.V=null;o.Z=null;if(!o.J){i.F(3);break}return D(i,o.J.destroy(),4);case 4:o.J=null;case 3:o.u&&(o.u.release(),o.u=null),$a.prototype.release.call(o),F(i)}}))};function tm(){r.Promise||Ra("A Promise implementation or polyfill is required");if(!(r.Promise&&r.Uint8Array&&Array.prototype.forEach)||Jd("Trident/"))return!1;var i=Rd();return!(i&&9>i||!(r.MediaKeys&&r.navigator&&r.navigator.requestMediaKeySystemAccess&&r.MediaKeySystemAccess&&r.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Ed()||Fd("application/x-mpegurl"))}function um(i,r){i.dispatchEvent(rm("onstatechange",(new Map).set("state",r)))}p.Gc=function(r,o){o=void 0===o||o;var s,p,y=this||i;return K((function(i){switch(i.g){case 1:if(y.l==Uu)throw new P(2,7,7e3);if(!y.h||y.h==r){i.F(2);break}return D(i,y.detach(),2);case 2:return D(i,vm(y,"attach"),4);case 4:if(i.h)return i.return();ta(i,5,6);um(y,"attach");s=function(){var i=wm(y);i&&xm(y,i)};y.Fb.o(r,"error",s);y.h=r;if(!o||!Ed()||y.I){i.F(6);break}return D(i,ym(y),6);case 6:xa(i);y.W.release();ya(i,0);break;case 5:return p=wa(i),D(i,y.detach(),10);case 10:throw p}}))};p.Eg=function(r){(this||i).Bh=r};p.detach=function(r){r=void 0!==r&&r;var o=this||i;return K((function(i){if(1==i.g){if(o.l==Uu)throw new P(2,7,7e3);return D(i,o.Wc(!1,r),2)}if(3!=i.g)return D(i,vm(o,"detach"),3);if(i.h)return i.return();try{o.h&&(o.Fb.ub(),o.h=null),um(o,"detach"),o.D&&!r&&o.D.release()}finally{o.W.release()}F(i)}))};function vm(i,r){var o;return K((function(s){return 1==s.g?(o=++i.He,D(s,Tl(i.W,r),2)):o!=i.He?(i.W.release(),s.return(!0)):s.return(!1)}))}p.Wc=function(r,o){r=void 0===r||r;o=void 0!==o&&o;var s,p,y,A,T,x,I,C,M,N=this||i;return K((function(i){switch(i.g){case 1:return N.l!=Uu&&(N.l=Ou),D(i,vm(N,"unload"),2);case 2:if(i.h)return i.return();ua(i,3);N.Xa=!1;um(N,"unload");r&&!Ed()&&(r=!1);pm(N);s=N.Ib.map((function(i){return i()}));N.Ib=[];return D(i,Promise.all(s),5);case 5:N.dispatchEvent(rm("unloading"));N.ua&&(N.ua.release(),N.ua=null);N.h&&(N.s.ub(),N.va.ub());N.se.stop();N.xb&&(N.xb.release(),N.xb=null);if(!N.H){i.F(6);break}return D(i,N.H.stop(),7);case 7:N.H=null,N.Ie=null;case 6:if(!N.u){i.F(8);break}return D(i,N.u.stop(),8);case 8:if(!N.j){i.F(10);break}return D(i,N.j.destroy(),11);case 11:N.j=null;case 10:N.K&&(N.K.release(),N.K=null);N.G&&(N.G.release(),N.G=null);if(!N.I){i.F(12);break}return D(i,N.I.destroy(),13);case 13:N.I=null;case 12:N.D&&!o&&N.D.onAssetUnload();N.Z&&(N.Z.g=null);N.h&&fl(N.h);if(!N.h||!N.h.src){i.F(14);break}return D(i,new Promise((function(i){return new Dd(i).S(.1)})),15);case 15:N.h.removeAttribute("src"),N.h.load();case 14:if(!N.m){i.F(16);break}return D(i,N.m.destroy(),17);case 17:N.m=null;case 16:N.aa=null;N.M=null;if(N.i){p=t(N.i.variants);for(y=p.next();!y.done;y=p.next())for(A=y.value,T=t([A.audio,A.video]),x=T.next();!x.done;x=T.next())(I=x.value)&&I.segmentIndex&&I.segmentIndex.release();C=t(N.i.textStreams);for(x=C.next();!x.done;x=C.next())M=x.value,M.segmentIndex&&M.segmentIndex.release()}N.i=null;N.C=new hm;N.xg=null;N.tc=[];N.N=NaN;zm(N);case 3:xa(i);N.W.release();ya(i,4);break;case 4:if(r&&Ed()&&!N.I)return D(i,ym(N),0);i.F(0)}}))};p.xj=function(r){(this||i).ha=r};p.load=function(r,o,s){o=void 0===o?null:o;var p,y,A,T,x,I=this||i;return K((function(i){switch(i.g){case 1:if(I.l==Uu)throw new P(2,7,7e3);return D(i,Tl(I.W,"load"),2);case 2:I.W.release();if(!I.h)throw new P(2,7,7002);if(!I.aa){i.F(3);break}return D(i,I.Wc(!1),3);case 3:p=++I.He;y=function(){if(I.He!=p)throw new P(2,7,7e3)};A=function(i,r){return K((function(o){switch(o.g){case 1:return ua(o,2),D(o,Tl(I.W,r),4);case 4:return y(),D(o,i(),5);case 5:y();case 2:xa(o),I.W.release(),ya(o,0)}}))};ta(i,5);I.ha=o;I.Xa=!1;I.dispatchEvent(rm("loading"));T=Date.now()/1e3;I.C=new hm;I.aa=r;if(s){i.F(7);break}return D(i,A((function(){return K((function(i){if(1==i.g)return D(i,Am(I),2);s=i.h;F(i)}))}),"guessMimeType_"),7);case 7:if(Bm(I,s))return D(i,A((function(){return K((function(i){return D(i,Cm(I,s),0)}))}),"initializeSrcEqualsDrmInner_"),16);if(I.I){i.F(11);break}return D(i,A((function(){return K((function(i){return D(i,ym(I),0)}))}),"initializeMediaSourceEngineInner_"),11);case 11:return D(i,A((function(){return K((function(i){return D(i,Dm(I,s),0)}))}),"parseManifestInner_"),13);case 13:return D(i,A((function(){return K((function(i){return D(i,Em(I),0)}))}),"initializeDrmInner_"),14);case 14:return D(i,A((function(){return K((function(i){return D(i,Fm(I,T),0)}))}),"loadInner_"),10);case 16:return D(i,A((function(){return K((function(i){return D(i,Gm(I,T,s),0)}))}),"srcEqualsInner_"),10);case 10:I.dispatchEvent(rm("loaded"));va(i,0);break;case 5:x=wa(i);if(7e3==x.code){i.F(18);break}return D(i,I.Wc(!1),18);case 18:throw x}}))};function Am(i){var r,o;return K((function(s){if(1==s.g)return r=i.g.manifest.retryParameters,D(s,Vk(i.aa,i.J,r),2);o=s.h;"application/x-mpegurl"==o&&Pd()&&(o="application/vnd.apple.mpegurl");return s.return(o)}))}function Bm(i,r){if(!Ed())return!0;if(r){if(""==(i.h||Gd()).canPlayType(r))return!1;if(!(Ed()&&r in uo))return!0;if("application/x-mpegurl"===r||"application/vnd.apple.mpegurl"===r){if(i.g.streaming.preferNativeHls)return!0;if(Pd())return i.g.streaming.useNativeHlsOnSafari}}return!1}function ym(i){var r,o,s,p,y;return K((function(A){if(1==A.g)return um(i,"media-source"),r=i.g.textDisplayFactory,o=r(),i.xg=r,s=Hm(i.h,o,(function(r,o,s){Im(i,r,o,s)}),i.L),s.configure(i.g.mediaSource),p=i.g.manifest,y=p.segmentRelativeVttTiming,s.Z=y,D(A,s.L,2);i.I=s;F(A)}))}function Dm(i,r){var o,s,p,y,A,T,x,I;return K((function(C){if(1==C.g)return o=i.J,um(i,"manifest-parser"),i.Ie=Hh(i.aa,r||null),i.H=i.Ie(),s=Ad(i.g.manifest),i.h&&"AUDIO"===i.h.nodeName&&(s.disableVideo=!0),i.H.configure(s),i.ua=new ak((function(){return i.Ha()})),i.ua.addEventListener("regionadd",(function(r){r=r.region;Jm(i,"timelineregionadded",r);i.D&&i.D.onDashTimedMetadata(r)})),i.sa=null,i.g.streaming.observeQualityChanges&&(i.sa=new Wj((function(){return i.Lb()})),i.sa.addEventListener("qualitychange",(function(r){var o=r.quality;r=r.position;o=(new Map).set("mediaQuality",{bandwidth:o.bandwidth,audioSamplingRate:o.audioSamplingRate,codecs:o.codecs,contentType:o.contentType,frameRate:o.frameRate,height:o.height,mimeType:o.mimeType,channelsCount:o.channelsCount,pixelAspectRatio:o.pixelAspectRatio,width:o.width}).set("position",r);i.dispatchEvent(rm("mediaqualitychanged",o))}))),p={networkingEngine:o,filter:function(r){return Km(i,r)},makeTextStreamsForClosedCaptions:function(r){return Lm(i,r)},onTimelineRegionAdded:function(r){var o=i.ua;e:{var s=t(o.g);for(var p=s.next();!p.done;p=s.next())if(p=p.value,p.schemeIdUri==r.schemeIdUri&&p.id==r.id&&p.startTime==r.startTime&&p.endTime==r.endTime){s=p;break e}s=null}null==s&&(o.g.add(r),r=new O("regionadd",new Map([["region",r]])),o.dispatchEvent(r))},onEvent:function(r){return i.dispatchEvent(r)},onError:function(r){return xm(i,r)},isLowLatencyMode:function(){return i.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return i.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){i.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){i.j&&i.j.updateDuration()},newDrmInfo:function(r){var o=i.m?i.m.g:null;o&&i.m.u&&Mm(i,o.keySystem,r)},onManifestUpdated:function(){var r=(new Map).set("isLive",i.R());i.dispatchEvent(rm("manifestupdated",r));i.D&&i.D.onManifestUpdated(i.R())},getBandwidthEstimate:function(){return i.u.getBandwidthEstimate()}},y=Date.now()/1e3,um(i,"manifest"),A=i,D(C,i.H.start(i.aa,p),2);A.i=C.h;T=rm("manifestparsed");i.dispatchEvent(T);if(0==i.i.variants.length)throw new P(2,4,4036);Nm(i.i);x=Date.now()/1e3;I=x-y;i.C.H=I;F(C)}))}function Em(i){var r,o,s;return K((function(p){return 1==p.g?(um(i,"drm-engine"),r=Date.now()/1e3,o=!0,i.m=Om(i,{zc:i.J,onError:function(r){xm(i,r)},Fe:function(r){Pm(i,r)},onExpirationUpdated:function(r,o){Qm(i,r,o)},onEvent:function(s){i.dispatchEvent(s);"drmsessionupdate"==s.type&&o&&(o=!1,i.C.j=Date.now()/1e3-r,i.L&&Ei(i.L))}}),i.m.configure(i.g.drm),ce(i.i.variants,i.g.restrictions,i.Ee)&&i.j&&Rm(i),s=Ce(i.i.variants),D(p,Zg(i.m,s,i.i.offlineSessionIds),2)):3!=p.g?D(p,i.m.Gc(i.h),3):D(p,Km(i,i.i),0)}))}function Fm(i,r){var o,s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y;return K((function(Q){switch(Q.g){case 1:um(i,"load");o=i.h;i.K=new Tj({ke:function(){return o.playbackRate},Lc:function(){return o.defaultPlaybackRate},pg:function(i){o.playbackRate=i},fh:function(i){o.currentTime+=i}});s=function(){return Sm(i)};p=function(){return Tm(i)};i.s.o(o,"playing",s);i.s.o(o,"pause",s);i.s.o(o,"ended",s);i.s.o(o,"ratechange",p);qm(i,i.g);y=i.g.abrFactory;i.u&&i.fg==y||(i.fg=y,i.u=y(),"function"!=typeof i.u.setMediaElement&&(Me("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.u.setMediaElement=function(){}),"function"!=typeof i.u.setCmsdManager&&(Me("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.u.setCmsdManager=function(){}),"function"!=typeof i.u.trySuggestStreams&&(Me("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.u.trySuggestStreams=function(){}),i.u.configure(i.g.abr));i.Ra=new Ve(i.g.preferredAudioLanguage,i.g.preferredVariantRole,i.g.preferredAudioChannelCount,i.g.preferredVideoHdrLevel,i.g.preferSpatialAudio,i.g.preferredVideoLayout,i.g.preferredAudioLabel,i.g.preferredVideoLabel,i.g.mediaSource.codecSwitchingStrategy,i.g.manifest.dash.enableAudioGroups);i.Wa=i.g.preferredTextLanguage;i.nc=i.g.preferredTextRole;i.Xb=i.g.preferForcedSubs;Um(i.i.presentationTimeline,i.g.playRangeStart,i.g.playRangeEnd);i.u.init((function(r,o,s){i.j&&r!=i.j.j&&Vm(i,r,!0,void 0!==o&&o,void 0===s?0:s)}));i.u.setMediaElement(o);i.u.setCmsdManager(i.Z);Zd(i.i,i.g.preferredVideoCodecs,i.g.preferredAudioCodecs,i.g.preferredDecodingAttributes);i.j=Wm(i);i.j.configure(i.g.streaming);i.l=_u;o.textTracks&&i.s.o(o.textTracks,"addtrack",(function(r){if(r.track)switch(r=r.track,r.kind){case"chapters":Ym(i,r)}}));i.dispatchEvent(rm("streaming"));A=null;(T=i.j.j)||(A=Zm(i,!0));x=[];I=T||A;C=t([I.video,I.audio]);for(M=C.next();!M.done;M=C.next())(N=M.value)&&!N.segmentIndex&&x.push(N.createSegmentIndex());if(!(0<x.length)){Q.F(2);break}return D(Q,Promise.all(x),2);case 2:i.H&&i.H.onInitialVariantChosen&&i.H.onInitialVariantChosen(I);Um(i.i.presentationTimeline,i.g.playRangeStart,i.g.playRangeEnd);i.G=$m(i,i.ha);i.xb=an(i,r);_=Math.max(i.i.minBufferTime,i.g.streaming.rebufferingGoal);bn(i,o,_);if(T){Q.F(4);break}Vm(i,A,!0,!1,0);if(!i.g.streaming.startAtSegmentBoundary){Q.F(4);break}j=i.G;B=j.ef;return D(Q,cn(A,i.G.Yd()),6);case 6:B.call(j,Q.h);case 4:return i.G.df(),z=i.bc().find((function(i){return i.active})),z||((G=De(i.i.textStreams,i.Wa,i.nc,i.Xb)[0]||null)&&gm(i.C.h,G,!0),A&&(G?(A.audio&&dn(i,A.audio,G)&&(i.$=!0),i.$&&i.I.H.setTextVisibility(!0),en(i)):i.$=!1),G&&(i.g.streaming.alwaysStreamText||i.xc())&&Ck(i.j,G)),D(Q,i.j.start(),7);case 7:i.g.abr.enabled&&(i.u.enable(),fn(i));Rm(i);gn(i);i.i.variants.some((function(i){return i.primary}));(q=i.R())&&(i.g.streaming.liveSync||i.i.serviceDescription)?(H=function(){return hn(i)},i.s.o(o,"timeupdate",H)):q||(Y=function(){return jn(i)},i.s.o(o,"timeupdate",Y),jn(i));i.D&&i.D.onManifestUpdated(q);i.Xa=!0;i.s.na(o,"loadedmetadata",(function(){i.C.m=Date.now()/1e3-r}));F(Q)}}))}function Cm(i,r){var o,s,p,y;return K((function(A){return 1==A.g?(o=re,s=Date.now()/1e3,p=!0,i.m=Om(i,{zc:i.J,onError:function(r){xm(i,r)},Fe:function(r){Pm(i,r)},onExpirationUpdated:function(r,o){Qm(i,r,o)},onEvent:function(r){i.dispatchEvent(r);"drmsessionupdate"==r.type&&p&&(p=!1,i.C.j=Date.now()/1e3-s)}}),i.m.configure(i.g.drm),y={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:r?md(r):"",codecs:r?nd(r):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:o.ia,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},i.m.Z=!0,D(A,Zg(i.m,[y],[]),2)):D(A,i.m.Gc(i.h),0)}))}function Gm(i,r,o){var s,p,y,A,T,x,I,C,M,N;return K((function(_){if(1==_.g)return um(i,"src-equals"),s=i.h,i.G=new Ij(s),p=!1,i.Ib.push((function(){p=!0})),null!=i.ha&&i.G.ef(i.ha),i.K=new Tj({ke:function(){return s.playbackRate},Lc:function(){return s.defaultPlaybackRate},pg:function(i){s.playbackRate=i},fh:function(i){s.currentTime+=i}}),y=i.g.streaming.rebufferingGoal,bn(i,s,y),A=function(){return Sm(i)},T=function(){return Tm(i)},i.s.o(s,"playing",A),i.s.o(s,"pause",A),i.s.o(s,"ended",A),i.s.o(s,"ratechange",T),"none"!=s.preload&&i.s.na(s,"loadedmetadata",(function(){i.C.m=Date.now()/1e3-r})),s.audioTracks&&(i.s.o(s.audioTracks,"addtrack",(function(){return Rm(i)})),i.s.o(s.audioTracks,"removetrack",(function(){return Rm(i)})),i.s.o(s.audioTracks,"change",(function(){return Rm(i)}))),s.textTracks&&(i.s.o(s.textTracks,"addtrack",(function(r){if(r.track)switch(r=r.track,r.kind){case"metadata":kn(i,r);break;case"chapters":Ym(i,r);break;default:Rm(i)}})),i.s.o(s.textTracks,"removetrack",(function(){return Rm(i)})),i.s.o(s.textTracks,"change",(function(){return Rm(i)}))),s.src=rl(i.V,i.aa,o),(Kd()||Jd("Web0S"))&&s.load(),i.l=Bu,i.dispatchEvent(rm("streaming")),x=new mf,zj(s,HTMLMediaElement.HAVE_METADATA,i.s,(function(){i.G.df();x.resolve()})),zj(s,HTMLMediaElement.HAVE_CURRENT_DATA,i.s,(function(){var r;return K((function(o){if(1==o.g)return mn(i),r=nn(i),r.find((function(i){return"disabled"!=i.mode}))?(0<r.length&&(i.$=!0),o.F(2)):D(o,new Promise((function(r){i.s.na(s.textTracks,"change",r);new Dd(r).S(1)})),2);if(p)return o.return();on(i);F(o)}))})),s.error?x.reject(wm(i)):"none"==s.preload&&(Ra('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),x.resolve()),i.s.na(s,"error",(function(){x.reject(wm(i))})),D(_,x,2);(I=i.R())&&i.g.streaming.liveSync?(C=function(){return hn(i)},i.s.o(s,"timeupdate",C)):I||(M=function(){return jn(i)},i.s.o(s,"timeupdate",M),jn(i));i.D&&(i.D.onManifestUpdated(I),I&&(N=i.Ha().end,i.s.o(s,"progress",(function(){var r=i.Ha().end;N!=r&&(i.D.onManifestUpdated(i.R()),N=r)}))));i.Xa=!0;F(_)}))}function mn(i){var r=i.g.preferredAudioLanguage;""!=r&&i.Le(r,i.g.preferredVariantRole)}function on(i){var r=i.g.preferredTextLanguage;""!=r&&i.ig(r,i.g.preferredTextRole,i.g.preferForcedSubs)}function kn(i,r){if("metadata"==r.kind){r.mode="hidden";i.s.o(r,"cuechange",(function(){if(r.activeCues)for(var o=t(r.activeCues),s=o.next();!s.done;s=o.next())(s=s.value,pn(i,s.startTime,s.endTime,s.type,s.value),i.D)&&i.D.onCueMetadataChange(s.value)}));var o=new Dd((function(){var r=qn(i);r=t(r);for(var o=r.next();!o.done;o=r.next())o.value.mode="hidden"})).Qa().S(.5);i.Ib.push((function(){o.stop()}))}}function Im(i,r,o,s){r=t(r);for(var p=r.next();!p.done;p=r.next())if(p=p.value,p.data&&p.cueTime&&p.frames){var y=p.cueTime+o,A=s;A&&y>A&&(A=y);for(var T=t(p.frames),x=T.next();!x.done;x=T.next())pn(i,y,A,"org.id3",x.value);i.D&&i.D.onHlsTimedMetadata(p,y)}}function pn(i,r,o,s,p){r=(new Map).set("startTime",r).set("endTime",o).set("metadataType",s).set("payload",p);i.dispatchEvent(rm("metadata",r))}function Ym(i,r){if(r&&"chapters"==r.kind){r.mode="hidden";var o=new Dd((function(){r.mode="hidden"})).Qa().S(.5);i.Ib.push((function(){o.stop()}))}}function Nm(i){function b(i){return i.video&&i.audio||i.video&&i.video.codecs.includes(",")}i.variants.some(b)&&(i.variants=i.variants.filter(b))}p.dj=function(){for(var r=(this||i).W;r.g;)r.release()};function Om(i,r){return new Sg(r,i.g.drm.updateExpirationTime)}function lm(i){return new wf((function(r,o,s){i.u&&i.u.segmentDownloaded(r,o,s)}),(function(r,o,s){o=(new Map).set("headers",r).set("request",o).set("requestType",s);i.dispatchEvent(rm("downloadheadersreceived",o));if(i.Z&&(o=i.Z,o.h.enabled)){if(s=r["cmsd-static"])try{var p=new Map,y=s.split(",");for(s=0;s<y.length;s++){var A=y[s].split("=");p.set(A[0],Nl(A[1]))}}catch(i){}if(r=r["cmsd-dynamic"]){try{var T=new Map,x=r.split(";");for(r=1;r<x.length;r++){var I=x[r].split("=");T.set(I[0],Nl(I[1]))}var C=T}catch(i){C=null}C&&(o.g=C)}}}),(function(r,o,s,p){r=(new Map).set("request",r).set("error",o).set("httpResponseCode",s).set("aborted",p);i.dispatchEvent(rm("downloadfailed",r))}),(function(r,o,s){var p=i.V;s=void 0===s?{}:s;if(p.g.enabled)if("HEAD"===o.method)zl(p,o);else switch(r){case 0:try{if(p.g.enabled){if(s.type){e:{switch(s.type){case 4:var y="d";break e;case 3:case 2:y="h";break e;case 5:y="s";break e}y=void 0}p.m=y}zl(p,o,{ot:Ws,su:!p.i})}}catch(i){Sa("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",i)}break;case Ta:r=s;try{if(p.g.enabled){var A=r.segment;y=0;A&&(y=A.endTime-A.startTime);var T={d:1e3*y,st:p.h.R()?"l":"v"};T.ot=Cl(r);var x=T.ot===Ys||T.ot===Xs||T.ot===iu||T.ot===Su,I=r.stream;I&&(x&&(T.bl=Gl(p,I.type)),I.bandwidth&&(T.br=I.bandwidth/1e3));x&&T.ot!==Su&&(T.tb=Hl(p,T.ot)/1e3);zl(p,o,T)}}catch(i){Sa("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",i)}break;case 2:case 5:case 6:zl(p,o,{ot:"k"});break;case 4:zl(p,o,{ot:"o"})}}),(function(r,o,s,p){i.H&&i.H.banLocation&&i.H.banLocation(p)}))}function $m(i,r){return new Jj(i.h,i.i,i.g.streaming,r,(function(){i.xb&&Vj(i.xb,!0);i.j&&i.j.Kd();i.M&&rn(i)}),(function(r){return i.dispatchEvent(r)}))}function an(i,r){r=new bk(i.ua,i.R()||0<r);r.addEventListener("enter",(function(r){Jm(i,"timelineregionenter",r.region)}));r.addEventListener("exit",(function(r){Jm(i,"timelineregionexit",r.region)}));r.addEventListener("skip",(function(r){var o=r.region;r.seeking||(Jm(i,"timelineregionenter",o),Jm(i,"timelineregionexit",o))}));var o=new Uj(i.h);o.g.add(r);i.sa&&o.g.add(i.sa);return o}function bn(i,r,o){i.M=new ef;i.M.g=ga;hf(i.M,o,Math.min(.5,o/2));zm(i);i.s.o(r,"waiting",(function(){return rn(i)}));i.s.o(r,"stalled",(function(){return rn(i)}));i.s.o(r,"canplaythrough",(function(){return rn(i)}));i.s.o(r,"progress",(function(){return rn(i)}))}function rn(i){switch(i.l){case Bu:if(i.h.ended)var r=!0;else{var o=Sh(i.h.buffered);r=null!=o&&o>=i.h.duration-1}break;case _u:e:if(i.h.ended||Ui(i.I))r=!0;else{if(i.i.presentationTimeline.R()){o=i.i.presentationTimeline.ac();var s=Sh(i.h.buffered);if(null!=s&&s>=o){r=!0;break e}}r=!1}break;default:r=!1}s=Uh(i.h.buffered,i.h.currentTime);o=i.M;var p=r,y=o.h.get(o.g);r=o.g;s=p||s>=y?ma:ga;o.g=s;r!=s&&zm(i)}function Hm(i,r,o,s){return new Mi(i,r,o,s)}function km(i){return new ql({getBandwidthEstimate:function(){return i.u?i.u.getBandwidthEstimate():NaN},Lb:function(){return i.Lb()},getCurrentTime:function(){return i.h?i.h.currentTime:0},Nb:function(){return i.Nb()},Zb:function(){return i.Zb()},mb:function(){return i.mb()},R:function(){return i.R()}},i.g.cmcd)}function Wm(i){return new pk(i.i,{je:function(){return i.G?i.G.Yd():0},getBandwidthEstimate:function(){return i.u.getBandwidthEstimate()},Y:i.I,zc:i.J,onError:function(r){return xm(i,r)},onEvent:function(r){return i.dispatchEvent(r)},Xi:function(){i.H&&i.H.update&&i.H.update()},Zf:function(r,o){var s=r.startTime,p=r.endTime,y=o.type;i.G&&i.G.gh();rn(i);s=(new Map).set("start",s).set("end",p).set("contentType",y);i.dispatchEvent(rm("segmentappended",s));i.u&&o.fastSwitching&&r.Fd&&r.ue&&i.u.trySuggestStreams()},Wi:function(r,o){(o=o.Uf)&&i.sa&&Yj(i.sa,o,r)},Gg:function(r,o){var s=i.m;if(s.h.parseInbandPsshEnabled&&!s.H&&["audio","video"].includes(r)){o=new ug(lc(o));var p=0,y=t(o.data);for(r=y.next();!r.done;r=y.next())p+=r.value.length;if(0==p)s=Promise.resolve();else{p=new Uint8Array(p);y=0;o=t(o.data);for(r=o.next();!r.done;r=o.next())r=r.value,p.set(r,y),y+=r.length;hh(s,"cenc",p);s=s.l}}else s=Promise.resolve();return s},Yi:function(r,o,s){Im(i,r,o,s)},ce:function(r,o){return i.ce(r,o)}})}p.configure=function(r,o){2==arguments.length&&"string"==typeof r&&(r=Ql(r,o));r.streaming&&"forceTransmuxTS"in r.streaming&&(Me("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),r.mediaSource.mediaSource=r.streaming.forceTransmuxTS,delete r.streaming.forceTransmuxTS);r.streaming&&"forceTransmux"in r.streaming&&(Me("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),r.mediaSource.mediaSource=r.streaming.forceTransmux,delete r.streaming.forceTransmux);r.streaming&&r.streaming.lowLatencyMode&&(void 0==r.streaming.inaccurateManifestTolerance&&(r.streaming.inaccurateManifestTolerance=0),void 0==r.streaming.rebufferingGoal&&(r.streaming.rebufferingGoal=.01),void 0==r.streaming.segmentPrefetchLimit&&(r.streaming.segmentPrefetchLimit=2),void 0==r.streaming.retryParameters&&(r.streaming.retryParameters={}),void 0==r.streaming.retryParameters.baseDelay&&(r.streaming.retryParameters.baseDelay=100),void 0==r.manifest&&(r.manifest={}),void 0==r.manifest.retryParameters&&(r.manifest.retryParameters={}),void 0==r.manifest.retryParameters.baseDelay&&(r.manifest.retryParameters.baseDelay=100),void 0==r.drm&&(r.drm={}),void 0==r.drm.retryParameters&&(r.drm.retryParameters={}),void 0==r.drm.retryParameters.baseDelay&&(r.drm.retryParameters.baseDelay=100));var s=bm((this||i).g,r,jm(this||i));sn(this||i);return s};function sn(i){if(i.H){var r=Ad(i.g.manifest);i.h&&"AUDIO"===i.h.nodeName&&(r.disableVideo=!0);i.H.configure(r)}i.m&&i.m.configure(i.g.drm);if(i.j){i.j.configure(i.g.streaming);try{tn(i,i.i)}catch(r){xm(i,r)}i.u&&gn(i);r=i.j.j;!r||r.allowedByApplication&&r.allowedByKeySystem||un(i)}i.J&&i.J.mg(i.g.streaming.forceHTTPS);if(i.I&&(i.I.configure(i.g.mediaSource),i.I.Z=i.g.manifest.segmentRelativeVttTiming,r=i.g.textDisplayFactory,i.xg!=r)){var o=r(),s=i.I,p=s.H;s.H=o;p&&(o.setTextVisibility(p.isTextVisible()),p.destroy());s.h&&(s.h.j=o);i.xg=r;i.j&&(r=i.j,(o=r.i.get(ne))&&Ak(r,o.stream,!0,0,!0))}i.u&&(i.u.configure(i.g.abr),i.g.abr.enabled?i.u.enable():i.u.disable(),fn(i));i.M&&(r=i.g.streaming.rebufferingGoal,i.i&&(r=Math.max(r,i.i.minBufferTime)),hf(i.M,r,Math.min(.5,r/2)));i.i&&Um(i.i.presentationTimeline,i.g.playRangeStart,i.g.playRangeEnd);i.D&&i.D.configure(i.g.ads);i.V&&i.V.configure(i.g.cmcd);i.Z&&i.Z.configure(i.g.cmsd)}p.getConfiguration=function(){var r=jm(this||i);bm(r,(this||i).g,jm(this||i));return r};p.Uh=function(){if((this||i).h){var r=(this||i).h.buffered.length;r=r?(this||i).h.buffered.end(r-1):0;var o=this.getConfiguration().streaming.bufferingGoal;o=Math.min((this||i).h.currentTime+o,this.Ha().end);if(r>=o)return 1;if(!(r<=(this||i).h.currentTime)&&r<o)return(r-(this||i).h.currentTime)/(o-(this||i).h.currentTime)}return 0};p.hj=function(){for(var r in(this||i).g)delete(this||i).g[r];bm((this||i).g,jm(this||i),jm(this||i));sn(this||i)};p.ie=function(){return(this||i).l};p.If=function(){return(this||i).i?(this||i).i.type:null};p.ni=function(){return(this||i).h};p.Zb=function(){return(this||i).J};p.Gf=function(){return(this||i).aa};p.ee=function(){return(this||i).D?(this||i).D:null};p.R=function(){return(this||i).i?(this||i).i.presentationTimeline.R():!(!(this||i).h||!(this||i).h.src)&&Infinity==(this||i).h.duration};p.wc=function(){return!!(this||i).i&&(this||i).i.presentationTimeline.wc()};p.Pc=function(){if((this||i).i){var r=(this||i).i.variants;return!!r.length&&!r[0].video}return!(!(this||i).h||!(this||i).h.src)&&((this||i).h.videoTracks?0==(this||i).h.videoTracks.length:0==(this||i).h.videoHeight)};p.Ha=function(){if((this||i).i){if(!(this||i).Xa&&"HLS"==(this||i).i.type)return{start:0,end:0};var r=(this||i).i.presentationTimeline;return{start:r.Nc(),end:r.Ob()}}return(this||i).h&&(this||i).h.src&&(r=(this||i).h.seekable,r.length)?{start:r.start(0),end:r.end(r.length-1)}:{start:0,end:0}};p.Fi=function(){this.R()&&((this||i).h.currentTime=this.Ha().end)};p.keySystem=function(){var i=this.drmInfo();return i?i.keySystem:""};p.drmInfo=function(){return(this||i).m?(this||i).m.g:null};p.td=function(){return(this||i).m?(this||i).m.td():Infinity};p.Ff=function(){return(this||i).m?(this||i).m.Ff():[]};p.ge=function(){return(this||i).m?(this||i).m.ge():{}};p.yd=function(){return!!(this||i).M&&(this||i).M.g==ga};p.Nb=function(){return(this||i).h?(this||i).K?(this||i).K.h:1:0};p.Pd=function(r){var o=this||i;0==r?Ra("A trick play rate of 0 is unsupported!"):((this||i).va.ub(),(this||i).h.paused&&(this||i).h.play(),(this||i).K.set(r),(this||i).l==_u&&((this||i).u.playbackRateChanged(r),zk((this||i).j,1<Math.abs(r))),this.R()&&(this||i).va.o((this||i).h,"timeupdate",(function(){var i=o.h.currentTime,s=o.Ha(),p=o.g.streaming.safeSeekOffset;0<r?i>=s.end&&o.od():i<=s.start+p&&o.od()})))};p.od=function(){var r=(this||i).K.Lc();(this||i).l==Bu&&(this||i).K.set(r);(this||i).l==_u&&((this||i).K.set(r),(this||i).u.playbackRateChanged(r),zk((this||i).j,!1));(this||i).va.ub()};p.mb=function(){if((this||i).i){for(var r=(this||i).j?(this||i).j.j:null,o=[],s=0,p=t((this||i).i.variants),y=p.next();!y.done;y=p.next())if(y=y.value,Be(y)){var A=te(y);A.active=y==r;A.active||1==s||null==r||y.video!=r.video||y.audio!=r.audio||(A.active=!0);A.active&&s++;o.push(A)}return o}return(this||i).h&&(this||i).h.audioTracks?Array.from((this||i).h.audioTracks).map((function(i){return Ae(i)})):[]};p.bc=function(){if((this||i).i){for(var r=(this||i).j?(this||i).j.s:null,o=[],s=t((this||i).i.textStreams),p=s.next();!p.done;p=s.next()){p=p.value;var y=ue(p);y.active=p==r;o.push(y)}return o}return(this||i).h&&(this||i).h.src&&(this||i).h.textTracks?nn(this||i).map((function(i){return ye(i)})):[]};p.fe=function(){var r=(this||i).tc;(this||i).i&&(r=(this||i).i.imageStreams);return r.map((function(i){return ve(i)}))};p.Rh=function(r){var o,s,p,y,A=this||i;return K((function(i){if(1==i.g){if(A.l!=_u&&A.l!=Bu)return i.return(null);o=A.tc;A.i&&(o=A.i.imageStreams);return(s=o.find((function(i){return i.id==r})))?s.segmentIndex?i.F(2):D(i,s.createSegmentIndex(),2):i.return(null)}if(4!=i.g)return p=[],Pj(s.segmentIndex,(function(i){var o=vn(i.tilesLayout||s.tilesLayout);if(o){o=o.rows*o.mc;for(var y=i.h-i.startTime,T=0;T<o;T++)p.push(A.Kf(r,i.startTime+y*T/o))}})),D(i,Promise.all(p),4);y=i.h;return i.return(y.filter((function(i){return i})))}))};function vn(i){return i&&(i=/(\d+)x(\d+)/.exec(i))?{mc:parseInt(i[1],10),rows:parseInt(i[2],10)}:null}p.Kf=function(r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q=this||i;return K((function(i){if(1==i.g){if(Q.l!=_u&&Q.l!=Bu)return i.return(null);s=Q.tc;Q.i&&(s=Q.i.imageStreams);return(p=s.find((function(i){return i.id==r})))?p.segmentIndex?i.F(2):D(i,p.createSegmentIndex(),2):i.return(null)}y=p.segmentIndex.find(o);if(null==y)return i.return(null);A=p.segmentIndex.get(y);T=vn(A.tilesLayout||p.tilesLayout);if(!T)return i.return(null);x=p.width||0;I=p.height||0;C=x/T.mc;M=I/T.rows;N=T.mc*T.rows;_=A.h-A.startTime;j=A.C||_/N;B=A.startTime;G=z=0;1<N&&(q=Math.floor((o-A.startTime)/j),B=A.startTime+q*j,z=q%T.mc*C,G=Math.floor(q/T.mc)*M);H=!1;(Y=A.u)&&(H=!0,M=Y.height,z=Y.positionX,G=Y.positionY,C=Y.width);return i.return({segment:A,imageHeight:I,imageWidth:x,height:M,positionX:z,positionY:G,startTime:B,duration:j,uris:A.ba(),width:C,sprite:H})}))};p.jg=function(r){if((this||i).i&&(this||i).j){var o=(this||i).i.textStreams.find((function(i){return i.id==r.id}));o&&o!=(this||i).j.s&&(gm((this||i).C.h,o,!1),Ck((this||i).j,o),wn(this||i),(this||i).Wa=o.language)}else if((this||i).h&&(this||i).h.src&&(this||i).h.textTracks){o=nn(this||i);o=t(o);for(var s=o.next();!s.done;s=o.next())s=s.value,we(s)==r.id?s.mode=(this||i).$?"showing":"hidden":s.mode="disabled";wn(this||i)}};p.Me=function(r,o,s){o=void 0!==o&&o;s=void 0===s?0:s;if((this||i).i&&(this||i).j){(this||i).g.abr.enabled&&Ra("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var p=(this||i).i.variants.find((function(i){return i.id==r.id}));p&&Be(p)&&(Vm(this||i,p,!1,o,s),(this||i).Ra=new Ue(p,(this||i).g.mediaSource.codecSwitchingStrategy,(this||i).g.manifest.dash.enableAudioGroups),gn(this||i))}else if((this||i).h&&(this||i).h.audioTracks)for(o=Array.from((this||i).h.audioTracks),o=t(o),s=o.next();!s.done;s=o.next())if(s=s.value,we(s)==r.id){xn(this||i,s);break}};p.Th=function(){return yn(this.mb())};p.xi=function(){return yn(this.bc())};p.Sh=function(){return Array.from(zn(this.mb()))};p.wi=function(){return Array.from(zn(this.bc()))};p.Le=function(r,o,s,p){s=void 0===s?0:s;p=void 0===p?0:p;if((this||i).i&&(this||i).G){(this||i).Ra=new Ve(r,o||"",s,"",!1,"","","",(this||i).g.mediaSource.codecSwitchingStrategy,(this||i).g.manifest.dash.enableAudioGroups);r=function(i,r){return i.video||r.video?i.video&&r.video?Math.abs((i.video.height||0)-(r.video.height||0))+Math.abs((i.video.width||0)-(r.video.width||0)):Infinity:0};o=(this||i).j.j;var y=(this||i).Ra.create((this||i).i.variants);s=null;y=t(y.values());for(var A=y.next();!A.done;A=y.next())(A=A.value,!s||r(s,o)>r(A,o))&&(s=A);s?(r=te(s),this.Me(r,!0,p)):un(this||i)}else(this||i).h&&(this||i).h.audioTracks&&(p=De(this.mb(),r,o||"",!1)[0])&&this.Me(p)};p.ig=function(r,o,s){s=void 0!==s&&s;(this||i).i&&(this||i).G?((this||i).Wa=r,(this||i).nc=o||"",(this||i).Xb=s,(r=De((this||i).i.textStreams,(this||i).Wa,(this||i).nc,(this||i).Xb)[0]||null)&&r!=(this||i).j.s&&(gm((this||i).C.h,r,!1),(this||i).g.streaming.alwaysStreamText||this.xc()))&&(Ck((this||i).j,r),wn(this||i)):(r=De(this.bc(),r,o||"",s)[0])&&this.jg(r)};p.oj=function(r,o,s){o=void 0===o||o;s=void 0===s?0:s;if((this||i).i&&(this||i).G){for(var p=null,y=t((this||i).i.variants),A=y.next();!A.done;A=y.next())if(A=A.value,A.audio.label==r){p=A;break}null!=p&&((this||i).Ra=new Ve(p.language,"",0,"",!1,"",r,"",(this||i).g.mediaSource.codecSwitchingStrategy,(this||i).g.manifest.dash.enableAudioGroups),un(this||i,o,s))}else if((this||i).h&&(this||i).h.audioTracks){s=Array.from((this||i).h.audioTracks);o=null;s=t(s);for(p=s.next();!p.done;p=s.next())p=p.value,p.label==r&&(o=p);o&&xn(this||i,o)}};p.xc=function(){var r=(this||i).$;return(this||i).I&&(this||i).l==_u?(this||i).I.H.isTextVisible():(this||i).h&&(this||i).h.src&&(this||i).h.textTracks?nn(this||i).some((function(i){return"showing"==i.mode})):r};p.Sg=function(){return(this||i).h&&(this||i).h.src&&(this||i).h.textTracks?An(this||i).map((function(i){return ye(i)})):[]};p.Wh=function(r){if(!(this||i).h||!(this||i).h.src||!(this||i).h.textTracks)return[];var o=Kb(r),s=An(this||i).filter((function(i){return Kb(i.language)==o}));if(!s||!s.length)return[];r=[];var p=new Set;s=t(s);for(var y=s.next();!y.done;y=s.next())if((y=y.value)&&y.cues){y=t(y.cues);for(var A=y.next();!A.done;A=y.next()){var T=A.value;(A=T.id)&&""!=A||(A=T.startTime+"-"+T.endTime+"-"+T.text);T={id:A,title:T.text,startTime:T.startTime,endTime:T.endTime};p.has(A)||(r.push(T),p.add(A))}}return r};function nn(i){return Array.from(i.h.textTracks).filter((function(i){return"metadata"!=i.kind&&"chapters"!=i.kind&&"Shaka Player TextTrack"!=i.label}))}function qn(i){return Array.from(i.h.textTracks).filter((function(i){return"metadata"==i.kind}))}function An(i){return Array.from(i.h.textTracks).filter((function(i){return"chapters"==i.kind}))}p.Oe=function(r){r=!!r;if((this||i).$!=r){(this||i).$=r;if((this||i).l==_u)(this||i).I.H.setTextVisibility(r),(this||i).g.streaming.alwaysStreamText||(r?(this||i).j.s||(r=De((this||i).i.textStreams,(this||i).Wa,(this||i).nc,(this||i).Xb),0<r.length&&(Ck((this||i).j,r[0]),wn(this||i))):yk((this||i).j));else if((this||i).h&&(this||i).h.src&&(this||i).h.textTracks){var o=nn(this||i);o=t(o);for(var s=o.next();!s.done;s=o.next())s=s.value,"disabled"!=s.mode&&(s.mode=r?"showing":"hidden")}en(this||i)}};p.oi=function(){if(!this.R())return null;if((this||i).G)var r=(this||i).G.Yd();else{if(null==(this||i).ha)return new Date;r=(this||i).ha}if((this||i).i)return new Date(1e3*((this||i).i.presentationTimeline.i+r));if((this||i).h&&(this||i).h.getStartDate){var o=(this||i).h.getStartDate();return isNaN(o.getTime())?null:new Date(o.getTime()+1e3*r)}return null};p.Vg=function(){if(!this.R())return null;if((this||i).i)return new Date(1e3*(this||i).i.presentationTimeline.i);if((this||i).h&&(this||i).h.getStartDate){var r=(this||i).h.getStartDate();return isNaN(r.getTime())?null:r}return null};p.Lb=function(){if((this||i).l==_u)return(this||i).I.Lb();var r={total:[],audio:[],video:[],text:[]};(this||i).l==Bu&&(r.total=Vh((this||i).h.buffered));return r};p.getStats=function(){if((this||i).l!=_u&&(this||i).l!=Bu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Sm(this||i);var r=(this||i).h,o=r.currentTime/r.duration;if(!isNaN(o)){var s=(this||i).C;o=Math.round(100*o);s.i=isNaN(s.i)?o:Math.max(s.i,o)}(this||i).G&&((this||i).C.M=(this||i).G.Bg(),(this||i).C.N=(this||i).G.Cg());if(r.getVideoPlaybackQuality){s=r.getVideoPlaybackQuality();o=(this||i).C;var p=Number(s.totalVideoFrames);o.L=Number(s.droppedVideoFrames);o.K=p;(this||i).C.J=Number(s.corruptedVideoFrames)}(this||i).m?(s=(this||i).m,s=s.K?s.K:NaN):s=NaN;(this||i).C.u=s;if((this||i).l==_u){s=(this||i).j.j;o=(this||i).j.s;if(s){p=(this||i).K?(this||i).K.h:1;var y=p*s.bandwidth;o&&o.bandwidth&&(y+=p*o.bandwidth);(this||i).C.D=y}s&&s.video&&(o=(this||i).C,p=s.video.height||NaN,o.s=s.video.width||NaN,o.l=p);this.R()&&(s=this.Vg().valueOf()+1e3*r.currentTime,(this||i).C.G=(Date.now()-s)/1e3);(this||i).i&&(this||i).i.presentationTimeline&&((this||i).C.I=(this||i).i.presentationTimeline.g);s=(this||i).u.getBandwidthEstimate();(this||i).C.C=s}(this||i).l==Bu&&(s=(this||i).C,o=r.videoHeight||NaN,s.s=r.videoWidth||NaN,s.l=o);var A=(this||i).C;r=A.s;s=A.l;o=A.D;p=A.K;y=A.L;var T=A.J,x=A.N,I=A.M,C=A.C,M=A.i,N=A.m,_=A.H,j=A.j,B=dm(A.g,"playing"),z=dm(A.g,"paused"),G=dm(A.g,"buffering"),q=A.u,H=A.G,Y=A.I,Q=em(A.g),J=[];A=t(A.h.g);for(var $=A.next();!$.done;$=A.next())$=$.value,J.push({timestamp:$.timestamp,id:$.id,type:$.type,fromAdaptation:$.fromAdaptation,bandwidth:$.bandwidth});return{width:r,height:s,streamBandwidth:o,decodedFrames:p,droppedFrames:y,corruptedFrames:T,stallsDetected:x,gapsJumped:I,estimatedBandwidth:C,completionPercent:M,loadLatency:N,manifestTimeSeconds:_,drmTimeSeconds:j,playTime:B,pauseTime:z,bufferingTime:G,licenseTime:q,liveLatency:H,maxSegmentDuration:Y,stateHistory:Q,switchHistory:J}};p.Hh=function(r,o,s,p,y,A,T){T=void 0!==T&&T;var x,I,C,M,N,_,j,B,z,G,q,H,Y=this||i;return K((function(i){switch(i.g){case 1:if(Y.l!=_u&&Y.l!=Bu)throw new P(1,7,7004);"subtitles"!=s&&"captions"!=s&&Ra("Using a kind value different of `subtitles` or `captions` can cause unwanted issues.");if(p){i.F(2);break}return D(i,Bn(Y,r),3);case 3:p=i.h;case 2:x=[];Y.D&&(x=Y.D.getCuePoints());if(Y.l!=Bu){i.F(4);break}T&&(s="forced");return D(i,Cn(Y,r,o,s,p,A||"",x),5);case 5:I=Kb(o);C=Y.bc();if(M=C.find((function(i){return Kb(i.language)==I&&i.label==(A||"")&&i.kind==s})))return Rm(Y),i.return(M);throw new P(1,2,2012);case 4:N=re;_=Y.h.duration;Y.i&&(_=Y.i.presentationTimeline.getDuration());if(Infinity==_)throw new P(1,4,4033);if(!x.length){i.F(6);break}return D(i,Dn(Y,r,Y.J,Y.g.streaming.retryParameters),7);case 7:j=i.h,B=En(Y,j,p,x),z=new Blob([B],{type:"text/vtt"}),r=Ho(z),p="text/vtt";case 6:G={id:Y.Ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Rj(0,_,[r]),mimeType:p||"",codecs:y||"",kind:s,encrypted:!1,drmInfos:[],keyIds:new Set,language:o,originalLanguage:o,label:A||null,type:N.Da,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!T,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1};q=dd(G.mimeType,G.codecs);H=pd(q);if(!H)throw new P(2,2,2014,p);Y.i.textStreams.push(G);Rm(Y);return i.return(ue(G))}}))};p.Ih=function(r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H=this||i;return K((function(i){switch(i.g){case 1:if(H.l!=_u&&H.l!=Bu)throw new P(1,7,7004);if(o){i.F(2);break}return D(i,Bn(H,r),3);case 3:o=i.h;case 2:if("text/vtt"!=o)throw new P(1,2,2017,r);s=re;p=H.h.duration;H.i&&(p=H.i.presentationTimeline.getDuration());if(Infinity==p)throw new P(1,4,4045);return D(i,Dn(H,r,H.J,H.g.streaming.retryParameters),4);case 4:y=i.h;A=Xr[o];if(!A)throw new P(2,2,2014,o);T=A();x={periodStart:0,segmentStart:0,segmentEnd:p,vttOffset:0};I=lc(y);C=T.parseMedia(I,x,r);M=[];N={};_=t(C);for(j=_.next();!j.done;N={jd:N.jd,jc:N.jc},j=_.next())N.jc=j.value,N.jd=null,B=function(i){return function(){null==i.jd&&(i.jd=zb([r],[i.jc.payload]));return i.jd||[]}}(N),z=new Ph(N.jc.startTime,N.jc.endTime,B,0,null,null,0,0,Infinity),N.jc.payload.includes("#xywh")&&(G=N.jc.payload.split("#xywh=")[1].split(","),4===G.length&&z.rh({height:parseInt(G[3],10),positionX:parseInt(G[0],10),positionY:parseInt(G[1],10),width:parseInt(G[2],10)})),M.push(z);q={id:H.Ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Oj(M),mimeType:o||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:s.cf,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1};H.l==Bu?H.tc.push(q):H.i.imageStreams.push(q);Rm(H);return i.return(ve(q))}}))};p.Gh=function(r,o,s){var p,y,A,T,x=this||i;return K((function(i){switch(i.g){case 1:if(x.l!=_u&&x.l!=Bu)throw new P(1,7,7004);if(s){i.F(2);break}return D(i,Bn(x,r),3);case 3:s=i.h;case 2:return p=[],x.D&&(p=x.D.getCuePoints()),D(i,Cn(x,r,o,"chapters",s,"",p),4);case 4:y=i.h;A=x.Sg();T=A.find((function(i){return i.language==o}));if(!T){i.F(5);break}return D(i,new Promise((function(i,r){x.s.na(y,"load",i);x.s.na(y,"error",(function(){r(new P(1,2,2015))}))})),6);case 6:return Rm(x),i.return(T);case 5:throw new P(1,2,2012)}}))};function Bn(i,r){var o;return K((function(s){switch(s.g){case 1:return ta(s,2),D(s,Vk(r,i.J,i.g.streaming.retryParameters),4);case 4:o=s.h;va(s,3);break;case 2:wa(s);case 3:if(o)return s.return(o);throw new P(1,2,2011,r)}}))}function Cn(i,r,o,s,p,y,A){var T,x,I,C;return K((function(M){if(1==M.g)return"text/vtt"!=p||A.length?D(M,Dn(i,r,i.J,i.g.streaming.retryParameters),3):M.F(2);2!=M.g&&(T=M.h,x=En(i,T,p,A),I=new Blob([x],{type:"text/vtt"}),r=Ho(I),p="text/vtt");C=document.createElement("track");var N=i.V,_=r;try{if(N.g.enabled){var j=sl(N);j.ot=fu;j.su=!0;var B=wl(j);var z=xl(_,B)}else z=_}catch(i){Sa("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",i),z=_}C.src=z;C.label=y;C.kind=s;C.srclang=o;i.h.getAttribute("crossorigin")||i.h.setAttribute("crossorigin","anonymous");i.h.appendChild(C);return M.return(C)}))}function Dn(i,r,o,s){var p,y,A;return K((function(T){if(1==T.g){p=Ta;y=Af([r],s);y.method="GET";var x=i.V;try{x.g.enabled&&zl(x,y,{ot:fu,su:!0})}catch(i){Sa("CMCD_TEXT_ERROR","Could not generate text CMCD data.",i)}return D(T,o.request(p,y).promise,2)}A=T.h;return T.return(A.data)}))}function En(i,r,o,s){var p=Xr[o];if(p)return o=p(),i={periodStart:0,segmentStart:0,segmentEnd:i.h.duration,vttOffset:0},r=lc(r),r=o.parseMedia(r,i,null),pl(r,s);throw new P(2,2,2014,o)}p.ng=function(r,o){(this||i).Ee.width=r;(this||i).Ee.height=o};p.eg=function(r){if((this||i).l==_u){var o=(this||i).j;r=void 0===r?.1:r;if(o.l.g)o=!1;else if(o.u)o=!1;else{for(var s=t(o.i.values()),p=s.next();!p.done;p=s.next())p=p.value,!p.wd||p.Ta||p.Eb||(p.wd=!1,xk(o,p,r));o=!0}}else o=!1;return o};p.ki=function(){Ra("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");return(this||i).i};p.li=function(){return(this||i).Ie};function jm(i){var r=$l();r.streaming.failureCallback=function(r){if(i.R()){var o=null;1001==r.code||1002==r.code?o=1:1003==r.code&&(o=.1);null!=o&&(r.severity=1,i.eg(o))}};r.textDisplayFactory=function(){return i.oe?new gl(i.h,i.oe):HTMLMediaElement.prototype.addTextTrack?new $k(i.h,"Shaka Player TextTrack"):new cl};return r}p.rg=function(r){(this||i).oe=r};function Lm(i,r){for(var o=new Set,s=t(r.textStreams),p=s.next();!p.done;p=s.next())p=p.value,"application/cea-608"!=p.mimeType&&"application/cea-708"!=p.mimeType||o.add(p.originalId);s=t(r.variants);for(p=s.next();!p.done;p=s.next())if((p=p.value.video)&&p.closedCaptions)for(var y=t(p.closedCaptions.keys()),A=y.next();!A.done;A=y.next())if(A=A.value,!o.has(A)){var T=A.startsWith("CC")?"application/cea-608":"application/cea-708",x=new Sj,I=p.closedCaptions.get(A);T={id:i.Ag++,originalId:A,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:x,mimeType:T,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:I,originalLanguage:I,label:null,type:ne,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:p.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1};r.textStreams.push(T);o.add(A)}}function Km(i,r){return K((function(o){if(1==o.g)return D(o,Fn(i,r),2);tn(i,r);F(o)}))}function Fn(i,r){return K((function(o){if(1==o.g)return D(o,de(i.m,r),2);if(!r.variants.some(Be))throw new P(2,4,4032);F(o)}))}function tn(i,r){if(i.l!=Uu){ce(r.variants,i.g.restrictions,i.Ee)&&i.j&&Rm(i);var o=i.m?i.m.g:null;if(o&&i.m.u)for(var s=t(r.variants),p=s.next();!p.done;p=s.next())p=p.value,Mm(i,o.keySystem,p.video),Mm(i,o.keySystem,p.audio);Gn(i,r)}}function Mm(i,r,o){if(o){o=t(o.drmInfos);for(var s=o.next();!s.done;s=o.next())if(s=s.value,s.keySystem==r){s=t(s.initData||[]);for(var p=s.next();!p.done;p=s.next())p=p.value,hh(i.m,p.initDataType,p.initData)}}}function cn(i,r){var o,s,p,y,A;return K((function(T){if(1==T.g)return o=i.audio,s=i.video,p=function(i,r){var o,s,p;return K((function(y){if(1==y.g)return i?D(y,i.createSegmentIndex(),2):y.return(null);s=(o=i.segmentIndex.rc(r))?o.next().value:null;if(!s)return y.return(null);p=s.startTime;return y.return(p)}))},D(T,p(o,r),2);if(3!=T.g)return y=T.h,D(T,p(s,r),3);A=T.h;return null!=A&&null!=y?T.return(Math.max(A,y)):null!=A?T.return(A):null!=y?T.return(y):T.return(r)}))}function zm(i){var r=i.yd();if(i.C&&i.M&&i.G){if(i.V){var o=i.V;r||o.i||(o.i=!0);o.i&&r&&(o.j=!0);o.l=r}Sm(i)}r=(new Map).set("buffering",r);i.dispatchEvent(rm("buffering",r))}function Tm(i){var r=i.h.playbackRate;0!=r&&(i.K&&i.K.set(r),r=rm("ratechange"),i.dispatchEvent(r))}function Sm(i){if(i.C&&i.M){var r=i.C.g,o="playing";i.M.g==ga?o="buffering":i.h.paused?o="paused":i.h.ended&&(o="ended");var s=o;if(null==r.g)r.g={timestamp:Date.now()/1e3,state:s,duration:0},r=!0;else{var p=Date.now()/1e3;r.g.duration=p-r.g.timestamp;r.g.state==s?r=!1:(r.h.push(r.g),r.g={timestamp:p,state:s,duration:0},r=!0)}r&&(o=(new Map).set("newstate",o),i.dispatchEvent(rm("statechanged",o)))}}function hn(i){if(i.R()){var r=i.Ha();if(Number.isFinite(r.end)&&!(i.h.currentTime<r.start)){if(i.g.streaming.liveSync){var o=i.g.streaming.liveSyncMaxLatency;var s=i.g.streaming.liveSyncPlaybackRate}else i.i&&i.i.serviceDescription&&(o=i.i.serviceDescription.maxLatency||i.g.streaming.liveSyncMaxLatency,s=i.i.serviceDescription.maxPlaybackRate||i.g.streaming.liveSyncPlaybackRate);if(i.g.streaming.liveSync){var p=i.g.streaming.liveSyncMinLatency;var y=i.g.streaming.liveSyncMinPlaybackRate}else i.i&&i.i.serviceDescription&&(p=i.i.serviceDescription.minLatency||i.g.streaming.liveSyncMinLatency,y=i.i.serviceDescription.minPlaybackRate||i.g.streaming.liveSyncMinPlaybackRate);var A=i.h.playbackRate,T=r.end-i.h.currentTime,x=0;if(i.l==Bu){var I=i.h.buffered;0<I.length&&(x=I.end(I.length-1),x=Math.max(s,x-r.end))}o&&s&&T-x>o?A!=s&&i.Pd(s):p&&y&&T-x<p?A!=y&&i.Pd(y):A!==i.K.Lc()&&i.od()}}}function jn(i){if(i.h){var r=!1,o=i.h.currentTime/i.h.duration;isNaN(o)||(o=Math.round(100*o),isNaN(i.N)?(i.N=o,r=!0):(o=Math.max(i.N,o),i.N!=o&&(i.N=o,r=!0)));if(r){var s;0==i.N?s=rm("started"):25==i.N?s=rm("firstquartile"):50==i.N?s=rm("midpoint"):75==i.N?s=rm("thirdquartile"):100==i.N&&(s=rm("complete"));s&&i.dispatchEvent(s)}}}function gn(i){try{Gn(i,i.i)}catch(r){return xm(i,r),!1}var r=Ce(i.i.variants);r=i.Ra.create(r);i.u.setVariants(Array.from(r.values()));return!0}function Zm(i,r){r=void 0!==r&&r;return gn(i)?i.u.chooseVariant(r):null}function om(i){function b(i){var r="";i.video&&(r+="video:"+i.video.id);i.audio&&(r=r+(r?"&":"")+"audio:"+i.audio.id);return r}for(var r=Date.now()/1e3,o=!1,s=t(i.i.variants),p=s.next();!p.done;p=s.next())p=p.value,0<p.disabledUntilTime&&p.disabledUntilTime<=r&&(p.disabledUntilTime=0,o=!0,Ya("Re-enabled variant with "+b(p)));i.i.variants.every((function(i){return 0===i.disabledUntilTime}))&&i.se.stop();o&&un(i,!0,void 0,!1,!1)}function un(i,r,o,s,p){r=void 0===r||r;o=void 0===o?0:o;s=void 0!==s&&s;p=void 0===p||p;var y=Zm(i);y&&Vm(i,y,p,r,o,s)}function Vm(i,r,o,s,p,y){y=void 0!==y&&y;var A=i.j.j;if(r==A)s&&Bk(i.j,r,s,p,!0);else{var T=i.C.h;T.h!=r&&(T.h=r,T.g.push({timestamp:Date.now()/1e3,id:r.id,type:"variant",fromAdaptation:o,bandwidth:r.bandwidth}));Bk(i.j,r,s,p,y,o);s=null;A&&(s=te(A));r=te(r);o?(o=(new Map).set("oldTrack",s).set("newTrack",r),i.L&&Fi(i.L,r,i.If()),o=rm("adaptation",o),Hn(i,o)):In(i,s,r)}}function xn(i,r){var o=Array.from(i.h.audioTracks).find((function(i){return i.enabled}));r.enabled=!0;r.id!==o.id&&(o.enabled=!1);o=Ae(o);r=Ae(r);In(i,o,r)}function dn(i,r,o){if(0==i.g.autoShowText)return!1;if(1==i.g.autoShowText)return!0;var s=Kb(i.g.preferredTextLanguage);o=Kb(o.language);if(2==i.g.autoShowText)return Jb(o,s);if(3==i.g.autoShowText)return i=Kb(r.language),Jb(o,s)&&!Jb(i,o);Ra("Invalid autoShowText setting!");return!1}function Rm(i){var r=rm("trackschanged");Hn(i,r)}function In(i,r,o){r=(new Map).set("oldTrack",r).set("newTrack",o);i.L&&Fi(i.L,o,i.If());o=rm("variantchanged",r);Hn(i,o)}function wn(i){var r=rm("textchanged");Hn(i,r)}function en(i){var r=rm("texttrackvisibility");Hn(i,r)}function fn(i){i.g.abr.enabled||nm(i);var r=(new Map).set("newStatus",i.g.abr.enabled);Hn(i,rm("abrstatuschanged",r))}function nm(i,r){r=void 0===r||r;if(i.l==_u){i.se.stop();for(var o=t(i.i.variants),s=o.next();!s.done;s=o.next())s.value.disabledUntilTime=0;r&&gn(i)}}p.ce=function(r,o){if(!(this||i).g.abr.enabled||(this||i).l===Uu||!navigator.onLine)return!1;if((this||i).i.variants.some((function(i){return!(!(i=i[r.type])||i.id===r.id)&&("audio"!=r.type||r.language===i.language)}))){for(var s=t((this||i).i.variants),p=s.next();!p.done;p=s.next()){p=p.value;var y=p[r.type];y&&y.id===r.id&&(p.disabledUntilTime=Date.now()/1e3+o)}(this||i).se.za(1);o=this.Lb().video.reduce((function(i,r){return i+r.end-r.start}),0);un(this||i,!0,o,!0,!1);return!0}return!1};function xm(i,r){var o,s,p;return K((function(y){switch(y.g){case 1:if(i.l==Uu)return y.return();o=!0;if(!(i.Xa&&i.i&&i.j)||3016!=r.code&&3014!=r.code&&3015!=r.code&&3018!=r.code){y.F(2);break}ta(y,3);return D(y,Uk(i.j),5);case 5:s=y.h;o=!s;va(y,2);break;case 3:wa(y),o=!0;case 2:if(!o)return y.return();2===r.severity&&nm(i,!1);p=rm("error",(new Map).set("detail",r));i.dispatchEvent(p);p.defaultPrevented&&(r.handled=!0);F(y)}}))}function Jm(i,r,o){o=(new Map).set("detail",{schemeIdUri:o.schemeIdUri,value:o.value,startTime:o.startTime,endTime:o.endTime,id:o.id,eventElement:o.eventElement});i.dispatchEvent(rm(r,o))}function wm(i){if(!i.h.error)return null;var r=i.h.error.code;if(1==r)return null;var o=i.h.error.msExtendedCode;o&&(0>o&&(o+=Math.pow(2,32)),o=o.toString(16));return new P(2,3,3016,r,o,i.h.error.message)}function Pm(i,r){if(i.j){var o=rm("keystatuschanged");i.dispatchEvent(o);var s=Object.keys(r);o=1==s.length&&"00"==s[0];var p=!1;if(s.length){s=t(i.i.variants);for(var y=s.next();!y.done;y=s.next()){y=y.value;var A=[];y.audio&&A.push(y.audio);y.video&&A.push(y.video);A=t(A);for(var T=A.next();!T.done;T=A.next()){var x=T.value;T=y.allowedByKeySystem;if(x.keyIds.size){y.allowedByKeySystem=!0;x=t(x.keyIds);for(var I=x.next();!I.done;I=x.next())(I=I.value,(I=r[o?"00":I])||i.m.H)&&(y.allowedByKeySystem=y.allowedByKeySystem&&!!I&&!Wu.includes(I))}T!=y.allowedByKeySystem&&(p=!0)}}}if(p&&(Rm(i),!gn(i)))return;(r=i.j.j)&&!r.allowedByKeySystem&&un(i)}}function Qm(i,r,o){i.H&&i.H.onExpirationUpdated&&i.H.onExpirationUpdated(r,o);r=rm("expirationupdated");i.dispatchEvent(r)}function Um(i,r,o){0<r&&(i.R()||i.sh(r));r=i.getDuration();o<r&&(i.R()||i.gb(o))}function Gn(i,r){i=i.m?i.m.ge():{};var o=Object.keys(i);o=o.length&&"00"==o[0];var s=!1,p=!1,y=new Set,A=new Set;r=t(r.variants);for(var T=r.next();!T.done;T=r.next()){T=T.value;var x=[];T.audio&&x.push(T.audio);T.video&&x.push(T.video);x=t(x);for(var I=x.next();!I.done;I=x.next())if(I=I.value,I.keyIds.size){I=t(I.keyIds);for(var C=I.next();!C.done;C=I.next()){C=C.value;var M=i[o?"00":C];M?Wu.includes(M)&&A.add(M):y.add(C)}}T.allowedByApplication?T.allowedByKeySystem&&(s=!0):p=!0}if(!s)throw i={hasAppRestrictions:p,missingKeys:Array.from(y),restrictedKeyStatuses:Array.from(A)},new P(2,4,4012,i)}function Hn(i,r){K((function(o){if(1==o.g)return D(o,Promise.resolve(),2);i.l!=Uu&&i.dispatchEvent(r);F(o)}))}function zn(i){var r=new Set;i=t(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o.language?r.add(Kb(o.language)):r.add("und");return r}function yn(i){var r=new Map,o=new Map;i=t(i);for(var s=i.next();!s.done;s=i.next()){s=s.value;var p="und",y=[];s.language&&(p=Kb(s.language));y="variant"==s.type?s.audioRoles:s.roles;y&&y.length||(y=[""]);r.has(p)||r.set(p,new Set);y=t(y);for(var A=y.next();!A.done;A=y.next())A=A.value,r.get(p).add(A),s.label&&(o.has(p)||o.set(p,new Map),o.get(p).set(A,s.label))}var T=[];r.forEach((function(i,r){i=t(i);for(var s=i.next();!s.done;s=i.next()){s=s.value;var p=null;o.has(r)&&o.get(r).has(s)&&(p=o.get(r).get(s));T.push({language:r,role:s,label:p})}}));return T}L("shaka.Player",V);V.prototype.setVideoContainer=V.prototype.rg;V.prototype.getManifestParserFactory=V.prototype.li;V.prototype.getManifest=V.prototype.ki;V.prototype.retryStreaming=V.prototype.eg;V.prototype.setMaxHardwareResolution=V.prototype.ng;V.prototype.addChaptersTrack=V.prototype.Gh;V.prototype.addThumbnailsTrack=V.prototype.Ih;V.prototype.addTextTrackAsync=V.prototype.Hh;V.prototype.getStats=V.prototype.getStats;V.prototype.getBufferedInfo=V.prototype.Lb;V.prototype.getPresentationStartTimeAsDate=V.prototype.Vg;V.prototype.getPlayheadTimeAsDate=V.prototype.oi;V.prototype.setTextTrackVisibility=V.prototype.Oe;V.prototype.getChapters=V.prototype.Wh;V.prototype.getChaptersTracks=V.prototype.Sg;V.prototype.isTextTrackVisible=V.prototype.xc;V.prototype.selectVariantsByLabel=V.prototype.oj;V.prototype.selectTextLanguage=V.prototype.ig;V.prototype.selectAudioLanguage=V.prototype.Le;V.prototype.getTextLanguages=V.prototype.wi;V.prototype.getAudioLanguages=V.prototype.Sh;V.prototype.getTextLanguagesAndRoles=V.prototype.xi;V.prototype.getAudioLanguagesAndRoles=V.prototype.Th;V.prototype.selectVariantTrack=V.prototype.Me;V.prototype.selectTextTrack=V.prototype.jg;V.prototype.getThumbnails=V.prototype.Kf;V.prototype.getAllThumbnails=V.prototype.Rh;V.prototype.getImageTracks=V.prototype.fe;V.prototype.getTextTracks=V.prototype.bc;V.prototype.getVariantTracks=V.prototype.mb;V.prototype.cancelTrickPlay=V.prototype.od;V.prototype.trickPlay=V.prototype.Pd;V.prototype.getPlaybackRate=V.prototype.Nb;V.prototype.isBuffering=V.prototype.yd;V.prototype.getKeyStatuses=V.prototype.ge;V.prototype.getActiveSessionsMetadata=V.prototype.Ff;V.prototype.getExpiration=V.prototype.td;V.prototype.drmInfo=V.prototype.drmInfo;V.prototype.keySystem=V.prototype.keySystem;V.prototype.goToLive=V.prototype.Fi;V.prototype.seekRange=V.prototype.Ha;V.prototype.isAudioOnly=V.prototype.Pc;V.prototype.isInProgress=V.prototype.wc;V.prototype.isLive=V.prototype.R;V.prototype.getAdManager=V.prototype.ee;V.prototype.getAssetUri=V.prototype.Gf;V.prototype.getNetworkingEngine=V.prototype.Zb;V.prototype.getMediaElement=V.prototype.ni;V.prototype.getManifestType=V.prototype.If;V.prototype.getLoadMode=V.prototype.ie;V.prototype.resetConfiguration=V.prototype.hj;V.prototype.getBufferFullness=V.prototype.Uh;V.prototype.getConfiguration=V.prototype.getConfiguration;V.prototype.configure=V.prototype.configure;V.prototype.releaseAllMutexes=V.prototype.dj;V.prototype.load=V.prototype.load;V.prototype.updateStartTime=V.prototype.xj;V.prototype.unload=V.prototype.Wc;V.prototype.detach=V.prototype.detach;V.prototype.attachCanvas=V.prototype.Eg;V.prototype.attach=V.prototype.Gc;V.probeSupport=function(i){i=void 0===i||i;var r,o,s,p,y,A;return K((function(T){if(1==T.g)return r={},i?D(T,Ah(),3):T.F(2);2!=T.g&&(r=T.h);var x={};if(Ed())for(var I in uo)x[I]=!0;I=t(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var C=I.next();!C.done;C=I.next())C=C.value,x[C]=Ed()?!!uo[C]:Fd(C);o=x;I='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(w(_r));x={};I=t(I);for(C=I.next();!C.done;C=I.next()){C=C.value;x[C]=Ed()?!!pd(C)||(ac(C)||!!Yc(C)):Fd(C);var M=C.split(";")[0];x[M]=x[M]||x[C]}s=x;p={manifest:o,media:s,drm:r};y=Xu;for(A in y)p[A]=y[A]();return T.return(p)}))};V.isBrowserSupported=tm;V.setAdManagerFactory=function(i){Yu=i};V.registerSupportPlugin=function(i,r){Xu[i]=r};V.prototype.destroy=V.prototype.destroy;var Uu=0,Ou=1,_u=2,Bu=3;V.LoadMode={DESTROYED:Uu,NOT_LOADED:Ou,MEDIA_SOURCE:_u,SRC_EQUALS:Bu};V.version="v4.7.11";var Hu=["4","7"];fa=new function(r){(this||i).g=r;(this||i).i=Oe;(this||i).h=Pe}(new Le(Number(Hu[0]),Number(Hu[1])));var Wu=["output-restricted","internal-error"],Xu={},Yu=null;function Mn(){(this||i).h=[];(this||i).j=(this||i).i=(this||i).g=0}function Nn(r,o,s){var p=this||i;(this||i).g=r;(this||i).h=o;(this||i).j=s;(this||i).i=!1;(this||i).l=(this||i).h.getVolume();(this||i).m=new Kf;(this||i).m.o((this||i).h,google.ima.AdEvent.Type.PAUSED,(function(){p.i=!0}));(this||i).m.o((this||i).h,google.ima.AdEvent.Type.RESUMED,(function(){p.i=!1}))}p=Nn.prototype;p.getDuration=function(){return(this||i).g.getDuration()};p.getMinSuggestedDuration=function(){return(this||i).g.getMinSuggestedDuration()};p.getRemainingTime=function(){return(this||i).h.getRemainingTime()};p.isPaused=function(){return(this||i).i};p.isSkippable=function(){return 0<=(this||i).g.getSkipTimeOffset()};p.getTimeUntilSkippable=function(){var r=(this||i).g.getSkipTimeOffset();r=this.getRemainingTime()-r;return Math.max(r,0)};p.canSkipNow=function(){return(this||i).h.getAdSkippableState()};p.skip=function(){return(this||i).h.skip()};p.pause=function(){return(this||i).h.pause()};p.play=function(){return(this||i).h.resume()};p.getVolume=function(){return(this||i).h.getVolume()};p.setVolume=function(r){(this||i).j.volume=r;return(this||i).h.setVolume(r)};p.isMuted=function(){return 0==(this||i).h.getVolume()};p.isLinear=function(){return(this||i).g.isLinear()};p.resize=function(r,o){var s=!1,p=(this||i).j;document.fullscreenEnabled?s=!!document.fullscreenElement:p.webkitSupportsFullscreen&&(s=p.webkitDisplayingFullscreen);(this||i).h.resize(r,o,s?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)};p.setMuted=function(r){((this||i).j.muted=r)?((this||i).l=this.getVolume(),(this||i).h.setVolume(0)):(this||i).h.setVolume((this||i).l)};p.getSequenceLength=function(){var r=(this||i).g.getAdPodInfo();return null==r?1:r.getTotalAds()};p.getPositionInSequence=function(){var r=(this||i).g.getAdPodInfo();return null==r?1:r.getAdPosition()};p.getTitle=function(){return(this||i).g.getTitle()};p.getDescription=function(){return(this||i).g.getDescription()};p.getVastMediaBitrate=function(){return(this||i).g.getVastMediaBitrate()};p.getVastMediaHeight=function(){return(this||i).g.getVastMediaHeight()};p.getVastMediaWidth=function(){return(this||i).g.getVastMediaWidth()};p.getAdId=function(){return(this||i).g.getAdId()};p.getCreativeAdId=function(){return(this||i).g.getCreativeAdId()};p.getAdvertiserName=function(){return(this||i).g.getAdvertiserName()};p.getMediaUrl=function(){return(this||i).g.getMediaUrl()};p.getTimeOffset=function(){var r=(this||i).g.getAdPodInfo();return null==r?0:r.getTimeOffset()};p.getPodIndex=function(){var r=(this||i).g.getAdPodInfo();return null==r?0:r.getPodIndex()};p.release=function(){(this||i).h=(this||i).g=null};L("shaka.ads.ClientSideAd",Nn);Nn.prototype.release=Nn.prototype.release;Nn.prototype.getPodIndex=Nn.prototype.getPodIndex;Nn.prototype.getTimeOffset=Nn.prototype.getTimeOffset;Nn.prototype.getMediaUrl=Nn.prototype.getMediaUrl;Nn.prototype.getAdvertiserName=Nn.prototype.getAdvertiserName;Nn.prototype.getCreativeAdId=Nn.prototype.getCreativeAdId;Nn.prototype.getAdId=Nn.prototype.getAdId;Nn.prototype.getVastMediaWidth=Nn.prototype.getVastMediaWidth;Nn.prototype.getVastMediaHeight=Nn.prototype.getVastMediaHeight;Nn.prototype.getVastMediaBitrate=Nn.prototype.getVastMediaBitrate;Nn.prototype.getDescription=Nn.prototype.getDescription;Nn.prototype.getTitle=Nn.prototype.getTitle;Nn.prototype.getPositionInSequence=Nn.prototype.getPositionInSequence;Nn.prototype.getSequenceLength=Nn.prototype.getSequenceLength;Nn.prototype.setMuted=Nn.prototype.setMuted;Nn.prototype.resize=Nn.prototype.resize;Nn.prototype.isLinear=Nn.prototype.isLinear;Nn.prototype.isMuted=Nn.prototype.isMuted;Nn.prototype.setVolume=Nn.prototype.setVolume;Nn.prototype.getVolume=Nn.prototype.getVolume;Nn.prototype.play=Nn.prototype.play;Nn.prototype.pause=Nn.prototype.pause;Nn.prototype.skip=Nn.prototype.skip;Nn.prototype.canSkipNow=Nn.prototype.canSkipNow;Nn.prototype.getTimeUntilSkippable=Nn.prototype.getTimeUntilSkippable;Nn.prototype.isSkippable=Nn.prototype.isSkippable;Nn.prototype.isPaused=Nn.prototype.isPaused;Nn.prototype.getRemainingTime=Nn.prototype.getRemainingTime;Nn.prototype.getMinSuggestedDuration=Nn.prototype.getMinSuggestedDuration;Nn.prototype.getDuration=Nn.prototype.getDuration;function On(r,o,s,p,y){var A=this||i;(this||i).s=r;(this||i).i=o;(this||i).D=!1;(this||i).u=(this||i).G=null;(this||i).H=NaN;(this||i).m=y;(this||i).j=null;(this||i).h=new Kf;google.ima.settings.setLocale(s);google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0);r=new google.ima.AdDisplayContainer((this||i).s,(this||i).i);r.initialize();(this||i).l=new google.ima.AdsLoader(r);(this||i).l.getSettings().setPlayerType("shaka-player");(this||i).l.getSettings().setPlayerVersion("v4.7.11");(this||i).g=null;(this||i).C=p||new google.ima.AdsRenderingSettings;(this||i).h.o((this||i).l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(i){Pn(A,i)}));(this||i).h.o((this||i).l,google.ima.AdErrorEvent.Type.AD_ERROR,(function(i){Qn(A,i)}));(this||i).h.o((this||i).i,"ended",(function(){A.l.contentComplete()}));(this||i).h.na((this||i).i,"play",(function(){A.D=!0}))}On.prototype.configure=function(r){(this||i).G=r};On.prototype.stop=function(){(this||i).g&&(this||i).g.stop();(this||i).s&&fl((this||i).s)};On.prototype.release=function(){this.stop();(this||i).u&&(this||i).u.disconnect();(this||i).h&&(this||i).h.release();(this||i).g&&(this||i).g.destroy();(this||i).l.destroy()};function Qn(i,r){r.getError();r=(new Map).set("originalEvent",r);i.m(new O("ad-error",r));Rn(i,null);i.m(new O("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function Pn(i,o){i.m(new O("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-i.H)));if(i.G.customPlayheadTracker){var s={currentTime:i.i.currentTime};i.g=o.getAdsManager(s,i.C);i.i.muted?i.g.setVolume(0):i.g.setVolume(i.i.volume);i.h.o(i.i,"timeupdate",(function(){i.i.duration&&(s.currentTime=i.i.currentTime)}));i.h.o(i.i,"volumechange",(function(){i.j&&(i.j.setVolume(i.i.volume),i.i.muted&&i.j.setMuted(!0))}))}else i.g=o.getAdsManager(i.i,i.C);i.m(new O("ima-ad-manager-loaded",(new Map).set("imaAdManager",i.g)));var p=i.g.getCuePoints();if(p.length){o=[];p=t(p);for(var y=p.next();!y.done;y=p.next())o.push({start:y.value,end:null});i.m(new O("ad-cue-points-changed",(new Map).set("cuepoints",o)))}Sn(i);try{i.g.init(i.i.offsetWidth,i.i.offsetHeight,Tn(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),i.h.o(i.i,"loadeddata",(function(){i.g.resize(i.i.offsetWidth,i.i.offsetHeight,Tn(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in r?(i.u=new ResizeObserver((function(){i.g.resize(i.i.offsetWidth,i.i.offsetHeight,Tn(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),i.u.observe(i.i)):i.h.o(document,"fullscreenchange",(function(){i.g.resize(i.i.offsetWidth,i.i.offsetHeight,Tn(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),i.D?i.g.start():i.h.na(i.i,"play",(function(){i.D=!0;i.g.start()}))}catch(r){Rn(i,null)}}function Tn(i){if(document.fullscreenEnabled)return!!document.fullscreenElement;i=i.i;return!!i.webkitSupportsFullscreen&&i.webkitDisplayingFullscreen}function Sn(i){function b(r,o){r=(new Map).set("originalEvent",r);i.m(new O(o,r))}i.h.o(i.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(r){Qn(i,r)}));i.h.o(i.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(r){Un(i,r)}));i.h.o(i.g,google.ima.AdEvent.Type.STARTED,(function(r){Un(i,r)}));i.h.o(i.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(i){b(i,"ad-first-quartile")}));i.h.o(i.g,google.ima.AdEvent.Type.MIDPOINT,(function(i){b(i,"ad-midpoint")}));i.h.o(i.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(i){b(i,"ad-third-quartile")}));i.h.o(i.g,google.ima.AdEvent.Type.COMPLETE,(function(i){b(i,"ad-complete")}));i.h.o(i.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(r){Rn(i,r)}));i.h.o(i.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(r){Rn(i,r)}));i.h.o(i.g,google.ima.AdEvent.Type.SKIPPED,(function(i){b(i,"ad-skipped")}));i.h.o(i.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(i){b(i,"ad-volume-changed")}));i.h.o(i.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(i){b(i,"ad-muted")}));i.h.o(i.g,google.ima.AdEvent.Type.PAUSED,(function(r){i.j&&(i.j.i=!0,b(r,"ad-paused"))}));i.h.o(i.g,google.ima.AdEvent.Type.RESUMED,(function(r){i.j&&(i.j.i=!1,b(r,"ad-resumed"))}));i.h.o(i.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(r){i.j&&b(r,"ad-skip-state-changed")}));i.h.o(i.g,google.ima.AdEvent.Type.CLICK,(function(i){b(i,"ad-clicked")}));i.h.o(i.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(i){b(i,"ad-progress")}));i.h.o(i.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(i){b(i,"ad-buffering")}));i.h.o(i.g,google.ima.AdEvent.Type.IMPRESSION,(function(i){b(i,"ad-impression")}));i.h.o(i.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(i){b(i,"ad-duration-changed")}));i.h.o(i.g,google.ima.AdEvent.Type.USER_CLOSE,(function(i){b(i,"ad-closed")}));i.h.o(i.g,google.ima.AdEvent.Type.LOADED,(function(i){b(i,"ad-loaded")}));i.h.o(i.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(i){b(i,"all-ads-completed")}));i.h.o(i.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(i){b(i,"ad-linear-changed")}));i.h.o(i.g,google.ima.AdEvent.Type.AD_METADATA,(function(i){b(i,"ad-metadata")}));i.h.o(i.g,google.ima.AdEvent.Type.LOG,(function(i){b(i,"ad-recoverable-error")}));i.h.o(i.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(i){b(i,"ad-break-ready")}));i.h.o(i.g,google.ima.AdEvent.Type.INTERACTION,(function(i){b(i,"ad-interaction")}))}function Un(i,r){var o=r.getAd();o?(i.j=new Nn(o,i.g,i.i),r=(new Map).set("ad",i.j).set("sdkAdObject",o).set("originalEvent",r),i.m(new O("ad-started",r)),i.j.isLinear()&&(i.s.setAttribute("ad-active","true"),i.i.pause(),i.i.muted?(r=i.j,r.l=i.i.volume,r.h.setVolume(0)):i.j.setVolume(i.i.volume))):Ra("The IMA SDK fired a "+r.type+" event with no associated ad. Unable to play ad!")}function Rn(i,r){i.m(new O("ad-stopped",(new Map).set("originalEvent",r)));i.j&&i.j.isLinear()&&(i.s.removeAttribute("ad-active"),i.i.ended||i.i.play())}function Vn(r,o,s,p,y){(this||i).h=r;(this||i).g=y;(this||i).i=o;(this||i).j=s;(this||i).l=p}p=Vn.prototype;p.getDuration=function(){return(this||i).h.durationInSeconds};p.getMinSuggestedDuration=function(){return this.getDuration()};p.getRemainingTime=function(){return(this||i).h.startTimeInSeconds+(this||i).h.durationInSeconds-(this||i).g.currentTime};p.isPaused=function(){return(this||i).g.paused};p.isSkippable=function(){return!!(this||i).h.skipOffset};p.getTimeUntilSkippable=function(){if(!(this||i).h.skipOffset)return this.getRemainingTime();var r=this.getRemainingTime()-(this||i).h.skipOffset;return Math.max(r,0)};p.canSkipNow=function(){return 0==this.getTimeUntilSkippable()};p.skip=function(){(this||i).g.currentTime+=this.getRemainingTime()};p.pause=function(){return(this||i).g.pause()};p.play=function(){return(this||i).g.play()};p.getVolume=function(){return(this||i).g.volume};p.setVolume=function(r){(this||i).g.volume=r};p.isMuted=function(){return(this||i).g.muted};p.isLinear=function(){return(this||i).l};p.resize=function(){};p.setMuted=function(r){(this||i).g.muted=r};p.getSequenceLength=function(){return(this||i).j?(this||i).j:1};p.getPositionInSequence=function(){return(this||i).i?(this||i).i:1};p.getTitle=function(){return(this||i).h.adTitle};p.getDescription=function(){return""};p.getVastMediaBitrate=function(){return 0};p.getVastMediaHeight=function(){return 0};p.getVastMediaWidth=function(){return 0};p.getAdId=function(){return(this||i).h.adId};p.getCreativeAdId=function(){return(this||i).h.creativeId};p.getAdvertiserName=function(){return""};p.getMediaUrl=function(){return null};p.getTimeOffset=function(){return 0};p.getPodIndex=function(){return 0};p.release=function(){(this||i).j=(this||i).i=(this||i).g=(this||i).h=null};L("shaka.ads.MediaTailorAd",Vn);Vn.prototype.release=Vn.prototype.release;Vn.prototype.getPodIndex=Vn.prototype.getPodIndex;Vn.prototype.getTimeOffset=Vn.prototype.getTimeOffset;Vn.prototype.getMediaUrl=Vn.prototype.getMediaUrl;Vn.prototype.getAdvertiserName=Vn.prototype.getAdvertiserName;Vn.prototype.getCreativeAdId=Vn.prototype.getCreativeAdId;Vn.prototype.getAdId=Vn.prototype.getAdId;Vn.prototype.getVastMediaWidth=Vn.prototype.getVastMediaWidth;Vn.prototype.getVastMediaHeight=Vn.prototype.getVastMediaHeight;Vn.prototype.getVastMediaBitrate=Vn.prototype.getVastMediaBitrate;Vn.prototype.getDescription=Vn.prototype.getDescription;Vn.prototype.getTitle=Vn.prototype.getTitle;Vn.prototype.getPositionInSequence=Vn.prototype.getPositionInSequence;Vn.prototype.getSequenceLength=Vn.prototype.getSequenceLength;Vn.prototype.setMuted=Vn.prototype.setMuted;Vn.prototype.resize=Vn.prototype.resize;Vn.prototype.isLinear=Vn.prototype.isLinear;Vn.prototype.isMuted=Vn.prototype.isMuted;Vn.prototype.setVolume=Vn.prototype.setVolume;Vn.prototype.getVolume=Vn.prototype.getVolume;Vn.prototype.play=Vn.prototype.play;Vn.prototype.pause=Vn.prototype.pause;Vn.prototype.skip=Vn.prototype.skip;Vn.prototype.canSkipNow=Vn.prototype.canSkipNow;Vn.prototype.getTimeUntilSkippable=Vn.prototype.getTimeUntilSkippable;Vn.prototype.isSkippable=Vn.prototype.isSkippable;Vn.prototype.isPaused=Vn.prototype.isPaused;Vn.prototype.getRemainingTime=Vn.prototype.getRemainingTime;Vn.prototype.getMinSuggestedDuration=Vn.prototype.getMinSuggestedDuration;Vn.prototype.getDuration=Vn.prototype.getDuration;function Wn(r,o,s,p){(this||i).D=r;(this||i).K=o;(this||i).g=s;(this||i).l=null;(this||i).W=NaN;(this||i).i=p;(this||i).J=!1;(this||i).C=null;(this||i).j=[];(this||i).M=[];(this||i).L=(this||i).G=(this||i).h=null;(this||i).H=new Map;(this||i).m=[];(this||i).u=[];(this||i).N="";(this||i).V=!0;(this||i).I="";(this||i).s=new Kf}Wn.prototype.stop=function(){for(var r=t((this||i).m),o=r.next();!o.done;o=r.next())o=o.value,(this||i).s.hc(o.target,o.type,o.listener);Xn(this||i);(this||i).m=[];(this||i).u=[];(this||i).N="";(this||i).V=!0;(this||i).I="";(this||i).C=null;(this||i).j=[];(this||i).M=[];(this||i).H.clear()};Wn.prototype.release=function(){this.stop();(this||i).s&&(this||i).s.release()};Wn.prototype.onManifestUpdated=function(r){(this||i).J=r;""!=(this||i).N&&(Yn(this||i,(this||i).N,(this||i).V),(this||i).V=!1)};Wn.prototype.getCuePoints=function(){for(var r=[],o=t((this||i).j),s=o.next();!s.done;s=o.next()){s=t(s.value.ads);for(var p=s.next();!p.done;p=s.next())p=p.value,r.push({start:p.startTimeInSeconds,end:p.startTimeInSeconds+p.durationInSeconds})}return r};function Zn(i,r,o){var s,p,y,A,T,x,I,C,M,N,_;K((function(j){if(1==j.g)return s=Af([r],kf()),s.method="POST",o&&(p=JSON.stringify(o),s.body=Xf(p)),y=i.K.request(7,s),ta(j,2),D(j,y.promise,4);if(2!=j.g){A=j.h;T=Tf(A.data);x=JSON.parse(T);if(!x.manifestUrl||!x.trackingUrl)throw Error("Insufficient data from MediaTailor.");I=new fb(r),C=new fb(x.trackingUrl),i.N=I.resolve(C).toString(),M=Date.now()/1e3,N=M-i.W,i.i(new O("ads-loaded",(new Map).set("loadTime",N))),_=new fb(x.manifestUrl),i.l.resolve(I.resolve(_).toString()),i.l=null;return va(j,0)}wa(j);if(!i.I.length)return i.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),i.l=null,j.return();i.l.resolve(i.I);i.l=null;F(j)}))}function Yn(i,r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G;K((function(q){if(1==q.g)return s=Af([r],kf()),p=i.K.request(7,s),ta(q,2),D(q,p.promise,4);if(2!=q.g){y=q.h;A=[];T=Tf(y.data);x=JSON.parse(T);if(0<x.avails.length){if(JSON.stringify(i.j)!=JSON.stringify(x.avails)){i.j=x.avails;I=t(i.j);for(C=I.next();!C.done;C=I.next())for(M=C.value,N=t(M.nonLinearAdsList),_=N.next();!_.done;_=N.next())for(j=_.value,B=t(j.nonLinearAdList),z=B.next();!z.done;z=B.next())G=z.value,$n(i,G);A=i.getCuePoints();i.i(new O("ad-cue-points-changed",(new Map).set("cuepoints",A)))}}else i.j.length&&i.i(new O("ad-cue-points-changed",(new Map).set("cuepoints",A))),Xn(i),i.j=[];o&&(i.J||0<A.length)&&ao(i);return va(q,0)}wa(q);F(q)}))}function $n(i,r){var o,s,p,y,A,T,x;K((function(I){if(1==I.g){if(!r.staticResource)return I.return();o=bo(r);if(i.H.get(o))return I.return();s=Af([r.staticResource],kf());p=i.K.request(7,s);ta(I,2);i.H.set(o,[]);return D(I,p.promise,4)}if(2!=I.g)return y=I.h,A=Tf(y.data),T=JSON.parse(A),x=T.apps,i.H.set(o,x),va(I,0);wa(I);i.H.delete(o);F(I)}))}function bo(i){return[i.adId,i.adParameters,i.adSystem,i.adTitle,i.creativeAdId,i.creativeId,i.creativeSequence,i.height,i.width,i.staticResource].join("")}function ao(i){co(i);i.J||(eo(i),i.s.o(i.g,"seeked",(function(){eo(i)})),i.s.o(i.g,"ended",(function(){Xn(i)})));i.s.o(i.g,"timeupdate",(function(){co(i)}))}function eo(i){var r=i.g.currentTime;if(0!=r&&null==i.C){for(var o,s,p=t(i.j),y=p.next();!y.done;y=p.next()){y=y.value;for(var A=t(y.ads),T=A.next();!T.done;T=A.next())if(T=T.value,s){if(T.startTimeInSeconds<r&&T.startTimeInSeconds>s.startTimeInSeconds+s.durationInSeconds){s=T;o=y;break}}else T.startTimeInSeconds<r&&(s=T,o=y)}o&&s&&!i.M.includes(s.adId)&&(i.C=r,i.g.currentTime=o.startTimeInSeconds)}}function co(i){if(i.g.duration&&(i.h||i.j.length)){var r=i.g.currentTime,o=!1;if(i.h){o=!0;var s=i.G,p=s.startTimeInSeconds+.5*s.durationInSeconds,y=s.startTimeInSeconds+.75*s.durationInSeconds;r>=s.startTimeInSeconds+.25*s.durationInSeconds&&!i.u.includes("firstQuartile")?(i.u.push("firstQuartile"),fo(i,"firstQuartile")):r>=p&&!i.u.includes("midpoint")?(i.u.push("midpoint"),fo(i,"midpoint")):r>=y&&!i.u.includes("thirdQuartile")&&(i.u.push("thirdQuartile"),fo(i,"thirdQuartile"));s=i.h.getRemainingTime();p=i.h.getDuration();0<p&&(0>=s||s>p)&&Xn(i)}if(!i.h||!i.h.isLinear()){e:for(s=t(i.j),p=s.next();!p.done;p=s.next()){p=p.value;if(i.h&&i.h.isLinear())break;for(y=0;y<p.ads.length;y++){var A=p.ads[y],T=A.startTimeInSeconds+A.durationInSeconds;if(A.startTimeInSeconds<=r&&T>r){if(i.M.includes(A.adId)){if(i.g.ended)continue;i.g.currentTime=T;break e}Xn(i);i.L=p;i.h=new Vn(A,y+1,p.ads.length,!0,i.g);i.G=A;0===y&&fo(i,"breakStart");go(i);break}}}if(!i.h)for(s=t(i.j),p=s.next();!p.done;p=s.next()){p=p.value;if(i.h)break;for(y=0;y<p.nonLinearAdsList.length;y++)if(A=p.nonLinearAdsList[y],A.nonLinearAdList.length){T=p.startTimeInSeconds;var x=i.H.get(bo(A.nonLinearAdList[0]));if(T<=r&&x&&x.length){Xn(i);T=i;x=t(x);for(var I=x.next();!I.done;I=x.next())if(I=I.value,I.data.source.length){var C=document.createElement("img");C.src=I.data.source[0].url;C.style.top=(I.placeholder.top||0)+"%";C.style.height=100-(I.placeholder.top||0)+"%";C.style.left=(I.placeholder.left||0)+"%";C.style.maxWidth=100-(I.placeholder.left||0)+"%";C.style.objectFit="contain";C.style.position="absolute";T.D.appendChild(C)}i.L=p;i.h=new Vn(A,y+1,p.ads.length,!1,i.g);i.G=A;0===y&&fo(i,"breakStart");go(i);break}}}o&&!i.h&&(r=i.g.currentTime,i.C&&i.C>r&&(i.g.currentTime=i.C),i.C=null)}}}function Xn(i){if(i.h){for(;i.D.lastChild;)i.D.removeChild(i.D.firstChild);i.J||i.M.push(i.G.adId);fo(i,"complete");for(var r=t(i.m),o=r.next();!o.done;o=r.next())o=o.value,i.s.hc(o.target,o.type,o.listener);i.m=[];i.u=[];r=i.h.getPositionInSequence();o=i.h.getSequenceLength();r===o&&fo(i,"breakEnd");i.h=null;i.G=null;i.L=null}}function go(i){var r=!1;i.g.paused?r=!0:(fo(i,"impression"),fo(i,"start"));i.m.push({target:i.g,type:"volumechange",listener:function(){i.g.muted&&fo(i,"mute")}});i.m.push({target:i.g,type:"volumechange",listener:function(){i.g.muted||fo(i,"unmute")}});i.m.push({target:i.g,type:"play",listener:function(){r?(fo(i,"impression"),fo(i,"start"),r=!1):fo(i,"resume")}});i.m.push({target:i.g,type:"pause",listener:function(){fo(i,"pause")}});for(var o=t(i.m),s=o.next();!s.done;s=o.next())s=s.value,i.s.o(s.target,s.type,s.listener)}function fo(i,r){var o=i.G.trackingEvents.find((function(i){return i.eventType==r}));o||(o=i.L.adBreakTrackingEvents.find((function(i){return i.eventType==r})));if(o){o=t(o.beaconUrls);for(var s=o.next();!s.done;s=o.next())(s=s.value)&&""!=s&&(s=Af([s],kf()),s.method="POST",i.K.request(7,s))}switch(r){case"impression":i.i(new O("ad-impression"));break;case"start":i.i(new O("ad-started",(new Map).set("ad",i.h)));break;case"mute":i.i(new O("ad-muted"));break;case"unmute":i.i(new O("ad-volume-changed"));break;case"resume":i.i(new O("ad-resumed"));break;case"pause":i.i(new O("ad-paused"));break;case"firstQuartile":i.i(new O("ad-first-quartile"));break;case"midpoint":i.i(new O("ad-midpoint"));break;case"thirdQuartile":i.i(new O("ad-third-quartile"));break;case"complete":i.i(new O("ad-complete"));i.i(new O("ad-stopped"));break;case"breakStart":i.D.setAttribute("ad-active","true");break;case"breakEnd":i.D.removeAttribute("ad-active")}}function ho(r,o){(this||i).g=r;(this||i).i=null;(this||i).h=o}p=ho.prototype;p.getDuration=function(){return(this||i).i?(this||i).i.duration:-1};p.getMinSuggestedDuration=function(){return this.getDuration()};p.getRemainingTime=function(){return(this||i).i?(this||i).i.duration-(this||i).i.currentTime:-1};p.isPaused=function(){return(this||i).h.paused};p.isSkippable=function(){return(this||i).g.isSkippable()};p.getTimeUntilSkippable=function(){var r=(this||i).g.getSkipTimeOffset();r=this.getRemainingTime()-r;return Math.max(r,0)};p.canSkipNow=function(){return 0==this.getTimeUntilSkippable()};p.skip=function(){(this||i).h.currentTime+=this.getRemainingTime()};p.pause=function(){return(this||i).h.pause()};p.play=function(){return(this||i).h.play()};p.getVolume=function(){return(this||i).h.volume};p.setVolume=function(r){(this||i).h.volume=r};p.isMuted=function(){return(this||i).h.muted};p.isLinear=function(){return!0};p.resize=function(){};p.setMuted=function(r){(this||i).h.muted=r};p.getSequenceLength=function(){var r=(this||i).g.getAdPodInfo();return null==r?1:r.getTotalAds()};p.getPositionInSequence=function(){var r=(this||i).g.getAdPodInfo();return null==r?1:r.getAdPosition()};p.getTitle=function(){return(this||i).g.getTitle()};p.getDescription=function(){return(this||i).g.getDescription()};p.getVastMediaBitrate=function(){return 0};p.getVastMediaHeight=function(){return(this||i).g.getVastMediaHeight()};p.getVastMediaWidth=function(){return(this||i).g.getVastMediaWidth()};p.getAdId=function(){return(this||i).g.getAdId()};p.getCreativeAdId=function(){return(this||i).g.getCreativeAdId()};p.getAdvertiserName=function(){return(this||i).g.getAdvertiserName()};p.getMediaUrl=function(){return null};p.getTimeOffset=function(){var r=(this||i).g.getAdPodInfo();return null==r?0:r.getTimeOffset()};p.getPodIndex=function(){var r=(this||i).g.getAdPodInfo();return null==r?0:r.getPodIndex()};p.release=function(){(this||i).h=(this||i).i=(this||i).g=null};L("shaka.ads.ServerSideAd",ho);ho.prototype.release=ho.prototype.release;ho.prototype.getPodIndex=ho.prototype.getPodIndex;ho.prototype.getTimeOffset=ho.prototype.getTimeOffset;ho.prototype.getMediaUrl=ho.prototype.getMediaUrl;ho.prototype.getAdvertiserName=ho.prototype.getAdvertiserName;ho.prototype.getCreativeAdId=ho.prototype.getCreativeAdId;ho.prototype.getAdId=ho.prototype.getAdId;ho.prototype.getVastMediaWidth=ho.prototype.getVastMediaWidth;ho.prototype.getVastMediaHeight=ho.prototype.getVastMediaHeight;ho.prototype.getVastMediaBitrate=ho.prototype.getVastMediaBitrate;ho.prototype.getDescription=ho.prototype.getDescription;ho.prototype.getTitle=ho.prototype.getTitle;ho.prototype.getPositionInSequence=ho.prototype.getPositionInSequence;ho.prototype.getSequenceLength=ho.prototype.getSequenceLength;ho.prototype.setMuted=ho.prototype.setMuted;ho.prototype.resize=ho.prototype.resize;ho.prototype.isLinear=ho.prototype.isLinear;ho.prototype.isMuted=ho.prototype.isMuted;ho.prototype.setVolume=ho.prototype.setVolume;ho.prototype.getVolume=ho.prototype.getVolume;ho.prototype.play=ho.prototype.play;ho.prototype.pause=ho.prototype.pause;ho.prototype.skip=ho.prototype.skip;ho.prototype.canSkipNow=ho.prototype.canSkipNow;ho.prototype.getTimeUntilSkippable=ho.prototype.getTimeUntilSkippable;ho.prototype.isSkippable=ho.prototype.isSkippable;ho.prototype.isPaused=ho.prototype.isPaused;ho.prototype.getRemainingTime=ho.prototype.getRemainingTime;ho.prototype.getMinSuggestedDuration=ho.prototype.getMinSuggestedDuration;ho.prototype.getDuration=ho.prototype.getDuration;function io(r,o,s,p){var y=this||i;(this||i).u=r;(this||i).l=o;(this||i).j=null;(this||i).H=NaN;(this||i).i=p;(this||i).I=!1;(this||i).C=(this||i).m=(this||i).s=null;(this||i).D="";(this||i).G=[];(this||i).h=new Kf;r=new google.ima.dai.api.UiSettings;r.setLocale(s);(this||i).g=new google.ima.dai.api.StreamManager((this||i).l,(this||i).u,r);this.i(new O("ima-stream-manager-loaded",(new Map).set("imaStreamManager",(this||i).g)));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(i){jo(y,i)}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){y.D.length?y.j.resolve(y.D):y.j.reject("IMA Stream request returned an error and there was no backup asset uri provided.");y.j=null}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(i){i=i.getAd();y.m=new ho(i,y.l);y.C&&(y.m.i=y.C);y.i(new O("ad-started",(new Map).set("ad",y.m)));y.u.setAttribute("ad-active","true")}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){y.u.removeAttribute("ad-active");var i=y.l.currentTime;y.s&&y.s>i&&(y.l.currentTime=y.s,y.s=null)}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(i){y.C=i.getStreamData().adProgressData;y.m&&(y.m.i=y.C)}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){y.i(new O("ad-first-quartile"))}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){y.i(new O("ad-midpoint"))}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){y.i(new O("ad-third-quartile"))}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){y.i(new O("ad-complete"));y.i(new O("ad-stopped"));y.u.removeAttribute("ad-active");y.m=null}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){y.i(new O("ad-skipped"));y.i(new O("ad-stopped"))}));(this||i).h.o((this||i).g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(i){var r=i.getStreamData();i=[];r=t(r.cuepoints);for(var o=r.next();!o.done;o=r.next())o=o.value,i.push({start:o.start,end:o.end});y.G=i;y.i(new O("ad-cue-points-changed",(new Map).set("cuepoints",i)))}))}p=io.prototype;p.configure=function(){};p.stop=function(){(this||i).D="";(this||i).s=null;(this||i).G=[]};p.release=function(){this.stop();(this||i).h&&(this||i).h.release()};p.onCueMetadataChange=function(r){if(r.key&&r.data){var o={};o[r.key]=r.data;(this||i).g.onTimedMetadata(o)}};p.getCuePoints=function(){return(this||i).G};function jo(i,r){i.i(new O("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-i.H)));r=r.getStreamData().url;i.j.resolve(r);i.j=null;i.I||i.h.o(i.l,"seeked",(function(){var r=i.l.currentTime;if(0!=r){i.g.streamTimeForContentTime(r);var o=i.g.previousCuePointForStreamTime(r);o&&!o.played&&(i.s=r,i.l.currentTime=o.start)}}))}function W(){$a.call(this||i);(this||i).g=(this||i).i=(this||i).h=null;(this||i).j=new Mn;(this||i).m=navigator.language;(this||i).l=null}pa(W,$a);p=W.prototype;p.setLocale=function(r){(this||i).m=r};p.configure=function(r){(this||i).l=r;(this||i).h&&(this||i).h.configure((this||i).l);(this||i).g&&(this||i).g.configure((this||i).l)};p.initClientSide=function(o,s,p){var y=this||i;if(!r.google||!google.ima||!google.ima.AdsLoader)throw new P(2,10,1e4);(this||i).h&&(this||i).h.release();(this||i).h=new On(o,s,(this||i).m,p,(function(i){return ko(y,i)}));(this||i).h.configure((this||i).l)};p.release=function(){(this||i).h&&((this||i).h.release(),(this||i).h=null);(this||i).i&&((this||i).i.release(),(this||i).i=null);(this||i).g&&((this||i).g.release(),(this||i).g=null);$a.prototype.release.call(this||i)};p.onAssetUnload=function(){(this||i).h&&(this||i).h.stop();(this||i).i&&(this||i).i.stop();(this||i).g&&(this||i).g.stop();this.dispatchEvent(new O("ad-stopped"));(this||i).j=new Mn};p.requestClientSideAds=function(r){if(!(this||i).h)throw new P(1,10,10001);var o=(this||i).h;o.g&&o.g.destroy();o.l&&o.l.contentComplete();o.H=Date.now()/1e3;o.l.requestAds(r)};p.updateClientSideAdsRenderingSettings=function(r){if(!(this||i).h)throw new P(1,10,10001);var o=(this||i).h;o.C=r;o.g&&o.g.updateAdsRenderingSettings(o.C)};p.initMediaTailor=function(r,o,s){var p=this||i;(this||i).i&&(this||i).i.release();(this||i).i=new Wn(r,o,s,(function(i){return ko(p,i)}))};p.requestMediaTailorStream=function(r,o,s){if(!(this||i).i)throw new P(1,10,10005);var p=(this||i).i;s=void 0===s?"":s;p.l?r=Promise.reject(new P(1,10,10004)):(p.l=new mf,Zn(p,r,o),p.I=s||"",p.W=Date.now()/1e3,r=p.l);return r};p.initServerSide=function(o,s){var p=this||i;if(!r.google||!google.ima||!google.ima.dai)throw new P(2,10,10002);(this||i).g&&(this||i).g.release();(this||i).g=new io(o,s,(this||i).m,(function(i){return ko(p,i)}));(this||i).g.configure((this||i).l)};p.requestServerSideStream=function(r,o){o=void 0===o?"":o;if(!(this||i).g)throw new P(1,10,10003);r.adTagParameters||(r.adTagParameters={});var s=r.adTagParameters;(s.mpt||s.mpv)&&Ra('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');r.adTagParameters.mpt="shaka-player";r.adTagParameters.mpv="v4.7.11";s=(this||i).g;s.j?r=Promise.reject(new P(1,10,10004)):(r instanceof google.ima.dai.api.LiveStreamRequest&&(s.I=!0),s.j=new mf,s.g.requestStream(r),s.D=o||"",s.H=Date.now()/1e3,r=s.j);return r};p.replaceServerSideAdTagParameters=function(r){if(!(this||i).g)throw new P(1,10,10003);(r.mpt||r.mpv)&&Ra('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');r.mpt="Shaka Player";r.mpv="v4.7.11";(this||i).g.g.replaceAdTagParameters(r)};p.getServerSideCuePoints=function(){Me("AdManager.getServerSideCuePoints","Please use getCuePoints function.");return this.getCuePoints()};p.getCuePoints=function(){var r=[];(this||i).g&&(r=r.concat((this||i).g.getCuePoints()));(this||i).i&&(r=r.concat((this||i).i.getCuePoints()));return r};p.getStats=function(){var r=(this||i).j;return{loadTimes:r.h,started:r.g,playedCompletely:r.i,skipped:r.j}};p.onManifestUpdated=function(r){(this||i).i&&(this||i).i.onManifestUpdated(r)};p.onDashTimedMetadata=function(r){if((this||i).g&&"urn:google:dai:2018"==r.schemeIdUri){var o=r.schemeIdUri,s=r.eventElement?r.eventElement.getAttribute("messageData"):null;(this||i).g.g.processMetadata(o,s,r.startTime)}};p.onHlsTimedMetadata=function(r,o){(this||i).g&&(this||i).g.g.processMetadata("ID3",r.data,o)};p.onCueMetadataChange=function(r){(this||i).g&&(this||i).g.onCueMetadataChange(r)};function ko(i,r){if(r&&r.type)switch(r.type){case"ads-loaded":i.j.h.push(r.loadTime);break;case"ad-started":i.j.g++;break;case"ad-complete":i.j.i++;break;case"ad-skipped":i.j.j++}i.dispatchEvent(r)}L("shaka.ads.AdManager",W);W.prototype.onCueMetadataChange=W.prototype.onCueMetadataChange;W.prototype.onHlsTimedMetadata=W.prototype.onHlsTimedMetadata;W.prototype.onDashTimedMetadata=W.prototype.onDashTimedMetadata;W.prototype.onManifestUpdated=W.prototype.onManifestUpdated;W.prototype.getStats=W.prototype.getStats;W.prototype.getCuePoints=W.prototype.getCuePoints;W.prototype.getServerSideCuePoints=W.prototype.getServerSideCuePoints;W.prototype.replaceServerSideAdTagParameters=W.prototype.replaceServerSideAdTagParameters;W.prototype.requestServerSideStream=W.prototype.requestServerSideStream;W.prototype.initServerSide=W.prototype.initServerSide;W.prototype.requestMediaTailorStream=W.prototype.requestMediaTailorStream;W.prototype.initMediaTailor=W.prototype.initMediaTailor;W.prototype.updateClientSideAdsRenderingSettings=W.prototype.updateClientSideAdsRenderingSettings;W.prototype.requestClientSideAds=W.prototype.requestClientSideAds;W.prototype.onAssetUnload=W.prototype.onAssetUnload;W.prototype.release=W.prototype.release;W.prototype.initClientSide=W.prototype.initClientSide;W.prototype.configure=W.prototype.configure;W.prototype.setLocale=W.prototype.setLocale;W.ADS_LOADED="ads-loaded";W.AD_STARTED="ad-started";W.AD_FIRST_QUARTILE="ad-first-quartile";W.AD_MIDPOINT="ad-midpoint";W.AD_THIRD_QUARTILE="ad-third-quartile";W.AD_COMPLETE="ad-complete";W.AD_STOPPED="ad-stopped";W.AD_SKIPPED="ad-skipped";W.AD_VOLUME_CHANGED="ad-volume-changed";W.AD_MUTED="ad-muted";W.AD_PAUSED="ad-paused";W.AD_RESUMED="ad-resumed";W.AD_SKIP_STATE_CHANGED="ad-skip-state-changed";W.CUEPOINTS_CHANGED="ad-cue-points-changed";W.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded";W.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded";W.AD_CLICKED="ad-clicked";W.AD_PROGRESS="ad-progress";W.AD_BUFFERING="ad-buffering";W.AD_IMPRESSION="ad-impression";W.AD_DURATION_CHANGED="ad-duration-changed";W.AD_CLOSED="ad-closed";W.AD_LOADED="ad-loaded";W.ALL_ADS_COMPLETED="all-ads-completed";W.AD_LINEAR_CHANGED="ad-linear-changed";W.AD_METADATA="ad-metadata";W.AD_RECOVERABLE_ERROR="ad-recoverable-error";W.AD_ERROR="ad-error";W.AD_BREAK_READY="ad-break-ready";W.AD_INTERACTION="ad-interaction";Yu=function(){return new W};function lo(i){return JSON.stringify(i,(function(i,r){if("function"!=typeof r){if(r instanceof Event||r instanceof O){var o={};for(s in r)(i=r[s])&&"object"==typeof i?"detail"==s&&(o[s]=i):s in Event||(o[s]=i);return o}if(r instanceof Error){var s=new Set(["name","message","stack"]);for(o in r)s.add(o);i=t(Object.getOwnPropertyNames(r));for(o=i.next();!o.done;o=i.next())s.add(o.value);i={};s=t(s);for(o=s.next();!o.done;o=s.next())o=o.value,i[o]=r[o];r={__type__:"Error",contents:i}}else if(r instanceof TimeRanges){s={__type__:"TimeRanges",length:r.length,start:[],end:[]};r=t(Vh(r));for(o=r.next();!o.done;o=r.next())o=o.value,i=o.end,s.start.push(o.start),s.end.push(i);r=s}else r=r instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(r)}:"number"==typeof r?isNaN(r)?"NaN":isFinite(r)?r:0>r?"-Infinity":"Infinity":r;return r}}))}function mo(i){return JSON.parse(i,(function(i,r){if("NaN"==r)var o=NaN;else if("-Infinity"==r)o=-Infinity;else if("Infinity"==r)o=Infinity;else if(r&&"object"==typeof r&&"TimeRanges"==r.__type__)o=no(r);else if(r&&"object"==typeof r&&"Uint8Array"==r.__type__)o=new Uint8Array(r.entries);else if(r&&"object"==typeof r&&"Error"==r.__type__){i=r.contents;r=Error(i.message);for(o in i)r[o]=i[o];o=r}else o=r;return o}))}function no(i){return{length:i.length,start:function(r){return i.start[r]},end:function(r){return i.end[r]}}}var $u="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),tl="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ul=["loop","playbackRate"],vl=["pause","play"],yl={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},Al={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},El={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Dl=[["getConfiguration","configure"]],Ml=[["isTextTrackVisible","setTextTrackVisibility"]],Ll="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),_l=["attach","attachCanvas","detach","load","unload"];function zo(r,o,s,p,y,A,T){var x=this||i;(this||i).I=r;(this||i).M=T;(this||i).j=new Dd(o);(this||i).N=s;(this||i).C=!1;(this||i).u=p;(this||i).H=y;(this||i).K=A;(this||i).h=(this||i).m=!1;(this||i).L="";(this||i).s=null;(this||i).D=function(){return Ao(x)};(this||i).G=function(i,r){i=mo(r);switch(i.type){case"event":var o=i.targetName,s=Na(i.event);x.u(o,s);break;case"update":o=i.update;for(s in o){i=x.g[s]||{};for(var p in o[s])i[p]=o[s][p]}x.C&&(x.N(),x.C=!1);break;case"asyncComplete":if(s=i.id,p=i.error,i=x.i[s],delete x.i[s],i)if(p){s=new P(p.severity,p.category,p.code);for(o in p)s[o]=p[o];i.reject(s)}else i.resolve()}};(this||i).g={video:{},player:{}};(this||i).J=0;(this||i).i={};(this||i).l=null;tc.add(this||i)}p=zo.prototype;p.destroy=function(){tc.delete(this||i);Co(this||i);Jl&&Eo(this||i);(this||i).j&&((this||i).j.stop(),(this||i).j=null);(this||i).H=(this||i).u=null;(this||i).h=(this||i).m=!1;(this||i).G=(this||i).D=(this||i).l=(this||i).i=(this||i).g=(this||i).s=null;return Promise.resolve()};p.Ba=function(){return(this||i).h};p.Je=function(){return(this||i).L};p.init=function(){if((this||i).I.length)if(r.chrome&&chrome.cast&&chrome.cast.isAvailable){(this||i).m=!0;(this||i).j.Qa();var o=new chrome.cast.SessionRequest((this||i).I,[],null,(this||i).M,null);o=new chrome.cast.ApiConfig(o,(function(i){for(var r=t(tc),o=r.next();!o.done;o=r.next())Fo(o.value,i)}),(function(i){for(var r=t(tc),o=r.next();!o.done;o=r.next())o=o.value,Kl="available"==i,o.j.Qa()}),"origin_scoped");chrome.cast.initialize(o,(function(){}),(function(){}));Kl&&(this||i).j.S(Fl);(o=Jl)&&o.status!=chrome.cast.SessionStatus.STOPPED?Fo(this||i,o):Jl=null}else r.__onGCastApiAvailable!==Io&&(ec=r.__onGCastApiAvailable||null,r.__onGCastApiAvailable=Io)};p.kg=function(r){(this||i).s=r;(this||i).h&&Ko(this||i,{type:"appData",appData:(this||i).s})};p.cast=function(r){var o=this||i;return K((function(i){if(!o.m)throw new P(1,8,8e3);if(!Kl)throw new P(1,8,8001);if(o.h)throw new P(1,8,8002);o.l=new mf;chrome.cast.requestSession((function(i){return Lo(o,r,i)}),(function(i){return Mo(o,i)}));return D(i,o.l,0)}))};function No(i){if(i.h){var r=i.K();chrome.cast.requestSession((function(o){return Lo(i,r,o)}),(function(r){return Mo(i,r)}))}}p.Jc=function(){if((this||i).h){Co(this||i);if(Jl){Eo(this||i);try{Jl.stop((function(){}),(function(){}))}catch(i){}Jl=null}Ao(this||i)}};p.get=function(r,o){var s=this||i;if("video"==r){if(vl.includes(o))return function(){return s.kh.apply(s,[r,o].concat(w(Ga.apply(0,arguments))))}}else if("player"==r){if(El[o]&&!this.get("player","isLive")())return function(){};if(Ll.includes(o))return function(){return s.kh.apply(s,[r,o].concat(w(Ga.apply(0,arguments))))};if(_l.includes(o))return function(){return s.ej.apply(s,[r,o].concat(w(Ga.apply(0,arguments))))};if(yl[o]||Al[o])return function(){return s.g[r][o]}}return(this||i).g[r][o]};p.set=function(r,o,s){(this||i).g[r][o]=s;Ko(this||i,{type:"set",targetName:r,property:o,value:s})};function Lo(i,r,o){Jl=o;o.addUpdateListener(i.D);o.addMessageListener("urn:x-cast:com.google.shaka.v2",i.G);Ao(i);Ko(i,{type:"init",initState:r,appData:i.s});i.l.resolve()}function Mo(i,r){var o=8003;switch(r.code){case"cancel":o=8004;break;case"timeout":o=8005;break;case"receiver_unavailable":o=8006}i.l.reject(new P(2,8,o,r))}p.kh=function(r,o){Ko(this||i,{type:"call",targetName:r,methodName:o,args:Ga.apply(2,arguments)})};p.ej=function(r,o){var s=Ga.apply(2,arguments),p=new mf,y=(this||i).J.toString();(this||i).J++;(this||i).i[y]=p;try{Ko(this||i,{type:"asyncCall",targetName:r,methodName:o,args:s,id:y})}catch(i){p.reject(i)}return p};function Fo(i,r){var o=i.K();i.l=new mf;i.C=!0;Lo(i,o,r)}function Eo(i){var r=Jl;r.removeUpdateListener(i.D);r.removeMessageListener("urn:x-cast:com.google.shaka.v2",i.G)}function Ao(i){var r=!!Jl&&"connected"==Jl.status;if(i.h&&!r){i.H();for(var o in i.g)i.g[o]={};Co(i)}i.h=r;i.L=r?Jl.receiver.friendlyName:"";i.j.Qa()}function Co(i){for(var r in i.i){var o=i.i[r];delete i.i[r];o.reject(new P(1,7,7e3))}}function Ko(i,r){r=lo(r);var o=Jl;try{o.sendMessage("urn:x-cast:com.google.shaka.v2",r,(function(){}),Va)}catch(s){throw r=new P(2,8,8005,s),o=new O("error",(new Map).set("detail",r)),i.u("player",o),i.Jc(),r}}var Fl=.02,Kl=!1,Jl=null,ec=null,tc=new Set;function Io(i){ec?r.__onGCastApiAvailable=ec:delete r.__onGCastApiAvailable;ec=null;if(i)for(var o=t(tc),s=o.next();!s.done;s=o.next())s.value.init();"function"===typeof r.__onGCastApiAvailable&&r.__onGCastApiAvailable(i)}function Oo(r,o,s,p){p=void 0!==p&&p;$a.call(this||i);var y=this||i;(this||i).i=r;(this||i).h=o;(this||i).m=(this||i).s=(this||i).j=(this||i).u=(this||i).l=null;(this||i).G=s;(this||i).D=p;(this||i).C=new Map;(this||i).g=new zo(s,(function(){return Po(y)}),(function(){return Qo(y)}),(function(i,r){return Ro(y,i,r)}),(function(){return So(y)}),(function(){return To(y)}),p);Uo(this||i)}pa(Oo,$a);p=Oo.prototype;p.destroy=function(r){r&&(this||i).g.Jc();(this||i).m&&((this||i).m.release(),(this||i).m=null);r=[];(this||i).h&&(r.push((this||i).h.destroy()),(this||i).h=null);(this||i).g&&(r.push((this||i).g.destroy()),(this||i).g=null);(this||i).u=(this||i).l=(this||i).i=null;$a.prototype.release.call(this||i);return Promise.all(r)};p.cc=function(){return(this||i).l};p.Mc=function(){return(this||i).u};p.kf=function(){return(this||i).g.m&&Kl};p.Ba=function(){return(this||i).g.Ba()};p.Je=function(){return(this||i).g.Je()};p.cast=function(){var r,o=this||i;return K((function(i){return 1==i.g?(r=To(o),D(i,o.g.cast(r),2)):o.h?D(i,o.h.Wc(),0):i.return()}))};p.kg=function(r){(this||i).g.kg(r)};p.vh=function(){No((this||i).g)};p.Jc=function(){(this||i).g.Jc()};p.Jg=function(r,o){o=void 0!==o&&o;var s=this||i;return K((function(i){if(1==i.g){if(r==s.G&&o==s.D)return i.return();s.G=r;s.D=o;s.g.Jc();return D(i,s.g.destroy(),2)}s.g=null;s.g=new zo(r,(function(){return Po(s)}),(function(){return Qo(s)}),(function(i,r){return Ro(s,i,r)}),(function(){return So(s)}),(function(){return To(s)}),o);s.g.init();F(i)}))};function Uo(i){i.g.init();i.m=new Kf;for(var r=t($u),o=r.next();!o.done;o=r.next())i.m.o(i.i,o.value,(function(r){i.g.Ba()||(r=Na(r),i.j.dispatchEvent(r))}));for(var s in B)i.m.o(i.h,B[s],(function(r){i.g.Ba()||i.s.dispatchEvent(r)}));i.l={};r={};for(var p in i.i)r.$c=p,Object.defineProperty(i.l,r.$c,{configurable:!1,enumerable:!0,get:function(r){return function(){return Vo(i,r.$c)}}(r),set:function(r){return function(o){var s=r.$c;i.g.Ba()?i.g.set("video",s,o):i.i[s]=o}}(r)}),r={$c:r.$c};i.u={};Wo(i,(function(r){Object.defineProperty(i.u,r,{configurable:!1,enumerable:!0,get:function(){return Xo(i,r)}})}));Yo(i);i.j=new $a;i.j.we=i.l;i.s=new $a;i.s.we=i.u}function Yo(i){var r=new Map;Wo(i,(function(o,s){r.has(s)?(s=r.get(s),o.length<s.length?i.C.set(o,s):i.C.set(s,o)):r.set(s,o)}))}function Wo(i,r){function c(i){return"constructor"!=i&&"function"==typeof s[i]&&!p.has(i)}var o,s=i.h,p=new Set;for(o in s)c(o)&&(p.add(o),r(o,s[o]));i=Object.getPrototypeOf(s);for(o=Object.getPrototypeOf({});i&&i!=o;){for(var y=t(Object.getOwnPropertyNames(i)),A=y.next();!A.done;A=y.next())A=A.value,c(A)&&(p.add(A),r(A,s[A]));i=Object.getPrototypeOf(i)}}function To(i){var r={video:{},player:{},playerAfterLoad:{},manifest:i.h.Gf(),startTime:null};i.i.pause();for(var o=t(ul),s=o.next();!s.done;s=o.next())s=s.value,r.video[s]=i.i[s];i.i.ended||(r.startTime=i.i.currentTime);o=t(Dl);for(s=o.next();!s.done;s=o.next()){var p=s.value;s=p[1];p=i.h[p[0]]();r.player[s]=p}o=t(Ml);for(s=o.next();!s.done;s=o.next())p=s.value,s=p[1],p=i.h[p[0]](),r.playerAfterLoad[s]=p;return r}function Po(i){var r=new O("caststatuschanged");i.dispatchEvent(r)}function Qo(i){var r=new O(i.l.paused?"pause":"play");i.j.dispatchEvent(r)}function So(i){for(var r=t(Dl),o=r.next();!o.done;o=r.next()){var s=o.value;o=s[1];s=i.g.get("player",s[0])();i.h[o](s)}var p=i.g.get("player","getAssetUri")();s=i.g.get("video","ended");r=Promise.resolve();var y=i.i.autoplay;o=null;s||(o=i.g.get("video","currentTime"));var A;(s=i.g.get("player","getTextTracks")())&&s.length&&(A=s.find((function(i){return i.active})));var T=i.g.get("player","isTextTrackVisible")();p&&(i.i.autoplay=!1,r=i.h.load(p,o));var x={};o=t(ul);for(s=o.next();!s.done;s=o.next())s=s.value,x[s]=i.g.get("video",s);r.then((function(){if(i.i){for(var r=t(ul),o=r.next();!o.done;o=r.next())o=o.value,i.i[o]=x[o];r=t(Ml);for(o=r.next();!o.done;o=r.next()){var s=o.value;o=s[1];s=i.g.get("player",s[0])();i.h[o](s)}i.h.Oe(T);A&&i.h.ig(A.language,A.roles,A.forced);i.i.autoplay=y;p&&i.i.play()}}),(function(r){r=(new Map).set("detail",r);r=new O("error",r);i.h.dispatchEvent(r)}))}function Vo(i,r){if("addEventListener"==r)return function(r,o,s){return i.j.addEventListener(r,o,s)};if("removeEventListener"==r)return function(r,o,s){return i.j.removeEventListener(r,o,s)};if(i.g.Ba()&&0==Object.keys(i.g.g.video).length){var o=i.i[r];if("function"!=typeof o)return o}return i.g.Ba()?i.g.get("video",r):(r=i.i[r],"function"==typeof r&&(r=r.bind(i.i)),r)}function Xo(i,r){i.C.has(r)&&(r=i.C.get(r));if("addEventListener"==r)return function(r,o,s){return i.s.addEventListener(r,o,s)};if("removeEventListener"==r)return function(r,o,s){return i.s.removeEventListener(r,o,s)};if("getMediaElement"==r)return function(){return i.l};if("getSharedConfiguration"==r)return i.g.get("player","getConfiguration");if("getNetworkingEngine"==r)return function(){return i.h.Zb()};if("getDrmEngine"==r)return function(){return i.h.m};if("getAdManager"==r)return function(){return i.h.ee()};if("setVideoContainer"==r)return function(r){return i.h.rg(r)};if(i.g.Ba()){if("getManifest"==r||"drmInfo"==r)return function(){Ra(r+"() does not work while casting!");return null};if("attach"==r||"detach"==r)return function(){Ra(r+"() does not work while casting!");return Promise.resolve()}}return i.g.Ba()&&0==Object.keys(i.g.g.video).length&&(yl[r]||Al[r])||!i.g.Ba()?i.h[r].bind(i.h):i.g.get("player",r)}function Ro(i,r,o){i.g.Ba()&&("video"==r?i.j.dispatchEvent(o):"player"==r&&i.s.dispatchEvent(o))}L("shaka.cast.CastProxy",Oo);Oo.prototype.changeReceiverId=Oo.prototype.Jg;Oo.prototype.forceDisconnect=Oo.prototype.Jc;Oo.prototype.suggestDisconnect=Oo.prototype.vh;Oo.prototype.setAppData=Oo.prototype.kg;Oo.prototype.cast=Oo.prototype.cast;Oo.prototype.receiverName=Oo.prototype.Je;Oo.prototype.isCasting=Oo.prototype.Ba;Oo.prototype.canCast=Oo.prototype.kf;Oo.prototype.getPlayer=Oo.prototype.Mc;Oo.prototype.getVideo=Oo.prototype.cc;Oo.prototype.destroy=Oo.prototype.destroy;function Zo(r,o,s,p){$a.call(this||i);var y=this||i;(this||i).g=r;(this||i).h=o;(this||i).j=new Kf;(this||i).J={video:r,player:o};(this||i).G=s||function(){};(this||i).K=p||function(i){return i};(this||i).i=null;(this||i).H=!1;(this||i).s=!0;(this||i).m=0;(this||i).D=!1;(this||i).C=!0;(this||i).u=(this||i).l=null;(this||i).I=new Dd((function(){$o(y)}));ap(this||i)}pa(Zo,$a);p=Zo.prototype;p.isConnected=function(){return(this||i).H};p.Ji=function(){return(this||i).s};p.rj=function(r){(this||i).i=r};p.Nh=function(){(this||i).i=null};p.sj=function(r){(this||i).i||((this||i).i={metadataType:cast.receiver.media.MetadataType.GENERIC});(this||i).i.title=r};p.qj=function(r){(this||i).i||((this||i).i={metadataType:cast.receiver.media.MetadataType.GENERIC});(this||i).i.images=[{url:r}]};p.pj=function(r){(this||i).i||((this||i).i={});(this||i).i.artist=r;(this||i).i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK};p.destroy=function(){var r,o,s=this||i;return K((function(i){if(1==i.g)return s.j&&(s.j.release(),s.j=null),r=[],s.h&&(r.push(s.h.destroy()),s.h=null),s.I&&(s.I.stop(),s.I=null),s.g=null,s.J=null,s.G=null,s.H=!1,s.s=!0,s.l=null,s.u=null,$a.prototype.release.call(s),D(i,Promise.all(r),2);o=cast.receiver.CastReceiverManager.getInstance();o.stop();F(i)}))};function ap(i){var r=cast.receiver.CastReceiverManager.getInstance();r.onSenderConnected=function(){return bp(i)};r.onSenderDisconnected=function(){return bp(i)};r.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&cp(i,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},i.l);cp(i,{type:"event",targetName:"video",event:{type:"volumechange"}},i.l)};i.u=r.getCastMessageBus("urn:x-cast:com.google.cast.media");i.u.onMessage=function(r){return dp(i,r)};i.l=r.getCastMessageBus("urn:x-cast:com.google.shaka.v2");i.l.onMessage=function(r){return ep(i,r)};r.start();r=t($u);for(var o=r.next();!o.done;o=r.next())i.j.o(i.g,o.value,(function(r){return fp(i,"video",r)}));for(var s in B)i.j.o(i.h,B[s],(function(r){return fp(i,"player",r)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?i.h.ng(3840,2160):i.h.ng(1920,1080);i.j.o(i.g,"loadeddata",(function(){i.D=!0}));i.j.o(i.h,"loading",(function(){i.s=!1;gp(i)}));i.j.o(i.g,"playing",(function(){i.s=!1;gp(i)}));i.j.o(i.g,"pause",(function(){gp(i)}));i.j.o(i.h,"unloading",(function(){i.s=!0;gp(i)}));i.j.o(i.g,"ended",(function(){new Dd((function(){i.g&&i.g.ended&&(i.s=!0,gp(i))})).S(cc)}))}function bp(i){i.m=0;i.C=!0;i.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length;gp(i)}function gp(i){var r;K((function(o){if(1==o.g)return D(o,Promise.resolve(),2);if(!i.h)return o.return();r=new O("caststatuschanged");i.dispatchEvent(r);ip(i)||jp(i);F(o)}))}function kp(i,r,o){var s,p,y,A,T,x,I,C,M,N;K((function(_){switch(_.g){case 1:for(s in r.player)p=r.player[s],i.h[s](p);i.G(o);y=i.g.autoplay;return r.manifest?(i.g.autoplay=!1,ta(_,5),D(_,i.h.load(r.manifest,r.startTime),7)):D(_,Promise.resolve(),3);case 7:va(_,3);break;case 5:return A=wa(_),T=(new Map).set("detail",A),x=new O("error",T),i.h&&i.h.dispatchEvent(x),_.return();case 3:if(!i.h)return _.return();for(I in r.video)C=r.video[I],i.g[I]=C;for(M in r.playerAfterLoad)N=r.playerAfterLoad[M],i.h[M](N);i.g.autoplay=y;r.manifest&&(i.g.play(),jp(i));F(_)}}))}function fp(i,r,o){i.h&&($o(i),cp(i,{type:"event",targetName:r,event:o},i.l))}function $o(i){i.I.S(sc);for(var r={video:{},player:{}},o=t(tl),s=o.next();!s.done;s=o.next())s=s.value,r.video[s]=i.g[s];if(i.h.R())for(var p in El)0==i.m%El[p]&&(r.player[p]=i.h[p]());for(var y in yl)0==i.m%yl[y]&&(r.player[y]=i.h[y]());(o=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(r.video.volume=o.level,r.video.muted=o.muted);cp(i,{type:"update",update:r},i.l);for(var A in Al)0==i.m%Al[A]&&(r={player:{}},r.player[A]=i.h[A](),cp(i,{type:"update",update:r},i.l));i.D&&(i.m+=1);ip(i)}function ip(i){return!(!i.C||!i.g.duration&&!i.h.R())&&(mp(i),i.C=!1,!0)}function mp(i,r){var o={contentId:i.h.Gf(),streamType:i.h.R()?"LIVE":"BUFFERED",contentType:""};i.h.R()||(o.duration=i.g.duration);i.i&&(o.metadata=i.i);jp(i,void 0===r?0:r,o)}function ep(i,r){var o=mo(r.data);switch(o.type){case"init":i.m=0;i.D=!1;i.C=!0;kp(i,o.initState,o.appData);$o(i);break;case"appData":i.G(o.appData);break;case"set":var s=o.targetName,p=o.property;o=o.value;if("video"==s){if(r=cast.receiver.CastReceiverManager.getInstance(),"volume"==p){r.setSystemVolumeLevel(o);break}if("muted"==p){r.setSystemVolumeMuted(o);break}}i.J[s][p]=o;break;case"call":s=i.J[o.targetName];s[o.methodName].apply(s,o.args);break;case"asyncCall":s=o.targetName;p=o.methodName;"player"==s&&"load"==p&&(i.m=0,i.D=!1);var y=o.id,A=r.senderId;r=i.J[s];o=r[p].apply(r,o.args);"player"==s&&"load"==p&&(o=o.then((function(){i.C=!0})));o.then((function(){return np(i,A,y,null)}),(function(r){return np(i,A,y,r)}))}}function dp(i,r){var o=mo(r.data);switch(o.type){case"PLAY":i.g.play();jp(i);break;case"PAUSE":i.g.pause();jp(i);break;case"SEEK":r=o.currentTime;var s=o.resumeState;null!=r&&(i.g.currentTime=Number(r));s&&"PLAYBACK_START"==s?(i.g.play(),jp(i)):s&&"PLAYBACK_PAUSE"==s&&(i.g.pause(),jp(i));break;case"STOP":i.h.Wc().then((function(){i.h&&jp(i)}));break;case"GET_STATUS":mp(i,Number(o.requestId));break;case"VOLUME":s=o.volume;r=s.level;s=s.muted;var p=i.g.volume,y=i.g.muted;null!=r&&(i.g.volume=Number(r));null!=s&&(i.g.muted=s);p==i.g.volume&&y==i.g.muted||jp(i);break;case"LOAD":i.m=0;i.D=!1;i.C=!1;r=o.media;s=o.currentTime;p=i.K(r.contentId);y=o.autoplay||!0;i.G(r.customData);y&&(i.g.autoplay=!0);i.h.load(p,s).then((function(){i.h&&mp(i)})).catch((function(r){var s="LOAD_FAILED";7==r.category&&7e3==r.code&&(s="LOAD_CANCELLED");cp(i,{requestId:Number(o.requestId),type:s},i.u)}));break;default:cp(i,{requestId:Number(o.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},i.u)}}function np(i,r,o,s){i.h&&cp(i,{type:"asyncComplete",id:o,error:s},i.l,r)}function cp(i,r,o,s){i.H&&(i=lo(r),s?o.getCastChannel(s).send(i):o.broadcast(i))}function jp(i,r,o){o=void 0===o?null:o;var s={mediaSessionId:0,playbackRate:i.g.playbackRate,playerState:i.s?dc:i.h.yd()?Ac:i.g.paused?Tc:bc,currentTime:i.g.currentTime,supportedMediaCommands:63,volume:{level:i.g.volume,muted:i.g.muted}};o&&(s.media=o);cp(i,{requestId:void 0===r?0:r,type:"MEDIA_STATUS",status:[s]},i.u)}L("shaka.cast.CastReceiver",Zo);Zo.prototype.destroy=Zo.prototype.destroy;Zo.prototype.setContentArtist=Zo.prototype.pj;Zo.prototype.setContentImage=Zo.prototype.qj;Zo.prototype.setContentTitle=Zo.prototype.sj;Zo.prototype.clearContentMetadata=Zo.prototype.Nh;Zo.prototype.setContentMetadata=Zo.prototype.rj;Zo.prototype.isIdle=Zo.prototype.Ji;Zo.prototype.isConnected=Zo.prototype.isConnected;var sc=.5,cc=5,dc="IDLE",bc="PLAYING",Ac="BUFFERING",Tc="PAUSED";function sp(i,r,o,s,p){if(s>=p)return null;for(var y=-1,A=-1,T=0;T<o.length;T++)if(o[T].some((function(i){return null!=i&&""!=i.g.trim()}))){y=T;break}for(T=o.length-1;0<=T;T--)if(o[T].some((function(i){return null!=i&&""!=i.g.trim()}))){A=T;break}if(-1===y||-1===A)return null;for(var x=T=!1,I="white",C="black",M=tp(s,p,T,x,I,C);y<=A;y++){for(var N=o[y],_=-1,j=-1,B=0;B<N.length;B++)if(null!=N[B]&&""!==N[B].g.trim()){_=B;break}for(B=N.length-1;0<=B;B--)if(null!=N[B]&&""!==N[B].g.trim()){j=B;break}if(-1===_||-1===j)N=up(s,p),i.nestedCues.push(N);else{for(;_<=j;_++)if(B=N[_]){var z=B.l,G=B.i,q=B.j,H=B.h;z==T&&G==x&&q==I&&H==C||(M.payload&&i.nestedCues.push(M),M=tp(s,p,z,G,q,H),T=z,x=G,I=q,C=H);M.payload+=B.g}else M.payload+=" ";M.payload&&i.nestedCues.push(M);y!==A&&(M=up(s,p),i.nestedCues.push(M));M=tp(s,p,T,x,I,C)}}return i.nestedCues.length?{cue:i,stream:r}:null}function tp(i,r,o,s,p,y){i=new yc(i,r,"");o&&i.textDecoration.push("underline");s&&(i.fontStyle="italic");i.color=p;i.backgroundColor=y;return i}function up(i,r){i=new yc(i,r,"");i.lineBreak=!0;return i}function vp(r,o,s,p,y){(this||i).g=r;(this||i).l=o;(this||i).i=s;(this||i).h=p;(this||i).j=y}function wp(r,o){(this||i).i=[];(this||i).g=1;(this||i).h=0;(this||i).C=r;(this||i).u=o;(this||i).j=(this||i).m=!1;(this||i).l="white";(this||i).s="black";xp(this||i)}function yp(i,r,o){var s="CC"+(1+(i.C<<1|i.u)),p=new yc(r,o,"");p.lineInterpretation=1;var y=Nc.get(i.g);y&&(p.line=y);return sp(p,s,i.i,r,o)}function xp(i){Ap(i,0,15);i.g=1}function Bp(i,r,o){if(!(32>o||127<o)){var s="";switch(r){case Ec:s=Dc.has(o)?Dc.get(o):String.fromCharCode(o);break;case Sc:s=Lc.get(o);break;case Ic:i.i[i.g].pop();s=Pc.get(o);break;case Cc:i.i[i.g].pop(),s=Rc.get(o)}s&&i.i[i.g].push(new vp(s,i.m,i.j,i.s,i.l))}}function Kp(i,r,o,s){if(!(0>o||0>r))if(r>=o)for(--s;0<=s;s--)i.i[r+s]=i.i[o+s].map((function(i){return i}));else for(var p=0;p<s;p++)i.i[r+p]=i.i[o+p].map((function(i){return i}))}function Ap(i,r,o){for(var s=0;s<=o;s++)i.i[r+s]=[]}var Ec=0,Sc=1,Ic=2,Cc=3,Dc=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Lc=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Pc=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Rc=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Nc=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Lp(r,o){(this||i).h=Uc;(this||i).s=new wp(r,o);(this||i).i=new wp(r,o);(this||i).g=(this||i).j=new wp(r,o);(this||i).l=0;(this||i).m=null}function Np(i,r,o){i.g=i.i;var s=i.g,p=null;i.h!==_c&&i.h!==Bc&&(p=yp(s,i.l,o),o=i.i,o.g=0<o.h?o.h:0,Ap(o,0,15),o=i.j,o.g=0<o.h?o.h:0,Ap(o,0,15),s.g=15);i.h=_c;s.h=r;return p}function Qp(i){i.h=Oc;i.g=i.j;i.g.h=0}function Sp(i){Sa("Cea608DataChannel","CEA-608 text mode entered, but is unsupported");i.g=i.s;i.h=Bc}var Uc=0,Oc=1,_c=3,Bc=4,Fc="black green blue cyan red yellow magenta black".split(" "),Gc="white green blue cyan red yellow magenta white_italics".split(" ");function Vp(r,o){(this||i).K=o;(this||i).N=r;(this||i).L=(this||i).l=!1;(this||i).m=(this||i).s=(this||i).I=(this||i).M=(this||i).J=0;(this||i).H=Zc;(this||i).i=[];(this||i).g=(this||i).h=(this||i).j=0;(this||i).G=(this||i).C=!1;(this||i).D="white";(this||i).u="black";Xp(this||i)}function Xp(i){i.i=[];for(var r=0;16>r;r++)i.i.push(Yp())}function Yp(){for(var i=[],r=0;42>r;r++)i.push(null);return i}function Zp(i,r){$p(i)&&(i.i[i.h][i.g]=new vp(r,i.G,i.C,i.u,i.D),i.g++)}function $p(i){var r=i.g<i.m&&0<=i.g;return i.h<i.s&&0<=i.h&&r}Vp.prototype.isVisible=function(){return(this||i).l};function aq(i,r,o){var s=new yc(i.j,r,"");s.textAlign=i.H===Hc?"left":i.H===Xc?"right":st;var p=s.region;i.K&&(p.id+="svc"+i.K);p.id+="win"+i.N;p.height=i.s;p.width=i.m;p.heightUnits=2;p.widthUnits=2;p.viewportAnchorX=i.J;p.viewportAnchorY=i.M;p.viewportAnchorUnits=i.L?ji:2;switch(i.I){case Qc:p.regionAnchorX=0;p.regionAnchorY=0;break;case Jc:p.regionAnchorX=50;p.regionAnchorY=0;break;case $c:p.regionAnchorX=100;p.regionAnchorY=0;break;case ed:p.regionAnchorX=0;p.regionAnchorY=50;break;case id:p.regionAnchorX=50;p.regionAnchorY=50;break;case ad:p.regionAnchorX=100;p.regionAnchorY=50;break;case vd:p.regionAnchorX=0;p.regionAnchorY=100;break;case bd:p.regionAnchorX=50;p.regionAnchorY=100;break;case Td:p.regionAnchorX=100,p.regionAnchorY=100}(o=sp(s,"svc"+o,i.i,i.j,r))&&(i.j=r);return o}var Hc=0,Xc=1,Zc=2,Qc=0,Jc=1,$c=2,ed=3,id=4,ad=5,vd=6,bd=7,Td=8;function mq(){(this||i).i=[];(this||i).h=null;(this||i).g=0}function nq(i,r){3===r.type?(i.g=2*(r.value&63)-1,i.h=[]):i.h&&(0<i.g&&(i.h.push(r),i.g--),0===i.g&&(i.i.push(new oq(i.h)),i.h=null,i.g=0))}function oq(r){(this||i).g=0;(this||i).h=r}oq.prototype.xa=function(){return(this||i).g<(this||i).h.length};oq.prototype.Ga=function(){return(this||i).g};function pq(i){if(!i.xa())throw new P(2,2,3e3);return i.h[i.g++]}oq.prototype.skip=function(r){if((this||i).g+r>(this||i).h.length)throw new P(2,2,3e3);(this||i).g+=r};function qq(r){(this||i).i=r;(this||i).h=[null,null,null,null,null,null,null,null];(this||i).g=null}function rq(i,r,o,s){if(128<=o&&135>=o)s=o&7,i.h[s]&&(i.g=i.h[s]);else{if(136===o){o=pq(r).value;r=null;o=t(sq(i,o));for(var p=o.next();!p.done;p=o.next())p=i.h[p.value],p.isVisible()&&(r=aq(p,s,i.i)),Xp(p);return r}if(137===o)for(r=pq(r).value,r=t(sq(i,r)),o=r.next();!o.done;o=r.next())o=i.h[o.value],o.isVisible()||(o.j=s),o.l=!0;else{if(138===o){o=pq(r).value;r=null;o=t(sq(i,o));for(p=o.next();!p.done;p=o.next())p=i.h[p.value],p.isVisible()&&(r=aq(p,s,i.i)),p.l=!1;return r}if(139===o){o=pq(r).value;r=null;o=t(sq(i,o));for(p=o.next();!p.done;p=o.next())p=i.h[p.value],p.isVisible()?r=aq(p,s,i.i):p.j=s,p.l=!p.l;return r}if(140===o)return r=pq(r).value,tq(i,r,s);if(143===o)return s=tq(i,255,s),uq(i),s;if(144===o)r.skip(1),s=pq(r).value,i.g&&(i.g.C=0<(s&128),i.g.G=0<(s&64));else if(145===o)s=pq(r).value,o=pq(r).value,r.skip(1),i.g&&(r=vq((o&48)>>4,(o&12)>>2,o&3),i.g.D=vq((s&48)>>4,(s&12)>>2,s&3),i.g.u=r);else if(146===o)s=pq(r).value,r=pq(r).value,i.g&&(i=i.g,i.h=s&15,i.g=r&63);else if(151===o)r.skip(1),r.skip(1),s=pq(r).value,r.skip(1),i.g&&(i.g.H=s&3);else if(152<=o&&159>=o){o=(o&15)-8;p=null!==i.h[o];if(!p){var y=new Vp(o,i.i);y.j=s;i.h[o]=y}s=pq(r).value;y=pq(r).value;var A=pq(r).value,T=pq(r).value,x=pq(r).value;r=pq(r).value;p&&0===(r&7)||(r=i.h[o],r.h=0,r.g=0,r.G=!1,r.C=!1,r.D="white",r.u="black");r=i.h[o];r.l=0<(s&32);r.M=y&127;r.J=A;r.I=(T&240)>>4;r.L=0<(y&128);r.s=1+(T&15);r.m=1+(x&63);i.g=i.h[o]}}}return null}function sq(i,r){for(var o=[],s=0;8>s;s++)1===(r&1)&&i.h[s]&&o.push(s),r>>=1;return o}function tq(i,r,o){var s=null;r=t(sq(i,r));for(var p=r.next();!p.done;p=r.next()){p=p.value;var y=i.h[p];y.isVisible()&&(s=aq(y,o,i.i));i.h[p]=null}return s}function uq(i){i.g=null;i.h=[null,null,null,null,null,null,null,null]}function vq(i,r,o){var s={0:0,1:0,2:1,3:1};i=s[i];r=s[r];o=s[o];return Ud[i<<2|r<<1|o]}var Sd=new Map([[32," "],[33," "],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Ud="black blue green cyan red magenta yellow white".split(" ");function yq(){(this||i).h=[];(this||i).g=[];(this||i).i=new mq;(this||i).l=0;(this||i).m=new Map([["CC1",new Lp(0,0)],["CC2",new Lp(0,1)],["CC3",new Lp(1,0)],["CC4",new Lp(1,1)]]);(this||i).u=(this||i).s=0;(this||i).j=new Map;(this||i).D=!0;(this||i).C=new Set;zq(this||i)}yq.prototype.clear=function(){(this||i).l=0;(this||i).h=[];(this||i).g=[];var r=(this||i).i;r.i=[];r.h=[];r.g=0;zq(this||i);r=t((this||i).j.values());for(var o=r.next();!o.done;o=r.next())uq(o.value)};function zq(i){i.s=0;i.u=0;for(var r=t(i.m.values()),o=r.next();!o.done;o=r.next())o=o.value,o.h=Uc,o.g=o.j,o.m=null,xp(o.i),xp(o.j),xp(o.s);i.D=!0}yq.prototype.extract=function(r,o){if((this||i).D){for(var s=t((this||i).m.values()),p=s.next();!p.done;p=s.next())p.value.l=o;(this||i).D=!1}r=new Zf(r,0);if(!(8>r.getLength())&&181===r.ra()&&49===r.Ua()&&1195456820===r.O()&&3===r.ra()&&(s=r.ra(),0!==(s&64)))for(s&=31,r.skip(1),p=0;p<s;p++){var y=r.ra(),A=(y&4)>>2,T=r.ra(),x=r.ra();A&&(y&=3,0===y||1===y?(this||i).h.push({pts:o,type:y,jb:T,Jb:x,order:(this||i).h.length}):((this||i).g.push({pts:o,type:y,value:T,order:(this||i).g.length}),(this||i).g.push({pts:o,type:2,value:x,order:(this||i).g.length})))}};yq.prototype.decode=function(){function a(i,r){return i.pts-r.pts||i.order-r.order}var r=[];(this||i).h.sort(a);(this||i).g.sort(a);for(var o=t((this||i).h),s=o.next();!s.done;s=o.next())(s=Aq(this||i,s.value))&&r.push(s);o=t((this||i).g);for(s=o.next();!s.done;s=o.next())nq((this||i).i,s.value);o=t((this||i).i.i);for(s=o.next();!s.done;s=o.next())s=Bq(this||i,s.value),r.push.apply(r,w(s));(this||i).i.i=[];(this||i).h=[];(this||i).g=[];return r};function Aq(i,r){var o=r.type;if(16===(r.jb&112)){var s=r.jb>>3&1;0===o?i.s=s:i.u=s}s="CC"+(1+(o<<1|(o?i.u:i.s)));o=i.m.get(s);if(255===r.jb&&255===r.Jb||!r.jb&&!r.Jb||!Cq(r.jb)||!Cq(r.Jb))return 45<=++i.l&&zq(i),null;i.l=0;r.jb&=127;r.Jb&=127;if(!r.jb&&!r.Jb)return null;i.C.add(s);i=null;if(16===(r.jb&112))e:{s=r.jb;i=r.Jb;if(o.m===(s<<8|i))o.m=null;else if(o.m=s<<8|i,16===(s&240)&&64===(i&192)){r=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(s&7)<<1|i>>5&1];var p=(i&30)>>1;s="white";var y=!1;7>p?s=Gc[p]:7===p&&(y=!0);i=1===(i&1);o.h!==Bc&&(p=o.g,o.h===_c&&r!==p.g&&(o=1+r-p.h,Kp(p,o,1+p.g-p.h,p.h),Ap(p,0,o-1),Ap(p,r+1,15-r)),p.g=r,p.m=i,p.j=y,p.l=s,p.s="black")}else if(17===(s&247)&&32===(i&240))o.g.m=!1,o.g.j=!1,o.g.l="white",Bp(o.g,Ec,32),s=!1,r=Gc[(i&14)>>1],"white_italics"===r&&(r="white",s=!0),o.g.m=1===(i&1),o.g.j=s,o.g.l=r;else if(16===(s&247)&&32===(i&240)||23===(s&247)&&45===(i&255))r="black",0===(s&7)&&(r=Fc[(i&14)>>1]),o.g.s=r;else if(17===(s&247)&&48===(i&240))Bp(o.g,Sc,i);else if(18===(s&246)&&32===(i&224))Bp(o.g,s&1?Cc:Ic,i);else if(20===(s&246)&&32===(i&240)){i=r.pts;s=null;switch(r.Jb){case 32:Qp(o);break;case 33:o=o.g;o.i[o.g].pop();break;case 37:s=Np(o,2,i);break;case 38:s=Np(o,3,i);break;case 39:s=Np(o,4,i);break;case 40:Bp(o.g,Ec,32);break;case 41:o.h=2;o.g=o.i;o.g.h=0;o.l=i;break;case 42:xp(o.s);Sp(o);break;case 43:Sp(o);break;case 44:r=o.i;s=null;o.h!==Bc&&(s=yp(r,o.l,i));Ap(r,0,15);break;case 45:r=o.g;o.h!==_c?s=null:(s=yp(r,o.l,i),y=r.g-r.h+1,Kp(r,y-1,y,r.h),Ap(r,0,y-1),Ap(r,r.g,15-r.g),o.l=i);break;case 46:Ap(o.j,0,15);break;case 47:r=null,o.h!==Bc&&(r=yp(o.i,o.l,i)),s=o.j,o.j=o.i,o.i=s,Qp(o),o.l=i,s=r}i=s;break e}i=null}else s=r.Jb,Bp(o.g,Ec,r.jb),Bp(o.g,Ec,s);return i}function Bq(i,r){var o=[];try{for(;r.xa();){var s=pq(r).value,p=(s&224)>>5,y=s&31;7===p&&0!=y&&(p=pq(r).value&63);if(0!=p){i.C.add("svc"+p);i.j.has(p)||i.j.set(p,new qq(p));for(var A=i.j.get(p),T=r.Ga();r.Ga()-T<y;){p=r;var x=pq(p),I=x.value,C=x.pts;if(16===I){var M=pq(p);I=I<<16|M.value}if(0<=I&&31>=I){var N=C;if(A.g){var _=A.g;p=null;switch(I){case 8:!$p(_)||0>=_.g&&0>=_.h||(0>=_.g?(_.g=_.m-1,_.h--):_.g--,_.i[_.h][_.g]=null);break;case 13:_.isVisible()&&(p=aq(_,N,A.i));if(_.h+1>=_.s){N=_;for(var j=0,B=1;16>B;B++,j++)N.i[j]=N.i[B];for(B=0;1>B;B++,j++)N.i[j]=Yp()}else _.h++;_.g=0;break;case 14:_.isVisible()&&(p=aq(_,N,A.i));_.i[_.h]=Yp();_.g=0;break;case 12:_.isVisible()&&(p=aq(_,N,A.i)),Xp(_),N=_,N.h=0,N.g=0}var z=p}else z=null}else if(128<=I&&159>=I)z=rq(A,p,I,C);else{if(4096<=I&&4127>=I)N=I&255,8<=N&&15>=N?p.skip(1):16<=N&&23>=N?p.skip(2):24<=N&&31>=N&&p.skip(3);else if(4224<=I&&4255>=I)N=I&255,128<=N&&135>=N?p.skip(4):136<=N&&143>=N&&p.skip(5);else if(32<=I&&127>=I)p=I,A.g&&Zp(A.g,127===p?"":String.fromCharCode(p));else if(160<=I&&255>=I)A.g&&Zp(A.g,String.fromCharCode(I));else if(4128<=I&&4223>=I){if(p=I&255,A.g)if(Sd.has(p)){var G=Sd.get(p);Zp(A.g,G)}else Zp(A.g,"_")}else 4256<=I&&4351>=I&&A.g&&Zp(A.g,160!=(I&255)?"_":"[CC]");z=null}(p=z)&&o.push(p)}}}}catch(i){if(!(i instanceof P&&3e3===i.code))throw i;Sa("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return o}function Cq(i){for(var r=0;i;)r^=i&1,i>>=1;return 1===r}yq.prototype.getStreams=function(){return Array.from((this||i).C)};L("shaka.cea.CeaDecoder",yq);Ze=function(){return new yq};function Dq(i){for(var r=[],o=i,s=i=0;s<o.length;)2==i&&3==o[s]?(i=0,o=[].concat(w(o)),o.splice(s,1),o=new Uint8Array(o)):0==o[s]?i++:i=0,s++;i=o;for(s=0;s<i.length;){for(o=0;255==i[s];)o+=255,s++;o+=i[s++];for(var p=0;255==i[s];)p+=255,s++;p+=i[s++];4==o&&r.push(i.subarray(s,s+p));s+=p}return r}function Eq(){(this||i).j=new Map;(this||i).i=(this||i).h=0;(this||i).g=_d}Eq.prototype.init=function(r){function b(i){i=i.name;i in qd&&(o.g=qd[i])}var o=this||i,s=[],p=[];(new bg).box("moov",gg).box("mvex",gg).T("trex",(function(i){var r=i.reader;r.skip(4);r.skip(4);i=r.O();r=r.O();o.h=i;o.i=r})).box("trak",gg).T("tkhd",(function(i){i=hi(i.reader,i.version);s.push(i.trackId)})).box("mdia",gg).T("mdhd",(function(i){i=fi(i.reader,i.version);p.push(i.timescale)})).box("minf",gg).box("stbl",gg).T("stsd",ig).box("avc1",b).box("avc3",b).box("hev1",b).box("hvc1",b).box("dvh1",b).box("dvhe",b).box("encv",jg).box("sinf",gg).box("frma",(function(i){i=li(i.reader).wa;i in qd&&(o.g=qd[i])})).parse(r,!0);if(!s.length||!p.length||s.length!=p.length)throw new P(2,2,2010);(this||i).g==_d&&Ra("Unable to determine bitstream format for CEA parsing!");s.forEach((function(i,r){o.j.set(i,p[r])}))};Eq.prototype.parse=function(r){var o=this||i;if((this||i).g==_d)return[];var s=[],p=(this||i).h,y=(this||i).i,A=0,T=[],x=null,I=9e4;(new bg).box("moof",(function(i){A=i.start;T=[];gg(i)})).box("traf",gg).T("trun",(function(i){i=gi(i.reader,i.version,i.flags);T.push(i)})).T("tfhd",(function(i){i=di(i.reader,i.flags);p=i.Og||o.h;y=i.Qh||o.i;i=i.trackId;o.j.has(i)&&(I=o.j.get(i))})).T("tfdt",(function(i){x=ei(i.reader,i.version).baseMediaDecodeTime})).box("mdat",(function(i){if(null===x)throw Ra("Unable to find base media decode time for CEA captions!"),new P(2,2,2010);Hq(o,i.reader,x,I,p,y,A-i.start-8,T,s)})).parse(r,!1);return s};function Hq(i,r,o,s,p,y,A,T,x){var I=0,C=y,M=T.map((function(i){return i.lh}));M=[].concat.apply([],w(M));M.length&&(C=M[0].sampleSize||y);for(r.skip(A+T[0].Ph);r.xa();){A=r.O();var N=r.ra(),_=null;_=!1;T=1;switch(i.g){case jd:_=N&31;_=6==_;break;case Vd:T=2;r.skip(1);_=N>>1&63;_=39==_||40==_;break;default:return}if(_)for(N=0,I<M.length&&(N=M[I].Ke||0),N=(o+N)/s,T=t(Dq(r.Sb(A-T))),_=T.next();!_.done;_=T.next())x.push({packet:_.value,pts:N});else try{r.skip(A-T)}catch(i){break}C-=A+4;0==C&&(o=I<M.length?o+(M[I].gg||p):o+p,I++,C=I<M.length&&M[I].sampleSize||y)}}L("shaka.cea.Mp4CeaParser",Eq);var _d=0,jd=1,Vd=2,qd={avc1:jd,avc3:jd,hev1:Vd,hvc1:Vd,dvh1:Vd,dvhe:Vd};qe["video/mp4"]=function(){return new Eq};function Kq(){}Kq.prototype.init=function(){};Kq.prototype.parse=function(i){var r=[];i=lc(i);if(!Ci(i))return r;i=(new wi).parse(i);var o=i.sd(),s=i.le();i=[];switch(o.video){case"avc":i.push(6);break;case"hvc":i.push(39),i.push(40)}if(!i.length)return r;o=t(s);for(s=o.next();!s.done;s=o.next())if(s=s.value,i.includes(s.type)&&null!=s.time)for(var p=t(Dq(s.data)),y=p.next();!y.done;y=p.next())r.push({packet:y.value,pts:s.time});return r};L("shaka.cea.TsCeaParser",Kq);qe["video/mp2t"]=function(){return new Kq};function Lq(i,r,o){var s=Mq(i),p=null;i=[];var y=[],A=null,T=new Set(s.map((function(i){return i.keyId})));T.delete(null);if(1<T.size)throw new P(2,4,4010);if(!r){y=s.filter((function(i){return"urn:mpeg:dash:sea:2012"==i.Jd}));if(1<y.length)throw new P(2,4,4050);y.length&&(A=Nq(y[0]));y=s.filter((function(i){return"urn:mpeg:dash:mp4protection:2011"==i.Jd?(p=i.init||p,!1):"urn:mpeg:dash:sea:2012"!=i.Jd}));y.length&&(i=Oq(p,y,o,T),0==i.length&&(i=[Ab("",p)]))}if(s.length&&!A&&(r||!y.length))for(i=[],r=t(Object.values(o)),o=r.next();!o.done;o=r.next())o=o.value,"org.w3.clearkey"!=o&&i.push(Ab(o,p));if(T=Array.from(T)[0]||null)for(r=t(i),o=r.next();!o.done;o=r.next())for(o=t(o.value.initData),s=o.next();!s.done;s=o.next())s.value.keyId=T;return{Ng:T,xk:p,drmInfos:i,gf:A,Rg:!0}}function Pq(i,r,o,s){var p=Lq(i,o,s);if(r.Rg){i=1==r.drmInfos.length&&!r.drmInfos[0].keySystem;o=0==p.drmInfos.length;(0==r.drmInfos.length||i&&!o)&&(r.drmInfos=p.drmInfos);r.Rg=!1}else if(0<p.drmInfos.length&&(r.drmInfos=r.drmInfos.filter((function(i){return p.drmInfos.some((function(r){return r.keySystem==i.keySystem}))})),0==r.drmInfos.length))throw new P(2,4,4008);return p.Ng||r.Ng}function Qq(i){var r=0,o=pc(i),s=o.getUint32(r,!0);if(s!=i.byteLength)return[];e:{i=r+6;for(r=[];i<o.byteLength-1;){s=o.getUint16(i,!0);i+=2;var p=o.getUint16(i,!0);i+=2;if(0!=(p&1)||p+i>o.byteLength){o=[];break e}var y=lc(o,i,p);r.push({type:s,value:y});i+=p}o=r}return o}function Rq(i){i=t(i.getElementsByTagName("DATA"));for(var r=i.next();!r.done;r=i.next()){r=t(r.value.childNodes);for(var o=r.next();!o.done;o=r.next())if(o=o.value,o instanceof Element&&"LA_URL"==o.tagName)return o.textContent}return""}function Sq(i){var r=yg(i.node,"https://dashif.org/CPS","Laurl");if(r&&r.textContent)return r.textContent;i=yg(i.node,"urn:microsoft:playready","pro");if(!i)return"";i=qg(i.textContent);i=Qq(i).filter((function(i){return i.type===Wd}))[0];if(!i)return"";i=Uf(i.value,!0);return(i=Pg(i,"WRMHEADER"))?Rq(i):""}function Oq(i,r,o,s){var p=[];r=t(r);for(var y=r.next();!y.done;y=r.next()){y=y.value;var A=o[y.Jd];if(A){var T;if(T=yg(y.node,"urn:microsoft:playready","pro")){T=qg(T.textContent);var x=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);T=[{initData:vg(T,x,new Set,0),initDataType:"cenc",keyId:y.keyId}]}else T=null;x=null;if("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===y.Jd)if(x=s,0==x.size)x=null;else{var I=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),C=new Uint8Array([]);x=[{initData:vg(C,I,x,1),initDataType:"cenc",keyId:y.keyId}]}T=Ab(A,y.init||i||T||x);(A=Xd.get(A))&&(T.licenseServerUri=A(y));p.push(T)}}return p}function Mq(i){var r=[];i=t(i);for(var o=i.next();!o.done;o=i.next())(o=Vq(o.value))&&r.push(o);return r}function Vq(i){var r=i.getAttribute("schemeIdUri"),o=Bg(i,"urn:mpeg:cenc:2013","default_KID"),s=zg(i,"urn:mpeg:cenc:2013","pssh").map(Dg);if(!r)return null;r=r.toLowerCase();if(o&&(o=o.replace(/-/g,"").toLowerCase(),o.includes(" ")))throw new P(2,4,4009);var p=[];try{p=s.map((function(i){return{initDataType:"cenc",initData:qg(i),keyId:null}}))}catch(i){throw new P(2,4,4007)}return{node:i,Jd:r,keyId:o,init:0<p.length?p:null}}function Nq(i){if(!r.crypto||!r.crypto.subtle)throw Ra("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new P(2,4,4042);var o=yg(i.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!o)throw new P(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=o.getAttribute("schemeIdUri"))throw new P(2,4,4051);o=yg(i.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod");if(!o)throw new P(2,4,4051);i=o.getAttribute("IV");o=o.getAttribute("keyUriTemplate");if(!i||!o)throw new P(2,4,4051);i=rg(i.substr(2));if(16!=i.byteLength)throw new P(2,4,4048);return{Qi:o,iv:i}}var Wd=1,Xd=(new Map).set("com.widevine.alpha",(function(i){var r=yg(i.node,"https://dashif.org/CPS","Laurl");return r&&r.textContent?r.textContent:(i=yg(i.node,"urn:microsoft","laurl"))&&i.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",Sq).set("com.microsoft.playready.recommendation",Sq).set("com.microsoft.playready.software",Sq).set("com.microsoft.playready.hardware",Sq).set("org.w3.clearkey",(function(i){var r=yg(i.node,"https://dashif.org/CPS","Laurl");return r&&r.textContent?r.textContent:(i=yg(i.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===i.getAttribute("Lic_type")&&i.textContent?i.textContent:""}));function Wq(i,o,s,p,y,A){var T={RepresentationID:o,Number:s,SubNumber:p,Bandwidth:y,Time:A};return i.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(i,o,s,p){if("$$"==i)return"$";var y=T[o];if(null==y)return i;"RepresentationID"==o&&s&&(s=void 0);"Time"==o&&"bigint"!=typeof y&&(.2<=Math.abs(y-Math.round(y))&&Ra("Calculated $Time$ values must be close to integers"),y=Math.round(y));switch(p){case void 0:case"d":case"i":case"u":i=y.toString();break;case"o":i=y.toString(8);break;case"x":i=y.toString(16);break;case"X":i=y.toString(16).toUpperCase();break;default:i=y.toString()}s=r.parseInt(s,10)||1;return Array(Math.max(0,s-i.length)+1).join("0")+i}))}function Xq(i,r){var o=Yq(i,r,"timescale"),s=1;o&&(s=Kg(o)||1);var p=Yq(i,r,"duration");o=Kg(p||"");"image"==i.P.contentType&&(o=Mg(p||""));o&&(o/=s);var y=Yq(i,r,"startNumber");p=Number(Yq(i,r,"presentationTimeOffset"))||0;var A=Lg(y||"");null!=y&&null!=A||(A=1);var T=Zq(i,r,"SegmentTimeline");r=null;if(T){r=s;i=i.ma.duration||Infinity;y=A;T=xg(T,"S");for(var x=[],I=-p,C=0;C<T.length;++C){var M=T[C],N=T[C+1],_=Fg(M,"t",Lg),j=Fg(M,"d",Lg),B=Fg(M,"r",Jg);M=Fg(M,"k",Jg)||0;null!=_&&(_-=p);if(!j)break;_=null!=_?_:I;B=B||0;if(0>B)if(N){N=Fg(N,"t",Lg);if(null==N)break;if(_>=N)break;B=Math.ceil((N-_)/j)-1}else{if(Infinity==i)break;if(_/r>=i)break;B=Math.ceil((i*r-_)/j)-1}0<x.length&&_!=I&&(x[x.length-1].end=_/r);for(N=0;N<=B;++N)I=_+j,x.push({start:_/r,end:I/r,zg:_,Bb:M,nj:x.length+y}),_=I}r=x}return{timescale:s,Pa:o,Nd:A,Tb:p/s||0,yg:p,timeline:r}}function $q(i,r){return[r(i.P),r(i.Ea),r(i.Ka)].filter(zd)}function Yq(i,r,o){r=$q(i,r);i=null;r=t(r);for(var s=r.next();!s.done&&!(i=s.value.getAttribute(o));s=r.next());return i}function Zq(i,r,o){r=$q(i,r);i=null;r=t(r);for(var s=r.next();!s.done&&!(i=wg(s.value,o));s=r.next());return i}function ar(i,r,o,s,p,y){for(var A=Bg(i,"http://www.w3.org/1999/xlink","href"),T=Bg(i,"http://www.w3.org/1999/xlink","actuate")||"onRequest",x=t(Array.from(i.attributes)),I=x.next();!I.done;I=x.next())I=I.value,"http://www.w3.org/1999/xlink"==I.namespaceURI&&i.removeAttributeNS(I.namespaceURI,I.localName);if(5<=y)return of(new P(2,4,4028));if("onLoad"!=T)return of(new P(2,4,4027));var C=zb([s],[A]);return p.request(0,Af(C,r)).Fa((function(s){s=Rg(s.data,i.tagName);if(!s)return of(new P(2,4,4001,A));for(;i.childNodes.length;)i.removeChild(i.childNodes[0]);for(;s.childNodes.length;){var T=s.childNodes[0];s.removeChild(T);i.appendChild(T)}s=t(Array.from(s.attributes));for(T=s.next();!T.done;T=s.next())i.setAttributeNode(T.value.cloneNode(!1));return br(i,r,o,C[0],p,y+1)}))}function br(i,r,o,s,p,y){y=void 0===y?0:y;if(Bg(i,"http://www.w3.org/1999/xlink","href")){var A=ar(i,r,o,s,p,y);o&&(A=A.Fa(void 0,(function(){return br(i,r,o,s,p,y)})));return A}A=[];for(var T=t(Array.from(i.childNodes)),x=T.next();!x.done;x=T.next())x=x.value,x instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Bg(x,"http://www.w3.org/1999/xlink","href")?i.removeChild(x):"SegmentTimeline"!=x.tagName&&A.push(br(x,r,o,s,p,y)));return sf(A).Fa((function(){return i}))}function cr(i,r,o,s,p,y,A){var T,x=(new bg).T("sidx",(function(i){T=dr(r,s,p,y,A,o,i)}));i&&x.parse(i);if(T)return T;throw new P(2,3,3004)}function dr(i,r,o,s,p,y,A){var T=[];A.reader.skip(4);var x=A.reader.O();if(0==x)throw new P(2,3,3005);if(0==A.version){var I=A.reader.O();var C=A.reader.O()}else I=A.reader.Uc(),C=A.reader.Uc();A.reader.skip(2);var M=A.reader.Ua();i=i+A.size+C;for(C=0;C<M;C++){var N=A.reader.O(),_=(N&2147483648)>>>31;N&=2147483647;var j=A.reader.O();A.reader.skip(4);if(1==_)throw new P(2,3,3006);T.push(new Ph(I/x+o,(I+j)/x+o,(function(){return y}),i,i+N-1,r,o,s,p));I+=j;i+=N}A.parser.stop();return T}function er(r){(this||i).h=pc(r);(this||i).g=new Zf((this||i).h,0)}er.prototype.xa=function(){return(this||i).g.xa()};function fr(i){var r=gr(i);if(7<r.length)throw new P(2,3,3002);var o=0;r=t(r);for(var s=r.next();!s.done;s=r.next())o=256*o+s.value;r=gr(i);e:{s=t(xh);for(var p=s.next();!p.done;p=s.next())if(jc(r,new Uint8Array(p.value))){s=!0;break e}s=!1}if(s)r=i.h.byteLength-i.g.Ga();else{if(8==r.length&&r[1]&224)throw new P(2,3,3001);for(p=s=0;p<r.length;p++){var y=r[p];s=0==p?y&(1<<8-r.length)-1:256*s+y}r=s}r=i.g.Ga()+r<=i.h.byteLength?r:i.h.byteLength-i.g.Ga();s=pc(i.h,i.g.Ga(),r);i.g.skip(r);return new ir(o,s)}function gr(i){var r=i.g.Ga(),o=i.g.ra();if(0==o)throw new P(2,3,3002);o=8-Math.floor(Math.log2(o));i.g.skip(o-1);return lc(i.h,r,o)}var xh=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function ir(r,o){(this||i).id=r;(this||i).g=o}function jr(i){if(8<i.g.byteLength)throw new P(2,3,3002);if(8==i.g.byteLength&&i.g.getUint8(0)&224)throw new P(2,3,3001);for(var r=0,o=0;o<i.g.byteLength;o++){var s=i.g.getUint8(o);r=256*r+s}return r}function kr(i,r,o,s,p,y,A,T,x){function l(){return p}var I=[];i=new er(i.g);for(var C=null,M=null;i.xa();){var N=fr(i);if(187==N.id){var _=lr(N);_&&(N=o*_.wj,_=r+_.cj,null!=C&&I.push(new Ph(C+A,N+A,l,M,_-1,y,A,T,x)),C=N,M=_)}}null!=C&&I.push(new Ph(C+A,s+A,l,M,null,y,A,T,x));return I}function lr(i){var r=new er(i.g);i=fr(r);if(179!=i.id)throw new P(2,3,3013);i=jr(i);r=fr(r);if(183!=r.id)throw new P(2,3,3012);r=new er(r.g);for(var o=0;r.xa();){var s=fr(r);if(241==s.id){o=jr(s);break}}return{wj:i,cj:o}}function mr(i,r,o){r=Zq(i,r,"Initialization");if(!r)return null;var s=i.P.zb(),p=r.getAttribute("sourceURL");p&&(s=zb(s,[p]));p=0;var y=null;(r=Fg(r,"range",Ig))&&(p=r.start,y=r.end);return new Nh((function(){return s}),p,y,nr(i),null,null,o)}function or(i,r,o){var s=Number(Yq(i,pr,"presentationTimeOffset"))||0,p=Yq(i,pr,"timescale"),y=1;p&&(y=Kg(p)||1);var A=s/y||0,T=mr(i,pr,o);qr(i,T);var x=Bd(i);return{Kc:function(){var i=Zq(x,pr,"RepresentationIndex");var o=x.P.zb();i&&(i=i.getAttribute("sourceURL"))&&(o=zb(o,[i]));i=rr(x);return sr(x,r,T,o,i.start,i.end,A)}}}function sr(i,r,o,s,p,y,A){var T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q;return K((function(J){if(1==J.g)return T=i.presentationTimeline,x=!i.Yb||!i.ma.Mf,I=i.ma.start,C=i.ma.duration,M=i.P.mimeType.split("/")[1],N=r,_=null,j=[N(s,p,y,!1),"webm"==M?N(o.ba(),o.hb,o.Na,!0):null],N=null,D(J,Promise.all(j),2);B=J.h;z=B[0];G=B[1]||null;q=null;H=I-A;Y=I;Q=C?I+C:Infinity;if("mp4"==M)var $=cr(z,p,s,o,H,Y,Q);else{$=new er(G);if(440786851!=fr($).id)throw new P(2,3,3008);var ne=fr($);if(408125543!=ne.id)throw new P(2,3,3009);$=ne.g.byteOffset;ne=new er(ne.g);for(var re=null;ne.xa();){var xe=fr(ne);if(357149030==xe.id){re=xe;break}}if(!re)throw new P(2,3,3010);re=new er(re.g);xe=1e6;for(ne=null;re.xa();){var Ne=fr(re);if(2807729==Ne.id)xe=jr(Ne);else if(17545==Ne.id)if(4==Ne.g.byteLength)ne=Ne.g.getFloat32(0);else{if(8!=Ne.g.byteLength)throw new P(2,3,3003);ne=Ne.g.getFloat64(0)}}if(null==ne)throw new P(2,3,3011);re=xe/1e9;ne*=re;xe=fr(new er(z));if(475249515!=xe.id)throw new P(2,3,3007);$=kr(xe,$,re,ne,s,o,H,Y,Q)}q=$;T.Dd(q);_=new Oj(q);x&&_.Ic(Y,Q,!0);return J.return(_)}))}function pr(i){return i.Ld}function rr(i){var r=Zq(i,pr,"RepresentationIndex");i=Yq(i,pr,"indexRange");i=Ig(i||"");r&&(i=Fg(r,"range",Ig,i));return i}function qr(i,r){tr(i,r);if(!rr(i))throw new P(2,4,4002)}function tr(i,r){var o=i.P.mimeType.split("/")[1];if(i.P.contentType!=ne&&"mp4"!=o&&"webm"!=o)throw new P(2,4,4006);if("webm"==o&&!r)throw new P(2,4,4005)}function nr(i){var r=i.P;return{bandwidth:i.bandwidth,audioSamplingRate:r.audioSamplingRate,codecs:r.codecs,contentType:r.contentType,frameRate:r.frameRate||null,height:r.height||null,mimeType:r.mimeType,channelsCount:r.De,pixelAspectRatio:r.pixelAspectRatio||null,width:r.width||null}}function ur(i,r,o){var s=mr(i,vr,o),p=wr(i);if(!p.Pa&&!p.timeline&&1<p.Rc.length)throw new P(2,4,4002);if(!p.Pa&&!i.ma.duration&&!p.timeline&&1==p.Rc.length)throw new P(2,4,4002);if(p.timeline&&0==p.timeline.length)throw new P(2,4,4002);var y=null,A=null;i.Ka.id&&i.P.id&&(A=r[i.Ka.id+","+i.P.id])&&(y=A.segmentIndex);var T=xr(i.ma.start,i.ma.duration,i.P.zb,p,s,o);r=!y;y?y.Cd(T,i.presentationTimeline.Ab()):y=new Oj(T);i.presentationTimeline.Dd(T);i.Yb&&i.ma.Mf||y.Ic(i.ma.start,i.ma.duration?i.ma.start+i.ma.duration:Infinity,r);A&&(A.segmentIndex=y);return{Kc:function(){y&&0!=y.$b()||y.ze(T);return Promise.resolve(y)}}}function vr(i){return i.fc}function wr(i){var r=yr(i);i=Xq(i,vr);var o=i.Nd;0==o&&(o=1);var s=0;i.Pa?s=i.Pa*(o-1):i.timeline&&0<i.timeline.length&&(s=i.timeline[0].start);return{Pa:i.Pa,startTime:s,Nd:o,Tb:i.Tb,timeline:i.timeline,Rc:r}}function xr(i,r,o,s,p,y){var A=s.Rc.length;s.timeline&&s.timeline.length!=s.Rc.length&&(A=Math.min(s.timeline.length,s.Rc.length));for(var T=i-s.Tb,x=r?i+r:Infinity,I=[],C=s.startTime,M={},N=0;N<A;M={kd:M.kd,fd:M.fd},N++){M.fd=s.Rc[N];var _=void 0;_=null!=s.Pa?C+s.Pa:s.timeline?s.timeline[N].end:C+r;M.kd=null;I.push(new Ph(i+C,i+_,function(i){return function(){null==i.kd&&(i.kd=zb(o(),[i.fd.Vi]));return i.kd}}(M),M.fd.start,M.fd.end,p,T,i,x,[],"",null,null,vo,y));C=_}return I}function yr(i){return[i.P.fc,i.Ea.fc,i.Ka.fc].filter(zd).map((function(i){return xg(i,"SegmentURL")})).reduce((function(i,r){return 0<i.length?i:r})).map((function(r){r.getAttribute("indexRange")&&!i.Zg&&(i.Zg=!0);var o=r.getAttribute("media");r=Fg(r,"mediaRange",Ig,{start:0,end:null});return{Vi:o,start:r.start,end:r.end}}))}function zr(i,r,o,s,p,y,A){var T=Ar(i,A),x=Br(i);Cr(x);var I=Bd(i);if(x.xd)return tr(i,T),{Kc:function(){var i=Wq(x.xd,I.P.id,null,null,I.bandwidth||null,null);i=zb(I.P.zb(),[i]);return sr(I,r,T,i,0,null,x.Tb)}};if(x.Pa)return s||"image"===i.Ea.contentType||(i.presentationTimeline.Wf(x.Pa),i.presentationTimeline.Ce(i.ma.start)),{Kc:function(){return Dr(I,x,p,T,y,A)}};var C=null;s=s=null;i.Ka.id&&i.P.id&&(s=i.Ka.id+","+i.P.id,s=o[s])&&(C=s.segmentIndex);var M=i.ma.start,N=i.ma.duration?M+i.ma.duration:Infinity,_=!(i.Yb&&i.ma.Mf);C?(o=C,Er(o,x,M,N,_,T),o.yb(i.presentationTimeline.Ab())):C=new Fr(x,i.P.id,i.bandwidth,i.P.zb,M,N,T,_,A,i.P.hg);x.timeline&&"image"!==i.Ea.contentType&&i.presentationTimeline.hh(x.timeline,M);s&&i.Yb&&(s.segmentIndex=C);return{Kc:function(){C instanceof Fr&&0==C.$b()&&Er(C,x,M,N,_,T);return Promise.resolve(C)}}}function Gr(i){return i.Md}function Br(i){var r=Xq(i,Gr),o=Yq(i,Gr,"media");i=Yq(i,Gr,"index");return{Pa:r.Pa,timescale:r.timescale,Nd:r.Nd,Tb:r.Tb,yg:r.yg,timeline:r.timeline,Sc:o,xd:i}}function Cr(i){var r=i.xd?1:0;r+=i.timeline?1:0;r+=i.Pa?1:0;if(0==r)throw new P(2,4,4002);1!=r&&(i.xd&&(i.timeline=null),i.Pa=null);if(!i.xd&&!i.Sc)throw new P(2,4,4002)}function Dr(i,o,s,p,y,A){function g(i){var s=(i-N)*M,y=s+o.Tb,T=s+x;s=T+M;var I=Math.min(s,k());T=new Ph(T,I,(function(){var o=y*_;"BigInt"in r&&o>Number.MAX_SAFE_INTEGER&&(o=BigInt(y)*BigInt(_));o=Wq(j,z,i,null,B,o);return zb(G(),[o])}),0,null,p,q,x,k(),[],"",null,null,vo,A);T.h=s;return T}function h(){var i=[Math.max(T.Ab(),x),Math.min(T.ac(),k())].map((function(i){return i-x}));return[Math.ceil(i[0]/M),Math.ceil(i[1]/M)-1].map((function(i){return i+N}))}function k(){var i=null!=I&&y[I]||C;return i?x+i:Infinity}var T=i.presentationTimeline,x=i.ma.start,I=i.Ka.id,C=i.ma.duration,M=o.Pa,N=o.Nd,_=o.timescale,j=o.Sc,B=i.bandwidth||null,z=i.P.id,G=i.P.zb,q=x-o.Tb,H=h();i=i.Yb?Math.max(H[0],H[1]-s+1):H[0];H=H[1];s=[];for(var Y=i;Y<=H;++Y){var Q=g(Y);s.push(Q)}var J=new Oj(s);s=T.ac()<k();Y=T.R();if(s||Y){var $=Math.max(i,H+1);J.Qe(M,(function(){var i=T.Ab();J.yb(i);var r=t(h());r.next();r=r.next().value;for(var o=[];$<=r;){var s=g($);o.push(s);$++}return i>k()&&!o.length?null:o}))}return Promise.resolve(J)}function Ar(i,r){var o=Yq(i,Gr,"initialization");if(!o)return null;var s=i.P.id,p=i.bandwidth||null,y=i.P.zb;return new Nh((function(){var i=Wq(o,s,null,null,p,null);return zb(y(),[i])}),0,null,nr(i),null,null,r)}function Fr(r,o,s,p,y,A,T,x,I,C){Oj.call(this||i,[]);(this||i).h=r;(this||i).H=o;(this||i).D=s;(this||i).G=p;(this||i).i=y;(this||i).l=A;(this||i).u=T;(this||i).C=I;(this||i).I=C;x&&Hr(this||i)}pa(Fr,Oj);p=Fr.prototype;p.$b=function(){return(this||i).h?(this||i).h.timeline.length:0};p.release=function(){Oj.prototype.release.call(this||i);(this||i).h=null};p.yb=function(r){if((this||i).h){for(var o=0,s=(this||i).h.timeline,p=0;p<s.length;p+=1){if(!(s[p].end+(this||i).i<=r))break;o+=1}0<o&&((this||i).h.timeline=s.slice(o),(this||i).g.length>=o&&((this||i).g=(this||i).g.slice(o)),(this||i).j+=o,0===this.$b()&&this.release())}};function Er(i,r,o,s,p,y){i.u=y;if(i.h){o=i.h.timeline;i.h.Sc=r.Sc;var A=o[o.length-1];r=r.timeline.filter((function(i){return i.start>=A.end}));0<r.length&&i.h.timeline.push.apply(i.h.timeline,w(r));i.l!==s&&(i.l=s)}else i.h=r,i.i=o,i.l=s;p&&Hr(i)}function Hr(i){if(!i.s){for(var r=i.h.timeline;r.length;){if(!(r[r.length-1].start>=i.l))break;r.pop()}i.yb(i.i)}}p.find=function(r){if((this||i).h&&(this||i).h.timeline&&(this||i).h.timeline.length&&r<(this||i).h.timeline[0].start+(this||i).i)return(this||i).j;if(!(this||i).h)return null;var o=(this||i).h.timeline;if(r<(this||i).i||r>=(this||i).l)return null;for(var s=o.length-1,p=0;p<o.length;p++){var y=o[p],A=y.start+(this||i).i;y=p<s?o[p+1].start+(this||i).i:Infinity===(this||i).l?y.end+(this||i).i:(this||i).l;if(r>=A&&r<y)return p+(this||i).j}return null};p.get=function(r){var o=this||i;r-=(this||i).j;if(0>r||r>=this.$b()||!(this||i).h)return null;var s=(this||i).g[r];if(!s){var p=(this||i).h.Sc,y=(this||i).h.timeline[r],A=y.nj,T=(this||i).h.yg+y.zg;s=(this||i).i-(this||i).h.Tb;var x=(this||i).i+y.end,I=x;r===this.$b()-1&&Infinity!==(this||i).l&&(I=(this||i).l);for(var C=[],M=(y.end-y.start)/y.Bb,N={},_=0;_<y.Bb;N={ld:N.ld,$e:N.$e},_++){var j=y.start+M*_,B=j+M;N.$e=_+1;N.ld=null;j=new Ph((this||i).i+j,(this||i).i+B,function(i){return function(){if(!o.h)return[];null==i.ld&&(i.ld=Ir(o.h.Sc,o.H,A,o.D,T,i.$e,o.G));return i.ld}}(N),0,null,(this||i).u,s,(this||i).i,(this||i).l,[],"",null,null,vo,(this||i).C);0==(this||i).I?0<_&&j.xe():0!=_%(this||i).I&&j.xe();C.push(j)}s=new Ph((this||i).i+y.start,I,(function(){return 0<y.Bb?[]:Ir(p,o.H,A,o.D,T,null,o.G)}),0,null,(this||i).u,s,(this||i).i,(this||i).l,C,"",null,null,vo,(this||i).C,0<y.Bb);s.h=x;(this||i).g[r]=s}return s};function Ir(i,r,o,s,p,y,A){i=Wq(i,r,o,y,s||null,p);return zb(A(),[i]).map((function(i){return i.toString()}))}function Jr(r){(this||i).s=null;(this||i).C=r;(this||i).I=new uf;(this||i).j=[];(this||i).h=null;(this||i).m=[];(this||i).D=null;(this||i).H=[];(this||i).G=300;(this||i).l=new Map;(this||i).i=new Map;(this||i).g=null;(this||i).u="UNKNOWN"}Jr.prototype.configure=function(r){(this||i).s=r};Jr.prototype.destroy=function(){(this||i).C=(this||i).s=null;(this||i).j=[];(this||i).h=null;(this||i).m=[];(this||i).H=[];(this||i).l.clear();null!=(this||i).g&&((this||i).g.stop(),(this||i).g=null);return(this||i).I.destroy()};Jr.prototype.setManifestType=function(r){(this||i).u=r};function Kr(i,r){var o,s,p,y,A,T,x;return K((function(I){if(1==I.g)return o=zb(i.j,[Lr(i,r)]),s=Af(o,i.s.retryParameters),p=i.C.networkingEngine.request(8,s),vf(i.I,p),ta(I,2),D(I,p.promise,4);if(2!=I.g)return y=I.h,A=Tf(y.data),T=JSON.parse(A),1==T.VERSION&&Mr(i,T,y.uri),va(I,0);if((x=wa(I))&&7001==x.code)return I.return();null!=i.g&&(i.g.stop(),i.g=null);i.g=new Dd((function(){Kr(i,r)}));i.g.S(i.G);F(I)}))}function Lr(i,r){if(!i.m.length)return r;r=new fb(r);var o=i.D||i.m[0],s=Math.round(i.C.getBandwidthEstimate()),p=r.g;"DASH"==i.u?(p.add("_DASH_pathway",o),p.add("_DASH_throughput",String(s))):"HLS"==i.u&&(p.add("_HLS_pathway",o),p.add("_HLS_throughput",String(s)));xb(p)&&kb(r,p);return r.toString()}function Mr(i,r,o){null!=i.g&&(i.g.stop(),i.g=null);var s=r["RELOAD-URI"]||o;i.g=new Dd((function(){Kr(i,s)}));(o=r.TTL)&&(i.G=o);i.g.S(i.G);i.m=r["PATHWAY-PRIORITY"]||[];i.H=r["PATHWAY-CLONES"]||[]}function Nr(i,r,o,s){var p=i.l.get(r);p||(p=new Map);p.set(o,s);i.l.set(r,p)}function Or(i,r,o){o=void 0!==o&&o;r=i.l.get(r)||new Map;for(var s=[],p={},y=t(i.m),A=y.next();!A.done;p={lc:p.lc},A=y.next())if(p.lc=A.value,A=r.get(p.lc))s.push({cg:p.lc,location:A});else if(A=i.H.find(function(i){return function(r){return r.Nj==i.lc}}(p))){var T=r.get(A["BASE-ID"]);T&&(A["URI-REPLACEMENT"].Dh?(T=new fb(T),hb(T,A["URI-REPLACEMENT"].Dh),s.push({cg:p.lc,location:T.toString()})):s.push({cg:p.lc,location:T}))}p=Date.now();y=t(i.i.keys());for(A=y.next();!A.done;A=y.next())A=A.value,T=i.i.get(A),p>T&&i.i.delete(A);s=s.filter((function(r){for(var o=t(i.i.keys()),s=o.next();!s.done;s=o.next())if(s.value.includes(new fb(r.location).Kb))return!1;return!0}));s.length&&(i.D=s[0].cg);s=s.map((function(i){return i.location}));if(!s.length&&i.h)for(p=t(i.h.split(",")),A=p.next();!A.done;A=p.next())(y=r.get(A.value))&&(i.D=i.h,s.push(y));if(!s.length)for(r=t(r.values()),p=r.next();!p.done;p=r.next())s.push(p.value);return o?s:zb(i.j,s)}function Pr(){(this||i).j=[];(this||i).h=[];(this||i).g=[];(this||i).l=[];(this||i).i=[];(this||i).m=!1;(this||i).s=new Set}p=Pr.prototype;p.release=function(){for(var r=t((this||i).h.concat((this||i).g,(this||i).l,(this||i).i)),o=r.next();!o.done;o=r.next())o=o.value,o.segmentIndex&&o.segmentIndex.release();(this||i).h=[];(this||i).g=[];(this||i).l=[];(this||i).i=[];(this||i).j=[]};p.Ci=function(){return(this||i).j};p.Jf=function(){return(this||i).l.slice()};p.ei=function(){return(this||i).i};function Qr(i,r){var o=[],s=[],p=[],y=[];i=t(i);for(var A=i.next();!A.done;A=i.next()){var T=A.value;A=new Map(T.audioStreams.map((function(i){return[Rr(i),i]})));var x=new Map(T.videoStreams.map((function(i){return[Sr(i),i]}))),I=new Map(T.textStreams.map((function(i){return[Tr(i),i]})));T=new Map(T.imageStreams.map((function(i){return[Ur(i),i]})));if(r){var C=Vr(ne);I.set(Tr(C),C);C=Vr("image");T.set(Ur(C),C)}o.push(A);s.push(x);p.push(I);y.push(T)}return{Fg:o,Ah:s,wh:p,Yg:y}}p.Kg=function(r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q,J,$,ne,xe,Ne,_e,Ke,qe,Ze,rt,st=this||i;return K((function(i){if(1==i.g){s=re;if(!o&&1==r.length)return p=Qr(r,!1),y=p.Fg,A=p.Ah,T=p.wh,x=p.Yg,st.h=Array.from(y[0].values()),st.g=Array.from(A[0].values()),st.l=Array.from(T[0].values()),st.i=Array.from(x[0].values()),i.F(2);I=-1;for(C=0;C<r.length;C++)M=r[C],st.s.has(M.id)||(st.s.add(M.id),-1==I&&(I=C));if(-1==I)return i.return();N=Qr(r,!0);_=N.Fg;j=N.Ah;B=N.wh;z=N.Yg;return D(i,Promise.all([Wr(st,st.h,_,I,Zr,$r),Wr(st,st.g,j,I,Zr,$r),Wr(st,st.l,B,I,Zr,$r),Wr(st,st.i,z,I,Zr,$r)]),2)}G=0;q=[];if(st.g.length&&st.h.length)for(ne=t(st.h),xe=ne.next();!xe.done;xe=ne.next())for(Ne=xe.value,_e=t(st.g),Ke=_e.next();!Ke.done;Ke=_e.next())qe=Ke.value,Ze=Eh(Ne.drmInfos,qe.drmInfos),Ne.drmInfos.length&&qe.drmInfos.length&&!Ze.length||(rt=G++,q.push({id:rt,language:Ne.language,disabledUntilTime:0,primary:Ne.primary,audio:Ne,video:qe,bandwidth:(Ne.bandwidth||0)+(qe.bandwidth||0),drmInfos:Ze,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(H=st.g.length?st.g:st.h,Y=t(H),Q=Y.next();!Q.done;Q=Y.next())J=Q.value,$=G++,q.push({id:$,language:J.language,disabledUntilTime:0,primary:J.primary,audio:J.type==s.U?J:null,video:J.type==s.ia?J:null,bandwidth:J.bandwidth||0,drmInfos:J.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});st.j=q;F(i)}))};function as(i){var r,o,s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q,J,$,ne,xe,Ne,_e,Ke,qe,Ze;return K((function(rt){switch(rt.g){case 1:r=re;if(1==i.length)return rt.return(i[0]);o=i.map((function(i){return new Map(i.filter((function(i){return i.type===r.U})).map((function(i){return[Rr(i),i]})))}));s=i.map((function(i){return new Map(i.filter((function(i){return i.type===r.ia})).map((function(i){return[Sr(i),i]})))}));p=i.map((function(i){return new Map(i.filter((function(i){return i.type===r.Da})).map((function(i){return[Tr(i),i]})))}));y=i.map((function(i){return new Map(i.filter((function(i){return i.type===r.cf})).map((function(i){return[Ur(i),i]})))}));A=t(p);for(T=A.next();!T.done;T=A.next())x=T.value,I=bs(r.Da),x.set(Tr(I),I);C=t(y);for(M=C.next();!M.done;M=C.next())N=M.value,_=bs(r.cf),N.set(Ur(_),_);j=new Pr;return D(rt,Wr(j,[],o,0,cs,ds),2);case 2:return B=rt.h,D(rt,Wr(j,[],s,0,cs,ds),3);case 3:return z=rt.h,D(rt,Wr(j,[],p,0,cs,ds),4);case 4:return G=rt.h,D(rt,Wr(j,[],y,0,cs,ds),5);case 5:q=rt.h;H=0;if(z.length&&B.length)for(ne=t(B),xe=ne.next();!xe.done;xe=ne.next())for(Ne=xe.value,_e=t(z),Ke=_e.next();!Ke.done;Ke=_e.next())qe=Ke.value,Ze=H++,qe.variantIds.push(Ze),Ne.variantIds.push(Ze);else for(Y=z.concat(B),Q=t(Y),J=Q.next();!J.done;J=Q.next())$=J.value,$.variantIds=[H++];return rt.return(z.concat(B).concat(G).concat(q))}}))}function Wr(i,r,o,s,p,y){var A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q,J,$;return K((function(ne){switch(ne.g){case 1:A=[];for(T=0;T<s;T++)A.push(new Set);for(x=s;x<o.length;x++)A.push(new Set(o[x].values()));I=t(r);C=I.next();case 2:if(C.done){ne.F(4);break}M=C.value;return D(ne,es(i,M,o,s,y,A),5);case 5:N=ne.h;if(!N)throw new P(2,4,4037);C=I.next();ne.F(2);break;case 4:_=t(A);for(j=_.next();!j.done;j=_.next())for(B=j.value,z=t(B),G=z.next();!G.done;G=z.next())q=G.value,(H=fs(i,q,o,p,y,A))&&r.push(H);Y=t(A);for(j=Y.next();!j.done;j=Y.next())for(Q=j.value,J={},$=t(Q),G=$.next();!G.done;J={Wd:J.Wd},G=$.next())if(J.Wd=G.value,!gs(J.Wd)&&r.some(function(r){return function(o){return hs(i,r.Wd,o)}}(J)))throw new P(2,4,4037);return ne.return(r)}}))}function es(i,r,o,s,p,y){return K((function(A){if(1==A.g)return is(i,o,r),r.matchedStreams?r.segmentIndex?D(A,js(r,s),2):A.F(2):A.return(!1);ks(r,s,p,y);return A.return(!0)}))}function js(i,r){var o,s,p,y,A,T,x;return K((function(I){if(1==I.g){o=[];s=i.matchedStreams;p=t(s);for(y=p.next();!y.done;y=p.next())A=y.value,o.push(A.createSegmentIndex()),A.trickModeVideo&&!A.trickModeVideo.segmentIndex&&o.push(A.trickModeVideo.createSegmentIndex());return D(I,Promise.all(o),2)}if(i.segmentIndex instanceof Sj)for(T={},x=r;x<s.length;T={Gb:T.Gb},x++)T.Gb=s[x],T.Gb.segmentIndex&&(Pj(T.Gb.segmentIndex,function(i){return function(r){r.codecs=i.Gb.codecs;r.mimeType=i.Gb.mimeType;r.ka&&(r.ka.codecs=i.Gb.codecs,r.ka.mimeType=i.Gb.mimeType)}}(T)),i.segmentIndex.h.push(T.Gb.segmentIndex));F(I)}))}function fs(i,r,o,s,p,y){if(gs(r))return null;var A=s(r);is(i,o,A);A.createSegmentIndex&&(A.createSegmentIndex=function(){return K((function(i){if(A.segmentIndex)return i.F(0);A.segmentIndex=new Sj;return D(i,js(A,0),0)}))});if(!A.matchedStreams||!A.matchedStreams.length)return null;ks(A,0,p,y);return A}function ks(i,r,o,s){for(var p=i.matchedStreams;r<p.length;r++){var y=p[r];o(i,y);var A=!0;"audio"==i.type&&0==Rb(i.language,y.language)&&(A=!1);if(A){s[r].delete(y);A=new Set(i.codecs.split(","));y=t(y.codecs.split(","));for(var T=y.next();!T.done;T=y.next())(T=T.value)&&A.add(T);T=Array.from(A);A=new Set;y=[];T=t(T);for(var x=T.next();!x.done;x=T.next()){x=x.value;var I=ld(x);A.has(I)||(y.push(x),A.add(I))}i.codecs=y.join(",")}}}function Zr(i){var r=Object.assign({},i);r.originalId=null;r.createSegmentIndex=function(){return Promise.resolve()};r.closeSegmentIndex=function(){r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null);if(r.matchedStreams)for(var i=t(r.matchedStreams),o=i.next();!o.done;o=i.next())o=o.value,o.segmentIndex&&(o.segmentIndex.release(),o.segmentIndex=null)};r.roles=r.roles.slice();r.segmentIndex=null;r.emsgSchemeIdUris=[];r.keyIds=new Set;r.closedCaptions=null;r.trickModeVideo=null;return r}function cs(i){i=Object.assign({},i);i.roles=i.roles.slice();i.keyIds=new Set;i.segments=[];i.variantIds=[];i.closedCaptions=null;return i}function $r(i,r){function c(i,r){i||(i=[]);r=t(r);for(var o=r.next();!o.done;o=r.next())o=o.value,i.includes(o)||i.push(o);return i}i.roles=c(i.roles,r.roles);r.emsgSchemeIdUris&&(i.emsgSchemeIdUris=c(i.emsgSchemeIdUris,r.emsgSchemeIdUris));for(var o=t(r.keyIds),s=o.next();!s.done;s=o.next())i.keyIds.add(s.value);null==i.originalId?i.originalId=r.originalId:i.originalId+=","+(r.originalId||"");o=Eh(i.drmInfos,r.drmInfos);if(r.drmInfos.length&&i.drmInfos.length&&!o.length)throw new P(2,4,4038);i.drmInfos=o;i.encrypted=i.encrypted||r.encrypted;if(r.closedCaptions)for(i.closedCaptions||(i.closedCaptions=new Map),o=t(r.closedCaptions),s=o.next();!s.done;s=o.next()){var p=t(s.value);s=p.next().value;p=p.next().value;i.closedCaptions.set(s,p)}r.trickModeVideo?(i.trickModeVideo||(i.trickModeVideo=Zr(r.trickModeVideo),i.trickModeVideo.createSegmentIndex=function(){i.trickModeVideo.segmentIndex=i.segmentIndex.clone();return Promise.resolve()}),$r(i.trickModeVideo,r.trickModeVideo)):i.trickModeVideo&&$r(i.trickModeVideo,r)}function ds(i,r){var o=i.roles;o||(o=[]);for(var s=t(r.roles),p=s.next();!p.done;p=s.next())p=p.value,o.includes(p)||o.push(p);i.roles=o;o=t(r.keyIds);for(s=o.next();!s.done;s=o.next())i.keyIds.add(s.value);i.encrypted=i.encrypted&&r.encrypted;i.segments.push.apply(i.segments,w(r.segments));if(r.closedCaptions)for(i.closedCaptions||(i.closedCaptions=new Map),r=t(r.closedCaptions),o=r.next();!o.done;o=r.next())s=t(o.value),o=s.next().value,s=s.next().value,i.closedCaptions.set(o,s)}function is(i,r,o){var s=[];r=t(r);for(var p=r.next();!p.done;p=r.next()){p=ls(i,p.value,o);if(!p)return;s.push(p)}o.matchedStreams=s}function ls(i,r,o){var s=null,p=(0,{audio:Rr,video:Sr,text:Tr,image:Ur}[o.type])(o);if(r.has(p))s=r.get(p);else{p={audio:function(r,o){return hs(i,r,o)},video:function(r,o){return hs(i,r,o)},text:ms,image:ns}[o.type];var y={audio:os,video:ps,text:qs,image:rs}[o.type];r=t(r.values());for(var A=r.next();!A.done;A=r.next())A=A.value,!p(o,A)||o.fastSwitching!=A.fastSwitching||s&&!y(o,s,A)||(s=A)}return s}function ss(i,r){function c(i){if(!Rh.has(i)){var r=hd(i);Rh.set(i,r)}return Rh.get(i)}return i.mimeType==r.mimeType&&c(i.codecs)==c(r.codecs)}function hs(i,r,o){return!(!ss(r,o)&&!i.m||r.drmInfos&&!Dh(r.drmInfos,o.drmInfos))}function ms(i,r){return!r.language||i.forced===r.forced&&0!=Rb(i.language,r.language)&&r.kind==i.kind}function ns(){return!0}function os(i,r,o){var s=ss(i,r),p=ss(i,o);if(s&&!p)return!1;if(!s&&p)return!0;s=Rb(i.language,r.language);p=Rb(i.language,o.language);if(p>s)return!0;if(p<s)return!1;if(r.label!==o.label){if(i.label===r.label)return!1;if(i.label===o.label)return!0}if(i.roles.length)return s=r.roles.filter((function(r){return i.roles.includes(r)})),p=o.roles.filter((function(r){return i.roles.includes(r)})),p.length>s.length||!(p.length<s.length)&&o.roles.length<r.roles.length;if(!o.roles.length&&r.roles.length)return!0;if(o.roles.length&&!r.roles.length)return!1;if(!r.primary&&o.primary)return!0;if(r.primary&&!o.primary)return!1;s=us(i.channelsCount,r.channelsCount,o.channelsCount);if(s==Ih)return!0;if(s==Lh)return!1;s=us(i.audioSamplingRate,r.audioSamplingRate,o.audioSamplingRate);return s==Ih||s!=Lh&&!(!i.bandwidth||xs(i.bandwidth,r.bandwidth,o.bandwidth)!=Ih)}function ps(i,r,o){var s=ss(i,r),p=ss(i,o);if(s&&!p)return!1;if(!s&&p)return!0;s=us(i.width*i.height,r.width*r.height,o.width*o.height);if(s==Ih)return!0;if(s==Lh)return!1;if(i.frameRate){s=us(i.frameRate,r.frameRate,o.frameRate);if(s==Ih)return!0;if(s==Lh)return!1}return!(!i.bandwidth||xs(i.bandwidth,r.bandwidth,o.bandwidth)!=Ih)}function qs(i,r,o){var s=Rb(i.language,r.language),p=Rb(i.language,o.language);if(p>s)return!0;if(p<s)return!1;if(!r.primary&&o.primary)return!0;if(r.primary&&!o.primary)return!1;if(r.label!==o.label){if(i.label===r.label)return!1;if(i.label===o.label)return!0}if(i.roles.length){s=r.roles.filter((function(r){return i.roles.includes(r)}));p=o.roles.filter((function(r){return i.roles.includes(r)}));if(p.length>s.length)return!0;if(p.length<s.length)return!1}else{if(!o.roles.length&&r.roles.length)return!0;if(o.roles.length&&!r.roles.length)return!1}return o.mimeType==i.mimeType&&o.codecs==i.codecs&&(r.mimeType!=i.mimeType||r.codecs!=i.codecs)}function rs(i,r,o){return us(i.width*i.height,r.width*r.height,o.width*o.height)==Ih}function bs(i){return{id:0,originalId:"",groupId:null,primary:!1,type:i,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Vr(i){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Oj([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:i,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1}}function us(i,r,o){if(r==i&&i!=o)return Lh;if(o==i&&i!=r)return Ih;if(r>i){if(o<=i||o-i<r-i)return Ih;if(o-i>r-i)return Lh}else{if(o>i)return Lh;if(i-o<i-r)return Ih;if(i-o>i-r)return Lh}return Ch}function xs(i,r,o){r=Math.abs(i-r);i=Math.abs(i-o);return i<r?Ih:r<i?Lh:Ch}function gs(i){switch(i.type){case ne:return!i.language;case"image":return!i.tilesLayout;default:return!1}}function Sr(i){return JSON.stringify([i.fastSwitching,i.width,i.frameRate,i.codecs,i.mimeType,i.label,i.roles,i.closedCaptions?Array.from(i.closedCaptions.entries()):null,i.bandwidth])}function Rr(i){return JSON.stringify([i.fastSwitching,i.channelsCount,i.language,i.bandwidth,i.label,i.codecs,i.mimeType,i.roles,i.audioSamplingRate,i.primary])}function Tr(i){return JSON.stringify([i.language,i.label,i.codecs,i.mimeType,i.bandwidth,i.roles])}function Ur(i){return JSON.stringify([i.width,i.codecs,i.mimeType])}L("shaka.util.PeriodCombiner",Pr);Pr.prototype.combinePeriods=Pr.prototype.Kg;Pr.prototype.getImageStreams=Pr.prototype.ei;Pr.prototype.getTextStreams=Pr.prototype.Jf;Pr.prototype.getVariants=Pr.prototype.Ci;var Ih=1,Ch=0,Lh=-1,Rh=new Map;function zs(){var r=this||i;(this||i).i=(this||i).h=null;(this||i).s=[];(this||i).j=null;(this||i).K=1;(this||i).m={};(this||i).M={};(this||i).l=new Pr;(this||i).H=0;(this||i).J=new Yb(5);(this||i).I=new Dd((function(){As(r)}));(this||i).G=new uf;(this||i).C=null;(this||i).L=[];(this||i).D=Infinity;(this||i).u=!1;(this||i).g=null}p=zs.prototype;p.configure=function(r){(this||i).h=r;(this||i).g&&(this||i).g.configure((this||i).h);(this||i).l&&((this||i).l.m=(this||i).h.dash.multiTypeVariantsAllowed&&fc())};p.start=function(r,o){var s,p=this||i;return K((function(i){if(1==i.g)return p.u=o.isLowLatencyMode(),p.s=[r],p.i=o,D(i,Bs(p),2);s=i.h;p.i&&Cs(p,s);if(!p.i)throw new P(2,7,7001);return i.return(p.j)}))};p.stop=function(){for(var r=t(Object.values((this||i).m)),o=r.next();!o.done;o=r.next())o=o.value,o.segmentIndex&&o.segmentIndex.release();(this||i).l&&(this||i).l.release();(this||i).h=(this||i).i=null;(this||i).s=[];(this||i).j=null;(this||i).m={};(this||i).l=null;null!=(this||i).I&&((this||i).I.stop(),(this||i).I=null);(this||i).g&&(this||i).g.destroy();return(this||i).G.destroy()};p.update=function(){var r,o=this||i;return K((function(i){if(1==i.g)return ta(i,2),D(i,Bs(o),4);if(2!=i.g)return va(i,0);r=wa(i);if(!o.i||!r)return i.return();o.i.onError(r);F(i)}))};p.onExpirationUpdated=function(){};p.onInitialVariantChosen=function(r){if((this||i).j&&(this||i).j.presentationTimeline.R()){var o=r.video||r.audio;if(o&&o.segmentIndex){r=(this||i).j.presentationTimeline.ac();var s=o.segmentIndex.find(r);null!=s&&(o=o.segmentIndex.get(s))&&((this||i).H=o.endTime-r,Cs(this||i,0))}}};p.banLocation=function(r){(this||i).g&&(this||i).g.i.set(r,Date.now()+6e4)};function Bs(i){var r,o,s,p,y,A,T;return K((function(x){if(1==x.g)return r=i.s,1<i.s.length&&i.g&&(o=Or(i.g,"Location",!0),o.length&&(r=o)),s=Af(r,i.h.retryParameters),p=Date.now(),D(x,Ds(i,s,0,{type:4}),2);if(3!=x.g){y=x.h;if(!i.i)return x.return(0);y.uri&&y.uri!=y.originalUri&&!i.s.includes(y.uri)&&i.s.unshift(y.uri);return D(x,Es(i,y.data,y.uri),3)}A=Date.now();T=(A-p)/1e3;i.J.sample(1,T);return x.return(T)}))}function Es(i,r,o){var s,p,y,A;return K((function(T){if(1==T.g){s=Rg(r,"MPD");if(!s)throw new P(2,4,4001,o);if(i.h.dash.disableXlinkProcessing)return T.return(Fs(i,s,o));p=i.h.dash.xlinkFailGracefully;y=br(s,i.h.retryParameters,p,o,i.i.networkingEngine);vf(i.G,y);return D(T,y.promise,2)}A=T.h;return T.return(Fs(i,A,o))}))}function Fs(i,r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q,J,$,ne,re,xe,Ne,_e,Ke,qe,Ze,rt,st,_t,Bt,Ht,ln,Ln,_n,Kn,Jn,Si,Ii,Li,Pi,_i,ji,Bi,Ki,Gi,Hi,Ji,hr,_r,Xr,Yr;return K((function(na){switch(na.g){case 1:(s=i.h.dash.manifestPreprocessor)&&s(r);i.g&&i.g.l.clear();p=[o];y=[];A=new Map;T=xg(r,"Location");x=t(T);for(I=x.next();!I.done;I=x.next())(C=I.value,M=C.getAttribute("serviceLocation"),N=Dg(C))&&(_=zb(p,[N])[0],M&&(i.g?Nr(i.g,"Location",M,_):A.set(M,_)),y.push(_));i.g?(j=Or(i.g,"Location",!0),0<j.length&&(p=i.s=j)):y.length&&(p=i.s=y);B=Promise.resolve();if((z=wg(r,"ContentSteering"))&&i.i){G=z.getAttribute("defaultServiceLocation");i.g?(i.g.j=p,i.g.h=G):(i.g=new Jr(i.i),i.g.configure(i.h),i.g.setManifestType("DASH"),i.g.j=p,i.g.h=G,q=Dg(z))&&(Fg(z,"queryBeforeStart",Ng,!1)?B=Kr(i.g,q):Kr(i.g,q));H=t(A.keys());for(Y=H.next();!Y.done;Y=H.next())Q=Y.value,J=A.get(Q),Nr(i.g,"Location",Q,J)}$=xg(r,"BaseURL");re=!1;if(i.g)for(xe=t($),Ne=xe.next();!Ne.done;Ne=xe.next())_e=Ne.value,Ke=_e.getAttribute("serviceLocation"),qe=Dg(_e),Ke&&qe&&(Nr(i.g,"BaseURL",Ke,qe),re=!0);re&&i.g||(Ze=$.map(Dg),ne=zb(p,Ze));rt=function(){return i.g&&re?Or(i.g,"BaseURL"):ne||[]};st=0;$&&$.length&&(st=Fg($[0],"availabilityTimeOffset",Mg)||0);_t=i.h.dash.ignoreMinBufferTime;Bt=0;_t||(Bt=Fg(r,"minBufferTime",Hg)||0);i.H=Fg(r,"minimumUpdatePeriod",Hg,-1);Ht=Fg(r,"availabilityStartTime",Gg);ln=Fg(r,"timeShiftBufferDepth",Hg);Ln=i.h.dash.ignoreSuggestedPresentationDelay;_n=null;Ln||(_n=Fg(r,"suggestedPresentationDelay",Hg));Kn=i.h.dash.ignoreMaxSegmentDuration;Jn=null;Kn||(Jn=Fg(r,"maxSegmentDuration",Hg));Si=r.getAttribute("type")||"static";if(i.j)for(Ii=i.j.presentationTimeline,Li=t(Object.values(i.m)),Pi=Li.next();!Pi.done;Pi=Li.next())_i=Pi.value,_i.segmentIndex&&_i.segmentIndex.yb(Ii.Ab());else ji=i.h.defaultPresentationDelay||1.5*Bt,Bi=null!=_n?_n:ji,Ii=new sj(Ht,Bi,i.h.dash.autoCorrectDrift);Ii.Vc("static"==Si);Ii.R()&&!isNaN(i.h.availabilityWindowOverride)&&(ln=i.h.availabilityWindowOverride);null==ln&&(ln=Infinity);Ii.Ne(ln);Ki=r.getAttribute("profiles")||"";Gi={Yb:"static"!=Si,presentationTimeline:Ii,Ka:null,ma:null,Ea:null,P:null,bandwidth:0,Zg:!1,Hc:st,profiles:Ki.split(",")};Hi=Gs(i,Gi,rt,r);Ji=Hi.duration;hr=Hi.periods;"static"!=Si&&Hi.Pg||Ii.gb(Ji||Infinity);i.D&&!i.u&&i.i.isAutoLowLatencyMode()&&(i.i.enableLowLatencyMode(),i.u=i.i.isLowLatencyMode());i.u?Ii.mh(i.D):i.D&&Ra("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");Ii.Wf(Jn||1);return D(na,i.l.Kg(hr,Gi.Yb),2);case 2:return D(na,B,3);case 3:i.u&&(Bt=0);if(i.j){i.j.variants=i.l.j;_r=i.l.Jf();0<_r.length&&(i.j.textStreams=_r);i.j.imageStreams=i.l.i;i.i.filter(i.j);na.F(4);break}i.j={presentationTimeline:Ii,variants:i.l.j,textStreams:i.l.Jf(),imageStreams:i.l.i,offlineSessionIds:[],minBufferTime:Bt||0,sequenceMode:i.h.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Hs(r)};if(!Ii.yh()){na.F(5);break}Xr=xg(r,"UTCTiming");return D(na,Is(i,rt,Xr),6);case 6:Yr=na.h;if(!i.i)return na.return();Ii.nh(Yr);case 5:Ii.ve();case 4:i.i.makeTextStreamsForClosedCaptions(i.j),F(na)}}))}function Hs(i){i=wg(i,"ServiceDescription");if(!i)return null;var r=wg(i,"Latency"),o=wg(i,"PlaybackRate");if(r&&r.getAttribute("max")||o){i=r&&r.getAttribute("max")?parseInt(r.getAttribute("max"),10)/1e3:null;var s=o?parseFloat(o.getAttribute("max")):null;r=r&&r.getAttribute("min")?parseInt(r.getAttribute("min"),10)/1e3:null;o=o?parseFloat(o.getAttribute("min")):null;return{maxLatency:i,maxPlaybackRate:s,minLatency:r,minPlaybackRate:o}}return null}function Gs(i,r,o,s){var p=Fg(s,"mediaPresentationDuration",Hg),y=[],A=0;s=xg(s,"Period");for(var T=0;T<s.length;T++){var x=s[T],I=s[T+1],C=Fg(x,"start",Hg,A),M=x.id,N=Fg(x,"duration",Hg),_=null;if(I){var j=Fg(I,"start",Hg);null!=j&&(_=j-C)}else null!=p&&(_=p-C);null==_&&(_=N);if(!(null!==i.C&&null!==M&&null!==C&&C<i.C)||i.L.includes(M)||T+1==s.length){null!==C&&(null===i.C||C>i.C)&&(i.C=C);A=Js(i,r,o,{start:C,duration:_,node:x,Mf:null==_||!I});y.push(A);r.Ka.id&&_&&(i.M[r.Ka.id]=_);if(null==_){A=null;break}A=C+_}}i.L=y.map((function(i){return i.id}));return null!=p?{periods:y,duration:p,Pg:!1}:{periods:y,duration:A,Pg:!0}}function Js(i,r,o,s){r.Ka=Ks(i,s.node,null,o);r.ma=s;r.Ka.Hc=r.Hc;r.Ka.id||(r.Ka.id="__shaka_period_"+s.start);var p=xg(s.node,"EventStream");o=r.presentationTimeline.Ab();p=t(p);for(var y=p.next();!y.done;y=p.next())Ls(i,s.start,s.duration,y.value,o);o=xg(s.node,"AdaptationSet").map((function(o){return Ms(i,r,o)})).filter(zd);if(r.Yb){s=[];p=t(o);for(y=p.next();!y.done;y=p.next()){y=t(y.value.gj);for(var A=y.next();!A.done;A=y.next())s.push(A.value)}if(s.length!=new Set(s).size)throw new P(2,4,4018)}s=o.filter((function(i){return!i.wg}));o=o.filter((function(i){return i.wg}));o=t(o);for(p=o.next();!p.done;p=o.next()){p=p.value;y=p.wg.split(" ");A=t(s);for(var T=A.next();!T.done;T=A.next()){var x=T.value;if(y.includes(x.id)){T={};x=t(x.streams);for(var I=x.next();!I.done;T={Xd:T.Xd},I=x.next())T.Xd=I.value,T.Xd.trickModeVideo=p.streams.find(function(i){return function(r){return hd(i.Xd.codecs)==hd(r.codecs)}}(T))}}}o=Ns(i.h.disableAudio,s,"audio");p=Ns(i.h.disableVideo,s,"video");y=Ns(i.h.disableText,s,ne);s=Ns(i.h.disableThumbnails,s,"image");if(0===p.length&&0===o.length)throw new P(2,4,4004);return{id:r.Ka.id,audioStreams:o,videoStreams:p,textStreams:y,imageStreams:s}}function Ns(i,r,o){return i||!r.length?[]:r.reduce((function(i,r){if(r.contentType!=o)return i;i.push.apply(i,w(r.streams));return i}),[])}function Ms(i,r,o){function d(i){switch(i){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}r.Ea=Ks(i,o,r.Ka,null);var s=!1,p=xg(o,"Role"),y=p.map((function(i){return i.getAttribute("value")})).filter(zd),A=void 0,T=r.Ea.contentType==ne;T&&(A="subtitle");p=t(p);for(var x=p.next();!x.done;x=p.next()){x=x.value;var I=x.getAttribute("schemeIdUri");if(null==I||"urn:mpeg:dash:role:2011"==I)switch(x=x.getAttribute("value"),x){case"main":s=!0;break;case"caption":case"subtitle":A=x}}var C;I=xg(o,"EssentialProperty");p=null;var M=!1;x=!1;I=t(I);for(var N=I.next();!N.done;N=I.next()){N=N.value;var _=N.getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==_?p=N.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==_?C=d(parseInt(N.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=_&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=_&&("urn:mpeg:dash:ssr:2023"==_?M=!0:x=!0)}I=xg(o,"SupplementalProperty");I=t(I);for(N=I.next();!N.done;N=I.next())N=N.value,"urn:mpeg:mpegB:cicp:TransferCharacteristics"==N.getAttribute("schemeIdUri")&&(C=d(parseInt(N.getAttribute("value"),10)));I=xg(o,"Accessibility");var j,B=new Map;I=t(I);for(N=I.next();!N.done;N=I.next())if(_=N.value,N=_.getAttribute("schemeIdUri"),_=_.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==N)if(N=1,null!=_){_=_.split(";");for(var z=t(_),G=z.next();!G.done;G=z.next()){var q=G.value,H=G=void 0;q.includes("=")?(q=q.split("="),G=q[0].startsWith("CC")?q[0]:"CC"+q[0],H=q[1]||"und"):(G="CC"+N,2==_.length?N+=2:N++,H=q);B.set(G,Kb(H))}}else B.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==N)if(N=1,null!=_)for(_=t(_.split(";")),G=_.next();!G.done;G=_.next())G=G.value,q=z=void 0,G.includes("=")?(G=G.split("="),z="svc"+G[0],q=G[1].split(",")[0].split(":").pop()):(z="svc"+N,N++,q=G),B.set(z,Kb(q));else B.set("svc1","und");else"urn:mpeg:dash:role:2011"==N?null!=_&&(y.push(_),"captions"==_&&(A="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==N&&("1"==_?j="visually impaired":"2"==_&&(j="hard of hearing"));if(x)return null;x=xg(o,"ContentProtection");var Y=Lq(x,i.h.dash.ignoreDrmInfo,i.h.dash.keySystemsByURI),Q=Kb(r.Ea.language||"und"),J=o.getAttribute("label");(x=xg(o,"Label"))&&x.length&&(x=x[0],x.textContent&&(J=x.textContent));x=xg(o,"Representation");o=x.map((function(o){(o=Os(i,r,Y,A,Q,J,s,y,B,o,j))&&(o.hdr=o.hdr||C,o.fastSwitching=M);return o})).filter((function(i){return!!i}));if(0==o.length){p="image"==r.Ea.contentType;if(i.h.dash.ignoreEmptyAdaptationSet||T||p)return null;throw new P(2,4,4003)}if(!r.Ea.contentType||"application"==r.Ea.contentType)for(r.Ea.contentType=Ps(o[0].mimeType,o[0].codecs),T=t(o),N=T.next();!N.done;N=T.next())N.value.type=r.Ea.contentType;T=r.Ea.id||"__fake__"+i.K++;I=t(o);for(N=I.next();!N.done;N=I.next()){N=N.value;_=t(Y.drmInfos);for(z=_.next();!z.done;z=_.next())z=z.value,z.keyIds=z.keyIds&&N.keyIds?new Set([].concat(w(z.keyIds),w(N.keyIds))):z.keyIds||N.keyIds;i.h.dash.enableAudioGroups&&(N.groupId=T)}x=x.map((function(i){return i.getAttribute("id")})).filter(zd);return{id:T,contentType:r.Ea.contentType,language:Q,yk:s,streams:o,drmInfos:Y.drmInfos,wg:p,gj:x}}function Os(i,o,s,p,y,A,T,x,I,C,M){o.P=Ks(i,C,o.Ea,null);i.D=Math.min(i.D,o.P.Hc);if(!Qs(o.P))return null;var N=o.ma.start;o.bandwidth=Fg(C,"bandwidth",Kg)||0;var _=o.P.contentType,j=_==ne||"application"==_;_="image"==_;try{var B=void 0;if(s.gf){var z=o.P.zb,G=zb(z(),[s.gf.Qi]),q=Af(G,i.h.retryParameters);B={method:"AES-128",iv:s.gf.iv,firstMediaSequenceNumber:0,fetchKey:function(){var o,s,p;return K((function(y){if(1==y.g)return D(y,Ds(i,q,6),2);if(3!=y.g){o=y.h;if(!o.data||16!=o.data.byteLength)throw new P(2,4,4049);s={name:"AES-CBC"};p=B;return D(y,r.crypto.subtle.importKey("raw",o.data,s,!0,["decrypt"]),3)}p.cryptoKey=y.h;B.fetchKey=void 0;F(y)}))}}}z=function(r,o,s,p){return Rs(i,r,o,s,p)};if(o.P.Ld)var H=or(o,z,B);else if(o.P.fc)H=ur(o,i.m,B);else if(o.P.Md)H=zr(o,z,i.m,!!i.j,i.h.dash.initialSegmentLimit,i.M,B);else{var Y=o.ma.duration||0,Q=o.P.zb;H={Kc:function(){return Promise.resolve(Rj(N,Y,Q()))}}}}catch(i){if((j||_)&&4002==i.code)return null;throw i}z=xg(C,"ContentProtection");z=Pq(z,s,i.h.dash.ignoreDrmInfo,i.h.dash.keySystemsByURI);z=new Set(z?[z]:[]);G=!1;xg(C,"SupplementalProperty").some((function(i){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==i.getAttribute("schemeIdUri")&&"JOC"==i.getAttribute("value")}))&&(G=!0);var J=!1;j&&(J=x.includes("forced_subtitle")||x.includes("forced-subtitle"));var $;if(_&&((C=xg(C,"EssentialProperty").find((function(i){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(i.getAttribute("schemeIdUri"))})))&&($=C.getAttribute("value")),!$))return null;var re;C=o.P.codecs;o.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(C.includes("hvc1.2.4.L153.B0")||C.includes("hev1.2.4.L153.B0"))&&(re="PQ");C=o.P.id?o.Ka.id+","+o.P.id:"";var xe=C&&i.m[C]?i.m[C]:{id:i.K++,originalId:o.P.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){xe.segmentIndex&&(xe.segmentIndex.release(),xe.segmentIndex=null)},segmentIndex:null,mimeType:o.P.mimeType,codecs:o.P.codecs,frameRate:o.P.frameRate,pixelAspectRatio:o.P.pixelAspectRatio,bandwidth:o.bandwidth,width:o.P.width,height:o.P.height,kind:p,encrypted:0<s.drmInfos.length,drmInfos:s.drmInfos,keyIds:z,language:y,originalLanguage:o.Ea.language,label:A,type:o.Ea.contentType,primary:T,trickModeVideo:null,emsgSchemeIdUris:o.P.emsgSchemeIdUris,roles:x,forced:J,channelsCount:o.P.De,audioSamplingRate:o.P.audioSamplingRate,spatialAudio:G,closedCaptions:I,hdr:re,videoLayout:void 0,tilesLayout:$,accessibilityPurpose:M,external:!1,fastSwitching:!1};xe.createSegmentIndex=function(){var i;return K((function(r){if(1==r.g){if(xe.segmentIndex)return r.F(0);i=xe;return D(r,H.Kc(),3)}i.segmentIndex=r.h;F(r)}))};C&&o.Yb&&!i.m[C]&&(i.m[C]=xe);return xe}function As(i){var r,o;K((function(s){switch(s.g){case 1:return r=0,ta(s,2),D(s,Bs(i),4);case 4:r=s.h;va(s,3);break;case 2:if(o=wa(s),i.i){if(i.h.raiseFatalErrorOnManifestUpdateRequestFailure)return i.i.onError(o),s.return();o.severity=1;i.i.onError(o)}case 3:if(!i.i)return s.return();i.i.onManifestUpdated();Cs(i,r);F(s)}}))}function Cs(i,r){0>i.H||i.I.S(Math.max(i.H-r,Zb(i.J)))}function Ks(i,r,o,s){o=o||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,De:null,audioSamplingRate:null,Hc:0,hg:0};s=s||o.zb;var p,y=r.getAttribute("id"),A=xg(r,"BaseURL"),T=!1;if(i.g)for(var x=t(A),I=x.next();!I.done;I=x.next()){var C=I.value;I=C.getAttribute("serviceLocation");C=Dg(C);I&&C&&(Nr(i.g,y,I,C),T=!0)}T&&i.g||(p=A.map(Dg));x=r.getAttribute("contentType")||o.contentType;I=r.getAttribute("mimeType")||o.mimeType;C=r.getAttribute("codecs")||o.codecs;var M=Fg(r,"frameRate",Og)||o.frameRate,N=r.getAttribute("sar")||o.pixelAspectRatio,_=Ss(xg(r,"InbandEventStream"),o.emsgSchemeIdUris),j=xg(r,"AudioChannelConfiguration");j=Ts(j)||o.De;var B=Fg(r,"audioSamplingRate",Lg)||o.audioSamplingRate;x||(x=Ps(I,C));var z=wg(r,"SegmentBase"),G=wg(r,"SegmentTemplate"),q=z&&Fg(z,"availabilityTimeOffset",Mg)||0,H=G&&Fg(G,"availabilityTimeOffset",Mg)||0,Y=A&&A.length&&Fg(A[0],"availabilityTimeOffset",Mg)||0;q=o.Hc+Y+q+H;H=null;(Y=wg(r,"SegmentSequenceProperties"))&&(Y=wg(Y,"SAP"))&&(H=Fg(Y,"cadence",Jg));return{zb:function(){return zb(s(),A.length?i.g&&T?Or(i.g,y):p||[]:[])},Ld:z||o.Ld,fc:wg(r,"SegmentList")||o.fc,Md:G||o.Md,width:Fg(r,"width",Lg)||o.width,height:Fg(r,"height",Lg)||o.height,contentType:x,mimeType:I,codecs:C,frameRate:M,pixelAspectRatio:N,emsgSchemeIdUris:_,id:y,language:r.getAttribute("lang"),De:j,audioSamplingRate:B,Hc:q,hg:H||o.hg}}function Ss(i,r){r=r.slice();i=t(i);for(var o=i.next();!o.done;o=i.next())o=o.value.getAttribute("schemeIdUri"),r.includes(o)||r.push(o);return r}function Ts(i){i=t(i);for(var r=i.next();!r.done;r=i.next()){var o=r.value;if((r=o.getAttribute("schemeIdUri"))&&(o=o.getAttribute("value")))switch(r){case"urn:mpeg:dash:outputChannelPositionList:2012":return o.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":r=parseInt(o,10);if(!r)continue;return r;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":r=parseInt(o,16);if(!r)continue;for(i=0;r;)r&1&&++i,r>>=1;return i;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(r=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(o=parseInt(o,10))&&0<o&&o<r.length)return r[o]}}return null}function Qs(i){var r=i.Ld?1:0;r+=i.fc?1:0;r+=i.Md?1:0;if(0==r)return i.contentType==ne||"application"==i.contentType;1!=r&&(i.Ld&&(i.fc=null),i.Md=null);return!0}function Us(i,r,o,s){var p,y,A,T,x,I;return K((function(C){if(1==C.g)return p=zb(r(),[o]),y=Af(p,i.h.retryParameters),y.method=s,A=i.i.networkingEngine.request(4,y),vf(i.G,A),D(C,A.promise,2);T=C.h;if("HEAD"==s){if(!T.headers||!T.headers.date)return C.return(0);x=T.headers.date}else x=Tf(T.data);I=Date.parse(x);return isNaN(I)?C.return(0):C.return(I-Date.now())}))}function Is(i,r,o){var s,p,y,A,T,x,I,C;return K((function(M){switch(M.g){case 1:s=o.map((function(i){return{scheme:i.getAttribute("schemeIdUri"),value:i.getAttribute("value")}})),p=i.h.dash.clockSyncUri,!s.length&&p&&s.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:p}),y=t(s),A=y.next();case 2:if(A.done){M.F(4);break}T=A.value;ta(M,5);x=T.scheme;I=T.value;switch(x){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return M.F(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return M.F(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return C=Date.parse(I),M.return(isNaN(C)?0:C-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ra("NTP UTCTiming scheme is not supported");break;default:Ra("Unrecognized scheme in UTCTiming element",x)}M.F(9);break;case 7:return D(M,Us(i,r,I,"HEAD"),10);case 10:return M.return(M.h);case 8:return D(M,Us(i,r,I,"GET"),11);case 11:return M.return(M.h);case 9:va(M,3);break;case 5:wa(M);case 3:A=y.next();M.F(2);break;case 4:return Ra("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),M.return(0)}}))}function Ls(i,r,o,s,p){var y=s.getAttribute("schemeIdUri")||"",A=s.getAttribute("value")||"",T=Fg(s,"timescale",Lg)||1;s=t(xg(s,"Event"));for(var x=s.next();!x.done;x=s.next()){x=x.value;var I=Fg(x,"presentationTime",Lg)||0,C=Fg(x,"duration",Lg)||0;I=I/T+r;C=I+C/T;null!=o&&(I=Math.min(I,r+o),C=Math.min(C,r+o));C<p||(x={schemeIdUri:y,value:A,startTime:I,endTime:C,id:x.getAttribute("id")||"",eventElement:x},i.i.onTimelineRegionAdded(x))}}function Rs(i,r,o,s,p){var y,A,T,x;return K((function(I){if(1==I.g)return y=Ta,A=p?0:1,T=ok(r,o,s,i.h.retryParameters),D(I,Ds(i,T,y,{type:A}),2);x=I.h;return I.return(x.data)}))}function Ps(i,r){r=dd(i,r);return pd(r)?ne:i.split("/")[0]}function Ds(i,r,o,s){r=i.i.networkingEngine.request(o,r,s);vf(i.G,r);return r.promise}L("shaka.dash.DashParser",zs);uo["application/dash+xml"]=function(){return new zs};uo["video/vnd.mpeg.dash.mpd"]=function(){return new zs};function Vs(){}L("shaka.dependencies",Vs);Vs.has=function(i){return zh.has(i)};Vs.add=function(i,r){if(!Fh[i])throw Error(i+" is not supported");i==_h?Me("mux.js","mux.js is no longer used in Shaka Player."):zh.set(i,(function(){return r}))};var _h="muxjs",Fh={zk:_h,ISOBoxer:"ISOBoxer"};Vs.Allowed=Fh;var zh=new Map([["ISOBoxer",function(){return r.ISOBoxer}]]);function Zs(r,o,s){(this||i).type=r;(this||i).g=o;(this||i).segments=s||null}function $s(r,o,s,p){(this||i).id=r;(this||i).name=o;(this||i).g=s;(this||i).value=void 0===p?null:p}$s.prototype.toString=function(r){function b(i){return i.name+"="+(isNaN(Number(i.value))?'"'+i.value+'"':i.value)}var o="#"+(this||i).name,s=(this||i).g?(this||i).g.filter((function(i){return!r||!r.has(i.name)})).map(b):[];(this||i).value&&s.unshift((this||i).value);0<s.length&&(o+=":"+s.join(","));return o};function at(i){var r=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return i.toString(r)}$s.prototype.getAttribute=function(r){var o=(this||i).g.filter((function(i){return i.name==r}));return o.length?o[0]:null};function X(i,r,o){return(i=i.getAttribute(r))?i.value:o||null}function bt(i,r){i=i.getAttribute(r);if(!i)throw new P(2,4,4023,r);return i.value}function ct(r,o,s){s=void 0===s?[]:s;(this||i).g=o;(this||i).h=r;(this||i).Bb=s}function dt(r,o){(this||i).name=r;(this||i).value=o}function et(i,r){return i.filter((function(i){return i.name==r}))}function ft(i,r){return i.filter((function(i){return bt(i,"TYPE")==r}))}function gt(i,r){i=t(i);for(var o=i.next();!o.done;o=i.next())if(o=o.value,o.name===r)return o;return null}function ht(i,r,o){o=void 0===o?0:o;return(i=gt(i,r))?Number(i.value):o}function it(i,r,o){return r?jt(i,[r],o):[]}function jt(i,r,o){if(!r.length)return[];r=zb(i,r);i=[];r=t(r);for(var s=r.next();!s.done;s=r.next()){var p=i,y=p.push;var A=s.value;if((s=o)&&s.size){A=String(A).replace(/%7B/g,"{").replace(/%7D/g,"}");var T=A.match(/{\$\w*}/g);if(T){T=t(T);for(var x=T.next();!x.done;x=T.next()){x=x.value;var I=x.slice(2,x.length-1),C=s.get(I);if(!C)throw new P(2,4,4039,I);A=A.replace(x,C)}}s=A}else s=A;y.call(p,s)}return i}function kt(r){(this||i).h=r||"";(this||i).g=0}function lt(i){mt(i,/[ \t]+/gm)}function mt(i,r){r.lastIndex=i.g;r=r.exec(i.h);r=null==r?null:{position:r.index,length:r[0].length,results:r};if(i.g==i.h.length||null==r||r.position!=i.g)return null;i.g+=r.length;return r.results}function nt(i){return i.g==i.h.length?null:(i=mt(i,/[^ \t\n]*/gm))?i[0]:null}function ot(){(this||i).g=0}function pt(i,r){r=Tf(r);r=r.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var o=r.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(o[0]))throw new P(2,4,4015);r=0;for(var s=!0,p=t(o),y=p.next();!y.done;y=p.next())if(y=y.value,/^#(?!EXT)/m.test(y)||s)s=!1;else{if(y=qt(i,y),--i.g,Qh.includes(y.name)){r=1;break}"EXT-X-STREAM-INF"==y.name&&(s=!0)}p=[];s=!0;for(y=0;y<o.length;y++){var A=o[y],T=o[y+1];if(/^#(?!EXT)/m.test(A)||s)s=!1;else{A=qt(i,A);if(ff.includes(A.name)){if(1!=r)throw new P(2,4,4017);A=o.splice(y,o.length-y);o=[];s=[];y=[];T=null;A=t(A);for(var x=A.next();!x.done;x=A.next())x=x.value,/^(#EXT)/.test(x)?(x=qt(i,x),Qh.includes(x.name)?p.push(x):"EXT-X-MAP"==x.name?T=x:"EXT-X-PART"==x.name?y.push(x):"EXT-X-PRELOAD-HINT"==x.name?"PART"==X(x,"TYPE")?y.push(x):"MAP"==X(x,"TYPE")&&(x.name="EXT-X-MAP",T=x):s.push(x)):/^#(?!EXT)/m.test(x)||(x=x.trim(),T&&s.push(T),o.push(new ct(x,s,y)),s=[],y=[]);y.length&&(T&&s.push(T),o.push(new ct("",s,y)));return new Zs(r,p,o)}p.push(A);"EXT-X-STREAM-INF"==A.name&&(A.g.push(new dt("URI",T)),s=!0)}}return new Zs(r,p)}function qt(i,r){i=i.g++;var o=r.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!o)throw new P(2,4,4016,r);r=o[1];var s=o[2];o=[];var p;if(s){s=new kt(s);var y;(y=mt(s,/^([^,=]+)(?:,|$)/g))&&(p=y[1]);for(var A=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;y=mt(s,A);)o.push(new dt(y[1],y[2]||y[3])),lt(s)}return new $s(i,r,o,p)}var Qh="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),ff="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function tt(){}function ut(i){try{var r=vt(i);return qf({uri:i,originalUri:i,data:r.data,headers:{"content-type":r.contentType}})}catch(i){return of(i)}}function vt(i){var o=i.split(":");if(2>o.length||"data"!=o[0])throw new P(2,1,1004,i);o=o.slice(1).join(":").split(",");if(2>o.length)throw new P(2,1,1004,i);var s=o[0];i=r.decodeURIComponent(o.slice(1).join(","));o=s.split(";");s=o[0];var p=!1;1<o.length&&"base64"==o[o.length-1]&&(p=!0,o.pop());var y;y=p?qg(i):Xf(i);return{data:y,contentType:s}}L("shaka.net.DataUriPlugin",tt);tt.parse=ut;xf("data",ut);function wt(i){var r=md(i),o=r.split("/")[0];i=nd(i);return{type:o,mimeType:r,codecs:i,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map}}function xt(i,r){function c(i){return d(i.name)}function d(i){i=i.toLowerCase();switch(i){case"avc1":case"avc3":o.push(i+".42E01E");p=!0;break;case"hev1":case"hvc1":o.push(i+".1.6.L93.90");p=!0;break;case"dvh1":case"dvhe":o.push(i+".05.04");p=!0;break;case"vp09":o.push(i+".00.10.08");p=!0;break;case"av01":o.push(i+".0.01M.08");p=!0;break;case"mp4a":o.push("mp4a.40.2");s=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":o.push(i),s=!0}}var o=[],s=!1,p=!1,y=null,A=null,T=null,x=null,I=null;(new bg).box("moov",gg).box("trak",gg).T("tkhd",(function(i){i=hi(i.reader,i.version);A=String(i.height);T=String(i.width)})).box("mdia",gg).T("mdhd",(function(i){y=fi(i.reader,i.version).language})).box("minf",gg).box("stbl",gg).T("stsd",ig).box("mp4a",(function(i){var r=i.reader;r.skip(6);r.skip(2);r.skip(8);var o=r.Ua();r.skip(2);r.skip(2);r.skip(2);r=r.Ua()+r.Ua()/65536;x=o;I=r;i.reader.xa()?gg(i):c(i)})).box("esds",(function(i){i=ii(i.reader);o.push(i.wa);s=!0})).box("ac-3",c).box("ec-3",c).box("opus",c).box("Opus",c).box("fLaC",c).box("avc1",(function(i){i=ki(i.reader,i.name);o.push(i.wa);p=!0})).box("avc3",(function(i){i=ki(i.reader,i.name);o.push(i.wa);p=!0})).box("hev1",c).box("hvc1",c).box("dvh1",c).box("dvhe",c).box("vp09",c).box("av01",c).box("enca",jg).box("encv",jg).box("sinf",gg).box("frma",(function(i){i=li(i.reader).wa;d(i)})).parse(i||r,!0);if(!o.length)return null;var C=s&&!p,M=new Map;if(p){var N=new rc("video/mp4");i&&N.init(i);N.i(r);i=t(N.j());for(r=i.next();!r.done;r=i.next())r=r.value,M.set(r,r);N.h()}return{type:C?"audio":"video",mimeType:C?"audio/mp4":"video/mp4",codecs:yt(o).join(", "),language:y,height:A,width:T,channelCount:x,sampleRate:I,closedCaptions:M}}function yt(i){var r=new Set,o=[];i=t(i);for(var s=i.next();!s.done;s=i.next()){s=s.value;var p=ld(s);r.has(p)||(o.push(s),r.add(p))}return o}function zt(){var r=this||i;(this||i).g=(this||i).i=null;(this||i).C=1;(this||i).s=new Map;(this||i).J=new Map;(this||i).L=new Map;(this||i).L.set("video",new Map);(this||i).L.set("audio",new Map);(this||i).L.set(ne,new Map);(this||i).L.set("image",new Map);(this||i).va=new Set;(this||i).h=new Map;(this||i).l=null;(this||i).Z="";(this||i).sa=new ot;(this||i).K=-1;(this||i).V=Infinity;(this||i).$=(this||i).Xa=!1;(this||i).u=new Dd((function(){At(r)}));(this||i).aa=_f;(this||i).G=null;(this||i).ua=0;(this||i).m=Infinity;(this||i).ha=(this||i).Aa=(this||i).M=0;(this||i).N=new uf;(this||i).H=new Map;(this||i).I=new Map;(this||i).W=new Map;(this||i).Wa=(this||i).D=!1;(this||i).Ra=new Yb(5);(this||i).j=null}p=zt.prototype;p.configure=function(r){(this||i).g=r;(this||i).j&&(this||i).j.configure((this||i).g)};p.start=function(r,o){var s,p=this||i;return K((function(i){return 1==i.g?(p.i=o,p.D=o.isLowLatencyMode(),D(i,Ct(p,[r]),2)):3!=i.g?(s=i.h,p.Z=s.uri,D(i,Dt(p,s.data,r),3)):i.return(p.G)}))};p.stop=function(){(this||i).u&&((this||i).u.stop(),(this||i).u=null);var r=[];(this||i).N&&(r.push((this||i).N.destroy()),(this||i).N=null);(this||i).g=(this||i).i=null;(this||i).va.clear();(this||i).G=null;(this||i).h.clear();(this||i).J.clear();(this||i).I.clear();(this||i).s.clear();(this||i).W.clear();(this||i).j&&(this||i).j.destroy();return Promise.all(r)};p.update=function(){var r,o,s,p,y,A,T,x,I,C=this||i;return K((function(i){if(1==i.g){if(!Et(C))return i.return();r=[];o=Array.from(C.h.values());C.m=Infinity;s=o.filter((function(i){return i.stream.segmentIndex}));p=t(s);for(y=p.next();!y.done;y=p.next())A=y.value,r.push(Ft(C,A));return D(i,Promise.all(r),2)}Gt(C,s.map((function(i){return i.stream})));T=s.some((function(i){return 0==i.vd}));s.length&&!T&&(x=Gf,It(C,x.Fh),I=s.map((function(i){return i.Qb})),C.l.gb(Math.min.apply(Math,w(I))),C.i.updateDuration());T&&Jt(C);F(i)}))};function Kt(i,r){return Et(i)?i.L.get(r.type):r.ye}function Ft(i,r){var o,s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q,J,$,ne,re,xe,Ne,_e,Ke,qe;return K((function(Ze){if(1==Ze.g){o=[];s=t(r.ba());for(p=s.next();!p.done;p=s.next())y=p.value,A=new fb(y),T=A.g,r.$d&&(0<=r.rb&&T.add("_HLS_msn",String(r.rb)),0<=r.sb&&T.add("_HLS_part",String(r.sb))),r.ae&&T.add("_HLS_skip","YES"),xb(T)&&kb(A,T),o.push(A.toString());return D(Ze,Ct(i,o,!0),2)}x=Ze.h;if(!r.stream.segmentIndex)return Ze.return();I=pt(i.sa,x.data);if(1!=I.type)throw new P(2,4,4017);C=x.uri;C==x.originalUri||r.ba().includes(C)||r.jh.push(C);M=et(I.g,"EXT-X-DEFINE");N=Lt(i,M,C);_=r.stream;j=Kt(i,r);B=Mt(I,_.mimeType);z=B.keyIds;G=B.drmInfos;q=function(i,r){return i.size===r.size&&[].concat(w(i)).every((function(i){return r.has(i)}))};q(_.keyIds,z)||(_.keyIds=z,_.drmInfos=G,i.i.newDrmInfo(_));H=Nt(i,I,_,j,N,r.ba);Y=H.segments;(Q=H.bandwidth)&&(_.bandwidth=Q);_.segmentIndex.Cd(Y,i.l.Ab());Y.length&&(J=ht(I.g,"EXT-X-MEDIA-SEQUENCE",0),ne=($=gt(I.g,"EXT-X-SKIP"))?Number(X($,"SKIPPED-SEGMENTS")):0,re=Ot(J,Y),xe=re.rb,Ne=re.sb,r.rb=xe+ne,r.sb=Ne,_e=j.get(J),_.segmentIndex.yb(_e));Ke=Y[0];r.yc=Ke.startTime;qe=Y[Y.length-1];r.Qb=qe.endTime;gt(I.g,"EXT-X-ENDLIST")&&(r.vd=!0);Pt(i,I);F(Ze)}))}p.onExpirationUpdated=function(){};p.onInitialVariantChosen=function(){};p.banLocation=function(r){(this||i).j&&(this||i).j.i.set(r,Date.now()+6e4)};function Qt(i,r){for(var o=-1==i.K,s=t(r),p=s.next();!p.done;p=s.next()){p=p.value;var y=p.stream.segmentIndex,A=Kt(i,p);if(y=y.g[0]||null){A=t(A);for(var T=A.next();!T.done;T=A.next()){T=t(T.value);var x=T.next().value;if(T.next().value==y.startTime){o&&(i.K=Math.max(i.K,x));p.pf=x;break}}}}if(!(0>i.K))for(r=t(r),p=r.next();!p.done;p=r.next())(o=p.value,s=o.stream.segmentIndex)&&(s.g.splice(0,i.K-o.pf),s=s.g[0]||null)&&(s=-s.startTime,o.stream.segmentIndex.offset(s),Rt(i,o,s))}function St(i,r){if(Infinity==i.V){r=t(r);for(var o=r.next();!o.done;o=r.next()){var s=o.value.stream.segmentIndex.g[0]||null;null!=s&&null!=s.oa&&(i.V=Math.min(i.V,s.oa))}}r=i.V;if(Infinity!=r)for(s=t(i.h.values()),o=s.next();!o.done;o=s.next()){o=o.value;var p=o.stream.segmentIndex;if(null!=p){var y=p.g[0]||null;if(null==y.oa)Qa("Missing EXT-X-PROGRAM-DATE-TIME for stream",o.ba(),"Expect AV sync issues!");else for(Rt(i,o,y.oa-r-y.startTime),o=t(p),p=o.next();!p.done;p=o.next())p.value.sg(r)}}}function Rt(i,r,o){r.yc+=o;r.Qb+=o;i=Kt(i,r);for(var s=t(i),p=s.next();!p.done;p=s.next()){var y=t(p.value);p=y.next().value;y=y.next().value;i.set(p,y+o)}r.ba()}function Dt(i,r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q,J,$,ne,re,xe,Ne,_e,Ke,qe,Ze,rt;return K((function(st){switch(st.g){case 1:s=pt(i.sa,r);p=et(s.g,"EXT-X-DEFINE");y=[];A=[];T=[];if(1==s.type)return B=function(){return[o]},D(st,Tt(i,s,B),6);Ut(i,p);x=et(s.g,"EXT-X-MEDIA");I=et(s.g,"EXT-X-STREAM-INF");C=et(s.g,"EXT-X-IMAGE-STREAM-INF");M=et(s.g,"EXT-X-I-FRAME-STREAM-INF");N=et(s.g,"EXT-X-SESSION-KEY");_=et(s.g,"EXT-X-SESSION-DATA");j=et(s.g,"EXT-X-CONTENT-STEERING");Vt(i,_);return D(st,Wt(i,j),4);case 4:return Xt(i,I),Yt(i,x),y=Zt(i,I,N,x),A=$t(i,x),D(st,au(i,C,M),5);case 5:T=st.h;st.F(3);break;case 6:return z=st.h,G=z.type,q=z.mimeType,H=z.codecs,Y=z.language,Q=z.height,J=z.width,$=z.channelCount,ne=z.sampleRate,re=z.closedCaptions,D(st,bu(i,i.C++,s,B,o,H,G,Y,!0,"Media Playlist",$,re,null,!1,ne,!1,q),7);case 7:xe=st.h,i.h.set(o,xe),"video"==G&&cu(xe.stream,J,Q,null,null,null),y.push({id:0,language:Kb(Y||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==G?xe.stream:null,video:"video"==G?xe.stream:null,bandwidth:xe.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!i.i)throw new P(2,7,7001);i.l=new sj(null,0);i.l.Vc(!0);1==s.type&&(Et(i)&&(du(i,s),Ne=i.m,i.u.S(Ne)),_e=Array.from(i.h.values()),eu(i,_e),Jt(i));i.G={presentationTimeline:i.l,variants:y,textStreams:A,imageStreams:T,offlineSessionIds:[],minBufferTime:0,sequenceMode:i.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:i.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null};if(i.$||!i.g.hls.disableCodecGuessing){st.F(8);break}Ke=[];qe=t(i.G.variants);for(Ze=qe.next();!Ze.done;Ze=qe.next())rt=Ze.value,rt.audio&&""===rt.audio.codecs&&Ke.push(rt.audio.createSegmentIndex()),rt.video&&""===rt.video.codecs&&Ke.push(rt.video.createSegmentIndex());return D(st,Promise.all(Ke),8);case 8:i.i.makeTextStreamsForClosedCaptions(i.G),F(st)}}))}function Tt(i,r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y;return K((function(Q){switch(Q.g){case 1:s=wt(i.g.hls.mediaPlaylistFullMimeType);if(!r.segments.length)return Q.return(s);p=Math.trunc((r.segments.length-1)/2);y=r.segments[p];A=it(o(),r.segments[0].h);T=A[0];x=new fb(T);I=x.Ya.split(".").pop();if(C=gf[I])return Q.return(wt(C));M=Ta;N=null;_=gu(i,r,y.g,o);i.W.clear();if(!_){Q.F(2);break}j=ok(_.ba(),_.Pb(),_.Mb(),i.g.retryParameters);return D(Q,hu(i,j,M,{type:0}),3);case 3:B=Q.h,N=B.data;case 2:return z=Af(A,i.g.retryParameters),D(Q,hu(i,z,M,{type:1}),4);case 4:G=Q.h;(q=G.headers["content-type"])&&(q=q.split(";")[0].toLowerCase());if("ts"==I||"video/mp2t"==q){var J=G.data;var $=lc(J);$=(new wi).parse($);var ne=$.sd();$=$.Lf();var re=[],xe=!1,Ne=!1;switch(ne.audio){case"aac":re.push("mp4a.40.2");xe=!0;break;case"mp3":re.push("mp4a.40.34");xe=!0;break;case"ac3":re.push("ac-3");xe=!0;break;case"ec3":re.push("ec-3"),xe=!0}switch(ne.video){case"avc":$.wa?re.push($.wa):re.push("avc1.42E01E");Ne=!0;break;case"hvc":$.wa?re.push($.wa):re.push("hvc1.1.6.L93.90"),Ne=!0}if(re.length){ne=xe&&!Ne;xe=new Map;if(Ne){Ne=new rc("video/mp2t");Ne.i(J);J=t(Ne.j());for(var _e=J.next();!_e.done;_e=J.next())_e=_e.value,xe.set(_e,_e);Ne.h()}$={type:ne?"audio":"video",mimeType:"video/mp2t",codecs:re.join(", "),language:null,height:$.height,width:$.width,channelCount:null,sampleRate:null,closedCaptions:xe}}else $=null;if(H=$)return Q.return(H)}else if(("mp4"==I||"cmfv"==I||"m4s"==I||"video/mp4"==q||"audio/mp4"==q||"video/iso.segment"==q)&&(Y=xt(N,G.data)))return Q.return(Y);return Q.return(s)}}))}function Jt(i){if(Et(i)){if(i.aa==zf){var r=ju(i);i.g.hls.useSafariBehaviorForLive&&(r=i.l.s);isNaN(i.g.availabilityWindowOverride)||(r=i.g.availabilityWindowOverride);i.l.Ne(r)}if(!i.l.m){r=Array.from(i.h.values()).filter((function(i){return i.stream.segmentIndex}));r=t(r);for(var o=r.next();!o.done;o=r.next())o=o.value,("audio"==o.type||"video"==o.type)&&(o=o.stream.segmentIndex.get(0))&&o.oa&&i.l.og(o.oa)}}else i.l.gb(ku(i));i.l.ve()}function Ut(i,r){var o=new fb(i.Z).g;r=t(r);for(var s=r.next();!s.done;s=r.next()){var p=s.value;s=X(p,"NAME");var y=X(p,"VALUE");p=X(p,"QUERYPARAM");s&&y&&(i.s.has(s)||i.s.set(s,y));p&&(s=o.get(p)[0])&&!i.s.has(s)&&i.s.set(p,s)}}function Lt(i,r,o){o=new fb(o).g;var s=new Map;r=t(r);for(var p=r.next();!p.done;p=r.next()){var y=p.value,A=X(y,"NAME"),T=X(y,"VALUE");p=X(y,"QUERYPARAM");y=X(y,"IMPORT");A&&T&&(s.has(A)||s.set(A,T));p&&(A=o.get(p)[0])&&!s.has(A)&&s.set(p,A);y&&(p=i.s.get(y))&&s.set(y,p)}return s}function Xt(i,r){r=t(r);for(var o=r.next();!o.done;o=r.next()){var s=o.value,p=X(s,"AUDIO");o=X(s,"VIDEO");var y=X(s,"SUBTITLES");s=lu(i,s);if(y){var A=Cb(ne,s);i.I.set(y,A);vc(s,A)}p&&(y=Cb("audio",s),y||(y=i.g.hls.defaultAudioCodec),i.I.set(p,y));o&&(p=Cb("video",s),p||(p=i.g.hls.defaultVideoCodec),i.I.set(o,p))}}function Vt(i,r){r=t(r);for(var o=r.next();!o.done;o=r.next()){var s=o.value,p=X(s,"DATA-ID");o=X(s,"URI");var y=X(s,"LANGUAGE");s=X(s,"VALUE");p=(new Map).set("id",p);o&&p.set("uri",it([i.Z],o,i.s)[0]);y&&p.set("language",y);s&&p.set("value",s);o=new O("sessiondata",p);i.i&&i.i.onEvent(o)}}function Wt(i,r){var o,s,p,y,A,T;return K((function(x){if(!i.i||!i.g)return x.return();s=t(r);for(p=s.next();!p.done;p=s.next())if(y=p.value,A=X(y,"PATHWAY-ID"),T=X(y,"SERVER-URI"),A&&T){i.j=new Jr(i.i);i.j.configure(i.g);i.j.j=[i.Z];i.j.setManifestType("HLS");i.j.h=A;o=Kr(i.j,T);break}return D(x,o,0)}))}function $t(i,r){var o=ft(r,"SUBTITLES");r=o.map((function(r){if(i.g.disableText)return null;try{return mu(i,[r],new Map).stream}catch(r){if(i.g.hls.ignoreTextStreamFailures)return null;throw r}}));o=t(o);for(var s=o.next();!s.done;s=o.next()){var p=bt(s.value,"GROUP-ID");if((s=i.I.get(p))&&(p=i.J.get(p))){p=t(p);for(var y=p.next();!y.done;y=p.next())y=y.value,y.stream.codecs=s,y.stream.mimeType=nu(ne,s)||ou(ne)}}return r.filter((function(i){return i}))}function au(i,r,o){var s,p;return K((function(y){if(1==y.g)return s=r.map((function(r){var o,s;return K((function(p){if(1==p.g){if(i.g.disableThumbnails)return p.return(null);ta(p,2);return D(p,pu(i,r),4)}if(2!=p.g)return o=p.h,p.return(o.stream);s=wa(p);if(i.g.hls.ignoreImageStreamFailures)return p.return(null);throw s}))})).concat(o.map((function(r){if(i.g.disableThumbnails)return null;try{var o=bt(r,"URI"),s=X(r,"CODECS")||"";if(i.h.has(o))var p=i.h.get(o);else{var y=X(r,"LANGUAGE"),A=X(r,"NAME"),T=X(r,"CHARACTERISTICS"),x=qu(i,i.C++,[o],s,"image",y,!1,A,null,null,T,!1,null,!1),I=X(r,"RESOLUTION"),C=t(I?I.split("x"):[null,null]),M=C.next().value,N=C.next().value;x.stream.width=Number(M)||void 0;x.stream.height=Number(N)||void 0;var _=X(r,"BANDWIDTH");_&&(x.stream.bandwidth=Number(_));i.h.set(o,x);p=x}r=p;return"mjpg"!==r.stream.codecs?null:r.stream}catch(r){if(i.g.hls.ignoreImageStreamFailures)return null;throw r}}))),D(y,Promise.all(s),2);p=y.h;return y.return(p.filter((function(i){return i})))}))}function ru(i,r,o){r=r.filter((function(i){var r=X(i,"URI")||"";return"SUBTITLES"!=X(i,"TYPE")&&""!=r}));var s={};r=t(r);for(var p=r.next();!p.done;p=r.next()){p=p.value;var y=at(p);s[y]?s[y].push(p):s[y]=[p]}for(var A in s)mu(i,s[A],o)}function Zt(i,r,o,s){var p=[],y=new Set;if(0<o.length){o=t(o);for(var A=o.next();!A.done;A=o.next()){A=A.value;var T=bt(A,"METHOD");if("NONE"!=T&&"AES-128"!=T&&(T=X(A,"KEYFORMAT")||"identity",A=(T=Of[T])?T(A,""):null)){if(A.keyIds){T=t(A.keyIds);for(var x=T.next();!x.done;x=T.next())y.add(x.value)}p.push(A)}}}o={};r=t(r);for(A=r.next();!A.done;A=r.next())A=A.value,T=at(A),o[T]?o[T].push(A):o[T]=[A];r=[];for(var I in o){x=o[I];var C=x[0];A=X(C,"FRAME-RATE");T=Number(X(C,"AVERAGE-BANDWIDTH"))||Number(bt(C,"BANDWIDTH"));var M=X(C,"RESOLUTION"),N=t(M?M.split("x"):[null,null]);M=N.next().value;N=N.next().value;var _=X(C,"VIDEO-RANGE");(C=X(C,"REQ-VIDEO-LAYOUT"))&&C.includes(",")&&(C=C.split(",").filter((function(i){return"CH-STEREO"==i||"CH-MONO"==i}))[0]);C=C||"CH-MONO";x=tu(i,x,s,T);r.push.apply(r,w(uu(i,x.audio,x.video,T,M,N,A,_,C,p,y)))}return r.filter((function(i){return null!=i}))}function tu(i,r,o,s){for(var p={audio:[],video:[]},y=new Map,A=[],T=!1,x=!1,I=t(r),C=I.next();!C.done;C=I.next()){var M=C.value;C=X(M,"AUDIO");var N=X(M,"VIDEO"),_=C||N;_&&(A.includes(_)||A.push(_),(M=X(M,"PATHWAY-ID"))&&y.set(_,M),C?T=!0:N&&(x=!0))}A.length&&o.length&&(I=o.filter((function(i){return A.includes(bt(i,"GROUP-ID"))})),ru(i,I,y));I=(y=A.sort().join(","))&&i.J.has(y)?i.J.get(y):[];T?p.audio.push.apply(p.audio,w(I)):x&&p.video.push.apply(p.video,w(I));C=!1;var j=r.map((function(i){return bt(i,"URI")}));x=p.audio.find((function(i){return i&&i.ba().find((function(i){return j.includes(i)}))}));T=lu(i,r[0]);N=Cb("video",T);(_=Cb("audio",T))&&!N?(x="audio",C=0<p.audio.length):!p.audio.length&&!p.video.length&&_&&N?(x="video",T=[[N,_].join()]):p.audio.length&&x?(x="audio",C=!0):x=p.video.length&&!p.audio.length?"audio":"video";if(!C){var B=M=_=N=C=null;!I.length&&(o=o.find((function(i){var r=X(i,"URI")||"",o=X(i,"TYPE");i=bt(i,"GROUP-ID");return"SUBTITLES"!=o&&""==r&&A.includes(i)})))&&(C=X(o,"LANGUAGE"),N=X(o,"NAME"),_=vu(o),wu(o),M=X(o,"CHARACTERISTICS"),B=xu(o));i=yu(i,r,T,x,C,N,_,M,B);y&&(i.stream.groupId=y);I.length||(i.stream.bandwidth=s);p[i.stream.type]=[i]}return p}function lu(i,r){var o=X(r,"CODECS")||"";i.$=0<o.length;i.$||i.g.hls.disableCodecGuessing||(r=[],i.g.disableVideo||r.push(i.g.hls.defaultVideoCodec),i.g.disableAudio||r.push(i.g.hls.defaultAudioCodec),o=r.join(","));i=new Set;r=[];o=t(o.split(/\s*,\s*/));for(var s=o.next();!s.done;s=o.next()){s=s.value;var p=ld(s);i.has(p)||(r.push(s),i.add(p))}return r}function vu(i){return(i=X(i,"CHANNELS"))?parseInt(i.split("/")[0],10):null}function xu(i){return(i=X(i,"SAMPLE-RATE"))?parseInt(i,10):null}function wu(i){return!!(i=X(i,"CHANNELS"))&&i.includes("/JOC")}function uu(i,r,o,s,p,y,A,T,x,I,C){for(var M=t(o),N=M.next();!N.done;N=M.next())cu(N.value.stream,p,y,A,T,x);p=i.g.disableAudio;r.length&&!p||(r=[null]);p=i.g.disableVideo;o.length&&!p||(o=[null]);p=[];r=t(r);for(y=r.next();!y.done;y=r.next())for(y=y.value,A=t(o),T=A.next();!T.done;T=A.next()){var _=T.value;(T=y?y.stream:null)&&(T.drmInfos=I,T.keyIds=C);(x=_?_.stream:null)&&(x.drmInfos=I,x.keyIds=C);M=y?y.stream.drmInfos:null;N=_?_.stream.drmInfos:null;_=_?_.ba().sort().join(","):"";var j=y?y.ba().sort().join(","):"";_=_+" - "+j;T&&x&&!Dh(M,N)||i.va.has(_)||(T={id:i.C++,language:T?T.language:"und",disabledUntilTime:0,primary:!!T&&T.primary||!!x&&x.primary,audio:T,video:x,bandwidth:s,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},p.push(T),i.va.add(_))}return p}function Yt(i,r){r=ft(r,"CLOSED-CAPTIONS");r=t(r);for(var o=r.next();!o.done;o=r.next()){var s=o.value,p=X(s,"LANGUAGE");o=Kb(p||"und");p||(p=X(s,"NAME"))&&(o=p);p=bt(s,"GROUP-ID");s=bt(s,"INSTREAM-ID").replace("SERVICE","svc");i.H.get(p)||i.H.set(p,new Map);i.H.get(p).set(s,o)}}function mu(i,r,o){for(var s=[],p=[],y=new Map,A=t(r),T=A.next();!T.done;T=A.next()){var x=T.value;T=bt(x,"URI");x=bt(x,"GROUP-ID");s.push(T);p.push(x);y.set(x,T)}A=p.sort().join(",");T=r[0];r="";x=bt(T,"TYPE").toLowerCase();"subtitles"==x&&(x=ne);if(x==ne)r=X(T,"CODECS")||"";else{p=t(p);for(var I=p.next();!I.done;I=p.next())if(I=I.value,i.I.has(I)){r=i.I.get(I);break}}p=s.sort().join(",");if(i.h.has(p))return i.h.get(p);I=i.C++;if(i.j){y=t(y);for(var C=y.next();!C.done;C=y.next()){var M=t(C.value);C=M.next().value;M=M.next().value;(C=o.get(C))&&Nr(i.j,I,C,M)}}o=X(T,"LANGUAGE");y=X(T,"NAME");C="YES"==X(T,"DEFAULT");M="audio"==x?vu(T):null;var N="audio"==x&&wu(T),_=X(T,"CHARACTERISTICS"),j="YES"==X(T,"FORCED");T="audio"==x?xu(T):null;s=qu(i,I,s,r,x,o,C,y,M,null,_,j,T,N);s.stream&&(s.stream.groupId=A);i.J.has(A)?i.J.get(A).push(s):i.J.set(A,[s]);i.h.set(p,s);return s}function pu(i,r){var o,s,p,y,A,T,x,I,C,M;return K((function(N){if(1==N.g){o=bt(r,"URI");s=X(r,"CODECS","jpeg")||"";if(i.h.has(o))return N.return(i.h.get(o));p=X(r,"LANGUAGE");y=X(r,"NAME");A=X(r,"CHARACTERISTICS");T=qu(i,i.C++,[o],s,"image",p,!1,y,null,null,A,!1,null,!1);return(x=X(r,"RESOLUTION"))?D(N,T.stream.createSegmentIndex(),3):N.F(2)}2!=N.g&&(I=T.stream.segmentIndex.get(0),C=I.tilesLayout)&&(T.stream.width=Number(x.split("x")[0])*Number(C.split("x")[0]),T.stream.height=Number(x.split("x")[1])*Number(C.split("x")[1]));(M=X(r,"BANDWIDTH"))&&(T.stream.bandwidth=Number(M));i.h.set(o,T);return N.return(T)}))}function yu(i,r,o,s,p,y,A,T,x){for(var I=i.C++,C=[],M=t(r),N=M.next();!N.done;N=M.next()){var _=N.value;N=bt(_,"URI");_=X(_,"PATHWAY-ID");i.j&&_&&Nr(i.j,I,_,N);C.push(N)}M=C.sort().join(",");if(i.h.has(M))return i.h.get(M);e:{r=X(r[0],"CLOSED-CAPTIONS");if("video"==s){if(r&&"NONE"!=r){r=i.H.get(r);break e}if(!r&&i.H.size)for(r=t(i.H.keys()).next();!r.done;){r=i.H.get(r.value);break e}}r=null}o=Bb(s,o);s=qu(i,I,C,o,s,p,!1,y,A,r,T,!1,x,!1);i.h.set(M,s);return s}function qu(i,r,o,s,p,y,A,T,x,I,C,M,N,_){function u(r){var o,G,q,H,Y,Q,J,$,ne,xe,Ne,_e,Ke,qe,Ze,rt,st;return K((function(_t){switch(_t.g){case 1:return o=z.ba(),D(_t,Ct(i,z.ba(),!0),2);case 2:G=_t.h;if(r.aborted)return _t.return();q=G.uri;q==G.originalUri||o.includes(q)||B.push(q);H=pt(i.sa,G.data);Y=void 0;if(i.$||!i.g.hls.disableCodecGuessing){_t.F(3);break}return D(_t,Tt(i,H,v),4);case 4:Q=_t.h,Y=Q.mimeType,s=Q.codecs;case 3:return J=Et(i),D(_t,bu(i,0,H,v,q,s,p,y,A,T,x,I,C,M,N,_,Y),5);case 5:$=_t.h;if(r.aborted)return _t.return();ne=$.stream;Et(i)&&!J&&du(i,H);z.yc=$.yc;z.Qb=$.Qb;z.ae=$.ae;z.$d=$.$d;z.vd=$.vd;z.ye=$.ye;z.rb=$.rb;z.sb=$.sb;z.Sf=!0;j.segmentIndex=ne.segmentIndex;j.encrypted=ne.encrypted;j.drmInfos=ne.drmInfos;j.keyIds=ne.keyIds;j.mimeType=ne.mimeType;j.bandwidth=j.bandwidth||ne.bandwidth;j.codecs=j.codecs||ne.codecs;j.drmInfos.length&&i.i.newDrmInfo(j);xe=re;if(p==xe.ia||p==xe.U)for(Ne=t(i.h.values()),_e=Ne.next();!_e.done;_e=Ne.next())Ke=_e.value,Ke.Sf||Ke.type!=p||(Ke.stream.mimeType=ne.mimeType);p==xe.Da&&(qe=ne.segmentIndex.get(0))&&qe.ka&&(j.mimeType="application/mp4");zu(i)&&(i.Xa?eu(i,[z]):(i.Xa=!0,Ze=Array.from(i.h.values()),rt=Ze.filter((function(i){return i.stream.segmentIndex})),eu(i,rt),Jt(i),st=i.m,0<st&&i.u.S(st)));F(_t)}}))}function v(){return i.j&&1<o.length?Or(i.j,r):B.concat(jt([i.Z],o,i.s))}var j=Au(i,s,p,y,A,T,x,I,C,M,N,_),B=[],z={stream:j,type:p,jh:B,ba:v,yc:0,Qb:0,ye:new Map,ae:!1,$d:!1,vd:!1,pf:-1,rb:-1,sb:-1,Sf:!1},G=null,q=new AbortController;j.createSegmentIndex=function(){if(G)return G;q=new AbortController;return G=new Promise((function(i){i(u(q.signal))}))};j.closeSegmentIndex=function(){G&&!j.segmentIndex&&q.abort();j.segmentIndex&&(j.segmentIndex.release(),j.segmentIndex=null);G=null};return z}function ku(i){var r=Infinity;i=t(i.h.values());for(var o=i.next();!o.done;o=i.next())o=o.value,o.stream.segmentIndex&&"text"!=o.stream.type&&(r=Math.min(r,o.Qb));return r}function ju(i){var r=Infinity,o=Infinity;i=t(i.h.values());for(var s=i.next();!s.done;s=i.next())s=s.value,s.stream.segmentIndex&&"text"!=s.stream.type&&(r=Math.min(r,s.Qb),o=Math.min(o,s.yc));return r-o}function Gt(i,r){var o=[];r=t(r);for(var s=r.next();!s.done;s=r.next())s=s.value,s.segmentIndex&&Pj(s.segmentIndex,(function(i){o.push(i)}));i.l.Dd(o)}function eu(i,r){if(!Et(i))for(var o=ku(i),s=t(r),p=s.next();!p.done;p=s.next())p.value.stream.segmentIndex.Ic(0,o);Gt(i,r.map((function(i){return i.stream})));i.g.hls.ignoreManifestProgramDateTime?Qt(i,r):St(i,r)}function zu(i){if(!i.G)return!1;var r=[],o=[];i=t(i.G.variants);for(var s=i.next();!s.done;s=i.next())s=s.value,s.video&&r.push(s.video),s.audio&&o.push(s.audio);return!(0<r.length&&!r.some((function(i){return i.segmentIndex}))||0<o.length&&!o.some((function(i){return i.segmentIndex})))}function bu(i,r,o,s,p,y,A,T,x,I,C,M,N,_,j,B,z){var G,q,H,Y,Q,J,$,ne,re,xe,Ne,_e,Ke,qe,Ze,rt,st,_t,Bt,Ht,ln,Ln,_n;return K((function(r){if(1==r.g){if(1!=o.type)throw new P(2,4,4017);G=et(o.g,"EXT-X-DEFINE");q=Lt(i,G,p);var Kn=gt(o.g,"EXT-X-PLAYLIST-TYPE"),Jn=gt(o.g,"EXT-X-ENDLIST");Jn=Kn&&"VOD"==Kn.value||Jn;Kn=Kn&&"EVENT"==Kn.value&&!Jn;Kn=!Jn&&!Kn;It(i,Jn?_f:Kn?zf:Vf);Et(i)&&Pt(i,o);return z?r.F(2):D(r,Cu(i,A,y,o,q,s),3)}2!=r.g&&(z=r.h);H=Mt(o,z);Y=H.drmInfos;Q=H.keyIds;J=H.encrypted;$=H.Jh;if(J&&!Y.length&&!$)throw new P(2,4,4026);ne=Au(i,y,A,T,x,I,C,M,N,_,j,B);ne.encrypted=J;ne.drmInfos=Y;ne.keyIds=Q;ne.mimeType=z;re=Et(i)?i.L.get(A):new Map;xe=Nt(i,o,ne,re,q,s);Ne=xe.segments;(_e=xe.bandwidth)&&(ne.bandwidth=_e);Et(i)&&Pt(i,o);Ke=Ne[0].startTime;qe=Ne[Ne.length-1];Ze=qe.endTime;rt=new Oj(Ne);ne.segmentIndex=rt;_t=!!(st=gt(o.g,"EXT-X-SERVER-CONTROL"))&&null!=st.getAttribute("CAN-SKIP-UNTIL");Bt=!!st&&null!=st.getAttribute("CAN-BLOCK-RELOAD");Ht=ht(o.g,"EXT-X-MEDIA-SEQUENCE",0);ln=Ot(Ht,Ne);Ln=ln.rb;_n=ln.sb;return r.return({stream:ne,type:A,jh:[],ba:s,yc:Ke,Qb:Ze,ae:_t,$d:Bt,vd:!1,pf:-1,rb:Ln,sb:_n,ye:re,Sf:!1})}))}function Ot(i,r){i=i+r.length-1;var o=-1;if(!r.length)return i++,{rb:i,sb:o};r=r[r.length-1];var s=r.g;if(!r.g.length)return i++,r.m&&(o=0),{rb:i,sb:o};o=s.length-1;s[s.length-1].l||(i++,o=0);return{rb:i,sb:o}}function Au(i,r,o,s,p,y,A,T,x,I,C,M){var N=nu(o,r)||ou(o),_=[];if(x){x=t(x.split(","));for(var j=x.next();!j.done;j=x.next())_.push(j.value)}x=void 0;j=null;o==ne?x=_.includes("public.accessibility.transcribes-spoken-dialog")&&_.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":_.includes("public.accessibility.describes-video")&&(j="visually impaired");_.length||"subtitle"!==x||_.push("subtitle");return{id:i.C++,originalId:y,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:N,codecs:r,kind:o==ne?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Kb(s||"und"),originalLanguage:s,label:y,type:o,primary:p,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:_,forced:I,channelsCount:A,audioSamplingRate:C,spatialAudio:M,closedCaptions:T,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:j,external:!1,fastSwitching:!1}}function Mt(i,r){var o=[];if(i.segments){i=t(i.segments);for(var s=i.next();!s.done;s=i.next())s=et(s.value.g,"EXT-X-KEY"),o.push.apply(o,w(s))}s=i=!1;var p=[],y=new Set;o=t(o);for(var A=o.next();!A.done;A=o.next()){A=A.value;var T=bt(A,"METHOD");if("NONE"!=T)if(i=!0,"AES-128"==T)s=!0;else if(T=X(A,"KEYFORMAT")||"identity",A=(T=Of[T])?T(A,r):null){if(A.keyIds){T=t(A.keyIds);for(var x=T.next();!x.done;x=T.next())y.add(x.value)}p.push(A)}}return{drmInfos:p,keyIds:y,encrypted:i,Jh:s}}function Du(i,o,s,p,y){if(!r.crypto||!r.crypto.subtle)throw Ra("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new P(2,4,4042);var A=0,T=X(o,"IV","");if(T){var x=rg(T.substr(2));if(16!=x.byteLength)throw new P(2,4,4048)}else A=ht(s.g,"EXT-X-MEDIA-SEQUENCE",0);var I={method:"AES-128",iv:x,firstMediaSequenceNumber:A,fetchKey:function(){var s,A,T,x,C;return K((function(M){if(1==M.g)return s=it(p(),bt(o,"URI"),y),A=Af(s,i.g.retryParameters),D(M,hu(i,A,6),2);if(3!=M.g){T=M.h;if(!T.data||16!=T.data.byteLength)throw new P(2,4,4049);x={name:"AES-CBC"};C=I;return D(M,r.crypto.subtle.importKey("raw",T.data,x,!0,["decrypt"]),3)}C.cryptoKey=M.h;I.fetchKey=void 0;F(M)}))}};return I}function Pt(i,r){var o=Infinity,s=r.segments;if(s.length)for(var p=s.length-1;0<=p;){var y=gt(s[p].g,"EXTINF");if(y){o=Number(y.value.split(",")[0]);break}p--}s=gt(r.g,"EXT-X-TARGETDURATION");if(!s)throw new P(2,4,4024,"EXT-X-TARGETDURATION");s=Number(s.value);(p=gt(r.g,"EXT-X-PART-INF"))&&(i.M=Number(bt(p,"PART-TARGET")));r=gt(r.g,"EXT-X-SERVER-CONTROL");i.D&&i.M?(i.m=i.Wa?5*i.M<=o?Math.min(i.M,i.m):Math.min(o,i.m):Math.min(i.M,i.m),i.ha=r?Number(bt(r,"PART-HOLD-BACK")):0):(i.m=Math.min(o,i.m),o=r?r.getAttribute("HOLD-BACK"):null,i.Aa=o?Number(o.value):0);i.ua=Math.max(s,i.ua)}function du(i,r){if(i.g.defaultPresentationDelay)r=i.g.defaultPresentationDelay;else if(i.ha)r=i.ha;else if(i.Aa)r=i.Aa;else{r=r.segments.length;var o=i.g.hls.liveSegmentsDelay;o>r-2&&(o=Math.max(1,r-2));r=i.ua*o}i.l.og(0);i.l.oh(r);i.l.Vc(!1)}function gu(i,r,o,s,p){var y=gt(o,"EXT-X-MAP");if(!y)return null;var A=bt(y,"URI"),T=it(s(),A,p);A=[T.toString(),X(y,"BYTERANGE","")].join("-");if(!i.W.has(A)){var x=void 0,I=null;o=t(o);for(var C=o.next();!C.done;C=o.next())C=C.value,"EXT-X-KEY"==C.name?"AES-128"==bt(C,"METHOD")&&C.id<y.id&&(x=Du(i,C,r,s,p)):"EXT-X-BYTERANGE"==C.name&&C.id<y.id&&(I=C);r=Eu(T,y,I,x);i.W.set(A,r)}return i.W.get(A)}function Eu(i,r,o,s){var p=0,y=null;r=X(r,"BYTERANGE");!r&&o&&(r=o.value);r&&(p=r.split("@"),y=Number(p[0]),p=Number(p[1]),y=p+y-1,s&&(o=y+1-p,o%16&&(y+=16-o%16)));return new Nh((function(){return i}),p,y,null,null,null,s)}function Fu(i,o,s,p,y,A,T,x,I){var C=p.g,M=gt(C,"EXTINF"),N=0,_=0,j=null;p.Bb.length&&!i.D&&Ra("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var B=null;if(!i.g.hls.ignoreManifestProgramDateTime){var z=gt(C,"EXT-X-PROGRAM-DATE-TIME");z&&z.value&&(B=Gg(z.value))}var G=vo;gt(C,"EXT-X-GAP")&&(G=2);if(!M){if(0==p.Bb.length)throw new P(2,4,4024,"EXTINF");if(!i.D)return null}var q=[];z=!1;var H=null,Y=!1,Q=!1;if(i.D&&p.Bb.length){N=("video/mp4"==T.mimeType||"audio/mp4"==T.mimeType)&&r.ReadableStream&&i.g.hls.allowLowLatencyByteRangeOptimization;for(var J=B,$={},ne=0;ne<p.Bb.length;$={hd:$.hd,Ud:$.Ud},ne++){var re=p.Bb[ne],xe=0==ne?s:q[q.length-1],Ne=0==ne?y:xe.endTime,_e=Number(X(re,"DURATION"))||i.M;if(_e){var Ke=Ne+_e,qe=0,Ze=null;"EXT-X-PRELOAD-HINT"==re.name?(qe=(qe=X(re,"BYTERANGE-START"))?Number(qe):0,(xe=X(re,"BYTERANGE-LENGTH"))?Ze=qe+Number(xe)-1:qe&&(Ze=Number.MAX_SAFE_INTEGER)):(qe=X(re,"BYTERANGE"),Ze=t(Gu(xe,qe)),qe=Ze.next().value,Ze=Ze.next().value);$.Ud=X(re,"URI");if($.Ud){xe=vo;"YES"==X(re,"GAP")&&(xe=2,Y=!0);$.hd=null;var rt=function(i){return function(){null==i.hd&&(i.hd=it(x(),i.Ud,A));return i.hd}}($);N&&0<=qe&&null!=Ze&&(H=rt,z=!0);Ne=new Ph(Ne,Ke,rt,qe,Ze,o,0,0,Infinity,[],"",null,J,xe,I);"EXT-X-PRELOAD-HINT"==re.name&&(Ne.Tf(),Q=!0);"YES"!=X(re,"INDEPENDENT")&&0<ne&&Ne.xe();q.push(Ne);J&&(J+=_e)}}}}if(M){M=Number(M.value.split(",")[0]);if(0==M)return null;N=y+M}else{if(!q.length)return null;N=q[q.length-1].endTime}z&&(Y||0!=q[0].hb?(z=!1,H=null):q=[]);(M=gt(C,"EXT-X-BYTERANGE"))?(j=t(Gu(s,M.value)),_=j.next().value,j=j.next().value):q.length&&(_=q[0].hb,j=q[q.length-1].Na);s="";M=null;"image"==T.type&&(s="1x1",T=gt(C,"EXT-X-TILES"))&&(s=bt(T,"LAYOUT"),(T=X(T,"DURATION"))&&(M=Number(T)));var st=null;o=new Ph(y,N,(function(){if(H)return H();null==st&&(st=it(x(),p.h,A));return st||[]}),_,j,o,0,0,Infinity,q,s,M,B,G,I,0<q.length&&!!p.h);z&&(i.Wa=!0,o.bh(),Q&&o.Tf());return o}function Gu(i,r){var o=0,s=null;r&&(o=r.split("@"),r=Number(o[0]),o=o[1]?Number(o[1]):i.Na+1,s=o+r-1);return[o,s]}function Nt(i,r,o,s,p,y){var A=r.segments,T=void 0,x=ht(r.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),I=ht(r.g,"EXT-X-MEDIA-SEQUENCE",0),C=gt(r.g,"EXT-X-SKIP"),M=C?Number(X(C,"SKIPPED-SEGMENTS")):0,N=I+M,_=0;Et(i)&&s.has(N)&&(_=s.get(N));0===_&&i.aa==zf&&0<s.size&&!s.has(N)&&(_=i.l.Ab());var j=[],B=null;C=[];for(var z=0;z<A.length;z++){var G=A[z],q=0==z?_:B.endTime;N=I+M+z;gt(G.g,"EXT-X-DISCONTINUITY")&&x++;var H=t(G.g);for(var Y=H.next();!Y.done;Y=H.next())Y=Y.value,"EXT-X-KEY"==Y.name&&(T="AES-128"==bt(Y,"METHOD")?Du(i,Y,r,y,p):void 0);s.set(N,q);H=gu(i,r,G.g,y,p);!i.D&&i.i.isAutoLowLatencyMode()&&(i.i.enableLowLatencyMode(),i.D=i.i.isLowLatencyMode());(q=Fu(i,H,B,G,q,p,o,y,T))&&((B=ht(G.g,"EXT-X-BITRATE"))?C.push({bitrate:B,duration:q.endTime-q.startTime}):C.length&&(B=C.pop(),B.duration+=q.endTime-q.startTime,C.push(B)),B=q,q.i=x,i.g.hls.ignoreManifestProgramDateTime&&null!=i.K&&N<i.K||j.push(q))}r=void 0;C.length&&(r=C.reduce((function(i,r){return i+r.duration}),0),r=Math.round(C.reduce((function(i,r){return i+r.bitrate*r.duration}),0)/r*1e3));if(C=j.some((function(i){return null!=i.oa})))for(o={},s=0;s<j.length;o={Zc:o.Zc,Yc:o.Yc,Qd:o.Qd,Vb:o.Vb,Xc:o.Xc},s++)if(o.Vb=j[s],null==o.Vb.oa)for(o.Yc=0,o.Zc=s,p=function(i){return function(){var r=j[i.Zc];if(r){if(null!=r.oa)return r.oa+i.Yc;i.Yc-=r.endTime-r.startTime;i.Zc+=1}return null}}(o),o.Xc=0,o.Qd=s,y=function(i){return function(){var r=j[i.Qd];if(r){r!=i.Vb&&(i.Xc+=r.endTime-r.startTime);if(null!=r.oa)return r.oa+i.Xc;--i.Qd}return null}}(o);null==o.Vb.oa;)o.Vb.oa=y(),null==o.Vb.oa&&(o.Vb.oa=p());if(C)for(o=t(j),s=o.next();!s.done;s=o.next())for(p=s.value,s=p.oa,p=t(p.g),y=p.next();!y.done;y=p.next())y=y.value,y.oa=s,s+=y.endTime-y.startTime;i=i.V;if(C&&Infinity!=i)for(C=t(j),s=C.next();!s.done;s=C.next())s.value.sg(i);return{segments:j,bandwidth:r}}function nu(i,r){if(i==ne){if("vtt"==r||"wvtt"==r)return"text/vtt";if(r&&""!==r)return"application/mp4"}return"image"!=i||r&&"jpeg"!=r?"audio"==i&&"mp4a.40.34"==r?"audio/mpeg":"mjpg"==r?"application/mp4":null:"image/jpeg"}function ou(i){return i==ne?"text/vtt":yf[i].mp4}function Cu(i,r,o,s,p,y){var A,T,x,I,C,M,N,_,j,B,z,G,q;return K((function(H){switch(H.g){case 1:A=Ta;T=Math.trunc((s.segments.length-1)/2);x=it(y(),s.segments[T].h,p);I=new fb(x[0]);C=I.Ya.split(".").pop();M=yf[r];if((N=M[C])||(N=gf[C])||(N=nu(r,o)))return H.return(N);j=1;B=Af(x,i.g.retryParameters);ta(H,2);B.method="HEAD";return D(H,hu(i,B,A,{type:j}),4);case 4:z=H.h;_=z.headers["content-type"];va(H,3);break;case 2:G=wa(H);if(!G||1002!=G.code&&1001!=G.code){H.F(3);break}B.method="GET";return D(H,hu(i,B,A,{type:j}),6);case 6:q=H.h,_=q.headers["content-type"];case 3:return _?H.return(_.split(";")[0]):H.return(ou(r))}}))}function cu(i,r,o,s,p,y){i&&(i.width=Number(r)||void 0,i.height=Number(o)||void 0,i.frameRate=Number(s)||void 0,i.hdr=p||void 0,i.videoLayout=y||void 0)}function Ct(i,r,o){return hu(i,Af(r,i.g.retryParameters),0,{type:o?2:3})}function At(i){var r,o,s,p,y,A;K((function(T){switch(T.g){case 1:if(!i.i)return T.return();ta(T,2);r=Date.now();return D(T,i.update(),4);case 4:o=Date.now();Et(i)&&(s=(o-r)/1e3,i.Ra.sample(1,s),p=i.m,y=Math.max(0,p-Zb(i.Ra)),i.u.S(y));va(T,3);break;case 2:A=wa(T);if(!i.i)return T.return();if(i.g.raiseFatalErrorOnManifestUpdateRequestFailure)return i.i.onError(A),T.return();A.severity=1;i.i.onError(A);i.u.S(.1);case 3:if(!i.i)return T.return();i.i.onManifestUpdated();F(T)}}))}function Et(i){return i.aa!=_f}function It(i,r){i.aa=r;i.l&&i.l.Vc(!Et(i));Et(i)||i.u.stop()}function hu(i,r,o,s){if(!i.N)throw new P(2,7,7001);r=i.i.networkingEngine.request(o,r,s);vf(i.N,r);return r.promise}L("shaka.hls.HlsParser",zt);var gf={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},yf={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Of={"com.apple.streamingkeydelivery":function(i,o){if("video/mp2t"==o)throw new P(2,4,4040);if(r.shakaMediaKeysPolyfill)throw new P(2,4,4041);return Ab("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(i){var r=bt(i,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(r))return null;r=bt(i,"URI");r=vt(r);r=lc(r.data);r=Ab("com.widevine.alpha",[{initDataType:"cenc",initData:r}]);(i=X(i,"KEYID"))&&(r.keyIds=new Set([i.toLowerCase().substr(2)]));return r},"com.microsoft.playready":function(i){var r=bt(i,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(r))return null;i=bt(i,"URI");i=vt(i);i=lc(i.data);r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);i=vg(i,r,new Set,0);return Ab("com.microsoft.playready",[{initDataType:"cenc",initData:i}])},identity:function(i,o){if("video/mp2t"==o)throw new P(2,4,4040);if(r.shakaMediaKeysPolyfill)throw new P(2,4,4041);i=bt(i,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i)?Ab("org.w3.clearkey",null):null}},_f="VOD",Vf="EVENT",zf="LIVE",Gf={Fh:_f,Hj:Vf,Pj:zf};uo["application/x-mpegurl"]=function(){return new zt};uo["application/vnd.apple.mpegurl"]=function(){return new zt};function Iu(i){var r=0,o=pc(i),s=o.getUint32(r,!0);if(s!=i.byteLength)return[];e:{i=r+6;for(r=[];i<o.byteLength-1;){s=o.getUint16(i,!0);i+=2;var p=o.getUint16(i,!0);i+=2;if(0!=(p&1)||p+i>o.byteLength){o=[];break e}var y=lc(o,i,p);r.push({type:s,value:y});i+=p}o=r}return o}function Ju(i){if(i=Ku(i))e:{i=t(i.getElementsByTagName("DATA"));for(var r=i.next();!r.done;r=i.next())if(r=wg(r.value,"LA_URL")){i=r.textContent;break e}i=""}else i="";return i}function Ku(i){i=qg(i.textContent);i=Iu(i).filter((function(i){return i.type===$f}))[0];if(!i)return null;i=Uf(i.value,!0);return(i=Pg(i,"WRMHEADER"))?i:null}var $f=1,rp=(new Map).set("com.microsoft.playready",Ju).set("com.microsoft.playready.recommendation",Ju).set("com.microsoft.playready.software",Ju).set("com.microsoft.playready.hardware",Ju);function Nu(r){if(!op){op=!0;var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),p=new Uint8Array([0,0,0,1]);Up=Qu("ftyp",o,p,o,s);o=Qu("dref",Op);_p=Qu("dinf",o)}(this||i).g=r}function Tu(i){for(var r=[],o=t(i.g),s=o.next();!s.done;s=o.next()){var p=r,y=p.push;var A=s.value;s=Qu;var T=A.id+1;var x=A.stream.width||0,I=A.stream.height||0;"audio"==A.type&&(I=x=0);var C=A.duration*A.timescale,M=Math.floor(C/(lp+1));C=Math.floor(C%(lp+1));T=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(w(Vu(T,4)),[0,0,0,0],w(Vu(M,4)),w(Vu(C,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],w(Vu(x,2)),[0,0],w(Vu(I,2)),[0,0]));T=Qu("tkhd",T);x=Qu;M=A.duration*A.timescale;I=Math.floor(M/(lp+1));M=Math.floor(M%(lp+1));C=A.stream.language;C=C.charCodeAt(0)-96<<10|C.charCodeAt(1)-96<<5|C.charCodeAt(2)-96;I=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(w(Vu(A.timescale,4)),w(Vu(I,4)),w(Vu(M,4)),w(Vu(C,2)),[0,0]));I=Qu("mdhd",I);M=A;C=new Uint8Array([]);switch(M.type){case"video":C=pp;break;case"audio":C=Tp}M=Qu("hdlr",C);e:{switch(A.type){case"video":A=Qu("minf",Qu("vmhd",Mp),_p,Zu(A));break e;case"audio":A=Qu("minf",Qu("smhd",Pp),_p,Zu(A));break e}A=new Uint8Array([])}A=x("mdia",I,M,A);s=s("trak",T,A);y.call(p,s)}r=tg.apply(lg,w(r));y=i.g[0];o=Qu;s=y.duration*y.timescale;p=Math.floor(s/(lp+1));s=Math.floor(s%(lp+1));p=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(w(Vu(y.timescale,4)),w(Vu(p,4)),w(Vu(s,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));p=Qu("mvhd",p);s=[];i=t(i.g);for(x=i.next();!x.done;x=i.next())A=s,T=A.push,x=new Uint8Array([0,0,0,0].concat(w(Vu(x.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),x=Qu("trex",x),T.call(A,x);i=tg.apply(lg,w(s));i=Qu("mvex",i);s=[];if(y.encrypted){y=t(y.stream.drmInfos);for(A=y.next();!A.done;A=y.next())if(A=A.value,A.initData)for(A=t(A.initData),T=A.next();!T.done;T=A.next())s.push(T.value.initData);y=tg.apply(lg,w(s))}else y=new Uint8Array([]);i=o("moov",p,r,i,y);r=new Uint8Array(Up.byteLength+i.byteLength);r.set(Up);r.set(i,Up.byteLength);return r}function Zu(i){var r=Qu,o=new Uint8Array([]);switch(i.type){case"video":if(i.codecs.includes("avc1")){o=i.stream.width||0;var s=i.stream.height||0;if(0<i.Ca.byteLength)var p=Qu("avcC",i.Ca);else{p=Qu;for(var y=7,A=[],T=[],x=0,I=0,C=0,M=0;M<i.ib.length;M++){var N=av(i.ib[M]);switch(N[0]&31){case 7:A.push(N);y+=N.length+2;break;case 8:T.push(N),y+=N.length+2}}0<A.length&&(x=A[0][1],C=A[0][2],I=A[0][3]);y=new Uint8Array(y);M=0;y[M++]=1;y[M++]=x;y[M++]=C;y[M++]=I;y[M++]=255;y[M++]=224|A.length;for(x=0;x<A.length;x++)y[M++]=(A[x].length&65280)>>8,y[M++]=A[x].length&255,y.set(A[x],M),M+=A[x].length;y[M++]=T.length;for(A=0;A<T.length;A++)y[M++]=(T[A].length&65280)>>8,y[M++]=T[A].length&255,y.set(T[A],M),M+=T[A].length;p=p("avcC",y)}o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(w(Vu(o,2)),w(Vu(s,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]));s="avc1";T=bv(i);A=new Uint8Array([]);i.encrypted&&(A=cv(i),s="encv");o=Qu(s,o,p,T,A)}else i.codecs.includes("hvc1")&&(s=i.stream.width||0,p=i.stream.height||0,o=new Uint8Array([]),0<i.Ca.byteLength&&(o=Qu("hvcC",i.Ca)),s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(w(Vu(s,2)),w(Vu(p,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),p="hvc1",T=bv(i),A=new Uint8Array([]),i.encrypted&&(A=cv(i),p="encv"),o=Qu(p,s,o,T,A));break;case"audio":if(i.codecs.includes("mp3"))i=Qu(".mp3",dv(i));else if(i.codecs.includes("ac-3"))o=Qu("dac3",i.qa),s="ac-3",p=new Uint8Array([]),i.encrypted&&(p=cv(i),s="enca"),i=Qu(s,dv(i),o,p);else if(i.codecs.includes("ec-3"))o=Qu("dec3",i.qa),s="ec-3",p=new Uint8Array([]),i.encrypted&&(p=cv(i),s="enca"),i=Qu(s,dv(i),o,p);else{if(0<i.qa.byteLength)o=Qu("esds",i.qa);else{o=Qu;s=i.id+1;p=i.stream.channelsCount||2;A=i.stream.audioSamplingRate||44100;x=Bb("audio",i.codecs.split(","));I={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};T=I[A];"mp4a.40.5"!==x&&"mp4a.40.29"!==x||(T=I[2*A]);A=parseInt(x.split(".").pop(),10);s=new Uint8Array([0,0,0,0,3,25].concat(w(Vu(s,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,A<<3|T>>>1,T<<7|p<<3,6,1,2]));o=o("esds",s)}s="mp4a";p=new Uint8Array([]);i.encrypted&&(p=cv(i),s="enca");i=Qu(s,dv(i),o,p)}o=i}i=Qu("stsd",Rp,o);return r("stbl",i,Qu("stts",Ep),Qu("stsc",Ip),Qu("stsz",Dp),Qu("stco",Cp))}function bv(i){if(!i.Ja&&!i.La)return new Uint8Array([]);var r=i.La;i=new Uint8Array([].concat(w(Vu(i.Ja,4)),w(Vu(r,4))));return Qu("pasp",i)}function dv(i){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.stream.channelsCount||2,0,16,0,0,0,0].concat(w(Vu(i.stream.audioSamplingRate||44100,2)),[0,0]))}function cv(i){var r=Qu;var o=i.codecs.substring(0,i.codecs.indexOf("."));for(var s=0,p=0;p<o.length;p+=1)s|=o.charCodeAt(p)<<8*(o.length-p-1);o=new Uint8Array([].concat(w(Vu(s,4))));o=Qu("frma",o);s=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]);s=Qu("schm",s);p=Qu;var y=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);i=t(i.stream.drmInfos);for(var A=i.next();!A.done;A=i.next())if((A=A.value)&&A.keyIds&&A.keyIds.size){A=t(A.keyIds);for(var T=A.next();!T.done;T=A.next())y=av(T.value)}i=new Uint8Array([0,0,0,0,0,0,1,8]);y=Qu("tenc",i,y);return r("sinf",o,s,p("schi",y))}function jv(i){var r=[];i=t(i.g);for(var o=i.next();!o.done;o=i.next()){o=o.value;var s=r.push,p=s.apply;var y=Qu;var A=new Uint8Array([0,0,0,0].concat(w(Vu(o.data?o.data.Cb:0,4))));A=Qu("mfhd",A);var T;var x=o.data?o.data.fb:[];var I=new Uint8Array(4+x.length);for(T=0;T<x.length;T++){var C=x[T].flags;I[T+4]=C.$a<<4|C.bb<<2|C.ab}x=Qu("sdtp",I);var M=x.length+92;I=Qu;T=new Uint8Array([0,0,0,58].concat(w(Vu(o.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));T=Qu("tfhd",T);C=o.data?o.data.baseMediaDecodeTime:0;var N=Math.floor(C%(lp+1));C=new Uint8Array([1,0,0,0].concat(w(Vu(Math.floor(C/(lp+1)),4)),w(Vu(N,4))));C=Qu("tfdt",C);var _=M;M=o.data?o.data.fb:[];N=M.length;var j=12+16*N,B=new Uint8Array(j);_+=8+j;B.set(["video"===o.type?1:0,0,15,1].concat(w(Vu(N,4)),w(Vu(_,4))),0);for(_=0;_<N;_++){var z=M[_];j=Vu(z.duration,4);var G=Vu(z.size,4),q=z.flags;z=Vu(z.kb,4);B.set([].concat(w(j),w(G),[q.ob<<2|q.$a,q.bb<<6|q.ab<<4|q.pb,q.Za&61440,q.Za&15],w(z)),12+16*_)}M=Qu("trun",B);x=I("traf",T,C,M,x);y=y("moof",A,x);p.call(s,r,[y,kv(o)])}return tg.apply(lg,w(r))}function kv(i){i=(i.data?i.data.fb:[]).map((function(i){return i.data}));i=tg.apply(lg,w(i));return Qu("mdat",i)}function Vu(i,r){var o=[];for(--r;0<=r;r--)o.push(i>>8*r&255);return o}function av(i){for(var r=new Uint8Array(i.length/2),o=0;o<i.length/2;o+=1)r[o]=parseInt(String(i[2*o]+i[2*o+1]),16);return r}function Qu(i){var r=Ga.apply(1,arguments),o=hp[i];o||(o=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)],hp[i]=o);for(var s=8,p=r.length-1;0<=p;p--)s+=r[p].byteLength;p=new Uint8Array(s);p[0]=s>>24&255;p[1]=s>>16&255;p[2]=s>>8&255;p[3]=s&255;p.set(o,4);o=0;for(s=8;o<r.length;o++)p.set(r[o],s),s+=r[o].byteLength;return p}var op=!1,lp=Math.pow(2,32)-1,hp={},pp=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Tp=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Ep=new Uint8Array([0,0,0,0,0,0,0,0]),Ip=new Uint8Array([0,0,0,0,0,0,0,0]),Cp=new Uint8Array([0,0,0,0,0,0,0,0]),Dp=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Mp=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Pp=new Uint8Array([0,0,0,0,0,0,0,0]),Rp=new Uint8Array([0,0,0,0,0,0,0,1]),Up=new Uint8Array([]),Op=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),_p=new Uint8Array([]);function mv(){var r=this||i;(this||i).h=(this||i).g=null;(this||i).l=[];(this||i).j=null;(this||i).u=1;(this||i).i=null;(this||i).D=new Yb(5);(this||i).s=new Dd((function(){nv(r)}));(this||i).C=new uf;(this||i).m=new Map}p=mv.prototype;p.configure=function(r){(this||i).g=r};p.start=function(r,o){var s=this||i;return K((function(i){if(1==i.g)return s.l=[r],s.h=o,D(i,ov(s),2);if(!s.h)throw new P(2,7,7001);return i.return(s.j)}))};function nv(i){var r;K((function(o){switch(o.g){case 1:return ta(o,2),D(o,ov(i),4);case 4:va(o,3);break;case 2:r=wa(o),i.h&&(r.severity=1,i.h.onError(r));case 3:if(!i.h)return o.return();F(o)}}))}p.stop=function(){(this||i).g=(this||i).h=null;(this||i).l=[];(this||i).j=null;null!=(this||i).s&&((this||i).s.stop(),(this||i).s=null);(this||i).m.clear();return(this||i).C.destroy()};p.update=function(){var r,o=this||i;return K((function(i){if(1==i.g)return ta(i,2),D(i,ov(o),4);if(2!=i.g)return va(i,0);r=wa(i);if(!o.h||!r)return i.return();o.h.onError(r);F(i)}))};p.onExpirationUpdated=function(){};p.onInitialVariantChosen=function(){};p.banLocation=function(){};function ov(i){var r,o,s,p,y,A,T;return K((function(x){if(1==x.g)return r=Af(i.l,i.g.retryParameters),o=i.h.networkingEngine,s=Date.now(),p=o.request(0,r,{type:5}),vf(i.C,p),D(x,p.promise,2);y=x.h;if(!i.h)return x.return();y.uri&&!i.l.includes(y.uri)&&i.l.unshift(y.uri);var I=y.uri,C=Rg(y.data,"SmoothStreamingMedia");if(!C)throw new P(2,4,4046,I);(I=i.g.mss.manifestPreprocessor)&&I(C);i.i||(i.i=new sj(null,0));if(I=Fg(C,"IsLive",Ng,!1))throw new P(2,4,4047);i.i.Vc(!I);var M=Fg(C,"TimeScale",Lg,1e7),N=Fg(C,"DVRWindowLength",Lg);I&&(0===N||isNaN(N))&&(N=Infinity);var _=Fg(C,"CanSeek",Ng,!1);0===N&&_&&(N=Infinity);_=null;N&&0<N&&(_=N/M);I&&!isNaN(i.g.availabilityWindowOverride)&&(_=i.g.availabilityWindowOverride);null==_&&(_=Infinity);i.i.Ne(_);N=Fg(C,"Duration",Lg,Infinity);I||i.i.gb(N/M);I={variants:[],textStreams:[],timescale:M,duration:N/M};_=xg(C,"Protection");var j;M=i.g.mss.keySystemsBySystemId;N=[];_=t(_);for(j=_.next();!j.done;j=_.next())N=N.concat(xg(j.value,"ProtectionHeader"));if(N.length){_=[];for(j=0;j<N.length;j++){var B=N[j],z=B.getAttribute("SystemID").toLowerCase(),G=M[z];if(G){var q=Ku(B);if(q)e:{q=t(q.getElementsByTagName("DATA"));for(var H=q.next();!H.done;H=q.next())if(H=wg(H.value,"KID")){q=qg(H.textContent);q=new Uint8Array([q[3],q[2],q[1],q[0],q[5],q[4],q[7],q[6]].concat(w(q.slice(8))));q=sg(q);break e}q=null}else q=null;H=qg(B.textContent);z=rg(z.replace(/-/g,""));z=[{initData:vg(H,z,new Set,0),initDataType:"cenc",keyId:q}];z=Ab(G,z);q&&z.keyIds.add(q);(G=rp.get(G))&&(z.licenseServerUri=G(B));_.push(z)}}M=_}else M=[];j=M;_=[];M=[];N=[];C=xg(C,"StreamIndex");C=t(C);for(B=C.next();!B.done;B=C.next()){B=B.value;G=xg(B,"QualityLevel");z=I.timescale;q=I.duration;H=xg(B,"c");for(var Y=[],Q=0,J=0;J<H.length;++J){var $=H[J],re=H[J+1],xe=Fg($,"t",Lg),Ne=Fg($,"d",Lg);$=Fg($,"r",Jg);if(!Ne)break;xe=null!=xe?xe:Q;$=$||0;if(0>$)if(re){re=Fg(re,"t",Lg);if(null==re)break;if(xe>=re)break;$=Math.ceil((re-xe)/Ne)-1}else{if(Infinity==q)break;if(xe/z>=q)break;$=Math.ceil((q*z-xe)/Ne)-1}for(re=0;re<=$;++re)Q=xe+Ne,Y.push({start:xe/z,end:Q/z,zg:xe}),xe=Q}z=Y;G=t(G);for(q=G.next();!q.done;q=G.next())(q=pv(i,B,q.value,z,j,I))&&("audio"!=q.type||i.g.disableAudio?"video"!=q.type||i.g.disableVideo?q.type!=ne||i.g.disableText||N.push(q):M.push(q):_.push(q))}C=[];_=t(0<_.length?_:[null]);for(j=_.next();!j.done;j=_.next())for(j=j.value,B=t(0<M.length?M:[null]),q=B.next();!q.done;q=B.next())G=C,z=G.push,q=q.value,H=0,j&&j.bandwidth&&0<j.bandwidth&&(H+=j.bandwidth),q&&q.bandwidth&&0<q.bandwidth&&(H+=q.bandwidth),q={id:i.u++,language:j?j.language:"und",disabledUntilTime:0,primary:!!j&&j.primary||!!q&&q.primary,audio:j,video:q,bandwidth:H,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},z.call(G,q);I.variants=C;I.textStreams=N;i.j?(i.j.variants=I.variants,i.j.textStreams=I.textStreams,i.h.filter(i.j)):(i.j={presentationTimeline:i.i,variants:I.variants,textStreams:I.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:i.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},i.i.ve());Promise.resolve();A=Date.now();T=(A-s)/1e3;i.D.sample(1,T);F(x)}))}function pv(i,r,o,s,p,y){var A=r.getAttribute("Type");if("audio"!==A&&"video"!==A&&"text"!==A)return Ra("Ignoring unrecognized type:",A),null;var T=r.getAttribute("Language"),x=i.u++,I=Fg(o,"Bitrate",Kg),C=Fg(o,"MaxWidth",Kg),M=Fg(o,"MaxHeight",Kg),N=Fg(o,"Channels",Kg),_=Fg(o,"SamplingRate",Kg),j=y.duration;s.length&&(j=s[s.length-1].end-s[0].start);var B=i.i.getDuration();i.i.gb(Math.min(j,B));var z={id:x,originalId:r.getAttribute("Name")||String(x),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:I||0,width:C||void 0,height:M||void 0,kind:"",encrypted:0<p.length,drmInfos:p,keyIds:new Set,language:Kb(T||"und"),originalLanguage:T,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:N,audioSamplingRate:_,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:j,timescale:y.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1};(p=r.getAttribute("Subtype"))&&((p=zp[p])&&z.roles.push(p),"main"===p&&(z.primary=!0));p=o.getAttribute("FourCC");null!==p&&""!==p||(p=r.getAttribute("FourCC"));if(!p)if("audio"===A)p="AAC";else if("video"===A)return Ra('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!Fp.includes(p.toUpperCase()))return Ra("Codec not supported:",p),null;o=sv(o,A,p,z);z.mssPrivateData.codecPrivateData=o;switch(A){case"audio":if(!o)return Ra("Quality unsupported without CodecPrivateData",A),null;z.type="audio";z.mimeType="mss/audio/mp4";z.codecs=tv(p,o);break;case"video":if(!o)return Ra("Quality unsupported without CodecPrivateData",A),null;z.type="video";z.mimeType="mss/video/mp4";z.codecs=uv(o);break;case"text":(z.type=ne,z.mimeType="application/mp4","TTML"===p||"DFXP"===p)&&(z.codecs="stpp")}z.createSegmentIndex=function(){if(z.segmentIndex)return Promise.resolve();if(i.m.has(z.id))var o=i.m.get(z.id);else o=[],"video"==z.type&&(o=z.mssPrivateData.codecPrivateData.split("00000001").slice(1)),o={id:z.id,type:z.type,codecs:z.codecs,encrypted:z.encrypted,timescale:z.mssPrivateData.timescale,duration:z.mssPrivateData.duration,ib:o,qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:null,stream:z},o=Tu(new Nu([o])),i.m.set(z.id,o);o=vv(i,new Nh((function(){return[]}),0,null,null,void 0,o),z,r,s);z.segmentIndex=new Oj(o);return Promise.resolve()};z.closeSegmentIndex=function(){z.segmentIndex&&(z.segmentIndex.release(),z.segmentIndex=null)};return z}function sv(i,r,o,s){if(i=i.getAttribute("CodecPrivateData"))return i;if("audio"!==r)return null;r=s.channelsCount||2;i=s.audioSamplingRate||44100;var p={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};s=p[i];if("AACH"===o)return o=new Uint8Array(4),i=p[2*i],o[0]=40|s>>1,o[1]=s<<7|r<<3|i>>1,o[2]=i<<7|8,o[3]=0,r=new Uint16Array(2),r[0]=(o[0]<<8)+o[1],r[1]=(o[2]<<8)+o[3],r[0].toString(16)+r[1].toString(16);o=new Uint8Array(2);o[0]=16|s>>1;o[1]=s<<7|r<<3;r=new Uint16Array(1);r[0]=(o[0]<<8)+o[1];return r[0].toString(16)}function tv(i,r){var o=0;"AACH"===i&&(o=5);r?0===o&&(o=(parseInt(r.substr(0,2),16)&248)>>3):(o=2,"AACH"===i&&(o=5));return"mp4a.40."+o}function uv(i){var r=/00000001[0-9]7/.exec(i);return r.length&&i?"avc1."+i.substr(i.indexOf(r[0])+10,6):""}function vv(i,r,o,s,p){var y=s.getAttribute("Url").replace("{bitrate}",String(o.bandwidth));s=[];var A={};p=t(p);for(var T=p.next();!T.done;A={gd:A.gd},T=p.next())A.gd=T.value,s.push(new Ph(A.gd.start,A.gd.end,function(r){return function(){return zb(i.l,[y.replace("{start time}",String(r.gd.zg))])}}(A),0,null,r,0,0,o.mssPrivateData.duration));return s}L("shaka.mss.MssParser",mv);var Fp="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),zp={CAPT:"main",SUBT:"alternate",DESC:"main"};uo["application/vnd.ms-sstr+xml"]=function(){return new mv};function wv(i,r,o,s,p,y){if(200<=o&&299>=o&&202!=o)return{uri:p||s,originalUri:s,data:r,status:o,headers:i,fromCache:!!i["x-shaka-from-cache"]};p=null;try{p=Wf(r)}catch(i){}throw new P(401==o||403==o?2:1,1,1001,s,o,p,i,y)}function xv(){}function yv(i,r,o,s,p){var y=new Wp;Qf(r.headers).forEach((function(i,r){y.append(r,i)}));var A=new qp,T={Hg:!1,xh:!1};i=Bv(i,o,{body:r.body||void 0,headers:y,method:r.method,signal:A.signal,credentials:r.allowCrossSiteCredentials?"include":void 0},T,s,p,r.streamDataCallback);i=new nf(i,(function(){T.Hg=!0;A.abort();return Promise.resolve()}));if(r=r.retryParameters.timeout){var x=new Dd((function(){T.xh=!0;A.abort()}));x.S(r/1e3);i.finally((function(){x.stop()}))}return i}function Bv(i,r,o,s,p,y,A){var T,x,I,C,M,N,_,j,B,z,G,q,H;return K((function(Y){switch(Y.g){case 1:return T=Gp,x=Hp,N=M=0,_=Date.now(),ta(Y,2),D(Y,T(i,o),4);case 4:I=Y.h;y(Ev(I.headers));if("HEAD"==o.method){Y.F(5);break}j=I.clone().body.getReader();z=(B=I.headers.get("Content-Length"))?parseInt(B,10):0;G=function(i){function E(){var r,o;return K((function(s){switch(s.g){case 1:return ta(s,2),D(s,j.read(),4);case 4:r=s.h;va(s,3);break;case 2:return wa(s),s.return();case 3:if(r.done){s.F(5);break}M+=r.value.byteLength;if(!A){s.F(5);break}return D(s,A(r.value),5);case 5:o=Date.now();(100<o-_||r.done)&&(p(o-_,M-N,z-M),N=M,_=o);r.done?i.close():(i.enqueue(r.value),E());F(s)}}))}E()};new x({start:G});return D(Y,I.arrayBuffer(),6);case 6:C=Y.h;case 5:va(Y,3);break;case 2:q=wa(Y);if(s.Hg)throw new P(1,1,7001,i,r);if(s.xh)throw new P(1,1,1003,i,r);throw new P(1,1,1002,i,q,r);case 3:return H=Ev(I.headers),Y.return(wv(H,C,I.status,i,I.url,r))}}))}function Ev(i){var r={};i.forEach((function(i,o){r[o.trim()]=i}));return r}function Fv(){if(!r.ReadableStream)return!1;try{new ReadableStream({})}catch(i){return!1}return!!r.Response&&(!!new Response("").body&&!(!r.fetch||!r.AbortController))}L("shaka.net.HttpFetchPlugin",xv);xv.isSupported=Fv;xv.parse=yv;var Gp=r.fetch,qp=r.AbortController,Hp=r.ReadableStream,Wp=r.Headers;Fv()&&(xf("http",yv,2,!0),xf("https",yv,2,!0),xf("blob",yv,2,!0));function Gv(){}function Hv(i,r,o,s,p){var y=new Jp,A=Date.now(),T=0,x=new Promise((function(x,I){y.open(r.method,i,!0);y.responseType="arraybuffer";y.timeout=r.retryParameters.timeout;y.withCredentials=r.allowCrossSiteCredentials;y.onabort=function(){I(new P(1,1,7001,i,o))};var C=!1;y.onreadystatechange=function(){if(2==y.readyState&&!C){var i=Jv(y);p(i);C=!0}};y.onload=function(){var r=Jv(y),s=y.response;try{var p=wv(r,s,y.status,i,y.responseURL,o);x(p)}catch(i){I(i)}};y.onerror=function(r){I(new P(1,1,1002,i,r,o))};y.ontimeout=function(){I(new P(1,1,1003,i,o))};y.onprogress=function(i){var r=Date.now();(100<r-A||i.lengthComputable&&i.loaded==i.total)&&(s(r-A,i.loaded-T,i.total-i.loaded),T=i.loaded,A=r)};for(var M in r.headers)y.setRequestHeader(M.toLowerCase(),r.headers[M]);y.send(r.body)}));return new nf(x,(function(){y.abort();return Promise.resolve()}))}function Jv(i){var r=i.getAllResponseHeaders().trim().split("\r\n");i={};r=t(r);for(var o=r.next();!o.done;o=r.next())o=o.value.split(": "),i[o[0].toLowerCase()]=o.slice(1).join(": ");return i}L("shaka.net.HttpXHRPlugin",Gv);Gv.parse=Hv;var Jp=r.XMLHttpRequest;xf("http",Hv,1,!0);xf("https",Hv,1,!0);xf("blob",Hv,1,!0);function Kv(r,o,s,p){(this||i).g=r;(this||i).i=o;(this||i).groupId=s;(this||i).h=p}function Lv(i){return i.ba().map((function(i){return"{"+encodeURI(i)+"}"})).join("")+":"+i.hb+":"+i.Na}function Mv(i,r){return ok(i.g.ba(),i.g.hb,i.g.Na,r.streaming.retryParameters)}function Nv(){(this||i).h=(this||i).j=(this||i).i=0;(this||i).g=new Map;(this||i).l=0}function Ov(i,r){i.i+=r;var o=i.l;i.l++;i.g.set(o,r);return o}Nv.prototype.close=function(r,o){if((this||i).g.has(r)){var s=(this||i).g.get(r);(this||i).g.delete(r);(this||i).j+=s;(this||i).h+=o}};function Pv(r){var o=this||i;(this||i).s=r;(this||i).j=new Map;(this||i).i=new If((function(){return Qv(o).catch((function(){}))}));(this||i).h=[];(this||i).m=function(){};(this||i).l=function(){};(this||i).g=new Nv}Pv.prototype.destroy=function(){return(this||i).i.destroy()};function Rv(i,r,o){i.m=r;i.l=o}function Qv(i){var r=i.h.map((function(i){return i()}));i.h=[];return Promise.all(r)}function Sv(i,r,o,s,p,y){Jf(i.i);var A=(i.j.get(r)||Promise.resolve()).then((function(){var r,A,T,x,I,C,M;return K((function(N){if(1==N.g)return D(N,Tv(i,o),2);r=N.h;if(i.i.g)throw new P(2,9,7001);if(p)for(x in A=lc(r),T=new ug(A),T.data)I=Number(x),C=T.data[I],M=T.g[I],i.l(C,M);i.g.close(s,r.byteLength);var _=i.g;i.m(0==_.i?0:_.j/_.i,i.g.h);return N.return(y(r))}))}));i.j.set(r,A)}function Uv(i){return K((function(r){return 1==r.g?D(r,Promise.all(i.j.values()),2):r.return(i.g.h)}))}function Tv(i,r){var o,s,p,y;return K((function(A){if(1==A.g)return o=Ta,s=i.s.request(o,r),p=function(){return s.abort()},i.h.push(p),D(A,s.promise,2);y=A.h;vc(i.h,p);return A.return(y.data)}))}function Vv(r,o){var s=this||i;(this||i).i=r;(this||i).h=r.objectStore(o);(this||i).g=new mf;r.onabort=function(i){i.preventDefault();s.g.reject()};r.onerror=function(i){i.preventDefault();s.g.reject()};r.oncomplete=function(){s.g.resolve()}}Vv.prototype.abort=function(){var r=this||i;return K((function(i){if(1==i.g){try{r.i.abort()}catch(i){}ta(i,2);return D(i,r.g,4)}if(2!=i.g)return va(i,0);wa(i);F(i)}))};function Wv(i,r){return new Promise((function(o,s){var p=i.h.openCursor();p.onerror=s;p.onsuccess=function(){var i;return K((function(s){if(1==s.g){if(null==p.result)return o(),s.return();i=p.result;return D(s,r(i.key,i.value,i),2)}i.continue();F(s)}))}}))}Vv.prototype.store=function(){return(this||i).h};Vv.prototype.promise=function(){return(this||i).g};function Xv(r){(this||i).h=r;(this||i).g=[]}Xv.prototype.destroy=function(){return Promise.all((this||i).g.map((function(i){return i.abort()})))};function Yv(i,r){return Zv(i,r,"readwrite")}function Zv(i,r,o){o=i.h.transaction([r],o);var s=new Vv(o,r);i.g.push(s);s.promise().then((function(){vc(i.g,s)}),(function(){vc(i.g,s)}));return s}function $v(r,o,s){(this||i).h=new Xv(r);(this||i).i=o;(this||i).g=s}p=$v.prototype;p.destroy=function(){return(this||i).h.destroy()};p.hasFixedKeySpace=function(){return!0};p.addSegments=function(){return aw((this||i).i)};p.removeSegments=function(r,o){return bw(this||i,(this||i).i,r,o)};p.getSegments=function(r){var o,s=this||i;return K((function(i){if(1==i.g)return D(i,cw(s,s.i,r),2);o=i.h;return i.return(o.map((function(i){return s.Lg(i)})))}))};p.addManifests=function(){return aw((this||i).g)};p.updateManifest=function(){return Promise.reject(new P(2,9,9016,"Cannot modify values in "+(this||i).g))};function dw(i,r,o){i=Yv(i.h,i.g);var s=i.store();s.get(r).onsuccess=function(){s.put(o,r)};return i.promise()}p.updateManifestExpiration=function(r,o){var s=Yv((this||i).h,(this||i).g),p=s.store();p.get(r).onsuccess=function(i){(i=i.target.result)&&(i.expiration=o,p.put(i,r))};return s.promise()};p.removeManifests=function(r,o){return bw(this||i,(this||i).g,r,o)};p.getManifests=function(r){var o,s=this||i;return K((function(i){if(1==i.g)return D(i,cw(s,s.g,r),2);o=i.h;return i.return(Promise.all(o.map((function(i){return s.qd(i)}))))}))};p.getAllManifests=function(){var r,o,s=this||i;return K((function(i){return 1==i.g?(r=Zv(s.h,s.g,"readonly"),o=new Map,D(i,Wv(r,(function(i,r){var p;return K((function(y){if(1==y.g)return D(y,s.qd(r),2);p=y.h;o.set(i,p);F(y)}))})),2)):3!=i.g?D(i,r.promise(),3):i.return(o)}))};p.Lg=function(i){return i};p.qd=function(i){return Promise.resolve(i)};function aw(i){return Promise.reject(new P(2,9,9011,"Cannot add new value to "+i))}p.add=function(r,o){var s,p,y,A,T,x,I,C=this||i;return K((function(i){if(1==i.g){s=Yv(C.h,r);p=s.store();y=[];A={};T=t(o);for(x=T.next();!x.done;A={Vd:A.Vd},x=T.next())I=x.value,A.Vd=p.add(I),A.Vd.onsuccess=function(i){return function(){y.push(i.Vd.result)}}(A);return D(i,s.promise(),2)}return i.return(y)}))};function bw(i,r,o,s){i=Yv(i.h,r);r=i.store();var p={};o=t(o);for(var y=o.next();!y.done;p={Td:p.Td},y=o.next())p.Td=y.value,r.delete(p.Td).onsuccess=function(i){return function(){return s(i.Td)}}(p);return i.promise()}function cw(i,r,o){var s,p,y,A,T,x,I;return K((function(C){if(1==C.g){s=Zv(i.h,r,"readonly");p=s.store();y={};A=[];T={};x=t(o);for(I=x.next();!I.done;T={ed:T.ed,bd:T.bd},I=x.next())T.bd=I.value,T.ed=p.get(T.bd),T.ed.onsuccess=function(i){return function(){void 0==i.ed.result&&A.push(i.bd);y[i.bd]=i.ed.result}}(T);return D(C,s.promise(),2)}if(A.length)throw new P(2,9,9012,"Could not find values for "+A);return C.return(o.map((function(i){return y[i]})))}))}function ew(r){(this||i).g=new Xv(r)}ew.prototype.destroy=function(){return(this||i).g.destroy()};ew.prototype.getAll=function(){var r,o,s=this||i;return K((function(i){return 1==i.g?(r=Zv(s.g,"session-ids","readonly"),o=[],D(i,Wv(r,(function(i,r){o.push(r)})),2)):3!=i.g?D(i,r.promise(),3):i.return(o)}))};ew.prototype.add=function(r){var o=Yv((this||i).g,"session-ids"),s=o.store();r=t(r);for(var p=r.next();!p.done;p=r.next())s.add(p.value);return o.promise()};ew.prototype.remove=function(r){var o,s=this||i;return K((function(i){return 1==i.g?(o=Yv(s.g,"session-ids"),D(i,Wv(o,(function(i,o,s){r.includes(o.sessionId)&&s.delete()})),2)):D(i,o.promise(),0)}))};function fw(){(this||i).g=new Map}fw.prototype.destroy=function(){for(var r=[],o=t((this||i).g.values()),s=o.next();!s.done;s=o.next())r.push(s.value.destroy());(this||i).g.clear();return Promise.all(r)};fw.prototype.init=function(){var r=this||i;eg.forEach((function(i,o){(i=i())&&r.g.set(o,i)}));for(var o=[],s=t((this||i).g.values()),p=s.next();!p.done;p=s.next())o.push(p.value.init());return Promise.all(o)};function hw(i){var r=null;i.g.forEach((function(i,o){i.getCells().forEach((function(i,s){i.hasFixedKeySpace()||r||(r={path:{qb:o,Ma:s},Ma:i})}))}));if(r)return r;throw new P(2,9,9013,"Could not find a cell that supports add-operations")}function iw(i,r){i.g.forEach((function(i,o){i.getCells().forEach((function(i,s){r({qb:o,Ma:s},i)}))}))}function jw(i,r,o){i=i.g.get(r);if(!i)throw new P(2,9,9013,"Could not find mechanism with name "+r);r=i.getCells().get(o);if(!r)throw new P(2,9,9013,"Could not find cell with name "+o);return r}function kw(i,r){i.g.forEach((function(i){r(i.getEmeSessionCell())}))}function lw(i){var r=Array.from(i.g.keys());if(!r.length)throw new P(2,9,9e3,"No supported storage mechanisms found");return i.g.get(r[0]).getEmeSessionCell()}function mw(i){var r,o,s;return K((function(p){return 1==p.g?(r=Array.from(i.g.values()),o=0<r.length,o||(s=eg,s.forEach((function(i){(i=i())&&r.push(i)}))),D(p,Promise.all(r.map((function(i){return i.erase()}))),2)):o?p.F(0):D(p,Promise.all(r.map((function(i){return i.destroy()}))),0)}))}function nw(i,r){eg.set(i,r)}L("shaka.offline.StorageMuxer",fw);fw.unregister=function(i){eg.delete(i)};fw.register=nw;fw.prototype.destroy=fw.prototype.destroy;var eg=new Map;function ow(){$v.apply(this||i,arguments)}pa(ow,$v);ow.prototype.updateManifestExpiration=function(r,o){var s,p,y,A=this||i;return K((function(i){s=Yv(A.h,A.g);p=s.store();y=new mf;p.get(r).onsuccess=function(i){(i=i.target.result)?(i.expiration=o,p.put(i),y.resolve()):y.reject(new P(2,9,9012,"Could not find values for "+r))};return D(i,Promise.all([s.promise(),y]),0)}))};ow.prototype.qd=function(i){var r,o,s,p,y,A;return K((function(T){if(1==T.g){r=[];for(o=0;o<i.periods.length;++o)s=o==i.periods.length-1?i.duration:i.periods[o+1].startTime,p=s-i.periods[o].startTime,y=pw(i.periods[o],p),r.push(y);return D(T,as(r),2)}A=T.h;return T.return({creationTime:0,originalManifestUri:i.originalManifestUri,duration:i.duration,size:i.size,expiration:null==i.expiration?Infinity:i.expiration,streams:A,sessionIds:i.sessionIds,drmInfo:i.drmInfo,appMetadata:i.appMetadata,sequenceMode:!1})}))};function pw(i,r){qw(i);for(var o=t(i.streams),s=o.next();!s.done;s=o.next());return i.streams.map((function(o){return rw(o,i.startTime,r)}))}function rw(i,r,o){var s=i.initSegmentUri?sw(i.initSegmentUri):null,p=r+i.presentationTimeOffset,y=r+o;return{id:i.id,originalId:null,groupId:null,primary:i.primary,type:i.contentType,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:i.kind,language:i.language,originalLanguage:i.language||null,label:i.label,width:i.width,height:i.height,initSegmentKey:s,encrypted:i.encrypted,keyIds:new Set([i.keyId]),segments:i.segments.map((function(i){var o=sw(i.uri);return{startTime:r+i.startTime,endTime:r+i.endTime,dataKey:o,initSegmentKey:s,appendWindowStart:r,appendWindowEnd:y,timestampOffset:p,tilesLayout:""}})),variantIds:i.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}ow.prototype.Lg=function(i){return{data:i.data}};function sw(i){var r;if((r=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(i))||(r=/^offline:segment\/([0-9]+)$/.exec(i)))return Number(r[1]);throw new P(2,9,9004,"Could not parse uri "+i)}function qw(i){var r=i.streams.filter((function(i){return"audio"==i.contentType}));i=i.streams.filter((function(i){return"video"==i.contentType}));if(!r.every((function(i){return i.variantIds}))||!i.every((function(i){return i.variantIds}))){for(var o=t(r),s=o.next();!s.done;s=o.next())s.value.variantIds=[];o=t(i);for(s=o.next();!s.done;s=o.next())s.value.variantIds=[];o=0;if(i.length&&!r.length){var p=o++,y=t(i);for(s=y.next();!s.done;s=y.next())s.value.variantIds.push(p)}if(!i.length&&r.length)for(p=o++,y=t(r),s=y.next();!s.done;s=y.next())s.value.variantIds.push(p);if(i.length&&r.length)for(r=t(r),s=r.next();!s.done;s=r.next())for(s=s.value,p=t(i),y=p.next();!y.done;y=p.next()){y=y.value;var A=o++;s.variantIds.push(A);y.variantIds.push(A)}}}function tw(){$v.apply(this||i,arguments)}pa(tw,$v);tw.prototype.qd=function(i){var r,o,s,p,y,A;return K((function(T){if(1==T.g){r=[];for(o=0;o<i.periods.length;++o){s=o==i.periods.length-1?i.duration:i.periods[o+1].startTime;p=s-i.periods[o].startTime;for(var x=i.periods[o],I=[],C=t(x.streams),M=C.next();!M.done;M=C.next())M=M.value,0!=M.variantIds.length&&I.push(uw(M,x.startTime,x.startTime+p));y=I;r.push(y)}return D(T,as(r),2)}A=T.h;return T.return({appMetadata:i.appMetadata,creationTime:0,drmInfo:i.drmInfo,duration:i.duration,expiration:null==i.expiration?Infinity:i.expiration,originalManifestUri:i.originalManifestUri,sessionIds:i.sessionIds,size:i.size,streams:A,sequenceMode:!1})}))};function uw(i,r,o){return{id:i.id,originalId:i.originalId,groupId:null,primary:i.primary,type:i.contentType,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:i.kind,language:i.language,originalLanguage:i.language||null,label:i.label,width:i.width,height:i.height,encrypted:i.encrypted,keyIds:new Set([i.keyId]),segments:i.segments.map((function(s){return{startTime:r+s.startTime,endTime:r+s.endTime,initSegmentKey:i.initSegmentKey,appendWindowStart:r,appendWindowEnd:o,timestampOffset:r-i.presentationTimeOffset,dataKey:s.dataKey,tilesLayout:""}})),variantIds:i.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function vw(){$v.apply(this||i,arguments)}pa(vw,$v);p=vw.prototype;p.hasFixedKeySpace=function(){return!1};p.addSegments=function(r){return this.add((this||i).i,r)};p.addManifests=function(r){return this.add((this||i).g,r)};p.updateManifest=function(r,o){return dw(this||i,r,o)};p.qd=function(i){null==i.expiration&&(i.expiration=Infinity);return Promise.resolve(i)};function ww(){(this||i).m=(this||i).j=(this||i).i=(this||i).h=(this||i).g=(this||i).l=null}p=ww.prototype;p.init=function(){var o=this||i,s=new mf,p=!1,y=new Dd((function(){p=!0;s.reject(new P(2,9,9017))}));y.S(5);var A=r.indexedDB.open("shaka_offline_db",5);A.onsuccess=function(){if(!p){var i=A.result;o.l=i;var r=i.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new ow(i,"segment","manifest"):null;o.g=r;r=i.objectStoreNames;r=r.contains("manifest-v2")&&r.contains("segment-v2")?new tw(i,"segment-v2","manifest-v2"):null;o.h=r;r=i.objectStoreNames;r=r.contains("manifest-v3")&&r.contains("segment-v3")?new tw(i,"segment-v3","manifest-v3"):null;o.i=r;r=i.objectStoreNames;r=r.contains("manifest-v5")&&r.contains("segment-v5")?new vw(i,"segment-v5","manifest-v5"):null;o.j=r;i=i.objectStoreNames.contains("session-ids")?new ew(i):null;o.m=i;y.stop();s.resolve()}};A.onupgradeneeded=function(){for(var i=A.result,r=t(["segment-v5","manifest-v5","session-ids"]),o=r.next();!o.done;o=r.next())o=o.value,i.objectStoreNames.contains(o)||i.createObjectStore(o,{autoIncrement:!0})};A.onerror=function(i){p||(s.reject(new P(2,9,9001,A.error)),y.stop(),i.preventDefault())};return s};p.destroy=function(){var r=this||i;return K((function(i){switch(i.g){case 1:if(!r.g){i.F(2);break}return D(i,r.g.destroy(),2);case 2:if(!r.h){i.F(4);break}return D(i,r.h.destroy(),4);case 4:if(!r.i){i.F(6);break}return D(i,r.i.destroy(),6);case 6:if(!r.j){i.F(8);break}return D(i,r.j.destroy(),8);case 8:if(!r.m){i.F(10);break}return D(i,r.m.destroy(),10);case 10:r.l&&r.l.close(),F(i)}}))};p.getCells=function(){var r=new Map;(this||i).g&&r.set("v1",(this||i).g);(this||i).h&&r.set("v2",(this||i).h);(this||i).i&&r.set("v3",(this||i).i);(this||i).j&&r.set("v5",(this||i).j);return r};p.getEmeSessionCell=function(){return(this||i).m};p.erase=function(){var r=this||i;return K((function(i){switch(i.g){case 1:if(!r.g){i.F(2);break}return D(i,r.g.destroy(),2);case 2:if(!r.h){i.F(4);break}return D(i,r.h.destroy(),4);case 4:if(!r.i){i.F(6);break}return D(i,r.i.destroy(),6);case 6:if(!r.j){i.F(8);break}return D(i,r.j.destroy(),8);case 8:return r.l&&r.l.close(),D(i,xw(),10);case 10:return r.l=null,r.g=null,r.h=null,r.i=null,r.j=null,D(i,r.init(),0)}}))};function xw(){var i=new mf,o=r.indexedDB.deleteDatabase("shaka_offline_db");o.onblocked=function(){};o.onsuccess=function(){i.resolve()};o.onerror=function(r){i.reject(new P(2,9,9001,o.error));r.preventDefault()};return i}nw("idb",(function(){return Od()||Id()||!r.indexedDB?null:new ww}));function yw(r,o,s,p){(this||i).g=r;(this||i).i=o;(this||i).h=s;(this||i).l=p;(this||i).j=["offline:",r,"/",o,"/",s,"/",p].join("")}yw.prototype.qb=function(){return(this||i).i};yw.prototype.Ma=function(){return(this||i).h};yw.prototype.key=function(){return(this||i).l};yw.prototype.toString=function(){return(this||i).j};function zw(i){i=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(i);if(null==i)return null;var r=i[1];if("manifest"!=r&&"segment"!=r)return null;var o=i[2];if(!o)return null;var s=i[3];return s&&null!=r?new yw(r,o,s,Number(i[4])):null}function Aw(r,o){(this||i).h=r;(this||i).g=o}function Bw(i,r){var o=new sj(null,0);o.gb(r.duration);var s=r.streams.filter((function(i){return"audio"==i.type})),p=r.streams.filter((function(i){return"video"==i.type}));s=Cw(i,s,p,o);p=r.streams.filter((function(i){return i.type==ne})).map((function(r){return Dw(i,r,o)}));var y=r.streams.filter((function(i){return"image"==i.type})).map((function(r){return Dw(i,r,o)})),A=r.drmInfo?[r.drmInfo]:[];if(r.drmInfo)for(var T=t(s.values()),x=T.next();!x.done;x=T.next())x=x.value,x.audio&&x.audio.encrypted&&(x.audio.drmInfos=A),x.video&&x.video.encrypted&&(x.video.drmInfos=A);return{presentationTimeline:o,minBufferTime:2,offlineSessionIds:r.sessionIds,variants:Array.from(s.values()),textStreams:p,imageStreams:y,sequenceMode:r.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:r.type||"UNKNOWN",serviceDescription:null}}function Cw(i,r,o,s){for(var p=new Set,y=t(r),A=y.next();!A.done;A=y.next()){var T=t(A.value.variantIds);for(A=T.next();!A.done;A=T.next())p.add(A.value)}y=t(o);for(A=y.next();!A.done;A=y.next())for(T=t(A.value.variantIds),A=T.next();!A.done;A=T.next())p.add(A.value);y=new Map;p=t(p);for(A=p.next();!A.done;A=p.next())A=A.value,y.set(A,{id:A,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r=t(r);for(p=r.next();!p.done;p=r.next())for(p=p.value,A=Dw(i,p,s),T=t(p.variantIds),p=T.next();!p.done;p=T.next())p=y.get(p.value),p.language=A.language,p.primary=p.primary||A.primary,p.audio=A;o=t(o);for(r=o.next();!r.done;r=o.next())for(p=r.value,r=Dw(i,p,s),A=t(p.variantIds),p=A.next();!p.done;p=A.next())p=y.get(p.value),p.primary=p.primary||r.primary,p.video=r;return y}function Dw(i,r,o){var s=r.segments.map((function(r){return Ew(i,r)}));o.Dd(s);return{id:r.id,originalId:r.originalId,groupId:r.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Oj(s),mimeType:r.mimeType,codecs:r.codecs,width:r.width||void 0,height:r.height||void 0,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,videoLayout:r.videoLayout,kind:r.kind,encrypted:r.encrypted,drmInfos:[],keyIds:r.keyIds,language:r.language,originalLanguage:r.originalLanguage||null,label:r.label,type:r.type,primary:r.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,accessibilityPurpose:null,external:r.external,fastSwitching:r.fastSwitching}}function Ew(i,r){var o=new yw("segment",i.h,i.g,r.dataKey);return new Ph(r.startTime,r.endTime,(function(){return[o.toString()]}),0,null,null!=r.initSegmentKey?Fw(i,r.initSegmentKey):null,r.timestampOffset,r.appendWindowStart,r.appendWindowEnd,[],r.tilesLayout||"")}function Fw(i,r){var o=new yw("segment",i.h,i.g,r);return new Nh((function(){return[o.toString()]}),0,null)}function Gw(){(this||i).g=null}p=Gw.prototype;p.configure=function(){};p.start=function(r,o){var s,p,y,A,T,x,I,C=this||i;return K((function(i){switch(i.g){case 1:s=zw(r);C.g=s;if(null==s||"manifest"!=s.g)throw new P(2,1,9004,r);p=new fw;ua(i,2);return D(i,p.init(),4);case 4:return D(i,jw(p,s.qb(),s.Ma()),5);case 5:return y=i.h,D(i,y.getManifests([s.key()]),6);case 6:return A=i.h,T=A[0],x=new Aw(s.qb(),s.Ma()),I=Bw(x,T),o.makeTextStreamsForClosedCaptions(I),i.return(I);case 2:return xa(i),D(i,p.destroy(),7);case 7:ya(i,0)}}))};p.stop=function(){return Promise.resolve()};p.update=function(){};p.onExpirationUpdated=function(r,o){var s,p,y,A,T,x,I,C=this||i;return K((function(i){switch(i.g){case 1:return s=C.g,p=new fw,ta(i,2,3),D(i,p.init(),5);case 5:return D(i,jw(p,s.qb(),s.Ma()),6);case 6:return y=i.h,D(i,y.getManifests([s.key()]),7);case 7:A=i.h;T=A[0];x=T.sessionIds.includes(r);I=void 0==T.expiration||T.expiration>o;if(!x||!I){i.F(3);break}return D(i,y.updateManifestExpiration(s.key(),o),3);case 3:return xa(i),D(i,p.destroy(),10);case 10:ya(i,0);break;case 2:wa(i),i.F(3)}}))};p.onInitialVariantChosen=function(){};p.banLocation=function(){};uo["application/x-offline-manifest"]=function(){return new Gw};function Hw(){}function Iw(i){var r=zw(i);r&&"manifest"==r.g?(i={uri:i,originalUri:i,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},i=qf(i)):i=r&&"segment"==r.g?Jw(r.key(),r):of(new P(2,1,9004,i));return i}function Jw(i,r){var o=new fw;return qf(void 0).Fa((function(){return o.init()})).Fa((function(){return jw(o,r.qb(),r.Ma())})).Fa((function(i){return i.getSegments([r.key()])})).Fa((function(i){return{uri:r,data:i[0].data,headers:{}}})).finally((function(){return o.destroy()}))}L("shaka.offline.OfflineScheme",Hw);Hw.plugin=Iw;xf("offline",Iw);function Kw(i,r,o){var s,p,y,A,T,x;return K((function(I){switch(I.g){case 1:s=[];for(var C=[],M=t(o),N=M.next();!N.done;N=M.next()){N=N.value;for(var _=!1,j=t(C),B=j.next();!B.done;B=j.next())if(B=B.value,Lw(B.info,N)){B.sessionIds.push(N.sessionId);_=!0;break}_||C.push({info:N,sessionIds:[N.sessionId]})}p=t(C);y=p.next();case 2:if(y.done){I.F(4);break}A=y.value;T=Mw(i,r,A);return D(I,T,5);case 5:x=I.h;s=s.concat(x);y=p.next();I.F(2);break;case 4:return I.return(s)}}))}function Mw(i,r,o){var s,p;return K((function(y){switch(y.g){case 1:return s=new Sg({zc:r,onError:function(){},Fe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ta(y,2),s.configure(i),D(y,$g(s,o.info.keySystem,o.info.licenseUri,o.info.serverCertificate,o.info.audioCapabilities,o.info.videoCapabilities),4);case 4:va(y,3);break;case 2:return wa(y),D(y,s.destroy(),5);case 5:return y.return([]);case 3:return p=[],D(y,Promise.all(o.sessionIds.map((function(i){return K((function(r){if(1==r.g)return ta(r,2),D(r,lh(s,i),4);if(2!=r.g)return p.push(i),va(r,0);wa(r);F(r)}))}))),6);case 6:return D(y,s.destroy(),7);case 7:return y.return(p)}}))}function Lw(i,r){function c(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return i.keySystem==r.keySystem&&i.licenseUri==r.licenseUri&&wc(i.audioCapabilities,r.audioCapabilities,c)&&wc(i.videoCapabilities,r.videoCapabilities,c)}function Nw(i,r,o){var s=r.presentationTimeline.getDuration();r=Ow(r);return{offlineUri:null,originalManifestUri:i,duration:s,size:0,expiration:Infinity,tracks:r,appMetadata:o,isIncomplete:!1}}function Pw(i,r){var o=Bw(new Aw(i.qb(),i.Ma()),r),s=r.appMetadata||{};o=Ow(o);return{offlineUri:i.toString(),originalManifestUri:r.originalManifestUri,duration:r.duration,size:r.size,expiration:r.expiration,tracks:o,appMetadata:s,isIncomplete:r.isIncomplete||!1}}function Ow(i){var r=[],o=Ce(i.variants);o=t(o);for(var s=o.next();!s.done;s=o.next())r.push(te(s.value));i=t(i.textStreams);for(o=i.next();!o.done;o=i.next())r.push(ue(o.value));return r}function Qw(){(this||i).g={}}function Rw(i,r){var o=r.audio,s=r.video;o&&!s&&(i.g[o.id]=o.bandwidth||r.bandwidth);!o&&s&&(i.g[s.id]=s.bandwidth||r.bandwidth);if(o&&s){var p=o.bandwidth||393216,y=s.bandwidth||r.bandwidth-p;0>=y&&(y=r.bandwidth);i.g[o.id]=p;i.g[s.id]=y}}function Sw(i,r){i.g[r.id]=r.bandwidth||2048}function Tw(i,r){i=i.g[r];null==i&&(i=0);return i}function Uw(r){var o=this||i;if(r&&r.constructor!=V)throw new P(2,9,9008);(this||i).g=(this||i).h=null;r?((this||i).h=r.g,(this||i).g=r.Zb()):((this||i).h=$l(),(this||i).g=new wf);(this||i).i=[];(this||i).j=[];var s=!r;(this||i).l=new If((function(){var i,r,p,y,A;return K((function(T){switch(T.g){case 1:return D(T,Promise.all(o.j.map((function(i){return Qv(i)}))),2);case 2:i=function(){};r=[];p=t(o.i);for(y=p.next();!y.done;y=p.next())A=y.value,r.push(A.then(i,i));return D(T,Promise.all(r),3);case 3:if(!s){T.F(4);break}return D(T,o.g.destroy(),4);case 4:o.h=null,o.g=null,F(T)}}))}))}function Vw(){if(Ed())e:{var i=t(eg.values());for(var r=i.next();!r.done;r=i.next())if(r=r.value,r=r()){r.destroy();i=!0;break e}i=!1}else i=!1;return i}p=Uw.prototype;p.destroy=function(){return(this||i).l.destroy()};p.configure=function(r,o){2==arguments.length&&"string"==typeof r&&(r=Ql(r,o));return bm((this||i).h,r)};p.getConfiguration=function(){var r=$l();bm(r,(this||i).h,$l());return r};p.Zb=function(){return(this||i).g};p.store=function(r,o,s){var p=this||i,y=this.getConfiguration(),A=new Pv((this||i).g);(this||i).j.push(A);o=Ww(this||i,r,o||{},(function(){var i;return K((function(o){if(1==o.g)return s?o.F(2):D(o,Vk(r,p.g,y.manifest.retryParameters),3);2!=o.g&&(s=o.h);i=Hh(r,s||null);return o.return(i())}))}),y,A);o=new nf(o,(function(){return Qv(A)}));o.finally((function(){vc(p.j,A)}));return Xw(this||i,o)};function Ww(i,r,o,s,p,y){var A,T,x,I,C,M,N,_,j,B,z,G,q,H;return K((function(Y){switch(Y.g){case 1:return Yw(),T=A=null,x=new fw,M=C=I=null,ta(Y,2,3),D(Y,s(),5);case 5:return A=Y.h,D(Y,Zw(i,r,A,p),6);case 6:N=Y.h;$w(i);_=!N.presentationTimeline.R()&&!N.presentationTimeline.wc();if(!_)throw new P(2,9,9005,r);return D(Y,ax(i,N,(function(i){M=M||i}),p),7);case 7:T=Y.h;$w(i);if(M)throw M;return D(Y,bx(N,T,p),8);case 8:return D(Y,x.init(),9);case 9:return $w(i),D(Y,hw(x),10);case 10:return I=Y.h,$w(i),j=cx(T,N,r,o,p,y),B=j.Si,z=j.vg,D(Y,I.Ma.addManifests([B]),11);case 11:G=Y.h;$w(i);C=G[0];$w(i);if(M)throw M;return D(Y,dx(i,z,C,B,y,p,I.Ma,N,T),12);case 12:return $w(i),ex(N,B,T,p),D(Y,I.Ma.updateManifest(C,B),13);case 13:return $w(i),q=new yw("manifest",I.path.qb,I.path.Ma,C),Y.return(Pw(q,B));case 3:return xa(Y),D(Y,x.destroy(),14);case 14:if(!A){Y.F(15);break}return D(Y,A.stop(),15);case 15:if(!T){Y.F(17);break}return D(Y,T.destroy(),17);case 17:ya(Y,0);break;case 2:H=wa(Y);if(null==C){Y.F(19);break}return D(Y,fx(C),19);case 19:throw M||H}}))}function dx(i,r,o,s,p,y,A,T,x){var I,C,M,N,_,j,B,z,G,q;return K((function(H){switch(H.g){case 1:I={};C=0;M=function(r,M){var N,_,j,B,z,G,q;return K((function(H){if(1==H.g){N={};_=t(r);for(j=_.next();!j.done;N={kc:N.kc},j=_.next())N.kc=j.value,B=Mv(N.kc,y),z=N.kc.i,G=N.kc.h,q=function(r){return function(o){var s,p,y;return K((function(T){if(1==T.g)return D(T,A.addSegments([{data:o}]),2);s=T.h;$w(i);p=r.kc.g;y=Lv(p);I[y]=s[0];C+=o.byteLength;F(T)}))}}(N),Sv(p,N.kc.groupId,B,z,G,q);return D(H,Uv(p),2)}if(!M)return H.F(0);$w(i);ex(T,s,x,y);return D(H,A.updateManifest(o,s),0)}))};N=!1;ta(H,2);if(!gx(T)||!N||hx(T)){H.F(4);break}return D(H,M(r.filter((function(i){return i.h})),!0),5);case 5:return $w(i),r=r.filter((function(i){return!i.h})),_=I,j=C,I={},C=0,D(H,ix(A,o,s,_,j,(function(){return $w(i)})),6);case 6:$w(i);case 4:if(N){H.F(7);break}return D(H,M(r,!1),8);case 8:return $w(i),B=I,z=C,I={},C=0,D(H,ix(A,o,s,B,z,(function(){return $w(i)})),9);case 9:$w(i);case 7:va(H,0);break;case 2:return G=wa(H),q=Object.values(I),D(H,A.removeSegments(q,(function(){})),10);case 10:throw G}}))}function fx(i){var r,o,s,p;return K((function(y){switch(y.g){case 1:return r=new fw,D(y,r.init(),2);case 2:return D(y,hw(r),3);case 3:return o=y.h,s=new yw("manifest",o.path.qb,o.path.Ma,i),D(y,r.destroy(),4);case 4:return p=new Uw,D(y,p.remove(s.toString()),0)}}))}function ix(i,r,o,s,p,y){var A,T,x,I,C,M,N,_,j,B,z;return K((function(G){switch(G.g){case 1:A=!1;ta(G,2);T=!0;x=t(o.streams);for(I=x.next();!I.done;I=x.next())for(C=I.value,M=t(C.segments),N=M.next();!N.done;N=M.next())_=N.value,j=_.pendingSegmentRefId?s[_.pendingSegmentRefId]:null,null!=j&&(_.dataKey=j,_.pendingSegmentRefId=void 0),j=_.pendingInitSegmentRefId?s[_.pendingInitSegmentRefId]:null,null!=j&&(_.initSegmentKey=j,_.pendingInitSegmentRefId=void 0),_.pendingSegmentRefId&&(T=!1),_.pendingInitSegmentRefId&&(T=!1);o.size+=p;T&&(o.isIncomplete=!1);return D(G,i.updateManifest(r,o),4);case 4:A=!0;y();va(G,0);break;case 2:return B=wa(G),D(G,fx(r),5);case 5:if(A){G.F(6);break}z=Object.values(s);return D(G,i.removeSegments(z,(function(){})),6);case 6:throw B}}))}function bx(i,r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y,Q,J,$,ne,re,xe,Ne,_e,Ke,qe;return K((function(Ze){switch(Ze.g){case 1:return s={width:Infinity,height:Infinity},ae(i,o.restrictions,s),D(Ze,ee(r,i,o.offline.usePersistentLicense),2);case 2:p=[];y=o.preferredDecodingAttributes;A=o.preferredVideoCodecs;T=o.preferredAudioCodecs;Zd(i,A,T,y);x=t(i.variants);for(I=x.next();!I.done;I=x.next())C=I.value,p.push(te(C));M=t(i.textStreams);for(N=M.next();!N.done;N=M.next())_=N.value,p.push(ue(_));j=t(i.imageStreams);for(B=j.next();!B.done;B=j.next())z=B.value,p.push(ve(z));return D(Ze,o.offline.trackSelectionCallback(p),3);case 3:G=Ze.h;q=i.presentationTimeline.getDuration();H=0;Y=t(G);for(Q=Y.next();!Q.done;Q=Y.next())J=Q.value,$=J.bandwidth*q/8,H+=$;ta(Ze,4);return D(Ze,o.offline.downloadSizeCallback(H),6);case 6:ne=Ze.h;if(!ne)throw new P(2,9,9014);va(Ze,5);break;case 4:re=wa(Ze);if(re instanceof P)throw re;throw new P(2,9,9015);case 5:xe=new Set;Ne=new Set;_e=new Set;Ke=t(G);for(Q=Ke.next();!Q.done;Q=Ke.next())qe=Q.value,"variant"==qe.type&&xe.add(qe.id),"text"==qe.type&&Ne.add(qe.id),"image"==qe.type&&_e.add(qe.id);i.variants=i.variants.filter((function(i){return xe.has(i.id)}));i.textStreams=i.textStreams.filter((function(i){return Ne.has(i.id)}));i.imageStreams=i.imageStreams.filter((function(i){return _e.has(i.id)}));jx(i);F(Ze)}}))}function cx(i,r,o,s,p,y){var A=Nw(o,r,s),T=p.offline.progressCallback;Rv(y,(function(i,r){A.size=r;T(A,i)}),(function(r,o){x&&p.offline.usePersistentLicense&&I==o&&hh(i,"cenc",r)}));var x=gx(r)&&!hx(r),I=null;x&&(I=ng.get(i.g.keySystem));for(var C=new Qw,M=t(r.textStreams),N=M.next();!N.done;N=M.next())C.g[N.value.id]=52;M=t(r.imageStreams);for(N=M.next();!N.done;N=M.next())Sw(C,N.value);N=t(r.variants);for(M=N.next();!M.done;M=N.next())Rw(C,M.value);C=lx(y,C,r,p);y=C.streams;C=C.vg;N=i.g;M=p.offline.usePersistentLicense;N&&M&&(N.initData=[]);return{Si:{creationTime:Date.now(),originalManifestUri:o,duration:r.presentationTimeline.getDuration(),size:0,expiration:i.td(),streams:y,sessionIds:M?rh(i):[],drmInfo:N,appMetadata:s,isIncomplete:!0,sequenceMode:r.sequenceMode,type:r.type},vg:C}}function gx(i){return i.variants.some((function(i){var r=i.audio&&i.audio.encrypted;return i.video&&i.video.encrypted||r}))}function hx(i){return i.variants.some((function(i){return(i.video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]).some((function(i){return i.initData&&i.initData.length}))}))}function ex(i,r,o,s){r.expiration=o.td();o=rh(o);r.sessionIds=s.offline.usePersistentLicense?o:[];if(gx(i)&&s.offline.usePersistentLicense&&!o.length)throw new P(2,9,9007)}p.remove=function(r){return mx(this||i,nx(this||i,r))};function nx(i,r){var o,s,p,y,A,T;return K((function(x){switch(x.g){case 1:Yw();o=zw(r);if(null==o||"manifest"!=o.g)throw new P(2,9,9004,r);s=o;p=new fw;ua(x,2);return D(x,p.init(),4);case 4:return D(x,jw(p,s.qb(),s.Ma()),5);case 5:return y=x.h,D(x,y.getManifests([s.key()]),6);case 6:return A=x.h,T=A[0],D(x,Promise.all([ox(i,T,p),px(y,s,T)]),2);case 2:return xa(x),D(x,p.destroy(),8);case 8:ya(x,0)}}))}function qx(i,r){for(var o=[],s=t(i.streams),p=s.next();!p.done;p=s.next())p=p.value,r&&"video"==p.type?o.push({contentType:dd(p.mimeType,p.codecs),robustness:i.drmInfo.videoRobustness}):r||"audio"!=p.type||o.push({contentType:dd(p.mimeType,p.codecs),robustness:i.drmInfo.audioRobustness});return o}function ox(i,r,o){return K((function(s){return D(s,rx(i.g,i.h.drm,o,r),0)}))}function px(i,r,o){function d(){}var s=sx(o);Pw(r,o);return Promise.all([i.removeSegments(s,d),i.removeManifests([r.key()],d)])}p.fj=function(){return mx(this||i,tx(this||i))};function tx(i){var r,o,s,p,y,A,T,x,I,C;return K((function(M){switch(M.g){case 1:return Yw(),r=i.g,o=i.h.drm,s=new fw,p=!1,ua(M,2),D(M,s.init(),4);case 4:y=[],kw(s,(function(i){return y.push(i)})),A=t(y),T=A.next();case 5:if(T.done){M.F(2);break}x=T.value;return D(M,x.getAll(),8);case 8:return I=M.h,D(M,Kw(o,r,I),9);case 9:return C=M.h,D(M,x.remove(C),10);case 10:C.length!=I.length&&(p=!0);T=A.next();M.F(5);break;case 2:return xa(M),D(M,s.destroy(),11);case 11:ya(M,3);break;case 3:return M.return(!p)}}))}p.list=function(){return mx(this||i,ux())};function ux(){var i,r,o;return K((function(s){switch(s.g){case 1:return Yw(),i=[],r=new fw,ua(s,2),D(s,r.init(),4);case 4:return o=Promise.resolve(),iw(r,(function(r,s){o=o.then((function(){var o;return K((function(p){if(1==p.g)return D(p,s.getAllManifests(),2);o=p.h;o.forEach((function(o,s){o=Pw(new yw("manifest",r.qb,r.Ma,s),o);i.push(o)}));F(p)}))}))})),D(s,o,2);case 2:return xa(s),D(s,r.destroy(),6);case 6:ya(s,3);break;case 3:return s.return(i)}}))}function Zw(i,r,o,s){var p,y,A,T,x;return K((function(I){if(1==I.g)return p=null,y=i.g,A={networkingEngine:y,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(i){p=i},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return s.abr.defaultBandwidthEstimate}},o.configure(s.manifest),$w(i),D(I,o.start(r,A),2);if(3!=I.g)return T=I.h,$w(i),x=vx(T),D(I,Promise.all(ab(x,(function(i){return i.createSegmentIndex()}))),3);$w(i);if(p)throw p;return I.return(T)}))}function ax(i,r,o,s){var p;return K((function(y){return 1==y.g?(p=new Sg({zc:i.g,onError:o,Fe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),p.configure(s.drm),D(y,Xg(p,r.variants,s.offline.usePersistentLicense),2)):3!=y.g?D(y,jh(p),3):y.return(p)}))}function lx(i,r,o,s){var p=new Map,y=vx(o),A=new Map;y=t(y);for(var T=y.next();!T.done;T=y.next()){T=T.value;var x=wx(i,r,o,T,s,p);A.set(T.id,x)}i=t(o.variants);for(r=i.next();!r.done;r=i.next())r=r.value,r.audio&&A.get(r.audio.id).variantIds.push(r.id),r.video&&A.get(r.video.id).variantIds.push(r.id);return{streams:Array.from(A.values()),vg:Array.from(p.values())}}function wx(i,r,o,s,p,y){var A={id:s.id,originalId:s.originalId,groupId:s.groupId,primary:s.primary,type:s.type,mimeType:s.mimeType,codecs:s.codecs,frameRate:s.frameRate,pixelAspectRatio:s.pixelAspectRatio,hdr:s.hdr,videoLayout:s.videoLayout,kind:s.kind,language:s.language,originalLanguage:s.originalLanguage,label:s.label,width:s.width||null,height:s.height||null,encrypted:s.encrypted,keyIds:s.keyIds,segments:[],variantIds:[],roles:s.roles,forced:s.forced,channelsCount:s.channelsCount,audioSamplingRate:s.audioSamplingRate,spatialAudio:s.spatialAudio,closedCaptions:s.closedCaptions,tilesLayout:s.tilesLayout,external:s.external,fastSwitching:s.fastSwitching},T=p.offline.numberOfParallelDownloads,x=0;xx(s,o.presentationTimeline.Ab(),(function(o){var p=Lv(o),I=void 0;if(!y.has(p)){var C=o.endTime-o.startTime;C=Tw(r,s.id)*C;C=Ov(i.g,C);y.set(p,new Kv(o,C,x,!1))}o.ka&&(I=Lv(o.ka),y.has(I)||(C=.5*Tw(r,s.id),C=Ov(i.g,C),y.set(I,new Kv(o.ka,C,x,!0))));A.segments.push({pendingInitSegmentRefId:I,initSegmentKey:I?0:null,startTime:o.startTime,endTime:o.endTime,appendWindowStart:o.appendWindowStart,appendWindowEnd:o.appendWindowEnd,timestampOffset:o.timestampOffset,tilesLayout:o.tilesLayout,pendingSegmentRefId:p,dataKey:0});x=(x+1)%T}));return A}function xx(i,r,o){r=i.segmentIndex.find(r);if(null!=r)for(var s=i.segmentIndex.get(r);s;)o(s),s=i.segmentIndex.get(++r)}function $w(i){if(i.l.g)throw new P(2,9,7001)}function Yw(){if(!Vw())throw new P(2,9,9e3)}function mx(i,r){return K((function(o){if(1==o.g)return i.i.push(r),ua(o,2),D(o,r,4);if(2!=o.g)return o.return(o.h);xa(o);vc(i.i,r);return ya(o,0)}))}function Xw(i,r){var o=r.promise;i.i.push(o);return r.finally((function(){vc(i.i,o)}))}function sx(i){var r=new Set;i=t(i.streams);for(var o=i.next();!o.done;o=i.next()){o=t(o.value.segments);for(var s=o.next();!s.done;s=o.next())s=s.value,null!=s.initSegmentKey&&r.add(s.initSegmentKey),r.add(s.dataKey)}return Array.from(r)}function rx(i,r,o,s){var p,y,A;return K((function(T){if(1==T.g){if(!s.drmInfo)return T.return();p=lw(o);y=s.sessionIds.map((function(i){return{sessionId:i,keySystem:s.drmInfo.keySystem,licenseUri:s.drmInfo.licenseServerUri,serverCertificate:s.drmInfo.serverCertificate,audioCapabilities:qx(s,!1),videoCapabilities:qx(s,!0)}}));return D(T,Kw(r,i,y),2)}return 3!=T.g?(A=T.h,D(T,p.remove(A),3)):D(T,p.add(y.filter((function(i){return!A.includes(i.sessionId)}))),0)}))}function vx(i){for(var r=new Set,o=t(i.textStreams),s=o.next();!s.done;s=o.next())r.add(s.value);o=t(i.imageStreams);for(s=o.next();!s.done;s=o.next())r.add(s.value);i=t(i.variants);for(o=i.next();!o.done;o=i.next())o=o.value,o.audio&&r.add(o.audio),o.video&&r.add(o.video);return r}function jx(i){i.variants.map((function(i){return i.video}));var r=new Set(i.variants.map((function(i){return i.audio})));i=i.textStreams;for(var o=t(r),s=o.next();!s.done;s=o.next()){s=t(r);for(var p=s.next();!p.done;p=s.next());}r=t(i);for(o=r.next();!o.done;o=r.next())for(o=t(i),s=o.next();!s.done;s=o.next());}L("shaka.offline.Storage",Uw);Uw.deleteAll=function(){var i;return K((function(r){return 1==r.g?(i=new fw,ua(r,2),D(r,mw(i),2)):5!=r.g?(xa(r),D(r,i.destroy(),5)):ya(r,0)}))};Uw.prototype.list=Uw.prototype.list;Uw.prototype.removeEmeSessions=Uw.prototype.fj;Uw.prototype.remove=Uw.prototype.remove;Uw.prototype.store=Uw.prototype.store;Uw.prototype.getNetworkingEngine=Uw.prototype.Zb;Uw.prototype.getConfiguration=Uw.prototype.getConfiguration;Uw.prototype.configure=Uw.prototype.configure;Uw.prototype.destroy=Uw.prototype.destroy;Uw.support=Vw;var ng=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Xu.offline=Vw;function yx(){}function zx(){for(var i=t(dg),r=i.next();!r.done;r=i.next()){r=r.value;try{r.callback()}catch(i){Ra("Error installing polyfill!",i)}}}function Bx(i,r){i={priority:r||0,callback:i};for(r=0;r<dg.length;r++)if(dg[r].priority<i.priority){dg.splice(r,0,i);return}dg.push(i)}L("shaka.polyfill",yx);yx.register=Bx;yx.installAll=zx;var dg=[];function Cx(){(this||i).g=new Dx}function Ex(){r.AbortController||(r.AbortController=Cx,r.AbortSignal=Dx)}Cx.prototype.abort=function(r){var o=(this||i).g;if(!o.h){o.h=!0;o.g=r;void 0===o.g&&(o.g=new DOMException("signal is aborted without reason","AbortError"));r=new O("abort");o.onabort&&o.onabort(r);o.dispatchEvent(r)}};A.Object.defineProperties(Cx.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return(this||i).g}}});yx.AbortController=Cx;Cx.install=Ex;function Dx(){$a.call(this||i);(this||i).h=!1;(this||i).g=void 0;(this||i).onabort=null}pa(Dx,$a);A.Object.defineProperties(Dx.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return(this||i).h}},reason:{configurable:!0,enumerable:!0,get:function(){return(this||i).g}}});Bx(Ex);function Fx(){}function Gx(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var i=t(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),r=i.next();!r.done;r=i.next())Hx(r.value)}function Hx(i){var r="aria-"+i.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,i,{get:function(){return this.getAttribute(r)},set:function(i){null==i||void 0==i?this.removeAttribute(r):this.setAttribute(r,i)}})}yx.Aria=Fx;Fx.install=Gx;Bx(Gx);function Ix(){}function Jx(){Kx()}yx.EncryptionScheme=Ix;Ix.install=Jx;Bx(Jx,-2);function Lx(){}function Mx(){if(r.Document){var i=Element.prototype;i.requestFullscreen=i.requestFullscreen||i.mozRequestFullScreen||i.msRequestFullscreen||i.webkitRequestFullscreen;i=Document.prototype;i.exitFullscreen=i.exitFullscreen||i.mozCancelFullScreen||i.msExitFullscreen||i.webkitCancelFullScreen;"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));document.addEventListener("webkitfullscreenchange",Nx);document.addEventListener("webkitfullscreenerror",Nx);document.addEventListener("mozfullscreenchange",Nx);document.addEventListener("mozfullscreenerror",Nx);document.addEventListener("MSFullscreenChange",Nx);document.addEventListener("MSFullscreenError",Nx)}}function Nx(i){var r=i.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),o=document.createEvent("Event");o.initEvent(r,i.bubbles,i.cancelable);i.target.dispatchEvent(o)}yx.Fullscreen=Lx;Lx.install=Mx;Bx(Mx);function Ox(){}function Px(){var i=!0;(Pd()||Jd("PlayStation 5")||Qd()||Jd("Web0S")||Kd()||Od()||Jd("PC=EOS")||Jd("Hisense")||Jd("VIDAA"))&&(i=!1);i&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),mg=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Rx)}function Rx(i){var o,s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y;return K((function(Q){switch(Q.g){case 1:o={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:i};if(!i)return Q.return(o);s=i.video;p=i.audio;if("media-source"==i.type){if(!Ed())return Q.return(o);if(s){if(Od())if(r.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var J=s.contentType;s.width&&s.height&&(J+="; width="+s.width+"; height="+s.height);s.framerate&&(J+="; framerate="+s.framerate);"pq"===s.transferFunction&&(J+="; eotf=smpte2084");y=cast.__platform__.canDisplayType(J)}else y=ac(s.contentType);else Kd()?(A=s.contentType,s.width&&s.height&&(A+="; width="+s.width,A+="; height="+s.height),s.framerate&&(A+="; framerate="+s.framerate),s.bitrate&&(A+="; bitrate="+s.bitrate),y=ac(A)):y=ac(s.contentType);if(!y)return Q.return(o)}if(p&&(Od()&&p.spatialRendering?(x=p.contentType+"; spatialRendering=true",T=ac(x)):T=ac(p.contentType),!T))return Q.return(o)}else{if("file"!=i.type)return Q.return(o);if(s&&(I=s.contentType,C=Fd(I),!C)||p&&(M=p.contentType,N=Fd(M),!N))return Q.return(o)}if(!i.keySystemConfiguration)return o.supported=!0,Q.return(Promise.resolve(o));_=i.keySystemConfiguration;j=[];B=[];_.audio&&(z={robustness:_.audio.robustness||"",contentType:i.audio.contentType},Kd()&&i.audio.contentType.includes('codecs="ac-3"')&&(z={robustness:z.robustness,contentType:'audio/mp4; codecs="ec-3"'}),j.push(z));_.video&&(G={robustness:_.video.robustness||"",contentType:i.video.contentType},B.push(G));q={initDataTypes:[_.initDataType],distinctiveIdentifier:_.distinctiveIdentifier,persistentState:_.persistentState,sessionTypes:_.sessionTypes};j.length&&(q.audioCapabilities=j);B.length&&(q.videoCapabilities=B);H=(i.video?i.video.contentType:"")+"#"+(i.audio?i.audio.contentType:"")+"#"+i.keySystemConfiguration.keySystem;ta(Q,3);if(H in _g){Y=_g[H];Q.F(5);break}return D(Q,navigator.requestMediaKeySystemAccess(_.keySystem,[q]),6);case 6:Y=Q.h,_g[H]=Y;case 5:va(Q,4);break;case 3:wa(Q);case 4:Y&&(o.supported=!0,o.keySystemAccess=Y);case 2:return Q.return(o)}}))}yx.MediaCapabilities=Ox;Ox.install=Px;var mg=null;Ox.originalMcap=mg;var _g={};Ox.memoizedMediaKeySystemAccessRequests_=_g;Bx(Px,-1);function Tx(){}function Ux(){var i=Rd();r.MediaSource&&(Od()?Vx():i?10>=i?r.MediaSource=null:12>=i?(Wx(),Xx()):15>=i&&Wx():Hd()?Vx():(Md()||Ld()||Jd("Tizen 4"))&&Yx());r.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&Zx()}function Wx(){var r=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var o=r.apply(this||i,Ga.apply(0,arguments));o.abort=function(){};return o}}function Xx(){var r=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(o,s){return r.call(this||i,o,s-.001)}}function Vx(){var i=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(r){return"mp2t"!=r.split(";")[0].split("/")[1]&&i(r)}}function Yx(){var i=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(r){return"opus"!=ld(r)&&i(r)}}function Zx(){var i=MediaSource.isTypeSupported;Jd("Web0S")||(MediaSource.isTypeSupported=function(r){var o=r.split(/ *; */),s=o.findIndex((function(i){return i.startsWith("codecs=")}));if(0>s)return i(r);var p=o[s].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),y=p.findIndex((function(i){return i.startsWith("vp09")}));0<=y&&(p[y]="vp9",o[s]='codecs="'+p.join(",")+'"',r=o.join("; "));return i(r)})}yx.MediaSource=Tx;Tx.install=Ux;Bx(Ux);function $x(){}function ay(){screen.orientation&&screen.orientation.unlock||(void 0!=screen.orientation?by():void 0!=r.orientation&&cy())}function by(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()});void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})}function cy(){function a(){switch(r.orientation){case-90:i.type="landscape-secondary";i.angle=270;break;case 0:i.type="portrait-primary";i.angle=0;break;case 90:i.type="landscape-primary";i.angle=90;break;case 180:i.type="portrait-secondary",i.angle=180}}var i=new dy;screen.orientation=i;a();r.addEventListener("orientationchange",(function(){a();var r=new O("change");i.dispatchEvent(r)}))}yx.Orientation=$x;$x.install=ay;function dy(){$a.call(this||i);(this||i).type="";(this||i).angle=0}pa(dy,$a);dy.prototype.lock=function(i){function b(i){return screen.lockOrientation?screen.lockOrientation(i):screen.mozLockOrientation?screen.mozLockOrientation(i):!!screen.msLockOrientation&&screen.msLockOrientation(i)}var r=!1;switch(i){case"natural":r=b("default");break;case"any":r=!0;this.unlock();break;default:r=b(i)}if(r)return Promise.resolve();i=Error("screen.orientation.lock() is not available on this device");i.name="NotSupportedError";i.code=DOMException.NOT_SUPPORTED_ERR;return Promise.reject(i)};dy.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()};Bx(ay);function ey(){}var Qg,im,sm,mm,_m,Xm;function ly(i,r){try{var o=new my(i,r);return Promise.resolve(o)}catch(i){return Promise.reject(i)}}function ny(r){var o=(this||i).mediaKeys;o&&o!=r&&oy(o,null);delete(this||i).mediaKeys;return((this||i).mediaKeys=r)?oy(r,this||i):Promise.resolve()}function py(i){i=lc(i.initData);if(pc(i).getUint32(0,!0)+4!=i.byteLength)throw new RangeError("Malformed FairPlay init data");i=Uf(i.subarray(4),!0);i=Xf(i);var r=new Event("encrypted");r.initDataType="skd";r.initData=mc(i);this.dispatchEvent(r)}yx.PatchedMediaKeysApple=ey;ey.uninstall=function(){Qg&&(Qg=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",im),HTMLMediaElement.prototype.setMediaKeys=sm,r.MediaKeys=mm,r.MediaKeySystemAccess=_m,navigator.requestMediaKeySystemAccess=Xm,im=Xm=sm=_m=mm=null,r.shakaMediaKeysPolyfill=!1)};ey.install=function(i){if(r.HTMLVideoElement&&r.WebKitMediaKeys){(void 0===i?0:i)&&(Qg=!0,im=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),sm=HTMLMediaElement.prototype.setMediaKeys,mm=r.MediaKeys,_m=r.MediaKeySystemAccess,Xm=navigator.requestMediaKeySystemAccess);delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=ny;r.MediaKeys=qy;r.MediaKeySystemAccess=my;navigator.requestMediaKeySystemAccess=ly;r.shakaMediaKeysPolyfill=!0}};function my(r,o){(this||i).keySystem=r;if(r.startsWith("com.apple.fps"))for(r=t(o),o=r.next();!o.done;o=r.next()){var s=o.value;if("required"==s.persistentState)o=null;else{o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label};var p=!1,y=!1;if(s.audioCapabilities)for(var A=t(s.audioCapabilities),T=A.next();!T.done;T=A.next())T=T.value,T.contentType&&(p=!0,WebKitMediaKeys.isTypeSupported((this||i).keySystem,T.contentType.split(";")[0])&&(o.audioCapabilities.push(T),y=!0));if(s.videoCapabilities)for(s=t(s.videoCapabilities),T=s.next();!T.done;T=s.next())A=T.value,A.contentType&&(p=!0,WebKitMediaKeys.isTypeSupported((this||i).keySystem,A.contentType.split(";")[0])&&(o.videoCapabilities.push(A),y=!0));p||(y=WebKitMediaKeys.isTypeSupported((this||i).keySystem,"video/mp4"));o=y?o:null}if(o){(this||i).g=o;return}}r=Error("Unsupported keySystem");r.name="NotSupportedError";r.code=DOMException.NOT_SUPPORTED_ERR;throw r}my.prototype.createMediaKeys=function(){var r=new qy((this||i).keySystem);return Promise.resolve(r)};my.prototype.getConfiguration=function(){return(this||i).g};function qy(r){(this||i).h=new WebKitMediaKeys(r);(this||i).g=new Kf}qy.prototype.createSession=function(r){r=r||"temporary";if("temporary"!=r)throw new TypeError("Session type "+r+" is unsupported on this platform.");return new ry((this||i).h,r)};qy.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function oy(i,r){i.g.ub();if(!r)return Promise.resolve();i.g.o(r,"webkitneedkey",py);try{return zj(r,HTMLMediaElement.HAVE_METADATA,i.g,(function(){r.webkitSetMediaKeys(i.h)})),Promise.resolve()}catch(i){return Promise.reject(i)}}qy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function ry(r){$a.call(this||i);(this||i).i=null;(this||i).l=r;(this||i).g=(this||i).h=null;(this||i).j=new Kf;(this||i).sessionId="";(this||i).expiration=NaN;(this||i).closed=new mf;(this||i).keyStatuses=new sy}pa(ry,$a);p=ry.prototype;p.generateRequest=function(r,o){var s=this||i;(this||i).h=new mf;try{var p=(this||i).l.createSession("video/mp4",lc(o));(this||i).i=p;(this||i).sessionId=p.sessionId||"";(this||i).j.o((this||i).i,"webkitkeymessage",(function(i){s.h&&(s.h.resolve(),s.h=null);i=(new Map).set("messageType",void 0==s.keyStatuses.sc()?"license-request":"license-renewal").set("message",mc(i.message));i=new O("message",i);s.dispatchEvent(i)}));(this||i).j.o(p,"webkitkeyadded",(function(){s.g&&(ty(s,"usable"),s.g.resolve(),s.g=null)}));(this||i).j.o(p,"webkitkeyerror",(function(){var i=Error("EME PatchedMediaKeysApple key error");i.errorCode=s.i.error;if(null!=s.h)s.h.reject(i),s.h=null;else if(null!=s.g)s.g.reject(i),s.g=null;else switch(s.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ty(s,"output-not-allowed");break;default:ty(s,"internal-error")}}));ty(this||i,"status-pending")}catch(r){(this||i).h.reject(r)}return(this||i).h};p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};p.update=function(r){(this||i).g=new mf;try{(this||i).i.update(lc(r))}catch(r){(this||i).g.reject(r)}return(this||i).g};p.close=function(){try{(this||i).i.close(),(this||i).closed.resolve(),(this||i).j.ub()}catch(r){(this||i).closed.reject(r)}return(this||i).closed};p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function ty(i,r){var o=i.keyStatuses;o.size=void 0==r?0:1;o.g=r;r=new O("keystatuseschange");i.dispatchEvent(r)}function sy(){(this||i).size=0;(this||i).g=void 0}p=sy.prototype;p.sc=function(){return(this||i).g};p.forEach=function(r){(this||i).g&&r((this||i).g,so.value())};p.get=function(r){if(this.has(r))return(this||i).g};p.has=function(r){var o=so.value();return!(!(this||i).g||!jc(r,o))};p.entries=function(){};p.keys=function(){};p.values=function(){};function uy(){}function vy(){!r.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=wy,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=xy,r.MediaKeys=yy,r.MediaKeySystemAccess=zy,r.shakaMediaKeysPolyfill=!0)}function wy(){return Promise.reject(Error("The key system specified is not supported."))}function xy(i){return null==i?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}yx.PatchedMediaKeysNop=uy;uy.install=vy;function yy(){throw new TypeError("Illegal constructor.")}yy.prototype.createSession=function(){};yy.prototype.setServerCertificate=function(){};yy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function zy(){(this||i).keySystem="";throw new TypeError("Illegal constructor.")}zy.prototype.getConfiguration=function(){};zy.prototype.createMediaKeys=function(){};Bx(vy,-10);function Ay(){}function By(){if(!(!r.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)ev="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Dy;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=Ey;r.MediaKeys=Fy;r.MediaKeySystemAccess=Gy;r.shakaMediaKeysPolyfill=!0}}function Hy(i){var r=ev;return r?r+i.charAt(0).toUpperCase()+i.slice(1):i}function Dy(i,r){try{var o=new Gy(i,r);return Promise.resolve(o)}catch(i){return Promise.reject(i)}}function Ey(r){var o=(this||i).mediaKeys;o&&o!=r&&Iy(o,null);delete(this||i).mediaKeys;((this||i).mediaKeys=r)&&Iy(r,this||i);return Promise.resolve()}yx.PatchedMediaKeysWebkit=Ay;Ay.install=By;function Gy(r,o){(this||i).g=(this||i).keySystem=r;var s=!1;"org.w3.clearkey"==r&&((this||i).g="webkit-org.w3.clearkey",s=!1);var p=!1;var y=document.getElementsByTagName("video");y=y.length?y[0]:document.createElement("video");o=t(o);for(var A=o.next();!A.done;A=o.next()){A=A.value;var T={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:A.initDataTypes,sessionTypes:["temporary"],label:A.label},x=!1;if(A.audioCapabilities)for(var I=t(A.audioCapabilities),C=I.next();!C.done;C=I.next())C=C.value,C.contentType&&(x=!0,y.canPlayType(C.contentType.split(";")[0],(this||i).g)&&(T.audioCapabilities.push(C),p=!0));if(A.videoCapabilities)for(I=t(A.videoCapabilities),C=I.next();!C.done;C=I.next())C=C.value,C.contentType&&(x=!0,y.canPlayType(C.contentType,(this||i).g)&&(T.videoCapabilities.push(C),p=!0));x||(p=y.canPlayType("video/mp4",(this||i).g)||y.canPlayType("video/webm",(this||i).g));"required"==A.persistentState&&(s?(T.persistentState="required",T.sessionTypes=["persistent-license"]):p=!1);if(p){(this||i).h=T;return}}s="Unsupported keySystem";"org.w3.clearkey"!=r&&"com.widevine.alpha"!=r||(s="None of the requested configurations were supported.");r=Error(s);r.name="NotSupportedError";r.code=DOMException.NOT_SUPPORTED_ERR;throw r}Gy.prototype.createMediaKeys=function(){var r=new Fy((this||i).g);return Promise.resolve(r)};Gy.prototype.getConfiguration=function(){return(this||i).h};function Fy(r){(this||i).l=r;(this||i).h=null;(this||i).g=new Kf;(this||i).i=[];(this||i).j=new Map}function Iy(i,r){i.h=r;i.g.ub();var o=ev;r&&(i.g.o(r,o+"needkey",(function(r){var o=new CustomEvent("encrypted");o.initDataType="cenc";o.initData=mc(r.initData);i.h.dispatchEvent(o)})),i.g.o(r,o+"keymessage",(function(r){var o=Jy(i,r.sessionId);o&&(r=(new Map).set("messageType",void 0==o.keyStatuses.sc()?"licenserequest":"licenserenewal").set("message",r.message),r=new O("message",r),o.h&&(o.h.resolve(),o.h=null),o.dispatchEvent(r))})),i.g.o(r,o+"keyadded",(function(r){(r=Jy(i,r.sessionId))&&(Ky(r,"usable"),r.g&&r.g.resolve(),r.g=null)})),i.g.o(r,o+"keyerror",(function(r){var o=Jy(i,r.sessionId);if(o){var s=Error("EME v0.1b key error"),p=r.errorCode;p.systemCode=r.systemCode;s.errorCode=p;!r.sessionId&&o.h?(45==r.systemCode&&(s.message="Unsupported session type."),o.h.reject(s),o.h=null):r.sessionId&&o.g?(o.g.reject(s),o.g=null):(s=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ky(o,"output-restricted"):Ky(o,1==s?"expired":"internal-error"))}})))}Fy.prototype.createSession=function(r){r=r||"temporary";if("temporary"!=r&&"persistent-license"!=r)throw new TypeError("Session type "+r+" is unsupported on this platform.");var o=(this||i).h||document.createElement("video");o.src||(o.src="about:blank");r=new Ly(o,(this||i).l,r);(this||i).i.push(r);return r};Fy.prototype.setServerCertificate=function(){return Promise.resolve(!1)};Fy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Jy(i,r){var o=i.j.get(r);return o||((o=i.i.shift())?(o.sessionId=r,i.j.set(r,o),o):null)}function Ly(r,o,s){$a.call(this||i);(this||i).j=r;(this||i).m=!1;(this||i).g=(this||i).h=null;(this||i).i=o;(this||i).l=s;(this||i).sessionId="";(this||i).expiration=NaN;(this||i).closed=new mf;(this||i).keyStatuses=new My}pa(Ly,$a);function Ny(i,r,o){if(i.m)return Promise.reject(Error("The session is already initialized."));i.m=!0;try{if("persistent-license"==i.l)if(o)var s=lc(Xf("LOAD_SESSION|"+o));else{var p=Xf("PERSISTENT|");s=tg(p,r)}else s=lc(r)}catch(i){return Promise.reject(i)}i.h=new mf;var y=Hy("generateKeyRequest");try{i.j[y](i.i,s)}catch(r){if("InvalidStateError"!=r.name)return i.h=null,Promise.reject(r);new Dd((function(){try{i.j[y](i.i,s)}catch(r){i.h.reject(r),i.h=null}})).S(.01)}return i.h}function Oy(i,r,o){if(i.g)i.g.then((function(){return Oy(i,r,o)})).catch((function(){return Oy(i,r,o)}));else{i.g=r;if("webkit-org.w3.clearkey"==i.i){var s=Tf(o);var p=JSON.parse(s);"oct"!=p.keys[0].kty&&(i.g.reject(Error("Response is not a valid JSON Web Key Set.")),i.g=null);s=qg(p.keys[0].k);p=qg(p.keys[0].kid)}else s=lc(o),p=null;var y=Hy("addKey");try{i.j[y](i.i,s,p,i.sessionId)}catch(r){i.g.reject(r),i.g=null}}}function Ky(i,r){var o=i.keyStatuses;o.size=void 0==r?0:1;o.g=r;r=new O("keystatuseschange");i.dispatchEvent(r)}p=Ly.prototype;p.generateRequest=function(r,o){return Ny(this||i,o,null)};p.load=function(r){return"persistent-license"==(this||i).l?Ny(this||i,null,r):Promise.reject(Error("Not a persistent session."))};p.update=function(r){var o=new mf;Oy(this||i,o,r);return o};p.close=function(){if("persistent-license"!=(this||i).l){if(!(this||i).sessionId)return(this||i).closed.reject(Error("The session is not callable.")),(this||i).closed;var r=Hy("cancelKeyRequest");try{(this||i).j[r]((this||i).i,(this||i).sessionId)}catch(i){}}(this||i).closed.resolve();return(this||i).closed};p.remove=function(){return"persistent-license"!=(this||i).l?Promise.reject(Error("Not a persistent session.")):this.close()};function My(){(this||i).size=0;(this||i).g=void 0}p=My.prototype;p.sc=function(){return(this||i).g};p.forEach=function(r){(this||i).g&&r((this||i).g,so.value())};p.get=function(r){if(this.has(r))return(this||i).g};p.has=function(r){var o=so.value();return!(!(this||i).g||!jc(r,o))};p.entries=function(){};p.keys=function(){};p.values=function(){};var ev="";Bx(By);function Py(){}function Qy(){if(r.HTMLVideoElement){var i=HTMLVideoElement.prototype;i.requestPictureInPicture&&document.exitPictureInPicture||!i.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,i.requestPictureInPicture=Ry,Object.defineProperty(i,"disablePictureInPicture",{get:Sy,set:Ty,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Uy,document.addEventListener("webkitpresentationmodechanged",Vy,!0))}}function Vy(i){i=i.target;if("picture-in-picture"==i.webkitPresentationMode){document.pictureInPictureElement=i;var r=new Event("enterpictureinpicture");i.dispatchEvent(r)}else document.pictureInPictureElement==i&&(document.pictureInPictureElement=null),r=new Event("leavepictureinpicture"),i.dispatchEvent(r)}function Ry(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this||i,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Uy(){var i=document.pictureInPictureElement;return i?(i.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Sy(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Ty(i){i?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}yx.PiPWebkit=Py;Py.install=Qy;Bx(Qy);function Wy(){}function Xy(){r.crypto&&("randomUUID"in r.crypto||(r.crypto.randomUUID=Yy))}function Yy(){var i=URL.createObjectURL(new Blob),r=i.toString();URL.revokeObjectURL(i);return r.substr(r.lastIndexOf("/")+1)}yx.RandomUUID=Wy;Wy.install=Xy;Bx(Xy);function Zy(){}function $y(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=az)}function az(){return new Promise((function(i,r){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(r,o){i({usage:r,quota:o})}),r)}))}yx.StorageEstimate=Zy;Zy.install=$y;Bx($y);function bz(){}function cz(){var i=Symbol.prototype;"description"in i||Object.defineProperty(i,"description",{get:dz})}function dz(){var i=/\((.*)\)/.exec(this.toString());return i?i[1]:void 0}yx.Symbol=bz;bz.install=cz;Bx(cz);function ez(){}function fz(){if(r.HTMLMediaElement){var o=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var r=o.apply(this||i);r&&r.catch((function(){}));return r}}}yx.VideoPlayPromise=ez;ez.install=fz;Bx(fz);function gz(){}function hz(){if(r.HTMLVideoElement){var i=HTMLVideoElement.prototype;!i.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in i||Nd())&&(i.getVideoPlaybackQuality=iz)}}function iz(){return{droppedVideoFrames:(this||i).webkitDroppedFrameCount,totalVideoFrames:(this||i).webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}yx.VideoPlaybackQuality=gz;gz.install=hz;Bx(hz);function jz(){}function kz(){if(!r.VTTCue&&r.TextTrackCue){var i=null,o=TextTrackCue.length;if(3==o)i=lz;else if(6==o)i=mz;else{try{var s=!!lz(1,2,"")}catch(i){s=!1}s&&(i=lz)}i&&(r.VTTCue=function(r,o,s){return i(r,o,s)})}}function lz(i,o,s){return new r.TextTrackCue(i,o,s)}function mz(i,o,s){return new r.TextTrackCue(i+"-"+o+"-"+s,i,o,s)}yx.VTTCue=jz;jz.install=kz;Bx(kz);function nz(){}nz.prototype.parseInit=function(){};nz.prototype.setSequenceMode=function(){};nz.prototype.setManifestType=function(){};nz.prototype.parseMedia=function(i,r){var o=null,s=[];i=Tf(i).split(/\r?\n/);i=t(i);for(var p=i.next();!p.done;p=i.next())if((p=p.value)&&!/^\s+$/.test(p)&&(p=iv.exec(p))){var y=rv.exec(p[1]);y=60*parseInt(y[1],10)+parseFloat(y[2].replace(",","."));p=new yc(y,r.segmentEnd?r.segmentEnd:y+2,p[2]);o&&(o.endTime=y,s.push(o));o=p}o&&s.push(o);return s};L("shaka.text.LrcTextParser",nz);nz.prototype.parseMedia=nz.prototype.parseMedia;nz.prototype.setManifestType=nz.prototype.setManifestType;nz.prototype.setSequenceMode=nz.prototype.setSequenceMode;nz.prototype.parseInit=nz.prototype.parseInit;var iv=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,rv=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Xr["application/x-subtitle-lrc"]=function(){return new nz};function qz(){}qz.prototype.parseInit=function(){};qz.prototype.setSequenceMode=function(){};qz.prototype.setManifestType=function(){};qz.prototype.parseMedia=function(i,r,o){var s=Tf(i);i=[];if(""==s)return i;var p=Pg(s,"tt");if(!p)throw new P(2,2,2005,"Failed to parse TTML.");s=p.getElementsByTagName("body")[0];if(!s)return[];var y=Cg(p,hy,"frameRate"),A=Cg(p,hy,"subFrameRate"),T=Cg(p,hy,"frameRateMultiplier"),x=Cg(p,hy,"tickRate"),I=Cg(p,hy,"cellResolution"),C=p.getAttribute("xml:space")||"default",M=Cg(p,fy,"extent");if("default"!=C&&"preserve"!=C)throw new P(2,2,2005,"Invalid xml:space value: "+C);C="default"==C;y=new tz(y,A,T,x);I=I&&(I=/^(\d+) (\d+)$/.exec(I))?{mc:parseInt(I[1],10),rows:parseInt(I[2],10)}:null;A=(A=p.getElementsByTagName("metadata")[0])?Ag(A):[];T=Array.from(p.getElementsByTagName("style"));p=Array.from(p.getElementsByTagName("region"));x=[];for(var N=t(p),_=N.next();!_.done;_=N.next()){var j=_.value;_=new zc;var B=j.getAttribute("xml:id");if(B){_.id=B;var z=null;M&&(z=lv.exec(M)||gv.exec(M));B=z?Number(z[1]):null;z=z?Number(z[2]):null;var G,q=wz(j,T,"extent");if(q){var H=(G=lv.exec(q))||gv.exec(q);null!=H&&(_.width=Number(H[1]),_.height=Number(H[2]),G||(null!=B&&(_.width=100*_.width/B),null!=z&&(_.height=100*_.height/z)),_.widthUnits=G||null!=B?ji:0,_.heightUnits=G||null!=z?ji:0)}(j=wz(j,T,"origin"))&&(H=(G=lv.exec(j))||gv.exec(j),null!=H)&&(_.viewportAnchorX=Number(H[1]),_.viewportAnchorY=Number(H[2]),G?q||(_.width=100-_.viewportAnchorX,_.widthUnits=ji,_.height=100-_.viewportAnchorY,_.heightUnits=ji):(null!=z&&(_.viewportAnchorY=100*_.viewportAnchorY/z),null!=B&&(_.viewportAnchorX=100*_.viewportAnchorX/B)),_.viewportAnchorUnits=G||null!=B?ji:0)}else _=null;_&&x.push(_)}if(xg(s,"p").length)throw new P(2,2,2001,"<p> can only be inside <div> in TTML");M=t(xg(s,"div"));for(N=M.next();!N.done;N=M.next())if(xg(N.value,"span").length)throw new P(2,2,2001,"<span> can only be inside <p> in TTML");(r=xz(s,r,y,A,T,p,x,C,I,null,!1,o))&&(r.backgroundColor||(r.backgroundColor="transparent"),i.push(r));return i};function xz(i,r,o,s,p,y,A,T,x,I,C,M){var N=i.parentNode;if(i.nodeType==Node.COMMENT_NODE)return null;if(i.nodeType==Node.TEXT_NODE){if(!C)return null;var _=document.createElement("span");_.textContent=i.textContent}else _=i;for(var j=null,B=t(gy),z=B.next();!z.done&&!(j=zz(_,"backgroundImage",s,"#",z.value)[0]);z=B.next());B=null;var G=Cg(_,gy,"backgroundImage");M&&G&&!G.startsWith("#")&&(z=new fb(M),G=new fb(G),(z=z.resolve(G).toString())&&(B=z));("p"==i.nodeName||j||B)&&(C=!0);i=C;z="default"==(_.getAttribute("xml:space")||(T?"default":"preserve"));G=Array.from(_.childNodes).every((function(i){return i.nodeType==Node.TEXT_NODE}));T=[];if(!G)for(var q=t(_.childNodes),H=q.next();!H.done;H=q.next())(H=xz(H.value,r,o,s,p,y,A,z,x,_,C,M))&&T.push(H);s=null!=I;M=/\S/.test(_.textContent);H=_.hasAttribute("begin")||_.hasAttribute("end")||_.hasAttribute("dur");if(!(H||M||"br"==_.tagName||0!=T.length||s&&!z))return null;q=Az(_,o);M=q.start;for(q=q.end;N&&N.nodeType==Node.ELEMENT_NODE&&"tt"!=N.tagName;)q=Bz(N,o,M,q),M=q.start,q=q.end,N=N.parentNode;null==M&&(M=0);M+=r.periodStart;q=null==q?Infinity:q+r.periodStart;M=Math.max(M,r.segmentStart);q=Math.min(q,r.segmentEnd);if(!H&&0<T.length)for(M=Infinity,q=0,r=t(T),o=r.next();!o.done;o=r.next())o=o.value,M=Math.min(M,o.startTime),q=Math.max(q,o.endTime);if("br"==_.tagName)return p=new yc(M,q,""),p.lineBreak=!0,p;r="";G&&(r=_.textContent,z&&(r=r.trim(),r=r.replace(/\s+/g," ")));r=new yc(M,q,r);r.nestedCues=T;C||(r.isContainer=!0);x&&(r.cellResolution=x);x=zz(_,"region",y,"")[0];if(_.hasAttribute("region")&&x&&x.getAttribute("xml:id")){var Y=x.getAttribute("xml:id");r.region=A.filter((function(i){return i.id==Y}))[0]}A=x;I&&s&&!_.getAttribute("region")&&!_.getAttribute("style")&&(A=zz(I,"region",y,"")[0]);Cz(r,_,A,j,B,p,i,0==T.length);return r}function Cz(i,r,o,s,p,y,A,T){A=A||T;"rtl"==Dz(r,o,y,"direction",A)&&(i.direction="rtl");T=Dz(r,o,y,"writingMode",A);"tb"==T||"tblr"==T?i.writingMode="vertical-lr":"tbrl"==T?i.writingMode="vertical-rl":"rltb"==T||"rl"==T?i.direction="rtl":T&&(i.direction=ln);(T=Dz(r,o,y,"textAlign",!0))?(i.positionAlign=iy[T],i.lineAlign=qv[T],i.textAlign=_t[T.toUpperCase()]):i.textAlign=st;(T=Dz(r,o,y,"displayAlign",!0))&&(i.displayAlign=Ht[T.toUpperCase()]);(T=Dz(r,o,y,"color",A))&&(i.color=T);(T=Dz(r,o,y,"backgroundColor",A))&&(i.backgroundColor=T);(T=Dz(r,o,y,"border",A))&&(i.border=T);if(T=Dz(r,o,y,"fontFamily",A))switch(T){case"monospaceSerif":i.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":i.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":i.fontFamily="sans-serif";break;case"monospaceSansSerif":i.fontFamily="Consolas,monospace";break;case"proportionalSerif":i.fontFamily="serif";break;default:i.fontFamily=T}(T=Dz(r,o,y,"fontWeight",A))&&"bold"==T&&(i.fontWeight=700);T=Dz(r,o,y,"wrapOption",A);i.wrapLine=!T||"noWrap"!=T;(T=Dz(r,o,y,"lineHeight",A))&&T.match(fv)&&(i.lineHeight=T);(T=Dz(r,o,y,"fontSize",A))&&(T.match(fv)||T.match(hv))&&(i.fontSize=T);(T=Dz(r,o,y,"fontStyle",A))&&(i.fontStyle=_i[T.toUpperCase()]);s?(p=s.getAttribute("imageType")||s.getAttribute("imagetype"),T=s.getAttribute("encoding"),s=s.textContent.trim(),"PNG"==p&&"Base64"==T&&s&&(i.backgroundImage="data:image/png;base64,"+s)):p&&(i.backgroundImage=p);(s=Dz(r,o,y,"textOutline",A))&&(s=s.split(" "),s[0].match(fv)?i.textStrokeColor=i.color:(i.textStrokeColor=s[0],s.shift()),s[0]&&s[0].match(fv)?i.textStrokeWidth=s[0]:i.textStrokeColor="");(s=Dz(r,o,y,"letterSpacing",A))&&s.match(fv)&&(i.letterSpacing=s);(s=Dz(r,o,y,"linePadding",A))&&s.match(fv)&&(i.linePadding=s);(s=Dz(r,o,y,"opacity",A))&&(i.opacity=parseFloat(s));(s=wz(o,y,"textDecoration"))&&Iz(i,s);(s=Jz(r,y,"textDecoration"))&&Iz(i,s);(s=Dz(r,o,y,"textCombine",A))&&(i.textCombineUpright=s);switch(Dz(r,o,y,"ruby",A)){case"container":i.rubyTag="ruby";break;case"text":i.rubyTag="rt"}}function Iz(i,r){r=t(r.split(" "));for(var o=r.next();!o.done;o=r.next())switch(o.value){case"underline":i.textDecoration.includes("underline")||i.textDecoration.push("underline");break;case"noUnderline":i.textDecoration.includes("underline")&&vc(i.textDecoration,"underline");break;case"lineThrough":i.textDecoration.includes("lineThrough")||i.textDecoration.push("lineThrough");break;case"noLineThrough":i.textDecoration.includes("lineThrough")&&vc(i.textDecoration,"lineThrough");break;case"overline":i.textDecoration.includes("overline")||i.textDecoration.push("overline");break;case"noOverline":i.textDecoration.includes("overline")&&vc(i.textDecoration,"overline")}}function Dz(i,r,o,s,p){p=void 0===p||p;return(i=Jz(i,o,s))?i:p?wz(r,o,s):null}function wz(i,r,o){if(!i)return null;var s=Cg(i,fy,o);return s||Kz(i,r,o)}function Jz(i,r,o){var s=Cg(i,fy,o);return s||Kz(i,r,o)}function Kz(i,r,o){i=zz(i,"style",r,"");for(var s=null,p=0;p<i.length;p++){var y=Bg(i[p],"urn:ebu:tt:style",o);y||(y=Cg(i[p],fy,o));y||(y=Jz(i[p],r,o));y&&(s=y)}return s}function zz(i,r,o,s,p){var y=[];if(!i||1>o.length)return y;var A=i;for(i=null;A&&!(i=p?Bg(A,p,r):A.getAttribute(r))&&(A=A.parentNode,A instanceof Element););if(r=i)for(r=t(r.split(" ")),p=r.next();!p.done;p=r.next())for(p=p.value,i=t(o),A=i.next();!A.done;A=i.next())if(A=A.value,s+A.getAttribute("xml:id")==p){y.push(A);break}return y}function Bz(i,r,o,s){i=Az(i,r);null==o?o=i.start:null!=i.start&&(o+=i.start);null==s?s=i.end:null!=i.start&&(s+=i.start);return{start:o,end:s}}function Az(i,r){var o=Lz(i.getAttribute("begin"),r),s=Lz(i.getAttribute("end"),r);i=Lz(i.getAttribute("dur"),r);null==s&&null!=i&&(s=o+i);return{start:o,end:s}}function Lz(i,r){var o=null;if(Av.test(i)){i=Av.exec(i);o=Number(i[1]);var s=Number(i[2]),p=Number(i[3]),y=Number(i[4]);y+=(Number(i[5])||0)/r.h;p+=y/r.frameRate;o=p+60*s+3600*o}else if(Iv.test(i))o=Oz(Iv,i);else if(Cv.test(i))o=Oz(Cv,i);else if(Dv.test(i))i=Dv.exec(i),o=Number(i[1])/r.frameRate;else if(_v.test(i))i=_v.exec(i),o=Number(i[1])/r.g;else if(zv.test(i))o=Oz(zv,i);else if(i)throw new P(2,2,2001,"Could not parse cue time range in TTML");return o}function Oz(i,r){i=i.exec(r);return null==i||""==i[0]?null:(Number(i[4])||0)/1e3+(Number(i[3])||0)+60*(Number(i[2])||0)+3600*(Number(i[1])||0)}L("shaka.text.TtmlTextParser",qz);qz.prototype.parseMedia=qz.prototype.parseMedia;qz.prototype.setManifestType=qz.prototype.setManifestType;qz.prototype.setSequenceMode=qz.prototype.setSequenceMode;qz.prototype.parseInit=qz.prototype.parseInit;function tz(r,o,s,p){(this||i).frameRate=Number(r)||30;(this||i).h=Number(o)||1;(this||i).g=Number(p);0==(this||i).g&&((this||i).g=r?(this||i).frameRate*(this||i).h:1);s&&(r=/^(\d+) (\d+)$/g.exec(s))&&((this||i).frameRate*=Number(r[1])/Number(r[2]))}var lv=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,hv=/^(\d{1,2}(?:\.\d+)?|100)%$/,fv=/^(\d+px|\d+em|\d*\.?\d+c)$/,gv=/^(\d+)px (\d+)px$/,Av=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Iv=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Cv=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Dv=/^(\d*(?:\.\d*)?)f$/,_v=/^(\d*(?:\.\d*)?)t$/,zv=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),qv={left:Kn,center:"center",right:"end",start:Kn,end:"end"},iy={left:"line-left",center:"center",right:"line-right"},hy=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],fy=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],gy=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Xr["application/ttml+xml"]=function(){return new qz};function Tz(){(this||i).g=new qz}Tz.prototype.parseInit=function(i){var r=!1;(new bg).box("moov",gg).box("trak",gg).box("mdia",gg).box("minf",gg).box("stbl",gg).T("stsd",ig).box("stpp",(function(i){r=!0;i.parser.stop()})).parse(i);if(!r)throw new P(2,2,2007)};Tz.prototype.setSequenceMode=function(){};Tz.prototype.setManifestType=function(){};Tz.prototype.parseMedia=function(r,o,s){var p=this||i,y=!1,A=[];(new bg).box("mdat",kg((function(i){y=!0;A=A.concat(p.g.parseMedia(i,o,s))}))).parse(r,!1);if(!y)throw new P(2,2,2007);return A};L("shaka.text.Mp4TtmlParser",Tz);Tz.prototype.parseMedia=Tz.prototype.parseMedia;Tz.prototype.setManifestType=Tz.prototype.setManifestType;Tz.prototype.setSequenceMode=Tz.prototype.setSequenceMode;Tz.prototype.parseInit=Tz.prototype.parseInit;Xr['application/mp4; codecs="stpp"']=function(){return new Tz};Xr['application/mp4; codecs="stpp.ttml"']=function(){return new Tz};Xr['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Tz};Xr['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Tz};function Uz(){(this||i).h=!1;(this||i).g="UNKNOWN"}Uz.prototype.parseInit=function(){};Uz.prototype.setSequenceMode=function(r){(this||i).h=r};Uz.prototype.setManifestType=function(r){(this||i).g=r};Uz.prototype.parseMedia=function(r,o){r=Tf(r);r=r.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var s=r.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(s[0]))throw new P(2,2,2e3);r=o.vttOffset;if(s[0].includes("X-TIMESTAMP-MAP")&&(this||i).h){var p=s[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),y=s[0].match(/MPEGTS:(\d+)/m);if(p&&y){r=Vz(new kt(p[1]));if(null==r)throw new P(2,2,2e3);y=Number(y[1]);for(p=o.segmentStart-o.periodStart;95443.7176888889<=p;)p-=95443.7176888889,y+=8589934592;r=o.periodStart+y/9e4-r}}else s[0].includes("X-TIMESTAMP-MAP")&&"HLS"==(this||i).g&&(r=o.segmentStart);o=[];y=t(s[0].split("\n"));for(p=y.next();!p.done;p=y.next())if(p=p.value,/^Region:/.test(p)){p=new kt(p);var A=new zc;nt(p);lt(p);for(var T=nt(p);T;){var x=A,I=T;(T=/^id=(.*)$/.exec(I))?x.id=T[1]:(T=/^width=(\d{1,2}|100)%$/.exec(I))?x.width=Number(T[1]):(T=/^lines=(\d+)$/.exec(I))?(x.height=Number(T[1]),x.heightUnits=2):(T=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(I))?(x.regionAnchorX=Number(T[1]),x.regionAnchorY=Number(T[2])):(T=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(I))?(x.viewportAnchorX=Number(T[1]),x.viewportAnchorY=Number(T[2])):/^scroll=up$/.exec(I)&&(x.scroll="up");lt(p);T=nt(p)}o.push(A)}y=new Map;Wz(y);p=[];s=t(s.slice(1));for(A=s.next();!A.done;A=s.next()){A=A.value.split("\n");if((1!=A.length||A[0])&&!/^NOTE($|[ \t])/.test(A[0])&&"STYLE"==A[0]){x=[];T=-1;for(I=1;I<A.length;I++)A[I].includes("::cue")&&(x.push([]),T=x.length-1),-1!=T&&(x[T].push(A[I]),A[I].includes("}")&&(T=-1));x=t(x);for(T=x.next();!T.done;T=x.next()){var C=T.value;T="global";(I=C[0].match(/\((.*)\)/))&&(T=I.pop());I=C.slice(1,-1);C[0].includes("}")&&(C=/\{(.*?)\}/.exec(C[0]))&&(I=C[1].split(";"));(C=y.get(T))||(C=new yc(0,0,""));for(var M=!1,N=0;N<I.length;N++){var _=/^\s*([^:]+):\s*(.*)/.exec(I[N]);if(_){var j=_[2].trim().replace(";","");switch(_[1].trim()){case"background-color":case"background":M=!0;C.backgroundColor=j;break;case"color":M=!0;C.color=j;break;case"font-family":M=!0;C.fontFamily=j;break;case"font-size":M=!0;C.fontSize=j;break;case"font-weight":(700<=parseInt(j,10)||"bold"==j)&&(M=!0,C.fontWeight=700);break;case"font-style":switch(j){case"normal":M=!0;C.fontStyle=Pi;break;case"italic":M=!0;C.fontStyle="italic";break;case"oblique":M=!0,C.fontStyle="oblique"}break;case"opacity":M=!0;C.opacity=parseFloat(j);break;case"text-combine-upright":M=!0;C.textCombineUpright=j;break;case"text-shadow":M=!0;C.textShadow=j;break;case"white-space":M=!0,C.wrapLine="noWrap"!=j}}}M&&y.set(T,C)}}M=r;if(1==A.length&&!A[0]||/^NOTE($|[ \t])/.test(A[0])||"STYLE"==A[0]||"REGION"==A[0])A=null;else if(x=null,A[0].includes("--\x3e")||(x=A[0],A.splice(0,1)),T=new kt(A[0]),I=Vz(T),N=mt(T,/[ \t]+--\x3e[ \t]+/g),C=Vz(T),null==I||null==N||null==C)Ra("Failed to parse VTT time code. Cue skipped:",x,A),A=null;else{I+=M;C+=M;A=A.slice(1).join("\n").trim();y.has("global")?(M=y.get("global").clone(),M.startTime=I,M.endTime=C,M.payload=""):M=new yc(I,C,"");lt(T);for(I=nt(T);I;)Xz(M,I,o),lt(T),I=nt(T);Yz(A,M,y);null!=x&&(M.id=x);A=M}A&&p.push(A)}return p};function Wz(i){for(var r=t(Object.entries(Si)),o=r.next();!o.done;o=r.next()){var s=t(o.value);o=s.next().value;s=s.next().value;var p=new yc(0,0,"");p.color=s;i.set("."+o,p)}r=t(Object.entries(Ii));for(o=r.next();!o.done;o=r.next())s=t(o.value),o=s.next().value,s=s.next().value,p=new yc(0,0,""),p.backgroundColor=s,i.set("."+o,p)}function Yz(i,r,o){if(i.includes("<")){0===o.size&&Wz(o);e:{for(var s=[],p=-1,y="",A=0;A<i.length;A++)if("/"===i[A]&&0<A&&"<"===i[A-1]){var T=i.indexOf(">",A);if(T<=A)break e;if((T=i.substring(A+1,T))&&"c"===T){var x=s.pop();x?x===T?(y+="/"+T+">",A+=T.length+1):x.startsWith("c.")?(A+=T.length+1,y+="/"+x+">"):y+=i[A]:y+=i[A]}else y+=i[A]}else"<"===i[A]?(p=A+1,"c"!=i[p]&&(p=-1)):">"===i[A]&&0<p&&(s.push(i.substr(p,A-p)),p=-1),y+=i[A];i=y}s=i;i=[];y=-1;for(p=0;p<s.length;p++)"<"===s[p]?y=p+1:">"===s[p]&&0<y&&(y=s.substr(y,p-y),y.match(ky)&&i.push(y),y=-1);i=t(i);for(p=i.next();!p.done;p=i.next())p=p.value,s=s.replace("<"+p+">",'<div time="'+p+'">'),s+="</div>";i=s;e:{p=i;y=[];A=-1;i="";s=!1;for(T=0;T<p.length;T++)if("/"===p[T]){x=p.indexOf(">",T);if(-1===x){i=p;break e}if((x=p.substring(T+1,x))&&"v"==x){s=!0;var I=null;y.length&&(I=y[y.length-1]);if(I){if(I===x)i+="/"+x+">";else{if(!I.startsWith("v")){i+=p[T];continue}i+="/"+I+">"}T+=x.length+1}else i+=p[T]}else i+=p[T]}else"<"===p[T]?(A=T+1,"v"!=p[A]&&(A=-1)):">"===p[T]&&0<A&&(y.push(p.substr(A,T-A)),A=-1),i+=p[T];p=t(y);for(y=p.next();!y.done;y=p.next())y=y.value,A=y.replace(" ",".voice-"),i=i.replace("<"+y+">","<"+A+">"),i=i.replace("</"+y+">","</"+A+">"),s||(i+="</"+A+">")}if(s=Pg("<span>"+i+"</span>","span")){s=s.childNodes;if(1==s.length&&(p=s[0],p.nodeType==Node.TEXT_NODE||p.nodeType==Node.CDATA_SECTION_NODE)){r.payload=$z(i);return}i=t(s);for(s=i.next();!s.done;s=i.next())aA(s.value,r,o)}else r.payload=$z(i)}else r.payload=$z(i)}function bA(i,r){return i&&0<i.length?i:r}function aA(i,r,o){var s=r.clone();s.nestedCues=[];s.payload="";s.rubyTag="";s.line=null;s.region=new zc;s.position=null;s.size=0;if(i.nodeType===Node.ELEMENT_NODE&&i.nodeName)for(var p=t(i.nodeName.split(/(?=[ .])+/g)),y=p.next();!y.done;y=p.next()){var A=y=y.value;if(A.startsWith(".voice-")){var T=A.split("-").pop();A='v[voice="'+T+'"]';o.has(A)||(A="v[voice="+T+"]")}o.has(A)&&(A=o.get(A))&&(s.backgroundColor=bA(A.backgroundColor,s.backgroundColor),s.color=bA(A.color,s.color),s.fontFamily=bA(A.fontFamily,s.fontFamily),s.fontSize=bA(A.fontSize,s.fontSize),s.textShadow=bA(A.textShadow,s.textShadow),s.fontWeight=A.fontWeight,s.fontStyle=A.fontStyle,s.opacity=A.opacity,s.rubyTag=A.rubyTag,s.textCombineUpright=A.textCombineUpright,s.wrapLine=A.wrapLine);switch(y){case"br":s=Kc(s.startTime,s.endTime);r.nestedCues.push(s);return;case"b":s.fontWeight=700;break;case"i":s.fontStyle="italic";break;case"u":s.textDecoration.push("underline");break;case"font":(y=i.getAttribute("color"))&&(s.color=y);break;case"div":y=i.getAttribute("time");if(!y)break;(y=Vz(new kt(y)))&&(s.startTime=y);break;case"ruby":case"rp":case"rt":s.rubyTag=y}}p=i.childNodes;if(Eg(i)||1==p.length&&Eg(p[0]))for(p=!0,o=t(i.textContent.split("\n")),i=o.next();!i.done;i=o.next())i=i.value,p||(p=Kc(s.startTime,s.endTime),r.nestedCues.push(p)),0<i.length&&(p=s.clone(),p.payload=$z(i),r.nestedCues.push(p)),p=!1;else for(r.nestedCues.push(s),r=t(p),i=r.next();!i.done;i=r.next())aA(i.value,s,o)}function Xz(i,r,o){var s;(s=/^align:(start|middle|center|end|left|right)$/.exec(r))?(r=s[1],i.textAlign="middle"==r?st:_t[r.toUpperCase()]):(s=/^vertical:(lr|rl)$/.exec(r))?i.writingMode="lr"==s[1]?"vertical-lr":"vertical-rl":(s=/^size:([\d.]+)%$/.exec(r))?i.size=Number(s[1]):(s=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(r))?(i.position=Number(s[1]),s[2]&&(r=s[2],i.positionAlign="line-left"==r||"start"==r?"line-left":"line-right"==r||"end"==r?"line-right":"center"==r||"middle"==r?"center":rt)):(s=/^region:(.*)$/.exec(r))?(r=cA(o,s[1]))&&(i.region=r):(o=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(r))?(i.lineInterpretation=1,i.line=Number(o[1]),o[2]&&(i.lineAlign=Jn[o[2].toUpperCase()])):(o=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(r))&&(i.lineInterpretation=_n,i.line=Number(o[1]),o[2]&&(i.lineAlign=Jn[o[2].toUpperCase()]))}function cA(i,r){i=i.filter((function(i){return i.id==r}));return i.length?i[0]:null}function Vz(i){i=mt(i,ky);if(null==i)return null;var r=Number(i[2]),o=Number(i[3]);return 59<r||59<o?null:Number(i[4])/1e3+o+60*r+3600*(Number(i[1])||0)}function $z(i){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"","&rlm;":""},o=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,s=RegExp(o.source);return i&&s.test(i)?i.replace(o,(function(i){return r[i]||"'"})):i||""}L("shaka.text.VttTextParser",Uz);Uz.prototype.parseMedia=Uz.prototype.parseMedia;Uz.prototype.setManifestType=Uz.prototype.setManifestType;Uz.prototype.setSequenceMode=Uz.prototype.setSequenceMode;Uz.prototype.parseInit=Uz.prototype.parseInit;var ky=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Xr["text/vtt"]=function(){return new Uz};Xr['text/vtt; codecs="vtt"']=function(){return new Uz};Xr['text/vtt; codecs="wvtt"']=function(){return new Uz};function dA(){(this||i).g=null}dA.prototype.parseInit=function(r){var o=this||i,s=!1;(new bg).box("moov",gg).box("trak",gg).box("mdia",gg).T("mdhd",(function(i){i=fi(i.reader,i.version);o.g=i.timescale})).box("minf",gg).box("stbl",gg).T("stsd",ig).box("wvtt",(function(){s=!0})).parse(r);if(!(this||i).g)throw new P(2,2,2008);if(!s)throw new P(2,2,2008)};dA.prototype.setSequenceMode=function(){};dA.prototype.setManifestType=function(){};dA.prototype.parseMedia=function(r,o){if(!r.length)return[];if(!(this||i).g)throw new P(2,2,2008);var s,p=0,y=[],A=[],T=!1,x=!1,I=!1,C=null;(new bg).box("moof",gg).box("traf",gg).T("tfdt",(function(i){T=!0;p=ei(i.reader,i.version).baseMediaDecodeTime})).T("tfhd",(function(i){C=di(i.reader,i.flags).Og})).T("trun",(function(i){x=!0;y=gi(i.reader,i.version,i.flags).lh})).box("mdat",kg((function(i){I=!0;s=i}))).parse(r,!1);if(!I&&!T&&!x)throw new P(2,2,2008);r=p;for(var M=new Zf(s,0),N=t(y),_=N.next();!_.done;_=N.next()){_=_.value;var j=_.gg||C,B=_.Ke?p+_.Ke:r;r=B+(j||0);var z=0;do{var G=M.O();z+=G;var q=M.O(),H=null;"vttc"==fg(q)?8<G&&(H=M.Sb(G-8)):M.skip(G-8);j&&H&&(G=eA(H,o.periodStart+B/(this||i).g,o.periodStart+r/(this||i).g),A.push(G))}while(_.sampleSize&&z<_.sampleSize)}return A.filter(zd)};function eA(i,r,o){var s,p,y;(new bg).box("payl",kg((function(i){s=Tf(i)}))).box("iden",kg((function(i){p=Tf(i)}))).box("sttg",kg((function(i){y=Tf(i)}))).parse(i);return s?fA(s,p,y,r,o):null}function fA(i,r,o,s,p){s=new yc(s,p,"");Yz(i,s,new Map);r&&(s.id=r);if(o)for(i=new kt(o),r=nt(i);r;)Xz(s,r,[]),lt(i),r=nt(i);return s}L("shaka.text.Mp4VttParser",dA);dA.prototype.parseMedia=dA.prototype.parseMedia;dA.prototype.setManifestType=dA.prototype.setManifestType;dA.prototype.setSequenceMode=dA.prototype.setSequenceMode;dA.prototype.parseInit=dA.prototype.parseInit;Xr['application/mp4; codecs="wvtt"']=function(){return new dA};function gA(){}gA.prototype.parseInit=function(){};gA.prototype.setSequenceMode=function(){};gA.prototype.setManifestType=function(){};gA.prototype.parseMedia=function(i){var r=Tf(i).replace(/\r+/g,"");r=r.trim();i=[];if(""==r)return i;r=t(r.split("\n\n"));for(var o=r.next();!o.done;o=r.next()){o=o.value.split("\n");var s=new kt(o[0]),p=hA(s),y=mt(s,/,/g);s=hA(s);if(null==p||null==y||null==s)throw new P(2,2,2001,"Could not parse cue time range in SubViewer");i.push(new yc(p,s,o.slice(1).join("\n").trim()))}return i};function hA(i){i=mt(i,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);if(null==i)return null;var r=Number(i[2]),o=Number(i[3]);return 59<r||59<o?null:Number(i[4])/1e3+o+60*r+3600*(Number(i[1])||0)}L("shaka.text.SbvTextParser",gA);gA.prototype.parseMedia=gA.prototype.parseMedia;gA.prototype.setManifestType=gA.prototype.setManifestType;gA.prototype.setSequenceMode=gA.prototype.setSequenceMode;gA.prototype.parseInit=gA.prototype.parseInit;Xr["text/x-subviewer"]=function(){return new gA};function iA(){(this||i).g=new Uz}iA.prototype.parseInit=function(){};iA.prototype.setSequenceMode=function(){};iA.prototype.setManifestType=function(){};iA.prototype.parseMedia=function(r,o,s){r=Tf(r);r=jA(r);r=lc(Xf(r));return(this||i).g.parseMedia(r,o,s)};function jA(i){var r="WEBVTT\n\n";if(""==i)return r;i=i.replace(/\r+/g,"");i=i.trim();i=t(i.split("\n\n"));for(var o=i.next();!o.done;o=i.next())o=o.value.split(/\n/),o[0].match(/\d+/)&&o.shift(),o[0]=o[0].replace(/,/g,"."),r+=o.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return r}L("shaka.text.SrtTextParser",iA);iA.srt2webvtt=jA;iA.prototype.parseMedia=iA.prototype.parseMedia;iA.prototype.setManifestType=iA.prototype.setManifestType;iA.prototype.setSequenceMode=iA.prototype.setSequenceMode;iA.prototype.parseInit=iA.prototype.parseInit;Xr["text/srt"]=function(){return new iA};function kA(){}kA.prototype.parseInit=function(){};kA.prototype.setSequenceMode=function(){};kA.prototype.setManifestType=function(){};kA.prototype.parseMedia=function(i){var r="",o="";i=Tf(i).split(/\r?\n\s*\r?\n/);i=t(i);for(var s=i.next();!s.done;s=i.next()){var p=Cy.exec(s.value);p&&(s=p[1],p=p[2],"V4 Styles"==s||"V4+ Styles"==s?r=p:"Events"==s&&(o=p))}i=[];s=null;r=t(r.split(/\r?\n/));for(var y=r.next();!y.done;y=r.next())if(p=y.value,!/^\s*;/.test(p)&&(y=_y.exec(p)))if(p=y[1].trim(),y=y[2].trim(),"Format"==p)s=y.split(jy);else if("Style"==p){p=y.split(jy);y={};for(var A=0;A<s.length&&A<p.length;A++)y[s[A]]=p[A];i.push(y)}s=[];r=null;p={};o=t(o.split(/\r?\n/));for(y=o.next();!y.done;p={Ze:p.Ze},y=o.next())if(y=y.value,!/^\s*;/.test(y)&&(A=_y.exec(y)))if(y=A[1].trim(),A=A[2].trim(),"Format"==y)r=A.split(jy);else if("Dialogue"==y){A=A.split(jy);y={};for(var T=0;T<r.length&&T<A.length;T++)y[r[T]]=A[T];T=oA(y.Start);var x=oA(y.End);A=new yc(T,x,A.slice(r.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,""));p.Ze=y.Style;(y=i.find(function(i){return function(r){return r.Name==i.Ze}}(p)))&&pA(A,y);s.push(A)}return s};function pA(i,r){var o=r.Fontname;o&&(i.fontFamily=o);(o=r.Fontsize)&&(i.fontSize=o+"px");(o=r.PrimaryColour)&&(o=qA(o))&&(i.color=o);(o=r.BackColour)&&(o=qA(o))&&(i.backgroundColor=o);r.Bold&&(i.fontWeight=700);r.Italic&&(i.fontStyle="italic");r.Underline&&i.textDecoration.push("underline");(o=r.Spacing)&&(i.letterSpacing=o+"px");if(o=r.Alignment)switch(parseInt(o,10)){case 1:i.displayAlign=Bt;i.textAlign="start";break;case 2:i.displayAlign=Bt;i.textAlign=st;break;case 3:i.displayAlign=Bt;i.textAlign="end";break;case 5:i.displayAlign="before";i.textAlign="start";break;case 6:i.displayAlign="before";i.textAlign=st;break;case 7:i.displayAlign="before";i.textAlign="end";break;case 9:i.displayAlign="center";i.textAlign="start";break;case 10:i.displayAlign="center";i.textAlign=st;break;case 11:i.displayAlign="center",i.textAlign="end"}(r=r.AlphaLevel)&&(i.opacity=parseFloat(r))}function qA(i){i=parseInt(i.replace("&H",""),16);return 0<=i?"rgba("+(i&255)+","+(i>>8&255)+","+(i>>16&255)+","+(i>>24&255^255)/255+")":null}function oA(i){i=eb.exec(i);return 3600*(i[1]?parseInt(i[1].replace(":",""),10):0)+60*parseInt(i[2],10)+parseFloat(i[3])}L("shaka.text.SsaTextParser",kA);kA.prototype.parseMedia=kA.prototype.parseMedia;kA.prototype.setManifestType=kA.prototype.setManifestType;kA.prototype.setSequenceMode=kA.prototype.setSequenceMode;kA.prototype.parseInit=kA.prototype.parseInit;var Cy=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,_y=/^\s*([^:]+):\s*(.*)/,jy=/\s*,\s*/,eb=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Xr["text/x-ssa"]=function(){return new kA};function sA(i,r){var o=i[r+1]&1?7:9;return r+o<=i.length&&(i=((i[r+3]&3)<<11|i[r+4]<<3|(i[r+5]&224)>>>5)-o,0<i)?{me:o,X:i}:null}function tA(i,r){var o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=(i[r+2]&60)>>>2;if(s>o.length-1)return null;var p=1+((i[r+2]&192)>>>6),y=(i[r+2]&1)<<2;y|=(i[r+3]&192)>>>6;return{sampleRate:o[s],channelCount:y,wa:"mp4a.40."+p}}function uA(i,r){if(r+1<i.length&&255===i[r]&&240===(i[r+1]&246)){var o=i[r+1]&1?7:9;if(r+o>=i.length)return!1;var s=(i[r+3]&3)<<11|i[r+4]<<3|(i[r+5]&224)>>>5;if(s<=o)return!1;r+=s;return r===i.length||r+1<i.length&&255===i[r]&&240===(i[r+1]&246)}return!1}function vA(i,r){switch(i){case"mp4a.40.2":if(1===r)return new Uint8Array([0,200,0,128,35,128]);if(2===r)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===r)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===r||3===r)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function wA(r){(this||i).i=r;(this||i).h=0;(this||i).g=new Map}p=wA.prototype;p.destroy=function(){(this||i).g.clear()};p.isSupported=function(i){return"audio/aac"==i.toLowerCase().split(";")[0]&&ac(this.convertCodecs("audio",i))};p.convertCodecs=function(i,r){return"audio/aac"==r.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(nd(r)||"mp4a.40.2")+'"':r};p.getOriginalMimeType=function(){return(this||i).i};p.transmux=function(r,o,s,p){for(var y=lc(r),A=ci(y),T=A.length;T<y.length&&!uA(y,T);T++);r=1e3*s.endTime;A=bi(A);A.length&&s&&(s=A.find((function(i){return"com.apple.streaming.transportStreamTimestamp"===i.description})))&&(r=s.data);s=tA(y,T);if(!s)return Promise.reject(new P(2,3,3018));o.audioSamplingRate=s.sampleRate;o.channelsCount=s.channelCount;for(A=[];T<y.length;){var x=sA(y,T);if(!x)return Promise.reject(new P(2,3,3018));var I=x.me+x.X;T+I<=y.length&&A.push({data:y.subarray(T+x.me,T+I),size:x.X,duration:1024,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}});T+=I}y=s.sampleRate;r=Math.floor(r*y/1e3);p={id:o.id,type:"audio",codecs:s.wa,encrypted:o.encrypted&&0<o.drmInfos.length,timescale:y,duration:p,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:(this||i).h,baseMediaDecodeTime:r,fb:A},stream:o};r=new Nu([p]);(this||i).g.has(o.id)?p=(this||i).g.get(o.id):(p=Tu(r),(this||i).g.set(o.id,p));o=jv(r);(this||i).h++;o=tg(p,o);return Promise.resolve(o)};L("shaka.transmuxer.AacTransmuxer",wA);wA.prototype.transmux=wA.prototype.transmux;wA.prototype.getOriginalMimeType=wA.prototype.getOriginalMimeType;wA.prototype.convertCodecs=wA.prototype.convertCodecs;wA.prototype.isSupported=wA.prototype.isSupported;wA.prototype.destroy=wA.prototype.destroy;Wc("audio/aac",(function(){return new wA("audio/aac")}),Gi);function xA(i,r){if(r+8>i.length||11!==i[r]||119!==i[r+1])return null;var o=i[r+4]>>6;if(3<=o)return null;var s=i[r+4]&63,p=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*s+o];if(r+p>i.length)return null;var y=i[r+6]>>5,A=0;2===y?A+=2:(y&1&&1!==y&&(A+=2),y&4&&(A+=2));A=(i[r+6]<<8|i[r+7])>>12-A&1;var T=i[r+5]&7;i=new Uint8Array([o<<6|i[r+5]>>3<<1|T>>2,(T&3)<<6|y<<3|A<<2|s>>4,s<<4&224]);return{sampleRate:[48e3,44100,32e3][o],channelCount:[2,1,2,3,3,4,4,5][y]+A,qa:i,X:p}}function yA(i,r){if(11===i[r]&&119===i[r+1]){var o=0,s=5;r+=s;for(var p,y;0<s;){y=i[r];var A=Math.min(s,8),T=8-A;p=4278190080>>>24+T<<T;p=(y&p)>>T;o=o?o<<A|p:p;r+=1;s-=A}if(16>o)return!0}return!1}function zA(r){(this||i).i=r;(this||i).h=0;(this||i).g=new Map}p=zA.prototype;p.destroy=function(){(this||i).g.clear()};p.isSupported=function(i){return"audio/ac3"==i.toLowerCase().split(";")[0]&&ac(this.convertCodecs("audio",i))};p.convertCodecs=function(i,r){return"audio/ac3"==r.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':r};p.getOriginalMimeType=function(){return(this||i).i};p.transmux=function(r,o,s,p){r=lc(r);for(var y=ci(r),A=y.length;A<r.length&&!yA(r,A);A++);var T=1e3*s.endTime;y=bi(y);y.length&&s&&(s=y.find((function(i){return"com.apple.streaming.transportStreamTimestamp"===i.description})))&&(T=s.data);s=0;y=new Uint8Array([]);for(var x=[];A<r.length;){var I=xA(r,A);if(!I)return Promise.reject(new P(2,3,3018));o.audioSamplingRate=I.sampleRate;o.channelsCount=I.channelCount;s=I.sampleRate;y=I.qa;x.push({data:r.subarray(A,A+I.X),size:I.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}});A+=I.X}r=Math.floor(T*s/1e3);p={id:o.id,type:"audio",codecs:"ac-3",encrypted:o.encrypted&&0<o.drmInfos.length,timescale:s,duration:p,ib:[],qa:y,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:(this||i).h,baseMediaDecodeTime:r,fb:x},stream:o};r=new Nu([p]);(this||i).g.has(o.id)?p=(this||i).g.get(o.id):(p=Tu(r),(this||i).g.set(o.id,p));o=jv(r);(this||i).h++;o=tg(p,o);return Promise.resolve(o)};L("shaka.transmuxer.Ac3Transmuxer",zA);zA.prototype.transmux=zA.prototype.transmux;zA.prototype.getOriginalMimeType=zA.prototype.getOriginalMimeType;zA.prototype.convertCodecs=zA.prototype.convertCodecs;zA.prototype.isSupported=zA.prototype.isSupported;zA.prototype.destroy=zA.prototype.destroy;Wc("audio/ac3",(function(){return new zA("audio/ac3")}),Gi);function AA(i,r){if(r+8>i.length||2935!==(i[r]<<8|i[r+1]<<0))return null;var o=new mi(i.subarray(r+2));oi(o,2);oi(o,3);var s=pi(o,11)+1<<1,p=pi(o,2);if(3==p){p=pi(o,2);p=[24e3,22060,16e3][p];var y=3}else p=[48e3,44100,32e3][p],y=pi(o,2);var A=pi(o,3),T=pi(o,1);o=pi(o,5);if(r+s>i.byteLength)return null;i=Math.floor(s*p/(16*[1,2,3,6][y]));i=new Uint8Array([(i&8160)>>5,(i&31)<<3,p<<6|o<<1|0,0|A<<1|T<<0,0]);return{sampleRate:p,channelCount:[2,1,2,3,3,4,4,5][A]+T,qa:i,X:s}}function BA(r){(this||i).i=r;(this||i).h=0;(this||i).g=new Map}p=BA.prototype;p.destroy=function(){(this||i).g.clear()};p.isSupported=function(i){return"audio/ec3"==i.toLowerCase().split(";")[0]&&ac(this.convertCodecs("audio",i))};p.convertCodecs=function(i,r){return"audio/ec3"==r.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':r};p.getOriginalMimeType=function(){return(this||i).i};p.transmux=function(r,o,s,p){r=lc(r);for(var y=ci(r),A=y.length;A<r.length&&2935!==(r[A]<<8|r[A+1]<<0);A++);var T=1e3*s.endTime;y=bi(y);y.length&&s&&(s=y.find((function(i){return"com.apple.streaming.transportStreamTimestamp"===i.description})))&&(T=s.data);s=0;y=new Uint8Array([]);for(var x=[];A<r.length;){var I=AA(r,A);if(!I)return Promise.reject(new P(2,3,3018));o.audioSamplingRate=I.sampleRate;o.channelsCount=I.channelCount;s=I.sampleRate;y=I.qa;x.push({data:r.subarray(A,A+I.X),size:I.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}});A+=I.X}r=Math.floor(T*s/1e3);p={id:o.id,type:"audio",codecs:"ec-3",encrypted:o.encrypted&&0<o.drmInfos.length,timescale:s,duration:p,ib:[],qa:y,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:(this||i).h,baseMediaDecodeTime:r,fb:x},stream:o};r=new Nu([p]);(this||i).g.has(o.id)?p=(this||i).g.get(o.id):(p=Tu(r),(this||i).g.set(o.id,p));o=jv(r);(this||i).h++;o=tg(p,o);return Promise.resolve(o)};L("shaka.transmuxer.Ec3Transmuxer",BA);BA.prototype.transmux=BA.prototype.transmux;BA.prototype.getOriginalMimeType=BA.prototype.getOriginalMimeType;BA.prototype.convertCodecs=BA.prototype.convertCodecs;BA.prototype.isSupported=BA.prototype.isSupported;BA.prototype.destroy=BA.prototype.destroy;Wc("audio/ec3",(function(){return new BA("audio/ec3")}),Gi);function CA(i){if(!i.length)return null;var r=i.find((function(i){return 7==i.type}));i=i.find((function(i){return 8==i.type}));if(!r||!i)return null;var o=new mi(r.data),s=ti(o);ti(o);ti(o);ri(o);if(tb.includes(s)&&(s=R(o),3===s&&oi(o,1),ri(o),ri(o),oi(o,1),S(o))){s=3!==s?8:12;for(var p=0;p<s;p++)S(o)&&ui(o,6>p?16:64)}ri(o);s=R(o);if(0===s)R(o);else if(1===s)for(oi(o,1),ri(o),ri(o),s=R(o),p=0;p<s;p++)ri(o);ri(o);oi(o,1);var y=R(o),A=R(o),T=pi(o,1);0===T&&oi(o,1);oi(o,1);var x=0,I=0,C=0,M=0;S(o)&&(x=R(o),I=R(o),C=R(o),M=R(o));p=s=1;if(S(o)&&S(o)){var N=ti(o),_=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],j=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<N&&16>N?(s=_[N-1],p=j[N-1]):255===N&&(s=pi(o,16),p=pi(o,16))}o=(2-T)*(A+1)*16-2*C-2*M;y=16*(y+1)-2*x-2*I;x=[];r=r.fullData;x.push(r.byteLength>>>8&255);x.push(r.byteLength&255);x=x.concat.apply(x,w(r));r=[];i=i.fullData;r.push(i.byteLength>>>8&255);r.push(i.byteLength&255);r=r.concat.apply(r,w(i));i=new Uint8Array([1,x[3],x[4],x[5],255,225].concat(x,[1],r));return{height:o,width:y,Ca:i,Ja:s,La:p}}function EA(i){var r=!1,o=[],s=i.find((function(i){return 7==i.type})),p=!1;i=t(i);for(var y=i.next();!y.done;y=i.next()){y=y.value;var A=!1;switch(y.type){case 1:A=p=!0;var T=y.data;s&&4<T.length&&(T=vi(new mi(T)),2===T||4===T||7===T||9===T)&&(r=!0);break;case 5:r=A=p=!0;break;case 6:A=!0;break;case 7:A=!0;break;case 8:A=!0;break;case 9:p=A=!0;break;case 12:A=!0;break;default:A=!1}p&&A&&(A=y.fullData.byteLength,T=new Uint8Array(4),T[0]=A>>24&255,T[1]=A>>16&255,T[2]=A>>8&255,T[3]=A&255,o.push(tg(T,y.fullData)))}return o.length?{data:tg.apply(lg,w(o)),Bd:r}:null}var tb=[100,110,122,244,44,83,86,118,128,138,139,134];function FA(i){if(!i.length)return null;var r=i.find((function(i){return 32==i.type})),o=i.find((function(i){return 33==i.type})),s=i.find((function(i){return 34==i.type}));if(!r||!o||!s)return null;var p=GA(r.fullData);i=HA(o.fullData);var y=IA(s.fullData);r=JA(r.fullData,o.fullData,s.fullData,{Xf:p.Xf,ug:p.ug,Df:i.Df,Ef:i.Ef,xf:i.xf,Cf:i.Cf,yf:i.yf,zf:i.zf,Af:i.Af,Bf:i.Bf,qf:i.qf,rf:i.rf,tf:i.tf,uf:i.uf,vf:i.vf,wf:i.wf,mf:i.mf,Ae:i.Ae,lf:i.lf,jf:i.jf,hf:i.hf,$f:y.$f});return{height:i.height,width:i.width,Ca:r,Ja:i.mj,La:i.lj}}function GA(i){var r=new mi(i,!0);ti(r);ti(r);pi(r,4);pi(r,2);pi(r,6);i=pi(r,3);r=S(r);return{Xf:i+1,ug:r}}function HA(i){i=new mi(i,!0);ti(i);ti(i);var r=0,o=0,s=0,p=0;pi(i,4);var y=pi(i,3);S(i);for(var A=pi(i,2),T=pi(i,1),x=pi(i,5),I=ti(i),C=ti(i),M=ti(i),N=ti(i),_=ti(i),j=ti(i),B=ti(i),z=ti(i),G=ti(i),q=ti(i),H=ti(i),Y=[],Q=[],J=0;J<y;J++)Y.push(S(i)),Q.push(S(i));if(0<y)for(J=y;8>J;J++)pi(i,2);for(J=0;J<y;J++)Y[J]&&pi(i,88),Q[J]&&ti(i);R(i);Y=R(i);3==Y&&pi(i,1);Q=R(i);J=R(i);S(i)&&(r+=R(i),o+=R(i),s+=R(i),p+=R(i));var $=R(i),ne=R(i),re=R(i);if(S(i))for(var xe=0;xe<=y;xe++)R(i),R(i),R(i);else R(i),R(i),R(i);R(i);R(i);R(i);R(i);R(i);R(i);if(S(i)&&S(i))for(xe=0;4>xe;xe++)for(var Ne=0;Ne<(3===xe?2:6);Ne++)if(S(i)){var _e=Math.min(64,1<<4+(xe<<1));1<xe&&si(i);for(var Ke=0;Ke<_e;Ke++)si(i)}else R(i);S(i);S(i);S(i)&&(ti(i),R(i),R(i),S(i));xe=R(i);for(_e=Ne=0;_e<xe;_e++)if(Ke=!1,0!==_e&&(Ke=S(i)),Ke){_e===xe&&R(i);S(i);R(i);for(var qe=Ke=0;qe<=Ne;qe++){var Ze=S(i),rt=!1;Ze||(rt=S(i));(Ze||rt)&&Ke++}Ne=Ke}else{qe=R(i);Ke=R(i);Ne=qe+Ke;for(Ze=0;Ze<qe;Ze++)R(i),S(i);for(qe=0;qe<Ke;qe++)R(i),S(i)}if(S(i))for(xe=R(i),Ne=0;Ne<xe;Ne++){for(_e=0;_e<re+4;_e++)pi(i,1);pi(i,1)}xe=re=1;Ne=0;S(i);S(i);if(S(i)){S(i)&&(_e=ti(i),Ke=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],qe=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<_e&&16>_e?(re=Ke[_e-1],xe=qe[_e-1]):255===_e&&(re=pi(i,16),xe=pi(i,16)));S(i)&&S(i);S(i)&&(pi(i,3),S(i),S(i)&&(ti(i),ti(i),ti(i)));S(i)&&(R(i),R(i));S(i);S(i);S(i);(_e=S(i))&&(R(i),R(i),R(i),R(i));if(S(i)&&(pi(i,32),pi(i,32),S(i)&&R(i),S(i))){qe=!1;_e=S(i);Ke=S(i);if(_e||Ke){(qe=S(i))&&(ti(i),pi(i,5),S(i),pi(i,5));pi(i,4);pi(i,4);qe&&pi(i,4);pi(i,5);pi(i,5);pi(i,5)}for(Ze=0;Ze<=y;Ze++){var st=!0;rt=1;S(i)||(st=S(i));var _t=!1;st?R(i):_t=S(i);_t||(rt=R(i)+1);if(_e){for(st=0;st<rt;st++)R(i),R(i),qe&&(R(i),R(i));S(i)}if(Ke){for(st=0;st<rt;st++)R(i),R(i),qe&&(R(i),R(i));S(i)}}}S(i)&&(S(i),S(i),S(i),Ne=R(i),R(i),R(i),R(i),R(i))}return{xf:H,Df:A,Ef:T,Cf:x,yf:I,zf:C,Af:M,Bf:N,qf:_,rf:j,tf:B,uf:z,vf:G,wf:q,Ae:Ne,mf:0,lf:Y,jf:$,hf:ne,width:Q-(r+o)*(1===Y||2===Y?2:1),height:J-(s+p)*(1===Y?2:1),mj:re,lj:xe}}function IA(i){var r=new mi(i,!0);ti(r);ti(r);R(r);R(r);S(r);S(r);pi(r,3);S(r);S(r);R(r);R(r);si(r);S(r);S(r);S(r)&&R(r);si(r);si(r);S(r);S(r);S(r);S(r);i=S(r);r=S(r);var o=1;r&&i?o=0:r?o=3:i&&(o=2);return{$f:o}}function JA(i,r,o,s){var p=new Uint8Array(23+(5+i.byteLength)+(5+r.byteLength)+(5+o.byteLength));p[0]=1;p[1]=(s.Df&3)<<6|(s.Ef?1:0)<<5|s.Cf&31;p[2]=s.yf;p[3]=s.zf;p[4]=s.Af;p[5]=s.Bf;p[6]=s.qf;p[7]=s.rf;p[8]=s.tf;p[9]=s.uf;p[10]=s.vf;p[11]=s.wf;p[12]=s.xf;p[13]=240|(s.Ae&3840)>>8;p[14]=s.Ae&255;p[15]=252|s.$f&3;p[16]=252|s.lf&3;p[17]=248|s.jf&7;p[18]=248|s.hf&7;p[19]=0;p[20]=0;p[21]=(s.mf&3)<<6|(s.Xf&7)<<3|(s.ug?1:0)<<2|3;p[22]=3;p[23]=160;p[24]=0;p[25]=1;p[26]=(i.byteLength&65280)>>8;p[27]=(i.byteLength&255)>>0;p.set(i,28);p[23+(5+i.byteLength)]=161;p[i.byteLength+29]=0;p[i.byteLength+30]=1;p[i.byteLength+31]=(r.byteLength&65280)>>8;p[i.byteLength+32]=(r.byteLength&255)>>0;p.set(r,i.byteLength+33);p[23+(i.byteLength+10+r.byteLength)]=162;p[i.byteLength+10+r.byteLength+24]=0;p[i.byteLength+10+r.byteLength+25]=1;p[i.byteLength+10+r.byteLength+26]=(o.byteLength&65280)>>8;p[i.byteLength+10+r.byteLength+27]=(o.byteLength&255)>>0;p.set(o,i.byteLength+10+r.byteLength+28);return p}function KA(i,r){var o=i[r+1]>>3&3,s=i[r+1]>>1&3,p=i[r+2]>>4&15,y=i[r+2]>>2&3;if(1!==o&&0!==p&&15!==p&&3!==y){var A=i[r+3]>>6;p=1e3*ib[14*(3===o?3-s:3===s?3:4)+p-1];y=rb[3*(3===o?0:2===o?1:2)+y];o=ob[o][s];var T=sb[s],x=Math.floor(o*p/y+(i[r+2]>>1&1))*T,I=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);(I=I?parseInt(I[1],10):0)&&87>=I&&2===s&&224e3<=p&&0===A&&(i[r+3]|=128);return{sampleRate:y,channelCount:3===A?1:2,X:x,kj:8*o*T}}return null}function PA(i,r){return 255===i[r]&&224===(i[r+1]&224)&&0!==(i[r+1]&6)}var ib=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],rb=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],ob=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],sb=[0,1,1,4];function QA(r){(this||i).i=r;(this||i).h=0;(this||i).g=new Map}p=QA.prototype;p.destroy=function(){(this||i).g.clear()};p.isSupported=function(i){return"audio/mpeg"==i.toLowerCase().split(";")[0]&&ac(this.convertCodecs("audio",i))};p.convertCodecs=function(i,r){return"audio/mpeg"==r.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':r};p.getOriginalMimeType=function(){return(this||i).i};p.transmux=function(r,o,s,p){r=lc(r);for(s=ci(r).length;s<r.length;s++){var y=s;if(y+1<r.length&&PA(r,y)){var A=KA(r,y),T=4;A&&A.X&&(T=A.X);y+=T;y=y===r.length||y+1<r.length&&PA(r,y)}else y=!1;if(y)break}var x;for(y=[];s<r.length;){A=KA(r,s);if(!A)return Promise.reject(new P(2,3,3018));x||(x=A);s+A.X<=r.length&&y.push({data:r.subarray(s,s+A.X),size:A.X,duration:1152,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}});s+=A.X}if(!x)return Promise.reject(new P(2,3,3018));r=9e4*x.kj/x.sampleRate*(this||i).h;p={id:o.id,type:"audio",codecs:"mp3",encrypted:o.encrypted&&0<o.drmInfos.length,timescale:x.sampleRate,duration:p,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:(this||i).h,baseMediaDecodeTime:r,fb:y},stream:o};x=new Nu([p]);(this||i).g.has(o.id)?p=(this||i).g.get(o.id):(p=Tu(x),(this||i).g.set(o.id,p));o=jv(x);(this||i).h++;o=tg(p,o);return Promise.resolve(o)};L("shaka.transmuxer.Mp3Transmuxer",QA);QA.prototype.transmux=QA.prototype.transmux;QA.prototype.getOriginalMimeType=QA.prototype.getOriginalMimeType;QA.prototype.convertCodecs=QA.prototype.convertCodecs;QA.prototype.isSupported=QA.prototype.isSupported;QA.prototype.destroy=QA.prototype.destroy;Wc("audio/mpeg",(function(){return new QA("audio/mpeg")}),Gi);function RA(r){(this||i).h=r;(this||i).g=null}p=RA.prototype;p.destroy=function(){};p.isSupported=function(i){if("video/mp2t"!=i.toLowerCase().split(";")[0])return!1;var r=nd(i).split(","),o=Cb("audio",r);r=Cb("video",r);return!(!o||r||"mp3"!=hd(o))&&ac(this.convertCodecs("audio",i))};p.convertCodecs=function(i,r){return"video/mp2t"==r.toLowerCase().split(";")[0]?"audio/mpeg":r};p.getOriginalMimeType=function(){return(this||i).h};p.transmux=function(r,o,s,p,y){(this||i).g?(this||i).g.clearData():(this||i).g=new wi;r=lc(r);r=(this||i).g.parse(r);if("mp3"!=r.sd().audio||"audio"!=y)return Promise.reject(new P(2,3,3018));y=new Uint8Array([]);r=t(r.qc());for(o=r.next();!o.done;o=r.next())if(o=o.value.data)for(s=0;s<o.length;)(p=KA(o,s))?(s+p.X<=o.length&&(y=tg(y,o.subarray(s,s+p.X))),s+=p.X):s++;return Promise.resolve(y)};L("shaka.transmuxer.MpegTsTransmuxer",RA);RA.prototype.transmux=RA.prototype.transmux;RA.prototype.getOriginalMimeType=RA.prototype.getOriginalMimeType;RA.prototype.convertCodecs=RA.prototype.convertCodecs;RA.prototype.isSupported=RA.prototype.isSupported;RA.prototype.destroy=RA.prototype.destroy;Wc("video/mp2t",(function(){return new RA("video/mp2t")}),Hi);
/*
            @license
            MSS Transmuxer
            Copyright 2015 Dash Industry Forum
            SPDX-License-Identifier: BSD-3-Clause
            */function SA(r){(this||i).h=r;((this||i).g=zh.get("ISOBoxer")())&&TA(this||i)}function TA(r){function b(){this._procFullBox();(this||i).flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8));this._procField("sample_count","uint",32);this._procEntries("entry",(this||i).sample_count,(function(r){this._procEntryField(r,"InitializationVector","data",8);(this||i).flags&2&&(this._procEntryField(r,"NumberOfEntries","uint",16),this._procSubEntries(r,"clearAndCryptedData",r.NumberOfEntries,(function(i){this._procEntryField(i,"BytesOfClearData","uint",16);this._procEntryField(i,"BytesOfEncryptedData","uint",32)})))}))}r.g.addBoxProcessor("saio",(function(){this._procFullBox();(this||i).flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("entry_count","uint",32);this._procFieldArray("offset",(this||i).entry_count,"uint",1===(this||i).version?64:32)}));r.g.addBoxProcessor("saiz",(function(){this._procFullBox();(this||i).flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("default_sample_info_size","uint",8);this._procField("sample_count","uint",32);0===(this||i).default_sample_info_size&&this._procFieldArray("sample_info_size",(this||i).sample_count,"uint",8)}));r.g.addBoxProcessor("senc",b);r.g.addBoxProcessor("uuid",(function(){for(var r=!0,o=0;16>o;o++)(this||i).usertype[o]!==ub[o]&&(r=!1);r&&((this||i)._parsing&&((this||i).type="sepiff"),b.call(this||i))}))}p=SA.prototype;p.destroy=function(){};p.isSupported=function(r,o){var s=r.startsWith("mss/");if(!(this||i).g||!s)return!1;if(o)return ac(this.convertCodecs(o,r));o=this.convertCodecs("audio",r);r=this.convertCodecs("video",r);return ac(o)||ac(r)};p.convertCodecs=function(i,r){return r.replace("mss/","")};p.getOriginalMimeType=function(){return(this||i).h};p.transmux=function(r,o,s){if(!s)return Promise.resolve(lc(r));if(!o.mssPrivateData)return Promise.reject(new P(2,3,3020));try{var p,y=(this||i).g.parseBuffer(r),A=y.fetch("tfhd");A.track_ID=o.id+1;var T=y.fetch("tfdt"),x=y.fetch("traf");null===T&&(T=(this||i).g.createFullBox("tfdt",x,A),T.version=1,T.flags=0,T.baseMediaDecodeTime=Math.floor(s.startTime*o.mssPrivateData.timescale));var I=y.fetch("trun"),C=y.fetch("tfxd");C&&C._parent.boxes.splice(C._parent.boxes.indexOf(C),1);var M=y.fetch("tfrf");M&&M._parent.boxes.splice(M._parent.boxes.indexOf(M),1);var N=y.fetch("sepiff");if(null!==N){N.type="senc";N.usertype=void 0;var _=y.fetch("saio");if(null===_){_=(this||i).g.createFullBox("saio",x);_.version=0;_.flags=0;_.entry_count=1;_.offset=[0];var j=(this||i).g.createFullBox("saiz",x);j.version=0;j.flags=0;j.sample_count=N.sample_count;j.default_sample_info_size=0;j.sample_info_size=[];if(N.flags&2)for(p=0;p<N.sample_count;p+=1)j.sample_info_size[p]=10+6*N.entry[p].NumberOfEntries;else j.default_sample_info_size=8}}A.flags&=16777214;A.flags|=131072;I.flags|=1;var B=y.fetch("moof");I.data_offset=B.getLength()+8;var z=y.fetch("saio");null!==z&&(z.offset[0]=VA(B,"traf")+VA(x,"senc")+16);var G=lc(y.write());return Promise.resolve(G)}catch(i){return i instanceof P?Promise.reject(i):Promise.reject(new P(2,3,3022))}};function VA(i,r){for(var o=8,s=0;s<i.boxes.length&&i.boxes[s].type!==r;s++)o+=i.boxes[s].size;return o}L("shaka.transmuxer.MssTransmuxer",SA);SA.prototype.transmux=SA.prototype.transmux;SA.prototype.getOriginalMimeType=SA.prototype.getOriginalMimeType;SA.prototype.convertCodecs=SA.prototype.convertCodecs;SA.prototype.isSupported=SA.prototype.isSupported;SA.prototype.destroy=SA.prototype.destroy;var ub=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Wc("mss/audio/mp4",(function(){return new SA("mss/audio/mp4")}),Gi);Wc("mss/video/mp4",(function(){return new SA("mss/video/mp4")}),Gi);function WA(r){(this||i).j=r;(this||i).g=0;(this||i).h=new Map;(this||i).i=null}p=WA.prototype;p.destroy=function(){(this||i).h.clear()};p.isSupported=function(i,r){if("video/mp2t"!=i.toLowerCase().split(";")[0])return!1;var o=i;r&&(o=this.convertCodecs(r,i));var s=nd(o).split(",");o=Cb("audio",s);s=Cb("video",s);if(o&&(o=hd(o),!pb.includes(o))||s&&(o=hd(s),!yb.includes(o)))return!1;if(r)return ac(this.convertCodecs(r,i));r=this.convertCodecs("audio",i);i=this.convertCodecs("video",i);return ac(r)||ac(i)};p.convertCodecs=function(r,o){return"video/mp2t"==o.toLowerCase().split(";")[0]?(o=nd(o).replace("mp4a.40.34","mp3").split(",").map((this||i).ai).join(","),"audio"==r?'audio/mp4; codecs="'+o+'"':'video/mp4; codecs="'+o+'"'):o};p.ai=function(i){if(i.includes("avc1")){var r=i.split(".");if(3==r.length)return i=r.shift()+".",i+=parseInt(r.shift(),10).toString(16),i+("000"+parseInt(r.shift(),10).toString(16)).slice(-4)}return i};p.getOriginalMimeType=function(){return(this||i).j};p.transmux=function(r,o,s,p,y){(this||i).i?(this||i).i.clearData():(this||i).i=new wi;r=lc(r);var A=(this||i).i.parse(r);r=[];var T=A.sd();try{var x=null;if("video"==y){switch(T.video){case"avc":var I=[],C=null,M=[],N=A.Oc();if(!N.length)throw new P(2,3,3023);for(var _=0;_<N.length;_++){var j=N[_],B=j.nalus;M.push.apply(M,w(B));var z=EA(B);if(z){null==C&&(C=j.dts);var G=void 0;G=_+1<N.length?(N[_+1].dts||0)-(j.dts||0):1<N.length?(j.dts||0)-(N[_-1].dts||0):9e4*(s.endTime-s.startTime);I.push({data:z.data,size:z.data.byteLength,duration:G,kb:Math.round((j.pts||0)-(j.dts||0)),flags:{ob:0,bb:0,ab:0,Za:0,$a:z.Bd?2:1,pb:z.Bd?0:1}})}}var q=CA(M);if(!q||null==C)throw new P(2,3,3018);o.height=q.height;o.width=q.width;x={id:o.id,type:"video",codecs:"avc1",encrypted:o.encrypted&&0<o.drmInfos.length,timescale:9e4,duration:p,ib:[],qa:new Uint8Array([]),Ca:q.Ca,Ja:q.Ja,La:q.La,data:{Cb:(this||i).g,baseMediaDecodeTime:C,fb:I},stream:o};break;case"hvc":N=[];j=null;B=[];I=A.Oc();if(!I.length)throw new P(2,3,3023);for(z=0;z<I.length;z++){C=I[z];M=C.nalus;B.push.apply(B,w(M));q=!1;var H=[],Y=!1;_=t(M);for(G=_.next();!G.done;G=_.next()){var Q=G.value;switch(Q.type){case 1:case 0:var J=Y=!0;break;case 19:case 20:case 21:q=J=Y=!0;break;case 32:J=!0;break;case 33:J=!0;break;case 34:J=!0;break;case 35:Y=J=!0;break;case 39:case 40:J=!0;break;default:J=!1}if(Y&&J){var $=Q.fullData.byteLength,ne=new Uint8Array(4);ne[0]=$>>24&255;ne[1]=$>>16&255;ne[2]=$>>8&255;ne[3]=$&255;H.push(tg(ne,Q.fullData))}}var re=H.length?{data:tg.apply(lg,w(H)),Bd:q}:null;re&&(null==j&&null!=C.dts&&(j=C.dts),q=void 0,q=z+1<I.length?(I[z+1].dts||0)-(C.dts||0):1<I.length?(C.dts||0)-(I[z-1].dts||0):9e4*(s.endTime-s.startTime),N.push({data:re.data,size:re.data.byteLength,duration:q,kb:Math.round((C.pts||0)-(C.dts||0)),flags:{ob:0,bb:0,ab:0,Za:0,$a:re.Bd?2:1,pb:re.Bd?0:1}}))}var xe=FA(B);if(!xe||null==j)throw new P(2,3,3018);o.height=xe.height;o.width=xe.width;x={id:o.id,type:"video",codecs:"hvc1",encrypted:o.encrypted&&0<o.drmInfos.length,timescale:9e4,duration:p,ib:[],qa:new Uint8Array([]),Ca:xe.Ca,Ja:xe.Ja,La:xe.La,data:{Cb:(this||i).g,baseMediaDecodeTime:j,fb:N},stream:o}}x&&(r.push(x),x=null)}if("audio"==y){switch(T.audio){case"aac":for(var Ne,_e=[],Ke=null,qe=t(A.qc()),Ze=qe.next();!Ze.done;Ze=qe.next()){var rt=Ze.value,st=rt.data;if(st){var _t=0;Ne=tA(st,_t);if(!Ne)throw new P(2,3,3018);o.audioSamplingRate=Ne.sampleRate;o.channelsCount=Ne.channelCount;null==Ke&&null!==rt.pts&&(Ke=rt.pts);for(;_t<st.length;){var Bt=sA(st,_t);if(Bt){var Ht=Bt.me+Bt.X;_t+Ht<=st.length&&_e.push({data:st.subarray(_t+Bt.me,_t+Ht),size:Bt.X,duration:1024,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}});_t+=Ht}else _t++}}}if(!Ne||null==Ke){if(!A.Oc().length)throw new P(2,3,3018);Ke=9e4*s.startTime;var ln=Cb("audio",o.codecs.split(","));if(!ln||!o.channelsCount||!o.audioSamplingRate)throw new P(2,3,3018);Ne={sampleRate:o.audioSamplingRate,channelCount:o.channelsCount,wa:ln};var Ln=vA(ln,o.channelsCount);if(!Ln)throw new P(2,3,3018);var _n=Ke+9e4*(s.endTime-s.startTime);for(A=Ke;A<_n;)_e.push({data:Ln,size:Ln.byteLength,duration:1024,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),A+=1024/Ne.sampleRate*9e4}var Kn=Ne.sampleRate;A=Ke/9e4*Kn;x={id:o.id,type:"audio",codecs:Ne.wa,encrypted:o.encrypted&&0<o.drmInfos.length,timescale:Kn,duration:p,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:(this||i).g,baseMediaDecodeTime:A,fb:_e},stream:o};break;case"ac3":Ne=[];Kn=0;_e=new Uint8Array([]);Ke=null;_t=t(A.qc());for(var Jn=_t.next();!Jn.done;Jn=_t.next()){var Si=Jn.value,Ii=Si.data;null==Ke&&null!==Si.pts&&(Ke=Si.pts);for(A=0;A<Ii.length;){var Li=xA(Ii,A);Li?(o.audioSamplingRate=Li.sampleRate,o.channelsCount=Li.channelCount,Kn=Li.sampleRate,_e=Li.qa,Ne.push({data:Ii.subarray(A,A+Li.X),size:Li.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),A+=Li.X):A++}}if(0==Kn||0==_e.byteLength||null==Ke)throw new P(2,3,3018);A=Ke/9e4*Kn;x={id:o.id,type:"audio",codecs:"ac-3",encrypted:o.encrypted&&0<o.drmInfos.length,timescale:Kn,duration:p,ib:[],qa:_e,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:(this||i).g,baseMediaDecodeTime:A,fb:Ne},stream:o};break;case"ec3":Ne=[];Kn=0;Ke=new Uint8Array([]);_e=null;for(var Pi=t(A.qc()),_i=Pi.next();!_i.done;_i=Pi.next()){var ji=_i.value,Bi=ji.data;null==_e&&null!==ji.pts&&(_e=ji.pts);for(A=0;A<Bi.length;){var Ki=AA(Bi,A);Ki?(o.audioSamplingRate=Ki.sampleRate,o.channelsCount=Ki.channelCount,Kn=Ki.sampleRate,Ke=Ki.qa,Ne.push({data:Bi.subarray(A,A+Ki.X),size:Ki.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),A+=Ki.X):A++}}if(0==Kn||0==Ke.byteLength||null==_e)throw new P(2,3,3018);A=_e/9e4*Kn;x={id:o.id,type:"audio",codecs:"ec-3",encrypted:o.encrypted&&0<o.drmInfos.length,timescale:Kn,duration:p,ib:[],qa:Ke,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:(this||i).g,baseMediaDecodeTime:A,fb:Ne},stream:o};break;case"mp3":Ne=[];var Gi;Kn=null;for(var Hi=t(A.qc()),Ji=Hi.next();!Ji.done;Ji=Hi.next()){var hr=Ji.value,_r=hr.data;if(_r)for(null==Kn&&null!==hr.pts&&(Kn=hr.pts),A=0;A<_r.length;){var Xr=KA(_r,A);Xr?(Gi||(Gi=Xr),A+Xr.X<=_r.length&&Ne.push({data:_r.subarray(A,A+Xr.X),size:Xr.X,duration:1152,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),A+=Xr.X):A++}}if(!Gi||null==Kn)throw new P(2,3,3018);var Yr=Gi.sampleRate;A=Kn/9e4*Yr;x={id:o.id,type:"audio",codecs:"mp3",encrypted:o.encrypted&&0<o.drmInfos.length,timescale:Yr,duration:p,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:(this||i).g,baseMediaDecodeTime:A,fb:Ne},stream:o}}x&&r.push(x)}}catch(i){return i&&3023==i.code?Promise.resolve(new Uint8Array([])):Promise.reject(i)}if(!r.length)return Promise.reject(new P(2,3,3018));r=new Nu(r);(this||i).h.has(o.id)?p=(this||i).h.get(o.id):(p=Tu(r),(this||i).h.set(o.id,p));o=jv(r);(this||i).g++;o=tg(p,o);return Promise.resolve(o)};L("shaka.transmuxer.TsTransmuxer",WA);WA.prototype.transmux=WA.prototype.transmux;WA.prototype.getOriginalMimeType=WA.prototype.getOriginalMimeType;WA.prototype.convertCodecs=WA.prototype.convertCodecs;WA.prototype.isSupported=WA.prototype.isSupported;WA.prototype.destroy=WA.prototype.destroy;var pb=["aac","ac-3","ec-3","mp3"],yb=["avc","hevc"];Wc("video/mp2t",(function(){return new WA("video/mp2t")}),Ji);
/*
            @license
            EME Encryption Scheme Polyfill
            Copyright 2019 Google LLC
            SPDX-License-Identifier: Apache-2.0
            */function ZA(){}var Eb;function aB(){Eb?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Eb=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=bB):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function bB(r,o){var s,p=this||i;return K((function(i){if(1==i.g)return console.assert(p==navigator,'bad "this" for requestMediaKeySystemAccess'),D(i,Eb.call(p,r,o),2);s=i.h;if(cB(s))return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Eb,i.return(s);console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.requestMediaKeySystemAccess=dB;return i.return(dB.call(p,r,o))}))}function dB(r,o){var s,p,y,A,T,x,I,C,M,N,_=this||i;return K((function(i){if(1==i.g){console.assert(_==navigator,'bad "this" for requestMediaKeySystemAccess');s=eB(r);p=[];y=t(o);for(A=y.next();!A.done;A=y.next())T=A.value,x=fB(T.videoCapabilities,s),I=fB(T.audioCapabilities,s),T.videoCapabilities&&T.videoCapabilities.length&&!x.length||T.audioCapabilities&&T.audioCapabilities.length&&!I.length||(C=Object.assign({},T),C.videoCapabilities=x,C.audioCapabilities=I,p.push(C));if(!p.length)throw M=Error("Unsupported keySystem or supportedConfigurations."),M.name="NotSupportedError",M.code=DOMException.NOT_SUPPORTED_ERR,M;return D(i,Eb.call(_,r,p),2)}N=i.h;return i.return(new gB(N,s))}))}function fB(i,r){return i?i.filter((function(i){return!i.encryptionScheme||i.encryptionScheme==r})):i}L("EmeEncryptionSchemePolyfill",ZA);ZA.install=aB;function hB(){}var Db;function jB(){Db?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Db=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=kB):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function kB(r){var o,s,p,y=this||i;return K((function(i){switch(i.g){case 1:return console.assert(y==navigator.mediaCapabilities,'bad "this" for decodingInfo'),D(i,Db.call(y,r),2);case 2:o=i.h;if(!r.keySystemConfiguration)return i.return(o);if((s=o.keySystemAccess)&&cB(s))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Db,i.return(o);console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.mediaCapabilities.decodingInfo=lB;if(s){i.F(3);break}p=o;return D(i,mB(r),4);case 4:return p.keySystemAccess=i.h,i.return(o);case 3:return i.return(lB.call(y,r))}}))}function lB(r){var o,s,p,y,A,T,x,I,C=this||i;return K((function(i){switch(i.g){case 1:return console.assert(C==navigator.mediaCapabilities,'bad "this" for decodingInfo'),o=null,r.keySystemConfiguration&&(s=r.keySystemConfiguration,p=s.keySystem,y=s.audio&&s.audio.encryptionScheme,A=s.video&&s.video.encryptionScheme,o=eB(p),T={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:r},y&&y!=o||A&&A!=o)?i.return(T):D(i,Db.call(C,r),2);case 2:x=i.h;if(x.keySystemAccess){x.keySystemAccess=new gB(x.keySystemAccess,o);i.F(3);break}if(!r.keySystemConfiguration){i.F(3);break}I=x;return D(i,mB(r),5);case 5:I.keySystemAccess=i.h;case 3:return i.return(x)}}))}function mB(i){var r,o;return K((function(s){if(1==s.g){var p=i.keySystemConfiguration,y=[],A=[];p.audio&&y.push({robustness:p.audio.robustness||"",contentType:i.audio.contentType});p.video&&A.push({robustness:p.video.robustness||"",contentType:i.video.contentType});p={initDataTypes:p.initDataType?[p.initDataType]:[],distinctiveIdentifier:p.distinctiveIdentifier,persistentState:p.persistentState,sessionTypes:p.sessionTypes};y.length&&(p.audioCapabilities=y);A.length&&(p.videoCapabilities=A);r=p;return D(s,navigator.requestMediaKeySystemAccess(i.keySystemConfiguration.keySystem,[r]),2)}o=s.h;return s.return(o)}))}L("McEncryptionSchemePolyfill",hB);hB.install=jB;function gB(r,o){(this||i).h=r;(this||i).g=o;(this||i).keySystem=r.keySystem}gB.prototype.getConfiguration=function(){var r=(this||i).h.getConfiguration();if(r.videoCapabilities)for(var o=t(r.videoCapabilities),s=o.next();!s.done;s=o.next())s.value.encryptionScheme=(this||i).g;if(r.audioCapabilities)for(o=t(r.audioCapabilities),s=o.next();!s.done;s=o.next())s.value.encryptionScheme=(this||i).g;return r};gB.prototype.createMediaKeys=function(){return(this||i).h.createMediaKeys()};function eB(i){if(i.startsWith("com.widevine")||i.startsWith("com.microsoft")||i.startsWith("com.chromecast")||i.startsWith("com.adobe")||i.startsWith("org.w3"))return"cenc";if(i.startsWith("com.apple"))return"cbcs-1-9";console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",i,"Please contribute!");return null}function cB(i){i=i.getConfiguration();var r=i.audioCapabilities&&i.audioCapabilities[0];return!(!(i=i.videoCapabilities&&i.videoCapabilities[0]||r)||void 0===i.encryptionScheme)}function nB(){}function Kx(){aB();jB()}L("EncryptionSchemePolyfills",nB);nB.install=Kx;"undefined"!==typeof s&&s.exports&&(s.exports=nB);
/*
                                                                              @license
                                                                              Copyright 2013 Ali Al Dallal
                                                                              Licensed under the MIT license.
                                                                              Permission is hereby granted, free of charge, to any person obtaining a copy
                                                                              of this software and associated documentation files (the "Software"), to deal
                                                                              in the Software without restriction, including without limitation the rights
                                                                              to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                                                                              copies of the Software, and to permit persons to whom the Software is
                                                                              furnished to do so, subject to the following conditions:
                                                                              The above copyright notice and this permission notice shall be included in
                                                                              all copies or substantial portions of the Software.
                                                                              THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
                                                                              IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
                                                                              FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
                                                                              AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                                                                              LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                                                                              OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
                                                                              SOFTWARE.
                                                                              */for(var Lb={ach:{A:"Lwo",B:"Acholi"},ady:{A:"",B:"Adyghe"},af:{A:"Afrikaans",B:"Afrikaans"},"af-NA":{A:"Afrikaans (Namibia)",B:"Afrikaans (Namibia)"},"af-ZA":{A:"Afrikaans (South Africa)",B:"Afrikaans (South Africa)"},ak:{A:"Ti",B:"Akan"},ar:{A:"",B:"Arabic"},"ar-AR":{A:"",B:"Arabic"},"ar-MA":{A:"",B:"Arabic (Morocco)"},"ar-SA":{A:" ()",B:"Arabic (Saudi Arabia)"},"ay-BO":{A:"Aymar aru",B:"Aymara"},az:{A:"Azrbaycan dili",B:"Azerbaijani"},"az-AZ":{A:"Azrbaycan dili",B:"Azerbaijani"},"be-BY":{A:"",B:"Belarusian"},bg:{A:"",B:"Bulgarian"},"bg-BG":{A:"",B:"Bulgarian"},bn:{A:"",B:"Bengali"},"bn-IN":{A:" ()",B:"Bengali (India)"},"bn-BD":{A:"()",B:"Bengali (Bangladesh)"},"bs-BA":{A:"Bosanski",B:"Bosnian"},ca:{A:"Catal",B:"Catalan"},"ca-ES":{A:"Catal",B:"Catalan"},cak:{A:"Maya Kaqchikel",B:"Kaqchikel"},"ck-US":{A:" (tsalagi)",B:"Cherokee"},cs:{A:"etina",B:"Czech"},"cs-CZ":{A:"etina",B:"Czech"},cy:{A:"Cymraeg",B:"Welsh"},"cy-GB":{A:"Cymraeg",B:"Welsh"},da:{A:"Dansk",B:"Danish"},"da-DK":{A:"Dansk",B:"Danish"},de:{A:"Deutsch",B:"German"},"de-AT":{A:"Deutsch (sterreich)",B:"German (Austria)"},"de-DE":{A:"Deutsch (Deutschland)",B:"German (Germany)"},"de-CH":{A:"Deutsch (Schweiz)",B:"German (Switzerland)"},dsb:{A:"Dolnoserbina",B:"Lower Sorbian"},el:{A:"",B:"Greek"},"el-GR":{A:"",B:"Greek (Greece)"},en:{A:"English",B:"English"},"en-GB":{A:"English (UK)",B:"English (UK)"},"en-AU":{A:"English (Australia)",B:"English (Australia)"},"en-CA":{A:"English (Canada)",B:"English (Canada)"},"en-IE":{A:"English (Ireland)",B:"English (Ireland)"},"en-IN":{A:"English (India)",B:"English (India)"},"en-PI":{A:"English (Pirate)",B:"English (Pirate)"},"en-UD":{A:"English (Upside Down)",B:"English (Upside Down)"},"en-US":{A:"English (US)",B:"English (US)"},"en-ZA":{A:"English (South Africa)",B:"English (South Africa)"},"en@pirate":{A:"English (Pirate)",B:"English (Pirate)"},eo:{A:"Esperanto",B:"Esperanto"},"eo-EO":{A:"Esperanto",B:"Esperanto"},es:{A:"Espaol",B:"Spanish"},"es-AR":{A:"Espaol (Argentine)",B:"Spanish (Argentina)"},"es-419":{A:"Espaol (Latinoamrica)",B:"Spanish (Latin America)"},"es-CL":{A:"Espaol (Chile)",B:"Spanish (Chile)"},"es-CO":{A:"Espaol (Colombia)",B:"Spanish (Colombia)"},"es-EC":{A:"Espaol (Ecuador)",B:"Spanish (Ecuador)"},"es-ES":{A:"Espaol (Espaa)",B:"Spanish (Spain)"},"es-LA":{A:"Espaol (Latinoamrica)",B:"Spanish (Latin America)"},"es-NI":{A:"Espaol (Nicaragua)",B:"Spanish (Nicaragua)"},"es-MX":{A:"Espaol (Mxico)",B:"Spanish (Mexico)"},"es-US":{A:"Espaol (Estados Unidos)",B:"Spanish (United States)"},"es-VE":{A:"Espaol (Venezuela)",B:"Spanish (Venezuela)"},et:{A:"eesti keel",B:"Estonian"},"et-EE":{A:"Eesti (Estonia)",B:"Estonian (Estonia)"},eu:{A:"Euskara",B:"Basque"},"eu-ES":{A:"Euskara",B:"Basque"},fa:{A:"",B:"Persian"},"fa-IR":{A:"",B:"Persian"},"fb-LT":{A:"Leet Speak",B:"Leet"},ff:{A:"Fulah",B:"Fulah"},fi:{A:"Suomi",B:"Finnish"},"fi-FI":{A:"Suomi",B:"Finnish"},"fo-FO":{A:"Froyskt",B:"Faroese"},fr:{A:"Franais",B:"French"},"fr-CA":{A:"Franais (Canada)",B:"French (Canada)"},"fr-FR":{A:"Franais (France)",B:"French (France)"},"fr-BE":{A:"Franais (Belgique)",B:"French (Belgium)"},"fr-CH":{A:"Franais (Suisse)",B:"French (Switzerland)"},"fy-NL":{A:"Frysk",B:"Frisian (West)"},ga:{A:"Gaeilge",B:"Irish"},"ga-IE":{A:"Gaeilge (Gaelic)",B:"Irish (Gaelic)"},gl:{A:"Galego",B:"Galician"},"gl-ES":{A:"Galego",B:"Galician"},"gn-PY":{A:"Avae'",B:"Guarani"},"gu-IN":{A:"",B:"Gujarati"},"gx-GR":{A:" ",B:"Classical Greek"},he:{A:"",B:"Hebrew"},"he-IL":{A:"",B:"Hebrew"},hi:{A:"",B:"Hindi"},"hi-IN":{A:"",B:"Hindi"},hr:{A:"Hrvatski",B:"Croatian"},"hr-HR":{A:"Hrvatski",B:"Croatian"},hsb:{A:"Hornjoserbina",B:"Upper Sorbian"},ht:{A:"Kreyl",B:"Haitian Creole"},hu:{A:"Magyar",B:"Hungarian"},"hu-HU":{A:"Magyar",B:"Hungarian"},"hy-AM":{A:"",B:"Armenian"},id:{A:"Bahasa Indonesia",B:"Indonesian"},"id-ID":{A:"Bahasa Indonesia",B:"Indonesian"},is:{A:"slenska",B:"Icelandic"},"is-IS":{A:"slenska (Iceland)",B:"Icelandic (Iceland)"},it:{A:"Italiano",B:"Italian"},"it-IT":{A:"Italiano",B:"Italian"},ja:{A:"",B:"Japanese"},"ja-JP":{A:"",B:"Japanese"},"jv-ID":{A:"Basa Jawa",B:"Javanese"},"ka-GE":{A:"",B:"Georgian"},"kk-KZ":{A:"",B:"Kazakh"},km:{A:"",B:"Khmer"},"km-KH":{A:"",B:"Khmer"},kab:{A:"Taqbaylit",B:"Kabyle"},kn:{A:"",B:"Kannada"},"kn-IN":{A:" (India)",B:"Kannada (India)"},ko:{A:"",B:"Korean"},"ko-KR":{A:" ()",B:"Korean (Korea)"},ku:{A:"Kurd",B:"Kurdish"},"ku-TR":{A:"Kurd",B:"Kurdish"},la:{A:"Latin",B:"Latin"},"la-VA":{A:"Latin",B:"Latin"},lb:{A:"Ltzebuergesch",B:"Luxembourgish"},"li-NL":{A:"Lmbrgs",B:"Limburgish"},lt:{A:"Lietuvi",B:"Lithuanian"},"lt-LT":{A:"Lietuvi",B:"Lithuanian"},lv:{A:"Latvieu",B:"Latvian"},"lv-LV":{A:"Latvieu",B:"Latvian"},mai:{A:", ",B:"Maithili"},"mg-MG":{A:"Malagasy",B:"Malagasy"},mk:{A:"",B:"Macedonian"},"mk-MK":{A:" ()",B:"Macedonian (Macedonian)"},ml:{A:"",B:"Malayalam"},"ml-IN":{A:"",B:"Malayalam"},"mn-MN":{A:"",B:"Mongolian"},mr:{A:"",B:"Marathi"},"mr-IN":{A:"",B:"Marathi"},ms:{A:"Bahasa Melayu",B:"Malay"},"ms-MY":{A:"Bahasa Melayu",B:"Malay"},mt:{A:"Malti",B:"Maltese"},"mt-MT":{A:"Malti",B:"Maltese"},my:{A:"",B:"Burmese"},nb:{A:"Norsk (bokml)",B:"Norwegian (bokmal)"},"nb-NO":{A:"Norsk (bokml)",B:"Norwegian (bokmal)"},ne:{A:"",B:"Nepali"},"ne-NP":{A:"",B:"Nepali"},nl:{A:"Nederlands",B:"Dutch"},"nl-BE":{A:"Nederlands (Belgi)",B:"Dutch (Belgium)"},"nl-NL":{A:"Nederlands (Nederland)",B:"Dutch (Netherlands)"},"nn-NO":{A:"Norsk (nynorsk)",B:"Norwegian (nynorsk)"},no:{A:"Norsk",B:"Norwegian"},oc:{A:"Occitan",B:"Occitan"},"or-IN":{A:"",B:"Oriya"},pa:{A:"",B:"Punjabi"},"pa-IN":{A:" ( )",B:"Punjabi (India)"},pl:{A:"Polski",B:"Polish"},"pl-PL":{A:"Polski",B:"Polish"},"ps-AF":{A:"",B:"Pashto"},pt:{A:"Portugus",B:"Portuguese"},"pt-BR":{A:"Portugus (Brasil)",B:"Portuguese (Brazil)"},"pt-PT":{A:"Portugus (Portugal)",B:"Portuguese (Portugal)"},"qu-PE":{A:"Qhichwa",B:"Quechua"},"rm-CH":{A:"Rumantsch",B:"Romansh"},ro:{A:"Romn",B:"Romanian"},"ro-RO":{A:"Romn",B:"Romanian"},ru:{A:"",B:"Russian"},"ru-RU":{A:"",B:"Russian"},"sa-IN":{A:"",B:"Sanskrit"},"se-NO":{A:"Davvismegiella",B:"Northern Smi"},"si-LK":{A:"",B:"Sinhala (Sri Lanka)"},sk:{A:"Slovenina",B:"Slovak"},"sk-SK":{A:"Slovenina (Slovakia)",B:"Slovak (Slovakia)"},sl:{A:"Slovenina",B:"Slovenian"},"sl-SI":{A:"Slovenina",B:"Slovenian"},"so-SO":{A:"Soomaaliga",B:"Somali"},sq:{A:"Shqip",B:"Albanian"},"sq-AL":{A:"Shqip",B:"Albanian"},sr:{A:"",B:"Serbian"},"sr-RS":{A:" (Serbia)",B:"Serbian (Serbia)"},su:{A:"Basa Sunda",B:"Sundanese"},sv:{A:"Svenska",B:"Swedish"},"sv-SE":{A:"Svenska",B:"Swedish"},sw:{A:"Kiswahili",B:"Swahili"},"sw-KE":{A:"Kiswahili",B:"Swahili (Kenya)"},ta:{A:"",B:"Tamil"},"ta-IN":{A:"",B:"Tamil"},te:{A:"",B:"Telugu"},"te-IN":{A:"",B:"Telugu"},tg:{A:" ",B:"Tajik"},"tg-TJ":{A:"",B:"Tajik"},th:{A:"",B:"Thai"},"th-TH":{A:" ()",B:"Thai (Thailand)"},tl:{A:"Filipino",B:"Filipino"},"tl-PH":{A:"Filipino",B:"Filipino"},tlh:{A:"tlhIngan-Hol",B:"Klingon"},tr:{A:"Trke",B:"Turkish"},"tr-TR":{A:"Trke",B:"Turkish"},"tt-RU":{A:"",B:"Tatar"},uk:{A:"",B:"Ukrainian"},"uk-UA":{A:"",B:"Ukrainian"},ur:{A:"",B:"Urdu"},"ur-PK":{A:"",B:"Urdu"},uz:{A:"O'zbek",B:"Uzbek"},"uz-UZ":{A:"O'zbek",B:"Uzbek"},vi:{A:"Ting Vit",B:"Vietnamese"},"vi-VN":{A:"Ting Vit",B:"Vietnamese"},"xh-ZA":{A:"isiXhosa",B:"Xhosa"},yi:{A:"",B:"Yiddish"},"yi-DE":{A:" (German)",B:"Yiddish (German)"},zh:{A:"",B:"Chinese"},"zh-HANS":{A:"",B:"Chinese Simplified"},"zh-HANT":{A:"",B:"Chinese Traditional"},"zh-CN":{A:"",B:"Chinese Simplified (China)"},"zh-HK":{A:"",B:"Chinese Traditional (Hong Kong)"},"zh-SG":{A:"",B:"Chinese Simplified (Singapore)"},"zh-TW":{A:"",B:"Chinese Traditional (Taiwan)"},"zu-ZA":{A:"isiZulu",B:"Zulu"}},Ob=t(Object.keys(Lb)),_b=Ob.next();!_b.done;_b=Ob.next()){var Fb=_b.value;Lb[Fb.toLowerCase()]=Lb[Fb]}function sB(r,o){var s=this||i;(this||i).parent=r;(this||i).controls=o;(this||i).eventManager=new Kf;(this||i).localization=(this||i).controls.va;(this||i).player=(this||i).controls.Mc();(this||i).video=(this||i).controls.cc();(this||i).adManager=(this||i).player.ee();(this||i).ad=o.getAd();(this||i).eventManager.o((this||i).adManager,"ad-started",(function(i){s.ad=i.ad}));(this||i).eventManager.o((this||i).adManager,"ad-stopped",(function(){s.ad=null}))}sB.prototype.release=function(){(this||i).eventManager.release();(this||i).ad=(this||i).adManager=(this||i).video=(this||i).player=(this||i).localization=(this||i).eventManager=(this||i).controls=(this||i).parent=null};L("shaka.ui.Element",sB);sB.prototype.release=sB.prototype.release;function tB(i){return uB(i,"shaka-back-to-overflow-button")}function uB(i,r){i=i.getElementsByClassName(r);return i.length?i[0]:null}function vB(i){i&&(i=uB(i,"shaka-chosen-item"))&&i.parentElement.focus()}function wB(){var i=U("i");i.classList.add("material-icons-round");i.classList.add("shaka-chosen-item");i.textContent="done";i.ariaHidden="true";return i}function xB(i,r){i&&(r?i.classList.remove("shaka-hidden"):i.classList.add("shaka-hidden"))}function yB(i,r){var o=Math.floor(i/3600),s=Math.floor(i/60%60);i=Math.floor(i%60);10>i&&(i="0"+i);i=s+":"+i;r&&(10>s&&(i="0"+i),i=o+":"+i);return i}function zB(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).i=U("div");(this||i).i.classList.add("shaka-ad-counter");(this||i).parent.appendChild((this||i).i);(this||i).h=U("span");(this||i).h.classList.add("shaka-ad-counter-span");(this||i).i.appendChild((this||i).h);(this||i).g=new Dd((function(){var i=Math.round(s.ad.getRemainingTime()),r=s.ad.getDuration();-1!=i&&-1!=r&&(0<i?(i=yB(r-i,!1)+" / "+yB(r,!1),1<s.ad.getSequenceLength()?s.h.textContent=i:(r=s.localization.resolve("AD_TIME"),s.h.textContent=r.replace("[AD_TIME]",i))):(s.g.stop(),s.h.textContent=""))}));(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){}));(this||i).eventManager.o((this||i).adManager,"ad-started",(function(){s.g.Qa();s.g.za(.5)}));(this||i).eventManager.o((this||i).adManager,"ad-stopped",(function(){s.g.stop();s.h.textContent=""}));(this||i).ad&&((this||i).g.Qa(),(this||i).g.za(.5))}pa(zB,sB);zB.prototype.release=function(){(this||i).g.stop();(this||i).g=null;sB.prototype.release.call(this||i)};L("shaka.ui.AdCounter",zB);function AB(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).g=U("div");(this||i).g.classList.add("shaka-ad-position");xB((this||i).g,!1);(this||i).parent.appendChild((this||i).g);(this||i).h=U("span");(this||i).h.classList.add("shaka-ad-position-span");(this||i).g.appendChild((this||i).h);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){s.ad&&BB(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){s.ad&&BB(s)}));(this||i).eventManager.o((this||i).adManager,"ad-started",(function(){BB(s)}));(this||i).eventManager.o((this||i).adManager,"ad-stopped",(function(){s.h.textContent="";xB(s.g,!1)}));(this||i).ad&&BB(this||i)}pa(AB,sB);function BB(i){var r=i.ad.getSequenceLength();if(1<r){var o=i.ad.getPositionInSequence();i.h.textContent=i.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(o)).replace("[NUM_ADS]",String(r));xB(i.g,!0)}}L("shaka.ui.AdPosition",AB);function CB(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).button=el();(this||i).parent.appendChild((this||i).button);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){s.g()}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){s.g()}));(this||i).eventManager.o((this||i).video,"play",(function(){s.g();s.h()}));(this||i).eventManager.o((this||i).video,"pause",(function(){s.g();s.h()}));(this||i).eventManager.o((this||i).video,"seeking",(function(){s.g();s.h()}));(this||i).eventManager.o((this||i).adManager,"ad-paused",(function(){s.g();s.h()}));(this||i).eventManager.o((this||i).adManager,"ad-resumed",(function(){s.g();s.h()}));(this||i).eventManager.o((this||i).adManager,"ad-started",(function(){s.g();s.h()}));(this||i).eventManager.o((this||i).adManager,"ad-stopped",(function(){s.g();s.h()}));(this||i).eventManager.o((this||i).button,"click",(function(){s.ad&&s.ad.isLinear()?DB(s.controls):EB(s.controls)}));(this||i).ad&&(this.g(),this.h())}pa(CB,sB);CB.prototype.isPaused=function(){if((this||i).ad&&(this||i).ad.isLinear())var r=(this||i).ad.isPaused();else r=(this||i).controls,r=r.u.paused&&!r.W;return r};CB.prototype.isEnded=function(){return(!(this||i).ad||!(this||i).ad.isLinear())&&(this||i).video.ended};CB.prototype.g=function(){};CB.prototype.h=function(){};L("shaka.ui.PlayButton",CB);function FB(r,o){CB.call(this||i,r,o);(this||i).button.classList.add("shaka-play-button");(this||i).button.classList.add("shaka-no-propagation");this.h();this.g()}pa(FB,CB);FB.prototype.h=function(){this.isPaused()?(this||i).button.setAttribute("icon","play"):(this||i).button.setAttribute("icon","pause")};FB.prototype.g=function(){var r=this.isPaused()?"PLAY":"PAUSE";(this||i).button.ariaLabel=(this||i).localization.resolve(r)};L("shaka.ui.BigPlayButton",FB);function GB(o,s){sB.call(this||i,o,s);var p=this||i;(this||i).j=(this||i).controls.g;(this||i).h=(this||i).controls.h;(this||i).i=[];(this||i).g=U("div");(this||i).g.classList.add("shaka-no-propagation");(this||i).g.classList.add("shaka-context-menu");(this||i).g.classList.add("shaka-hidden");(this||i).h.appendChild((this||i).g);(this||i).eventManager.o((this||i).h,"contextmenu",(function(i){if(p.g.classList.contains("shaka-hidden")){i.preventDefault();var r=p.h.getBoundingClientRect();p.g.style.left=i.clientX-r.left+"px";p.g.style.top=i.clientY-r.top+"px";xB(p.g,!0)}else xB(p.g,!1)}));(this||i).eventManager.o(r,"click",(function(){xB(p.g,!1)}));HB(this||i)}pa(GB,sB);GB.prototype.release=function(){(this||i).h=null;for(var r=t((this||i).i),o=r.next();!o.done;o=r.next())o.value.release();(this||i).i=[];sB.prototype.release.call(this||i)};function IB(i,r){Gb.set(i,r)}function HB(i){for(var r=t(i.j.contextMenuElements),o=r.next();!o.done;o=r.next()){o=o.value;var s=Gb.get(o);s?i.i.push(s.create(i.g,i.controls)):Ra("Unrecognized context menu element:",o)}}L("shaka.ui.ContextMenu",GB);GB.registerElement=IB;var Gb=new Map;function KB(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).m=null;(this||i).s=!1;(this||i).j=new Dd((function(){0!=parseInt(s.h.textContent,10)&&(s.video.currentTime=s.controls.Hf()+parseInt(s.h.textContent,10));s.g.style.opacity="0";s.s=!1;s.h.textContent="0s"}));(this||i).g=U("div");(this||i).parent.appendChild((this||i).g);(this||i).eventManager.o((this||i).g,"touchend",(function(i){s.controls.dc()&&(s.controls.nd()?(i.preventDefault(),s.controls.uc()):0<s.controls.g.tapSeekDistance&&(i.preventDefault(),i=s.controls.g.tapSeekDistance,s.s?s.m+1e3>Date.now()&&(s.j.stop(),s.m=Date.now(),s.h.textContent=(s.l?parseInt(s.h.textContent,10)-i:parseInt(s.h.textContent,10)+i).toString()+"s",s.g.style.opacity="1",s.j.S(1)):(s.s=!0,s.m=Date.now(),s.j.S(1))))}));(this||i).h=U("span");(this||i).h.textContent="0s";(this||i).g.appendChild((this||i).h);(this||i).i=U("span");(this||i).i.classList.add("shaka-forward-rewind-container-icon");(this||i).g.appendChild((this||i).i);(this||i).l=!1}pa(KB,sB);L("shaka.ui.HiddenSeekButton",KB);function LB(r,o){KB.call(this||i,r,o);(this||i).g.classList.add("shaka-fast-foward-container");(this||i).i.textContent="fast_forward";(this||i).l=!1}pa(LB,KB);L("shaka.ui.HiddenFastForwardButton",LB);function MB(r,o){KB.call(this||i,r,o);(this||i).g.classList.add("shaka-rewind-container");(this||i).i.textContent="fast_rewind";(this||i).l=!0}pa(MB,KB);L("shaka.ui.HiddenRewindButton",MB);function NB(r,o,s,p){sB.call(this||i,r,o);var y=this||i;(this||i).container=U("div");(this||i).container.classList.add("shaka-range-container");(this||i).container.classList.add.apply((this||i).container.classList,w(s));(this||i).h=!1;(this||i).bar=document.createElement("input");(this||i).G=new Dd((function(){y.onChangeEnd();y.h=!1}));(this||i).bar.classList.add("shaka-range-element");(this||i).bar.classList.add.apply((this||i).bar.classList,w(p));(this||i).bar.type="range";(this||i).bar.step="any";(this||i).bar.min="0";(this||i).bar.max="1";(this||i).bar.value="0";(this||i).container.appendChild((this||i).bar);(this||i).parent.appendChild((this||i).container);(this||i).eventManager.o((this||i).bar,"mousedown",(function(){y.controls.dc()&&(y.h=!0,y.onChangeStart())}));(this||i).eventManager.o((this||i).bar,"touchstart",(function(i){y.controls.dc()&&(y.h=!0,OB(y,i),y.onChangeStart())}));(this||i).eventManager.o((this||i).bar,"input",(function(){y.onChange()}));(this||i).eventManager.o((this||i).bar,"touchmove",(function(i){y.h&&(OB(y,i),y.onChange())}));(this||i).eventManager.o((this||i).bar,"touchend",(function(i){y.h&&(y.h=!1,OB(y,i),y.onChangeEnd())}));(this||i).eventManager.o((this||i).bar,"touchcancel",(function(i){y.h&&(y.h=!1,OB(y,i),y.onChangeEnd())}));(this||i).eventManager.o((this||i).bar,"mouseup",(function(){y.h&&(y.h=!1,y.onChangeEnd())}));(this||i).eventManager.o((this||i).bar,"blur",(function(){y.h&&(y.h=!1,y.onChangeEnd())}));(this||i).eventManager.o((this||i).bar,"contextmenu",(function(i){i.preventDefault();i.stopPropagation()}))}pa(NB,sB);p=NB.prototype;p.release=function(){(this||i).G&&((this||i).G.stop(),(this||i).G=null);sB.prototype.release.call(this||i)};p.setRange=function(r,o){(this||i).bar.min=r;(this||i).bar.max=o};p.onChangeStart=function(){};p.onChange=function(){};p.onChangeEnd=function(){};p.changeTo=function(r){(this||i).h||((this||i).h=!0,this.onChangeStart());var o=parseFloat((this||i).bar.min),s=parseFloat((this||i).bar.max);(this||i).bar.value=r>s?s:r<o?o:r;this.onChange();(this||i).G.S(.5)};p.getValue=function(){return parseFloat((this||i).bar.value)};p.setValue=function(r){(this||i).h||((this||i).bar.value=r)};function OB(i,r){r.preventDefault();var o=r.changedTouches[0],s=i.bar.getBoundingClientRect();r=parseFloat(i.bar.min);var p=parseFloat(i.bar.max);o=r+(p-r)/s.width*(o.clientX-s.left);o<r?o=r:o>p&&(o=p);i.bar.value=o}L("shaka.ui.RangeElement",NB);NB.prototype.setValue=NB.prototype.setValue;NB.prototype.getValue=NB.prototype.getValue;NB.prototype.changeTo=NB.prototype.changeTo;NB.prototype.onChangeEnd=NB.prototype.onChangeEnd;NB.prototype.onChange=NB.prototype.onChange;NB.prototype.onChangeStart=NB.prototype.onChangeStart;NB.prototype.setRange=NB.prototype.setRange;function PB(r,o){NB.call(this||i,r,o,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var s=this||i;(this||i).D=U("div");(this||i).D.classList.add("shaka-ad-markers");(this||i).container.insertBefore((this||i).D,(this||i).container.childNodes[0]);(this||i).H=(this||i).controls.g;(this||i).s=new Dd((function(){var i=s.getValue();s.player.R()||i==s.video.duration&&(i-=.001);s.video.currentTime=i}));(this||i).I=new Dd((function(){QB(s)}));(this||i).K=!1;(this||i).i=U("div");(this||i).i.id="shaka-player-ui-thumbnail-container";(this||i).g=U("img");(this||i).g.id="shaka-player-ui-thumbnail-image";(this||i).g.draggable=!1;(this||i).u=U("div");(this||i).u.id="shaka-player-ui-thumbnail-time";(this||i).i.appendChild((this||i).g);(this||i).i.appendChild((this||i).u);(this||i).container.appendChild((this||i).i);(this||i).j=(this||i).l=null;(this||i).J=!1;(this||i).m=new Dd((function(){RB(s)}));(this||i).C=[];(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){return SB(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){return SB(s)}));(this||i).eventManager.o((this||i).adManager,"ad-started",(function(){TB(s)||xB(s.container,!1)}));(this||i).eventManager.o((this||i).adManager,"ad-stopped",(function(){TB(s)&&xB(s.container,!0)}));(this||i).eventManager.o((this||i).adManager,"ad-cue-points-changed",(function(i){s.C=i.cuepoints;UB(s)}));(this||i).eventManager.o((this||i).player,"unloading",(function(){s.C=[];UB(s);s.j&&(s.j.abort(),s.j=null);s.l=null;RB(s)}));(this||i).eventManager.o((this||i).bar,"mousemove",(function(i){if(s.player.fe().length){var r=s.bar.getBoundingClientRect(),o=parseFloat(s.bar.min);i=i.clientX-r.left;VB(s,i,Math.round(o+(parseFloat(s.bar.max)-o)/r.width*i))}else RB(s)}));(this||i).eventManager.o((this||i).container,"mouseleave",(function(){s.m.stop();s.m.S(.25)}));this.setValue((this||i).video.currentTime);this.update();SB(this||i);(this||i).ad&&xB((this||i).container,!1)}pa(PB,NB);p=PB.prototype;p.release=function(){(this||i).s&&((this||i).s.stop(),(this||i).s=null,(this||i).I.stop(),(this||i).I=null);NB.prototype.release.call(this||i)};p.onChangeStart=function(){(this||i).K=!(this||i).video.paused;(this||i).controls.qg(!0);(this||i).video.pause();(this||i).m.stop();(this||i).J=!0};p.onChange=function(){if((this||i).video.duration)if(this.update(),(this||i).s.S(.125),(this||i).player.fe().length){var r=parseFloat((this||i).bar.min),o=parseFloat((this||i).bar.max),s=(this||i).bar.getBoundingClientRect(),p=Math.round(this.getValue());VB(this||i,(p-r)/((o-r)/s.width),p)}else RB(this||i)};p.onChangeEnd=function(){(this||i).s.Qa();(this||i).controls.qg(!1);(this||i).K&&(this||i).video.play();(this||i).J&&((this||i).J=!1,(this||i).m.stop(),(this||i).m.S(.25))};p.isShowing=function(){return!(this||i).container.classList.contains("shaka-hidden")};p.update=function(){var r=(this||i).H.seekBarColors,o=this.getValue(),s=(this||i).video.buffered.length,p=s?(this||i).video.buffered.start(0):0,y=s?(this||i).video.buffered.end(s-1):0,A=(this||i).player.Ha(),T=A.end-A.start;this.setRange(A.start,A.end);TB(this||i)?(xB((this||i).container,!0),0==s?(this||i).container.style.background=r.base:(s=(Math.max(p,A.start)-A.start)/T||0,y=(Math.min(y,A.end)-A.start)/T||0,o=(Math.min(Math.max(o,A.start),A.end)-A.start)/T||0,(this||i).container.style.background="linear-gradient("+["to right",((this||i).H.showUnbufferedStart?r.base:r.played)+" "+100*s+"%",r.played+" "+100*s+"%",r.played+" "+100*o+"%",r.buffered+" "+100*o+"%",r.buffered+" "+100*y+"%",r.base+" "+100*y+"%"].join()+")")):xB((this||i).container,!1)};function QB(i){if(i.C.length){for(var r=i.player.Ha(),o=r.end-r.start,s=["to right"],p=[],y=i.H.seekBarColors.adBreaks,A=!1,T=t(i.C),x=T.next();!x.done;x=T.next())if(x=x.value,-1!=x.start||x.end||(A=!0),x.start>=r.start&&x.start<r.end&&!(x.end&&x.end>r.end)){var I=(x.start-r.start)/o||0,C=I+.01;x.end&&(C=(x.end-r.start)/o||0);p.push({start:I,end:C})}r=t(p);for(x=r.next();!x.done;x=r.next())o=x.value,s.push("transparent "+100*o.start+"%"),s.push(y+" "+100*o.start+"%"),s.push(y+" "+100*o.end+"%"),s.push("transparent "+100*o.end+"%");A&&(s.push("transparent 99%"),s.push(y+" 99%"));i.D.style.background="linear-gradient("+s.join(",")+")"}else i.D.style.background="transparent"}function UB(i){QB(i);var r=i.player.Ha();r=r.end-r.start;i.player.R()&&5<r&&i.I.za(1)}function TB(i){var r=i.player.Ha();r=r.end-r.start;return!(i.player.R()&&5>r)&&(null==i.ad||!i.ad.isLinear())}function SB(i){i.bar.ariaLabel=i.localization.resolve("SEEK")}function VB(i,r,o){var s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y;K((function(Q){switch(Q.g){case 1:s=WB(i);if(!s)return RB(i),Q.return();0>o&&(o=0);p=i.player.Ha();y=Math.max(Math.ceil(p.start),Math.min(Math.floor(p.end),o));return D(Q,i.player.Kf(s.id,y),2);case 2:A=Q.h;if(!A||!A.uris.length)return RB(i),Q.return();i.player.R()?(T=p.end-o,i.u.textContent=1>T?i.localization.resolve("LIVE"):"-"+XB(T)):i.u.textContent=XB(o);x=-10;I=i.i.clientWidth;C=Math.floor(9*I/16);i.i.style.height=C+"px";i.i.style.top=-(C-x)+"px";M=Math.min(i.bar.offsetWidth-I,Math.max(0,r-I/2));i.i.style.left=M+"px";i.i.style.visibility="visible";N=A.uris[0].split("#xywh=")[0];if(i.l&&N===i.l.uris[0].split("#xywh=")[0]&&A.segment.Pb()==i.l.segment.Pb()&&A.segment.Mb()==i.l.segment.Mb()){Q.F(3);break}i.l=A;i.j&&(i.j.abort(),i.j=null);if("mjpg"!=s.codecs&&!N.startsWith("offline:")){Q.F(4);break}i.g.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>';ta(Q,5);_=Ta;j=ok(A.segment.ba(),A.segment.Pb(),A.segment.Mb(),i.player.getConfiguration().streaming.retryParameters);i.j=i.player.Zb().request(_,j,{type:1});return D(Q,i.j.promise,7);case 7:B=Q.h;i.j=null;"mjpg"==s.codecs?(z=(new bg).box("mdat",kg((function(i){N=URL.createObjectURL(new Blob([i],{type:"image/jpeg"}))}))),z.parse(B.data,!1)):(G=s.mimeType||"image/jpeg",q=new Blob([B.data],{type:G}),N=URL.createObjectURL(q));va(Q,4);break;case 5:H=wa(Q);if(7001==H.code)return Q.return();throw H;case 4:try{i.i.removeChild(i.g)}catch(i){}i.g=U("img");i.g.id="shaka-player-ui-thumbnail-image";i.g.draggable=!1;i.g.src=N;i.g.onload=function(){N.startsWith("blob:")&&URL.revokeObjectURL(N)};i.i.insertBefore(i.g,i.i.firstChild);case 3:Y=I/A.width,A.imageHeight?i.g.height=A.imageHeight:A.sprite||(i.g.style.height="100%",i.g.style.objectFit="contain"),A.imageWidth?i.g.width=A.imageWidth:A.sprite||(i.g.style.width="100%",i.g.style.objectFit="contain"),i.g.style.left="-"+Y*A.positionX+"px",i.g.style.top="-"+Y*A.positionY+"px",i.g.style.transform="scale("+Y+")",i.g.style.transformOrigin="left top",C=Math.floor(I*A.height/A.width),i.i.style.height=C+"px",i.i.style.top=-(C-x)+"px",F(Q)}}))}function WB(i){var r=i.player.fe();if(!r.length)return null;for(var o={},s=t(["image/avif","image/webp","image/jpeg","image/png","image/svg+xml"]),p=s.next();!p.done;o={Ve:o.Ve,Te:o.Te},p=s.next())if(o.Ve=p.value,o.Te=i.player.getStats().estimatedBandwidth,(p=r.filter(function(i){return function(r){return r.mimeType.toLowerCase()===i.Ve&&r.bandwidth<.01*i.Te}}(o)).sort((function(i,r){return r.bandwidth-i.bandwidth})))&&p.length)return p[0];return r.find((function(i){return"application/mp4"==i.mimeType&&"mjpg"==i.codecs}))||r[0]}function RB(i){i.i.style.visibility="hidden";i.u.textContent=""}function XB(i){var r=Math.round(i);i=Math.floor(r/3600);var o=Math.floor((r-3600*i)/60);r=r-3600*i-60*o;10>r&&(r="0"+r);return 0<i?(10>o&&(o="0"+o),i+":"+o+":"+r):o+":"+r}L("shaka.ui.SeekBar",PB);function YB(){}YB.prototype.create=function(i,r){return new PB(i,r)};PB.Factory=YB;function Z(r,o,s,p){$a.call(this||i);var y=this||i;(this||i).N=!0;(this||i).g=p;(this||i).C=new Oo(s,r,(this||i).g.castReceiverAppId,(this||i).g.castAndroidReceiverCompatible);(this||i).ua=!0;(this||i).u=(this||i).C.cc();(this||i).s=s;(this||i).G=(this||i).C.Mc();(this||i).sa=r;(this||i).j=o;(this||i).Wa=(this||i).G.ee();(this||i).l=(this||i).m=null;(this||i).W=!1;(this||i).H=[];(this||i).Xb=[];(this||i).Ib=!1;(this||i).Z=new Dd((function(){y.j.style.cursor="none";y.Ib=!1;ZB(y)}));(this||i).aa=new Dd((function(){y.h.removeAttribute("shown");y.I.S(2)}));(this||i).I=new Dd((function(){for(var i=t(y.H),r=i.next();!r.done;r=i.next())xB(r.value,!1)}));(this||i).Ra=new Dd((function(){y.dc()&&$B(y)}));(this||i).J=null;(this||i).D=[];(this||i).va=aC();(this||i).i=new Kf;this.configure((this||i).g);bC(this||i);(this||i).ha=new Set;cC(this||i);(this||i).Ra.za(.125);(this||i).i.o((this||i).va,"locale-changed",(function(i){y.Wa.setLocale(i.locales[0])}))}pa(Z,$a);p=Z.prototype;p.destroy=function(){var r=this||i;return K((function(i){switch(i.g){case 1:if(document.pictureInPictureElement!=r.s){i.F(2);break}return D(i,document.exitPictureInPicture(),2);case 2:r.i&&(r.i.release(),r.i=null);r.Z&&(r.Z.stop(),r.Z=null);r.aa&&(r.aa.stop(),r.aa=null);r.I&&(r.I.stop(),r.I=null);r.Ra&&(r.Ra.stop(),r.Ra=null);dC(r);r.h&&(r.j.removeChild(r.h),r.h=null);if(!r.C){i.F(4);break}return D(i,r.C.destroy(),5);case 5:r.C=null;case 4:if(!r.sa){i.F(6);break}return D(i,r.sa.destroy(),7);case 7:r.sa=null;case 6:r.G=null,r.s=null,r.u=null,r.va=null,r.ha.clear(),$a.prototype.release.call(r),F(i)}}))};function dC(i){for(var r=t(i.D),o=r.next();!o.done;o=r.next())o.value.release();i.D=[]}function eC(i,r){qb.set(i,r)}p.Kh=function(r){(this||i).ua=r;cC(this||i)};p.Ri=function(){ZB(this||i)};p.configure=function(r){(this||i).g=r;(this||i).C.Jg(r.castReceiverAppId,r.castAndroidReceiverCompatible);(this||i).l&&((this||i).l=null);(this||i).Fb&&((this||i).Fb=null);(this||i).Xa&&((this||i).Xa=null);(this||i).h?(fl((this||i).h),dC(this||i)):(gC(this||i),hC(this||i));(this||i).j.classList.add("shaka-video-container");(this||i).s.classList.add("shaka-video");iC(this||i);(this||i).g.addBigPlayButton&&jC(this||i);(this||i).g.customContextMenu&&((this||i).Xa=new GB((this||i).V,this||i),(this||i).D.push((this||i).Xa));(this||i).$||kC(this||i);(this||i).g.seekOnTaps&&(lC(this||i),mC(this||i));(this||i).xb=U("div");(this||i).xb.classList.add("shaka-server-side-ad-container");(this||i).h.appendChild((this||i).xb);nC(this||i);(this||i).H=Array.from((this||i).j.getElementsByClassName("shaka-settings-menu"));(this||i).H.push.apply((this||i).H,w(Array.from((this||i).j.getElementsByClassName("shaka-overflow-menu"))));oC(this||i);(this||i).Xb=Array.from((this||i).j.getElementsByClassName("shaka-show-controls-on-mouse-over"));ZB(this||i);r=t((this||i).j.getElementsByClassName("shaka-no-propagation"));for(var o=r.next();!o.done;o=r.next()){o=o.value;var c=function(i){return i.stopPropagation()};(this||i).i.o(o,"click",c);(this||i).i.o(o,"dblclick",c)}};p.lg=function(r){((this||i).N=r)?((this||i).j.setAttribute("shaka-controls","true"),(this||i).s.tabIndex=-1,(this||i).s.controls=!1):(this||i).j.removeAttribute("shaka-controls");ZB(this||i)};p.ph=function(r){(this||i).s.controls=r;(this||i).s.tabIndex=r?0:-1;r&&this.lg(!1)};p.getAd=function(){return(this||i).m};p.Vh=function(){return(this||i).C};p.ji=function(){return(this||i).va};p.Di=function(){return(this||i).j};p.cc=function(){return(this||i).u};p.ii=function(){return(this||i).s};p.Mc=function(){return(this||i).G};p.gi=function(){return(this||i).sa};p.$h=function(){return(this||i).h};p.ti=function(){return(this||i).xb};p.Xh=function(){return(this||i).M};p.Yh=function(){return(this||i).g};p.Oi=function(){return(this||i).W};p.qg=function(r){(this||i).W=r};p.Ii=function(){return(this||i).ua};p.Hf=function(){return(this||i).l?(this||i).l.getValue():(this||i).u.currentTime};p.qh=function(r){(this||i).J=r};p.nd=function(){return(this||i).H.some((function(i){return!i.classList.contains("shaka-hidden")}))};p.uc=function(){(this||i).I.Qa()};p.zd=function(){return!(!document.fullscreenEnabled&&!(this||i).s.webkitSupportsFullscreen)};p.Qc=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var r=(this||i).s;return!!r.webkitSupportsFullscreen&&r.webkitDisplayingFullscreen};function pC(i){var r,o,s;return K((function(p){switch(p.g){case 1:ta(p,2);if(!document.fullscreenEnabled){r=i.s;r.webkitSupportsFullscreen&&r.webkitEnterFullscreen();p.F(4);break}if(!document.pictureInPictureElement){p.F(5);break}return D(p,document.exitPictureInPicture(),5);case 5:return o=i.g.fullScreenElement,D(p,o.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!i.g.forceLandscapeOnFullscreen||!screen.orientation){p.F(4);break}ta(p,9);return D(p,screen.orientation.lock("landscape"),11);case 11:va(p,4,2);break;case 9:wa(p,2);case 4:va(p,0);break;case 2:s=wa(p),i.dispatchEvent(new O("error",(new Map).set("detail",s))),F(p)}}))}function qC(i){var r;return K((function(o){if(!document.fullscreenEnabled)return r=i.s,r.webkitSupportsFullscreen&&r.webkitExitFullscreen(),o.F(0);screen.orientation&&screen.orientation.unlock();return D(o,document.exitFullscreen(),0)}))}p.Pe=function(){var r=this||i;return K((function(i){return r.Qc()?D(i,qC(r),0):D(i,pC(r),0)}))};p.qe=function(){return!(this||i).C.Ba()&&(!!("documentPictureInPicture"in r&&(this||i).g.preferDocumentPictureInPicture||document.pictureInPictureEnabled)&&!(this||i).s.disablePictureInPicture)};p.re=function(){return"documentPictureInPicture"in r&&(this||i).g.preferDocumentPictureInPicture?!!r.documentPictureInPicture.window:!!document.pictureInPictureElement};p.Od=function(){var o,s,p=this||i;return K((function(i){if(1==i.g)return ta(i,2),"documentPictureInPicture"in r&&p.g.preferDocumentPictureInPicture?D(i,rC(p),5):document.pictureInPictureElement?D(i,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),o=p.s,D(i,o.requestPictureInPicture(),5));if(2!=i.g)return va(i,0);s=wa(i);p.dispatchEvent(new O("error",(new Map).set("detail",s)));F(i)}))};function rC(i){var o,s,p,y,A,T;return K((function(x){if(1==x.g){if(r.documentPictureInPicture.window)return r.documentPictureInPicture.window.close(),x.return();o=i.j;s=o.getBoundingClientRect();return D(x,r.documentPictureInPicture.requestWindow({width:s.width,height:s.height}),2)}p=x.h;sC(p);y=o.parentNode||document.body;A=i.j.cloneNode(!0);A.style.visibility="hidden";A.style.height=getComputedStyle(o).height;y.appendChild(A);T=document.createElement("style");T.append("[data-shaka-player-container] {\n      width: 100% !important; max-height: 100%}");p.document.head.append(T);p.document.body.append(o);i.i.na(p,"pagehide",(function(){A.replaceWith(o)}));F(x)}))}function sC(i){var r=[].concat(w(document.styleSheets)).map((function(r){try{return[].concat(w(r.cssRules)).map((function(i){return i.cssText})).join("")}catch(s){var o=document.createElement("link");o.rel="stylesheet";o.type=r.type;o.media=r.media;o.href=r.href;i.document.head.appendChild(o)}return""})).filter(Boolean).join("\n"),o=document.createElement("style");o.textContent=r;i.document.head.appendChild(o)}p.uh=function(){xB((this||i).K,!0);xB((this||i).M,!0);(this||i).h.setAttribute("ad-active","true")};p.Wg=function(){xB((this||i).K,!1);xB((this||i).M,!1);(this||i).h.removeAttribute("ad-active")};function EB(i){i.N&&i.u.duration&&(i.G.od(),i.u.paused&&!i.W?i.u.play():i.u.pause())}function DB(i){i.m&&i.m.isPaused()?i.m.play():i.m&&i.m.pause()}function gC(i){i.h=U("div");i.h.classList.add("shaka-controls-container");i.j.appendChild(i.h);i.j.setAttribute("shaka-controls","true");i.i.o(i.h,"touchstart",(function(r){i.u.duration&&(i.dc()?i.J=Date.now():(tC(i,r),r.cancelable&&r.preventDefault()))}),{passive:!1});i.i.o(i.h,"click",(function(){uC(i)}));i.i.o(i.h,"dblclick",(function(){i.g.doubleClickForFullscreen&&i.zd()&&i.Pe()}))}function jC(i){var r=U("div");r.classList.add("shaka-play-button-container");i.h.appendChild(r);i.Fb=new FB(r,i);i.D.push(i.Fb)}function iC(i){var r=U("div");r.classList.add("shaka-scrim-container");i.h.appendChild(r)}function vC(i){i.K=U("div");i.K.classList.add("shaka-ad-controls");var r=null!=i.m&&i.m.isLinear();xB(i.K,r);i.L.appendChild(i.K);r=new AB(i.K,i);i.D.push(r);r=new zB(i.K,i);i.D.push(r)}function kC(i){i.$=U("div");i.$.classList.add("shaka-spinner-container");i.j.appendChild(i.$);var r=U("div");r.classList.add("shaka-spinner");i.$.appendChild(r);i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("shaka-spinner-svg");i.setAttribute("viewBox","0 0 30 30");r.appendChild(i);r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.classList.add("shaka-spinner-path");r.setAttribute("cx","15");r.setAttribute("cy","15");r.setAttribute("r","14.5");r.setAttribute("fill","none");r.setAttribute("stroke-width","1");r.setAttribute("stroke-miterlimit","10");i.appendChild(r)}function lC(i){var r=U("div");r.classList.add("shaka-hidden-fast-forward-container");i.h.appendChild(r);i.nc=new LB(r,i);i.D.push(i.nc)}function mC(i){var r=U("div");r.classList.add("shaka-hidden-rewind-container");i.h.appendChild(r);i.tc=new MB(r,i);i.D.push(i.tc)}function nC(i){i.L=U("div");i.L.classList.add("shaka-bottom-controls");i.L.classList.add("shaka-no-propagation");i.h.appendChild(i.L);i.i.o(i.L,"click",(function(r){r.target.closest(".shaka-overflow-button")||i.uc()}));vC(i);i.V=U("div");i.V.classList.add("shaka-controls-button-panel");i.V.classList.add("shaka-show-controls-on-mouse-over");i.g.enableTooltips&&i.V.classList.add("shaka-tooltips-on");i.L.appendChild(i.V);for(var r=t(i.g.controlPanelElements),o=r.next();!o.done;o=r.next())o=o.value,qb.get(o)?(o=qb.get(o).create(i.V,i),i.D.push(o)):Ra("Unrecognized control panel element requested:",o)}function oC(i){if(i.g.addSeekBar)i.l=Hb.create(i.L,i),i.D.push(i.l);else{i=t(i.H);for(var r=i.next();!r.done;r=i.next())r.value.classList.add("shaka-low-position")}}function hC(i){i.M=U("div");i.M.classList.add("shaka-client-side-ad-container");xB(i.M,!1);i.i.o(i.M,"click",(function(){uC(i)}));i.j.appendChild(i.M)}function bC(i){i.i.o(i.G,"buffering",(function(){i.N&&xB(i.$,i.G.yd())}));i.N&&xB(i.$,i.G.yd());i.i.o(r,"keydown",(function(r){xC(i,r)}));i.i.o(r,"click",(function(){return i.uc()}));i.i.o(i,"submenuopen",(function(){i.uc()}));i.i.o(i.u,"play",(function(){ZB(i)}));i.i.o(i.u,"pause",(function(){ZB(i)}));i.i.o(i.j,"mousemove",(function(r){tC(i,r)}));i.i.o(i.j,"touchmove",(function(r){tC(i,r)}),{passive:!0});i.i.o(i.j,"touchend",(function(r){tC(i,r)}),{passive:!0});i.i.o(i.j,"mouseleave",(function(){i.J||i.Z.Qa()}));i.i.o(i.C,"caststatuschanged",(function(){cC(i)}));i.i.o(i.j,"keydown",(function(r){var o=document.activeElement,s=!(!o||!o.classList)&&o.classList.contains("shaka-volume-bar"),p=o&&o.classList&&o.classList.contains("shaka-seek-bar");i.h.contains(o)&&tC(i,r);if(i.g.enableKeyboardPlaybackControls){o=i.g.keyboardSeekDistance;var y=i.g.keyboardLargeSeekDistance;switch(r.key){case"ArrowLeft":i.l&&!s&&0<o&&(r.preventDefault(),yC(i,i.l.getValue()-o));break;case"ArrowRight":i.l&&!s&&0<o&&(r.preventDefault(),yC(i,i.l.getValue()+o));break;case"PageDown":i.l&&p&&0<o&&(r.preventDefault(),yC(i,i.l.getValue()-y));break;case"PageUp":i.l&&p&&0<o&&(r.preventDefault(),yC(i,i.l.getValue()+y));break;case"Home":i.l&&yC(i,i.G.Ha().start);break;case"End":i.l&&yC(i,i.G.Ha().end);break;case"f":i.zd()&&i.Pe();break;case"m":i.m&&i.m.isLinear()?i.m.setMuted(!i.m.isMuted()):i.s.muted=!i.s.muted;break;case"p":i.qe()&&i.Od();break;case" ":p&&zC(i)}}}));i.i.o(i.j,"keyup",(function(r){i.ha.delete(r.key)}));i.i.o(i.Wa,"ad-started",(function(r){i.m=r.ad;i.uh()}));i.i.o(i.Wa,"ad-stopped",(function(){i.m=null;i.Wg()}));screen.orientation&&i.i.o(screen.orientation,"change",(function(){return K((function(r){return D(r,AC(i),0)}))}))}function AC(i){return K((function(r){return i.u&&0!=i.u.readyState&&!i.C.Ba()&&i.g.enableFullscreenOnRotation&&i.zd()?screen.orientation.type.includes("landscape")&&!i.Qc()?D(r,pC(i),0):screen.orientation.type.includes("portrait")&&i.Qc()?D(r,qC(i),0):r.F(0):r.return()}))}function tC(i,r){"mousemove"==r.type&&(i.h.classList.remove("shaka-keyboard-navigation"),ZB(i));"touchstart"==r.type||"touchmove"==r.type||"touchend"==r.type||"keyup"==r.type?i.J=Date.now():i.J+1e3<Date.now()&&(i.J=null);i.J&&"mousemove"==r.type||(i.j.style.cursor="",i.Ib=!0,i.I.stop(),i.dc()||($B(i),ZB(i)),i.Z.stop(),"touchend"!=r.type&&"keyup"!=r.type&&i.J||i.Z.S(3))}function BC(i){return!!r.matchMedia("hover: hover").matches&&i.Xb.some((function(i){return i.matches(":hover")}))}function ZB(i){var r=!!i.m&&i.m.isPaused(),o=i.u.paused&&!i.W,s=i.h.classList.contains("shaka-keyboard-navigation");r||(!i.m||!i.m.isLinear())&&o||i.Ib||s||BC(i)?($B(i),i.h.setAttribute("shown","true"),i.aa.stop()):i.aa.S(i.g.fadeDelay)}function uC(i){i.N&&(i.nd()?i.I.Qa():i.g.singleClickForPlayAndPause&&zC(i))}function zC(i){i.m&&i.m.isLinear()?DB(i):EB(i)}function cC(i){var r=i.C.Ba();i.dispatchEvent(new O("caststatuschanged",(new Map).set("newStatus",r)));r?i.h.setAttribute("casting","true"):i.h.removeAttribute("casting")}p.dc=function(){return!!(this||i).N&&(null!=(this||i).h.getAttribute("shown")||null!=(this||i).h.getAttribute("casting"))};function yC(i,r){i.l.changeTo(r);i.dc()&&$B(i)}function $B(i){if(i.l)if(i.l.setValue(i.u.currentTime),i.l.update(),i.l.isShowing())for(var r=t(i.H),o=r.next();!o.done;o=r.next())o.value.classList.remove("shaka-low-position");else for(r=t(i.H),o=r.next();!o.done;o=r.next())o.value.classList.add("shaka-low-position");i.dispatchEvent(new O("timeandseekrangeupdated"))}function xC(i,o){i.ha.add(o.key);var s=i.nd();"Tab"==o.key&&(i.h.classList.add("shaka-keyboard-navigation"),ZB(i),i.i.o(r,"mousedown",(function(){i.i.hc(r,"mousedown")})));"Escape"==o.key&&i.I.Qa();s&&i.ha.has("Tab")&&CC(i,o)}function CC(i,r){var o=i.H.filter((function(i){return!i.classList.contains("shaka-hidden")}));if(o.length){var s=o[0];if(s.childNodes.length){for(o=s.firstElementChild;o&&o.classList.contains("shaka-hidden");)o=o.nextElementSibling;for(s=s.lastElementChild;s&&s.classList.contains("shaka-hidden");)s=s.previousElementSibling;var p=document.activeElement;i.ha.has("Shift")?p==o&&(r.preventDefault(),s.focus()):p==s&&(r.preventDefault(),o.focus())}}}function aC(){var i=new Ub("en");i.ya("ar",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_AD"," "],["SKIP_TO_LIVE","   "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]]));i.ya("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung [AD_ON] von [NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_AD","berspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]]));i.ya("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]]));i.ya("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]]));i.ya("es",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vdeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vdeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]]));i.ya("es-419",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repeticin indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]]));i.ya("fr",new Map([["AD_DURATION","Dure de l'annonce"],["AD_PROGRESS","Annonce [AD_ON] sur [NUM_ADS]"],["AD_TIME","Annonce : [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["ENTER_LOOP_MODE","Lire en boucle la vido en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_LOOP_MODE","Arrter la lecture en boucle de la vido en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Rpter"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]]));i.ya("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocit di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]]));i.ya("ja",new Map([["AD_DURATION",""],["AD_PROGRESS","[AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]));i.ya("ko",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","   "],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","    "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD"," "],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]]));i.ya("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]]));i.ya("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama [AD_ON] z [NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["ENTER_LOOP_MODE","Odtwarzaj biecy film w ptli"],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_LOOP_MODE","Wycz odtwarzanie biecego filmu w ptli"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu w obrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["LOOP","Odtwarzaj w ptli"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwrz"],["PLAYBACK_RATE","Szybko odtwarzania"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_AD","Pomi reklam"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]]));i.ya("pt-BR",new Map([["AD_DURATION","Durao do anncio"],["AD_PROGRESS","Anncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anncio: [AD_TIME]"],["AUTO_QUALITY","Automtica"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vdeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetio do vdeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reproduo"],["RESOLUTION","Resoluo"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anncio"],["SKIP_TO_LIVE","Pular para transmisso ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]]));i.ya("ru",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["LOOP",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON","."],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE","     "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]]));i.ya("th",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]));i.ya("tr",new Map([["AD_DURATION","Reklam sresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_LOOP_MODE","Mevcut videoyu dngye al"],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_LOOP_MODE","Mevcut videonun dngsn durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["LOOP","Dng"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","alma hz"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklam Atla"],["SKIP_TO_LIVE","Canl yayna atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]]));i.ya("zh",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]));i.ya("zh-TW",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]));i.Ig(navigator.languages||[]);return i}L("shaka.ui.Controls",Z);Z.prototype.isOpaque=Z.prototype.dc;Z.prototype.hideAdUI=Z.prototype.Wg;Z.prototype.showAdUI=Z.prototype.uh;Z.prototype.togglePiP=Z.prototype.Od;Z.prototype.isPiPEnabled=Z.prototype.re;Z.prototype.isPiPAllowed=Z.prototype.qe;Z.prototype.toggleFullScreen=Z.prototype.Pe;Z.prototype.isFullScreenEnabled=Z.prototype.Qc;Z.prototype.isFullScreenSupported=Z.prototype.zd;Z.prototype.hideSettingsMenus=Z.prototype.uc;Z.prototype.anySettingsMenusAreOpen=Z.prototype.nd;Z.prototype.setLastTouchEventTime=Z.prototype.qh;Z.prototype.getDisplayTime=Z.prototype.Hf;Z.prototype.isCastAllowed=Z.prototype.Ii;Z.prototype.setSeeking=Z.prototype.qg;Z.prototype.isSeeking=Z.prototype.Oi;Z.prototype.getConfig=Z.prototype.Yh;Z.prototype.getClientSideAdContainer=Z.prototype.Xh;Z.prototype.getServerSideAdContainer=Z.prototype.ti;Z.prototype.getControlsContainer=Z.prototype.$h;Z.prototype.getLocalPlayer=Z.prototype.gi;Z.prototype.getPlayer=Z.prototype.Mc;Z.prototype.getLocalVideo=Z.prototype.ii;Z.prototype.getVideo=Z.prototype.cc;Z.prototype.getVideoContainer=Z.prototype.Di;Z.prototype.getLocalization=Z.prototype.ji;Z.prototype.getCastProxy=Z.prototype.Vh;Z.prototype.getAd=Z.prototype.getAd;Z.prototype.setEnabledNativeControls=Z.prototype.ph;Z.prototype.setEnabledShakaControls=Z.prototype.lg;Z.prototype.configure=Z.prototype.configure;Z.prototype.loadComplete=Z.prototype.Ri;Z.prototype.allowCast=Z.prototype.Kh;Z.registerSeekBar=function(i){Hb=i};Z.registerElement=eC;Z.prototype.destroy=Z.prototype.destroy;var qb=new Map,Hb=new YB;function DC(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).l=(this||i).controls.g;(this||i).j=(this||i).controls.h;(this||i).i=[];(this||i).g=el();(this||i).g.classList.add("shaka-overflow-menu-button");(this||i).g.classList.add("shaka-no-propagation");(this||i).g.classList.add("material-icons-round");(this||i).g.classList.add("shaka-tooltip");(this||i).g.textContent="more_vert";(this||i).parent.appendChild((this||i).g);(this||i).h=U("div");(this||i).h.classList.add("shaka-overflow-menu");(this||i).h.classList.add("shaka-no-propagation");(this||i).h.classList.add("shaka-show-controls-on-mouse-over");(this||i).h.classList.add("shaka-hidden");(this||i).j.appendChild((this||i).h);EC(this||i);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){FC(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){FC(s)}));(this||i).eventManager.o((this||i).adManager,"ad-started",(function(){s.ad&&s.ad.isLinear()&&xB(s.g,!1)}));(this||i).eventManager.o((this||i).adManager,"ad-stopped",(function(){xB(s.g,!0)}));(this||i).eventManager.o((this||i).controls,"submenuopen",(function(){xB(s.h,!1)}));(this||i).eventManager.o((this||i).h,"touchstart",(function(i){s.controls.qh(Date.now());i.stopPropagation()}));(this||i).eventManager.o((this||i).g,"click",(function(){GC(s)}));FC(this||i);(this||i).ad&&(this||i).ad.isLinear()&&xB((this||i).g,!1)}pa(DC,sB);DC.prototype.release=function(){(this||i).j=null;for(var r=t((this||i).i),o=r.next();!o.done;o=r.next())o.value.release();(this||i).i=[];sB.prototype.release.call(this||i)};function HC(i,r){Wb.set(i,r)}function EC(i){for(var r=t(i.l.overflowMenuButtons),o=r.next();!o.done;o=r.next())o=o.value,Wb.get(o)?(o=Wb.get(o),i.i.push(o.create(i.h,i.controls))):Ra("Unrecognized overflow menu element requested:",o)}function GC(i){if(i.controls.nd())i.controls.uc();else{xB(i.h,!0);ZB(i.controls);var b=function(i){return 0==i.classList.contains("shaka-hidden")};cb(i.h.childNodes,b)&&db(i.h.childNodes,b)[0].focus()}}function FC(i){i.g.ariaLabel=i.localization.resolve("MORE_SETTINGS")}L("shaka.ui.OverflowMenu",DC);DC.registerElement=HC;function JC(){}JC.prototype.create=function(i,r){return new DC(i,r)};eC("overflow_menu",new JC);var Wb=new Map;function KC(o,s){sB.call(this||i,o,s);var p=this||i;(this||i).g=el();(this||i).g.classList.add("shaka-airplay-button");(this||i).g.classList.add("shaka-tooltip");(this||i).g.ariaPressed="false";(this||i).h=U("i");(this||i).h.classList.add("material-icons-round");(this||i).h.textContent="airplay";(this||i).g.appendChild((this||i).h);r.WebKitPlaybackTargetAvailabilityEvent||(this||i).g.classList.add("shaka-hidden");o=U("label");o.classList.add("shaka-overflow-button-label");o.classList.add("shaka-overflow-menu-only");(this||i).j=U("span");o.appendChild((this||i).j);(this||i).i=U("span");(this||i).i.classList.add("shaka-current-selection-span");o.appendChild((this||i).i);(this||i).g.appendChild(o);(this||i).parent.appendChild((this||i).g);LC(this||i);MC(this||i);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){LC(p)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){LC(p)}));(this||i).eventManager.o((this||i).g,"click",(function(){p.controls.cc().webkitShowPlaybackTargetPicker()}));o=(this||i).controls.cc();(this||i).eventManager.o(o,"webkitplaybacktargetavailabilitychanged",(function(i){var r=p.player.ie()==Bu;xB(p.g,"available"==i.availability&&r)}));(this||i).eventManager.o(o,"webkitcurrentplaybacktargetiswirelesschanged",(function(){MC(p)}))}pa(KC,sB);function MC(i){var r=i.controls.cc();i.g.ariaPressed=r&&r.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function LC(i){i.g.ariaLabel=i.localization.resolve("AIRPLAY");i.j.textContent=i.localization.resolve("AIRPLAY")}L("shaka.ui.AirPlayButton",KC);function NC(){}NC.prototype.create=function(i,r){return new KC(i,r)};HC("airplay",new NC);eC("airplay",new NC);function OC(r,o,s){(this||i).i=r;(this||i).j=o;(this||i).h=PC(this||i);o.dataset.shakaPlayerContainer="";o.ui=this||i;this.Nf()&&o.classList.add("shaka-mobile");(this||i).g=new Z(r,o,s,(this||i).h);this.configure({});s.controls||r.rg(o);o.ui=this||i;s.ui=this||i}p=OC.prototype;p.destroy=function(){var r=this||i;return K((function(i){if(1==i.g)return r.g?D(i,r.g.destroy(),2):i.F(2);if(4!=i.g)return r.g=null,r.i?D(i,r.i.destroy(),4):i.F(4);r.i=null;F(i)}))};p.Nf=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||Pd()&&1<navigator.maxTouchPoints};p.getConfiguration=function(){var r=PC(this||i);Pl(r,(this||i).h,PC(this||i),{},"");return r};p.configure=function(r,o){2==arguments.length&&"string"==typeof r&&(r=Ql(r,o));Pl((this||i).h,r,PC(this||i),{},"");(this||i).h.castReceiverAppId&&!(this||i).h.overflowMenuButtons.includes("cast")&&(this||i).h.overflowMenuButtons.push("cast");(this||i).g.configure((this||i).h);(this||i).g.dispatchEvent(new O("uiupdated"))};p.Zh=function(){return(this||i).g};p.tj=function(r){(this||i).g.lg(r)};function PC(i){var o={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:gw,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5,keyboardLargeSeekDistance:60,fullScreenElement:i.j,preferDocumentPictureInPicture:!0,showAudioChannelCountVariants:!0,seekOnTaps:!0,tapSeekDistance:10};"remote"in HTMLMediaElement.prototype?o.overflowMenuButtons.push("remote"):r.WebKitPlaybackTargetAvailabilityEvent&&o.overflowMenuButtons.push("airplay");i.Nf()&&(o.addBigPlayButton=!0,o.controlPanelElements=o.controlPanelElements.filter((function(i){return"play_pause"!=i&&"volume"!=i})));return o}function RC(){var i,r,o,s,p,y,A,T,x,I,C,M,N,_,j,B,z,G,q,H,Y;return K((function(Q){switch(Q.g){case 1:zx();if(!tm())return SC("shaka-ui-load-failed",_w),Q.return();i=document.querySelectorAll("[data-shaka-player-container]");r=document.querySelectorAll("[data-shaka-player]");o=document.querySelectorAll("[data-shaka-player-canvas]");if(!r.length&&!i.length){Q.F(2);break}if(r.length&&!i.length){s=t(r);for(p=s.next();!p.done;p=s.next())if(y=p.value,!y.ui){A=document.createElement("div");T=y.parentElement;T.replaceChild(A,y);A.appendChild(y);x=null;I=t(o);for(C=I.next();!C.done;C=I.next())if(M=C.value,M.parentElement==A){x=M;break}x||(x=document.createElement("canvas"),x.classList.add("shaka-canvas-container"),A.appendChild(x));UC(A,y,x)}Q.F(2);break}N=t(i);_=N.next();case 4:if(_.done){Q.F(2);break}j=_.value;if(j.ui){Q.F(5);break}B=null;z=t(r);for(p=z.next();!p.done;p=z.next())if(G=p.value,G.parentElement==j){B=G;break}B||(B=document.createElement("video"),B.setAttribute("playsinline",""),j.appendChild(B));q=null;H=t(o);for(C=H.next();!C.done;C=H.next())if(Y=C.value,Y.parentElement==j){q=Y;break}q||(q=document.createElement("canvas"),q.classList.add("shaka-canvas-container"),j.appendChild(q));ta(Q,7);return D(Q,UC(j,B,q),9);case 9:va(Q,5);break;case 7:return wa(Q),SC("shaka-ui-load-failed",nA),Q.return();case 5:_=N.next();Q.F(4);break;case 2:SC("shaka-ui-loaded"),F(Q)}}))}function SC(i,r){var o=null;void 0!=r&&(o={reasonCode:r});i=new CustomEvent(i,{detail:o});document.dispatchEvent(i)}function UC(i,r,o){var s,p,y,A,T,x,I,C,M;return K((function(N){switch(N.g){case 1:s=new V;p=new OC(s,i,r);s.Eg(o);y="";A=!1;i.dataset&&i.dataset.shakaPlayerCastReceiverId?(y=i.dataset.shakaPlayerCastReceiverId,A="true"===i.dataset.shakaPlayerCastAndroidReceiverCompatible):r.dataset&&r.dataset.shakaPlayerCastReceiverId&&(y=r.dataset.shakaPlayerCastReceiverId,A="true"===r.dataset.shakaPlayerCastAndroidReceiverCompatible);y.length&&p.configure({castReceiverAppId:y,castAndroidReceiverCompatible:A});r.controls&&p.g.ph(!0);(T=r.getAttribute("src"))&&(x=document.createElement("source"),x.setAttribute("src",T),r.appendChild(x),r.removeAttribute("src"));I=t(r.querySelectorAll("source"));C=I.next();case 2:if(C.done){N.F(4);break}M=C.value;ta(N,5);return D(N,p.g.Mc().load(M.getAttribute("src")),7);case 7:N.F(4);break;case 5:wa(N);case 3:C=I.next();N.F(2);break;case 4:return D(N,s.Gc(r),0)}}))}L("shaka.ui.Overlay",OC);OC.prototype.setEnabled=OC.prototype.tj;OC.prototype.getControls=OC.prototype.Zh;OC.prototype.configure=OC.prototype.configure;OC.prototype.getConfiguration=OC.prototype.getConfiguration;OC.prototype.isMobile=OC.prototype.Nf;OC.prototype.destroy=OC.prototype.destroy;var gw=0;OC.TrackLabelFormat={LANGUAGE:gw,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var _w=0,nA=1;OC.FailReasonCode={NO_BROWSER_SUPPORT:_w,PLAYER_FAILED_TO_LOAD:nA};"complete"==document.readyState?K((function(i){if(1==i.g)return D(i,Promise.resolve(),2);RC();F(i)})):r.addEventListener("load",RC);function WC(i,r,o,s,p,y,A,T){function k(i){var r="";5<=i&&(r=" "+y.resolve("SURROUND"));return r}function l(i,r,o,s){i=[i,r];T&&null!=s&&i.push(s);o&&3==A&&i.push(o);return i.join(": ")}function m(i){return"variant"==i.type?i.audioRoles?i.audioRoles.join(", "):void 0:i.roles.join(", ")}var x=i.find((function(i){return 1==i.active})),I=tB(r);fl(r);r.appendChild(I);I=new Map;for(var C=t(i),M=C.next();!M.done;M=C.next())M=M.value,I.has(M.language)||I.set(M.language,new Set),I.get(M.language).add(m(M));I=new Set;x=x?l(x.language,m(x),x.label,x.channelsCount):"";C={};i=t(i);for(M=i.next();!M.done;C={vb:C.vb},M=i.next()){C.vb=M.value;M=C.vb.language;var N=C.vb.forced,_=y.resolve("SUBTITLE_FORCED"),j=m(C.vb),B=C.vb.label,z=C.vb.channelsCount,G=l(M,j,B,z);if(!I.has(G)){I.add(G);var q=el();q.addEventListener("click",function(i){return function(){o(i.vb)}}(C));var H=U("span");q.appendChild(H);H.textContent=XC(M,y);switch(A){case gw:T&&(H.textContent+=k(z));N&&(H.textContent+=" ("+_+")");break;case 1:T&&(H.textContent+=k(z));j?H.textContent=j:(Ra("Track #"+C.vb.id+" does not have a role, but the UI is configured to only show role."),H.textContent="?");N&&(H.textContent+=" ("+_+")");break;case 2:T&&(H.textContent+=k(z));j&&(H.textContent+=": "+j);N&&(H.textContent+=" ("+_+")");break;case 3:B?H.textContent=B:(Ra("Track #"+C.vb.id+" does not have a label, but the UI is configured to only show labels."),H.textContent="?")}s&&G==x&&(q.appendChild(wB()),H.classList.add("shaka-chosen-item"),q.ariaSelected="true",p.textContent=H.textContent);r.appendChild(q)}}}function XC(i,r){if(!i&&!r)return"";switch(i){case"mul":return r.resolve("MULTIPLE_LANGUAGES");case"und":return r.resolve("UNDETERMINED_LANGUAGE");case"zxx":return r.resolve("NOT_APPLICABLE")}var o=Qb(i);return i in Lb?Lb[i].A:o in Lb?Lb[o].A+" ("+i+")":r.resolve("UNRECOGNIZED_LANGUAGE")+" ("+i+")"}function YC(r,o,s){sB.call(this||i,r,o);var p=this||i;ZC(this||i,s);$C(this||i);aD(this||i);(this||i).eventManager.o((this||i).button,"click",(function(){p.menu.classList.contains("shaka-hidden")?(p.controls.dispatchEvent(new O("submenuopen")),xB(p.menu,!0),vB(p.menu)):xB(p.menu,!1)}))}pa(YC,sB);function ZC(i,r){i.button=el();i.button.classList.add("shaka-overflow-button");i.icon=U("i");i.icon.classList.add("material-icons-round");i.icon.textContent=r;i.button.appendChild(i.icon);r=U("label");r.classList.add("shaka-overflow-button-label");r.classList.add("shaka-overflow-menu-only");i.nameSpan=U("span");r.appendChild(i.nameSpan);i.currentSelection=U("span");i.currentSelection.classList.add("shaka-current-selection-span");r.appendChild(i.currentSelection);i.button.appendChild(r);i.parent.appendChild(i.button)}function $C(i){i.menu=U("div");i.menu.classList.add("shaka-no-propagation");i.menu.classList.add("shaka-show-controls-on-mouse-over");i.menu.classList.add("shaka-settings-menu");i.menu.classList.add("shaka-hidden");i.backButton=el();i.backButton.classList.add("shaka-back-to-overflow-button");i.menu.appendChild(i.backButton);i.eventManager.o(i.backButton,"click",(function(){i.controls.uc()}));var r=U("i");r.classList.add("material-icons-round");r.textContent="close";i.backButton.appendChild(r);i.backSpan=U("span");i.backButton.appendChild(i.backSpan);i.controls.h.appendChild(i.menu)}function aD(i){i.parent.classList.contains("shaka-overflow-menu")&&(i.backButton.firstChild.textContent="arrow_back",i.eventManager.o(i.backButton,"click",(function(){function b(i){return 0==i.classList.contains("shaka-hidden")}xB(i.parent,!0);cb(i.parent.childNodes,b)&&db(i.parent.childNodes,b)[0].focus();ZB(i.controls)})))}L("shaka.ui.SettingsMenu",YC);function bD(r,o){YC.call(this||i,r,o,"language");var s=this||i;(this||i).button.classList.add("shaka-language-button");(this||i).button.classList.add("shaka-tooltip-status");(this||i).menu.classList.add("shaka-audio-languages");(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){cD(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){cD(s)}));(this||i).eventManager.o((this||i).player,"trackschanged",(function(){var i=0<s.player.mb().length;xB(s.button,i);dD(s)}));(this||i).eventManager.o((this||i).player,"variantchanged",(function(){dD(s)}));cD(this||i);dD(this||i)}pa(bD,YC);function dD(i){var r=i.player.mb();WC(r,i.menu,(function(r){r.channelsCount&&i.controls.g.showAudioChannelCountVariants?i.player.Le(r.language,r.roles[0],r.channelsCount):i.player.Le(r.language,r.roles[0])}),!0,i.currentSelection,i.localization,i.controls.g.trackLabelFormat,i.controls.g.showAudioChannelCountVariants);vB(i.menu);i.controls.dispatchEvent(new O("languageselectionupdated"));i.button.setAttribute("shaka-status",i.currentSelection.innerText);xB(i.button,2<i.menu.getElementsByTagName("button").length)}function cD(i){i.backButton.ariaLabel=i.localization.resolve("BACK");i.button.ariaLabel=i.localization.resolve("LANGUAGE");i.nameSpan.textContent=i.localization.resolve("LANGUAGE");i.backSpan.textContent=i.localization.resolve("LANGUAGE")}L("shaka.ui.AudioLanguageSelection",bD);function eD(){}eD.prototype.create=function(i,r){return new bD(i,r)};HC("language",new eD);eC("language",new eD);function fD(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).h=(this||i).controls.C;(this||i).g=el();(this||i).g.classList.add("shaka-cast-button");(this||i).g.classList.add("shaka-tooltip");(this||i).g.ariaPressed="false";(this||i).i=U("i");(this||i).i.classList.add("material-icons-round");(this||i).i.textContent="cast";(this||i).g.appendChild((this||i).i);r=U("label");r.classList.add("shaka-overflow-button-label");r.classList.add("shaka-overflow-menu-only");(this||i).l=U("span");r.appendChild((this||i).l);(this||i).j=U("span");(this||i).j.classList.add("shaka-current-selection-span");r.appendChild((this||i).j);(this||i).g.appendChild(r);(this||i).parent.appendChild((this||i).g);gD(this||i);hD(this||i);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){gD(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){gD(s)}));(this||i).eventManager.o((this||i).g,"click",(function(){iD(s)}));(this||i).eventManager.o((this||i).controls,"caststatuschanged",(function(){hD(s)}))}pa(fD,sB);function iD(i){var r;K((function(o){if(1==o.g){if(i.h.Ba())return i.h.vh(),o.F(0);ta(o,3);i.g.disabled=!0;return D(o,i.h.cast(),5)}if(3!=o.g)return i.g.disabled=!1,va(o,0);r=wa(o);i.g.disabled=!1;8004!=r.code&&i.controls.dispatchEvent(new O("error",(new Map).set("detail",r)));F(o)}))}function hD(i){var r=i.h.kf()&&i.controls.ua,o=i.h.Ba();xB(i.g,r);i.i.textContent=o?"cast_connected":"cast";r&&(i.g.ariaPressed=o?"true":"false");jD(i)}function jD(i){i.j.textContent=i.h.Ba()?i.h.Je():i.localization.resolve("OFF")}function gD(i){i.g.ariaLabel=i.localization.resolve("CAST");i.l.textContent=i.localization.resolve("CAST");jD(i)}L("shaka.ui.CastButton",fD);function kD(){}kD.prototype.create=function(i,r){return new fD(i,r)};HC("cast",new kD);eC("cast",new kD);function lD(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).g=el();(this||i).g.classList.add("material-icons-round");(this||i).g.classList.add("shaka-fast-forward-button");(this||i).g.classList.add("shaka-tooltip-status");(this||i).g.setAttribute("shaka-status","1x");(this||i).g.textContent="fast_forward";(this||i).parent.appendChild((this||i).g);mD(this||i);(this||i).h=(this||i).controls.g.fastForwardRates;(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){mD(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){mD(s)}));(this||i).eventManager.o((this||i).g,"click",(function(){if(s.video.duration){var i=s.h.indexOf(s.player.Nb())+1;i=i!=s.h.length?s.h[i]:s.h[0];s.player.Pd(i);s.g.setAttribute("shaka-status",i+"x")}}))}pa(lD,sB);function mD(i){i.g.ariaLabel=i.localization.resolve("FAST_FORWARD")}L("shaka.ui.FastForwardButton",lD);function nD(){}nD.prototype.create=function(i,r){return new lD(i,r)};eC("fast_forward",new nD);function oD(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).h=(this||i).controls.s;(this||i).g=el();(this||i).g.classList.add("shaka-fullscreen-button");(this||i).g.classList.add("material-icons-round");(this||i).g.classList.add("shaka-tooltip");pD(this||i);(this||i).g.textContent="fullscreen";(this||i).parent.appendChild((this||i).g);qD(this||i);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){qD(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){qD(s)}));(this||i).eventManager.o((this||i).g,"click",(function(){return K((function(i){return D(i,s.controls.Pe(),0)}))}));(this||i).eventManager.o(document,"fullscreenchange",(function(){s.g.textContent=s.controls.Qc()?"fullscreen_exit":"fullscreen";qD(s)}));(this||i).eventManager.o((this||i).h,"loadedmetadata",(function(){pD(s)}));(this||i).eventManager.o((this||i).h,"loadeddata",(function(){pD(s)}))}pa(oD,sB);function pD(i){i.controls.zd()?i.g.classList.remove("shaka-hidden"):i.g.classList.add("shaka-hidden")}function qD(i){i.g.ariaLabel=i.localization.resolve(i.controls.Qc()?"EXIT_FULL_SCREEN":"FULL_SCREEN")}L("shaka.ui.FullscreenButton",oD);function rD(){}rD.prototype.create=function(i,r){return new oD(i,r)};eC("fullscreen",new rD);function sD(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).g=el();(this||i).g.classList.add("shaka-loop-button");(this||i).g.classList.add("shaka-tooltip");(this||i).i=U("i");(this||i).i.classList.add("material-icons-round");(this||i).i.textContent="repeat";(this||i).g.appendChild((this||i).i);r=U("label");r.classList.add("shaka-overflow-button-label");r.classList.add("shaka-overflow-menu-only");(this||i).j=U("span");(this||i).j.textContent=(this||i).localization.resolve("LOOP");r.appendChild((this||i).j);(this||i).l=U("span");(this||i).l.classList.add("shaka-current-selection-span");r.appendChild((this||i).l);(this||i).g.appendChild(r);tD(this||i);(this||i).parent.appendChild((this||i).g);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){tD(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){tD(s)}));(this||i).eventManager.o((this||i).g,"click",(function(){s.video.loop=!s.video.loop;s.h.Qa();s.h.za(1)}));(this||i).m=(this||i).video.loop;(this||i).h=new Dd((function(){s.m!=s.video.loop&&(tD(s),s.m=s.video.loop)}));(this||i).h.za(1)}pa(sD,sB);sD.prototype.release=function(){(this||i).h.stop();(this||i).h=null;sB.prototype.release.call(this||i)};function tD(i){i.j.textContent=i.localization.resolve("LOOP");i.l.textContent=i.localization.resolve(i.video.loop?"ON":"OFF");i.i.textContent=i.video.loop?"repeat_on":"repeat";i.g.ariaLabel=i.localization.resolve(i.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}L("shaka.ui.LoopButton",sD);function uD(){}uD.prototype.create=function(i,r){return new sD(i,r)};HC("loop",new uD);eC("loop",new uD);IB("loop",new uD);function vD(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).g=el();(this||i).g.classList.add("shaka-mute-button");(this||i).g.classList.add("material-icons-round");(this||i).g.classList.add("shaka-tooltip");(this||i).parent.appendChild((this||i).g);wD(this||i);xD(this||i);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){wD(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){wD(s)}));(this||i).eventManager.o((this||i).g,"click",(function(){s.ad&&s.ad.isLinear()?s.ad.setMuted(!s.ad.isMuted()):s.video.muted=!s.video.muted}));(this||i).eventManager.o((this||i).video,"volumechange",(function(){wD(s);xD(s)}));(this||i).eventManager.o((this||i).adManager,"ad-volume-changed",(function(){wD(s);xD(s)}));(this||i).eventManager.o((this||i).adManager,"ad-muted",(function(){wD(s);xD(s)}));(this||i).eventManager.o((this||i).adManager,"ad-stopped",(function(){s.ad=null;wD(s);xD(s)}))}pa(vD,sB);function wD(i){var r=i.ad?i.ad.isMuted()?"UNMUTE":"MUTE":i.video.muted?"UNMUTE":"MUTE";i.g.ariaLabel=i.localization.resolve(r)}function xD(i){var r=i.ad?i.ad.isMuted()?"volume_off":"volume_up":i.video.muted?"volume_off":"volume_up";i.g.textContent=r}L("shaka.ui.MuteButton",vD);function yD(){}yD.prototype.create=function(i,r){return new vD(i,r)};eC("mute",new yD);function zD(o,s){sB.call(this||i,o,s);var p=this||i;(this||i).l=(this||i).controls.s;(this||i).g=el();(this||i).g.classList.add("shaka-pip-button");(this||i).g.classList.add("shaka-tooltip");(this||i).i=U("i");(this||i).i.classList.add("material-icons-round");(this||i).i.textContent="picture_in_picture_alt";(this||i).g.appendChild((this||i).i);o=U("label");o.classList.add("shaka-overflow-button-label");o.classList.add("shaka-overflow-menu-only");(this||i).j=U("span");(this||i).j.textContent=(this||i).localization.resolve("PICTURE_IN_PICTURE");o.appendChild((this||i).j);(this||i).h=U("span");(this||i).h.classList.add("shaka-current-selection-span");o.appendChild((this||i).h);(this||i).g.appendChild(o);AD(this||i);(this||i).parent.appendChild((this||i).g);(this||i).controls.qe()||xB((this||i).g,!1);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){AD(p)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){AD(p)}));(this||i).eventManager.o((this||i).g,"click",(function(){p.controls.Od()}));(this||i).eventManager.o((this||i).l,"enterpictureinpicture",(function(){BD(p)}));(this||i).eventManager.o((this||i).l,"leavepictureinpicture",(function(){CD(p)}));(this||i).eventManager.o((this||i).controls,"caststatuschanged",(function(){DD(p)}));(this||i).eventManager.o((this||i).player,"trackschanged",(function(){DD(p)}));"documentPictureInPicture"in r&&(this||i).eventManager.o(r.documentPictureInPicture,"enter",(function(i){BD(p);p.eventManager.na(i.window,"pagehide",(function(){CD(p)}))}))}pa(zD,sB);function BD(i){i.i.textContent="branding_watermark";i.g.ariaLabel=i.localization.resolve("EXIT_PICTURE_IN_PICTURE");i.h.textContent=i.localization.resolve("ON")}function CD(i){i.i.textContent="picture_in_picture_alt";i.g.ariaLabel=i.localization.resolve("ENTER_PICTURE_IN_PICTURE");i.h.textContent=i.localization.resolve("OFF")}function AD(i){i.j.textContent=i.localization.resolve("PICTURE_IN_PICTURE");var r=i.controls.re();i.g.ariaLabel=i.localization.resolve(r?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE");i.h.textContent=i.localization.resolve(r?"ON":"OFF")}function DD(i){K((function(r){if(!i.controls.qe())return xB(i.g,!1),i.controls.re()?D(r,i.controls.Od(),0):r.F(0);if(!i.player||!i.player.Pc())return xB(i.g,!0),r.F(0);xB(i.g,!1);return i.controls.re()?D(r,i.controls.Od(),0):r.F(0)}))}L("shaka.ui.PipButton",zD);function ED(){}ED.prototype.create=function(i,r){return new zD(i,r)};HC("picture_in_picture",new ED);eC("picture_in_picture",new ED);IB("picture_in_picture",new ED);function FD(r,o){YC.call(this||i,r,o,"slow_motion_video");var s=this||i;(this||i).button.classList.add("shaka-playbackrate-button");(this||i).menu.classList.add("shaka-playback-rates");(this||i).button.classList.add("shaka-tooltip-status");(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){GD(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){GD(s)}));(this||i).eventManager.o((this||i).player,"loaded",(function(){HD(s,s.player.Nb())}));(this||i).eventManager.o((this||i).player,"ratechange",(function(){HD(s,s.player.Nb())}));(this||i).g=new Map((this||i).controls.g.playbackRates.map((function(i){return[i+"x",i]})));GD(this||i);ID(this||i);HD(this||i,(this||i).player.Nb())}pa(FD,YC);function GD(i){i.backButton.ariaLabel=i.localization.resolve("BACK");i.button.ariaLabel=i.localization.resolve("PLAYBACK_RATE");i.nameSpan.textContent=i.localization.resolve("PLAYBACK_RATE");i.backSpan.textContent=i.localization.resolve("PLAYBACK_RATE")}function HD(i,r){var o=uB(i.menu,"material-icons-round shaka-chosen-item");if(o){var s=o.parentElement;s.removeAttribute("aria-selected");s.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item");s.removeChild(o)}(o=Array.from(i.menu.querySelectorAll("span")).find((function(o){return i.g.get(o.textContent)==r})))&&(s=o.parentElement,s.appendChild(wB()),s.ariaSelected="true",o.classList.add("shaka-chosen-item"));i.currentSelection.textContent=r+"x";i.button.setAttribute("shaka-status",r+"x")}function ID(i){for(var r={},o=t(i.g.keys()),s=o.next();!s.done;r={cd:r.cd},s=o.next()){r.cd=s.value;s=el();var p=U("span");p.textContent=r.cd;s.appendChild(p);i.eventManager.o(s,"click",function(r){return function(){i.video.playbackRate=i.g.get(r.cd);i.video.defaultPlaybackRate=i.g.get(r.cd)}}(r));i.menu.appendChild(s)}vB(i.menu)}L("shaka.ui.PlaybackRateSelection",FD);function JD(){}JD.prototype.create=function(i,r){return new FD(i,r)};HC("playback_rate",new JD);eC("playback_rate",new JD);function KD(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).g=el();(this||i).g.classList.add("shaka-current-time");LD(this||i,"0:00");(this||i).parent.appendChild((this||i).g);(this||i).eventManager.o((this||i).g,"click",(function(){s.player.R()&&(s.video.currentTime=s.player.Ha().end)}));(this||i).eventManager.o((this||i).controls,"timeandseekrangeupdated",(function(){var i=s.controls.W,r=s.controls.Hf(),o=s.player.Ha(),p=o.end-o.start;s.player.R()?(r=Math.max(0,Math.floor(o.end-r)),p=3600<=p,1<=r||i?(LD(s,"- "+yB(r,p)),s.g.disabled=!1):(LD(s,s.localization.resolve("LIVE")),s.g.disabled=!0)):(i=3600<=p,r=yB(Math.max(0,r-o.start),i),p&&(r+=" / "+yB(p,i)),LD(s,r),s.g.disabled=!0)}));(this||i).eventManager.o((this||i).player,"trackschanged",(function(){s.player.R()&&(s.g.ariaLabel=s.localization.resolve("SKIP_TO_LIVE"))}))}pa(KD,sB);function LD(i,r){r!=i.g.textContent&&(i.g.textContent=r)}L("shaka.ui.PresentationTimeTracker",KD);function MD(){}MD.prototype.create=function(i,r){return new KD(i,r)};eC("time_and_duration",new MD);function ND(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).g=el();(this||i).g.classList.add("shaka-remote-button");(this||i).g.classList.add("shaka-tooltip");(this||i).g.ariaPressed="false";(this||i).i=U("i");(this||i).i.classList.add("material-icons-round");r="cast";(o=Rd())&&13<=o&&(r="airplay");(this||i).i.textContent=r;(this||i).g.appendChild((this||i).i);r=U("label");r.classList.add("shaka-overflow-button-label");r.classList.add("shaka-overflow-menu-only");(this||i).l=U("span");r.appendChild((this||i).l);(this||i).j=U("span");(this||i).j.classList.add("shaka-current-selection-span");r.appendChild((this||i).j);(this||i).g.appendChild(r);(this||i).parent.appendChild((this||i).g);(this||i).h=-1;OD(this||i);xB((this||i).g,!1);!(this||i).video.remote||(this||i).video.disableRemotePlayback?(this||i).g.classList.add("shaka-hidden"):((this||i).eventManager.o((this||i).localization,"locale-updated",(function(){OD(s)})),(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){OD(s)})),(this||i).eventManager.o((this||i).controls,"caststatuschanged",(function(){PD(s)})),(this||i).eventManager.o((this||i).g,"click",(function(){s.video.remote.prompt()})),(this||i).eventManager.o((this||i).video.remote,"connect",(function(){PD(s)})),(this||i).eventManager.o((this||i).video.remote,"connecting",(function(){PD(s)})),(this||i).eventManager.o((this||i).video.remote,"disconnect",(function(){PD(s)})),(this||i).eventManager.o((this||i).player,"loaded",(function(){PD(s)})),PD(this||i))}pa(ND,sB);ND.prototype.release=function(){(this||i).video.remote&&-1!=(this||i).h&&(this||i).video.remote.cancelWatchAvailability((this||i).h).catch((function(){}));sB.prototype.release.call(this||i)};function PD(i){var r,o;K((function(s){switch(s.g){case 1:if(i.controls.C.kf()&&i.controls.ua){xB(i.g,!1);-1!=i.h&&(i.video.remote.cancelWatchAvailability(i.h),i.h=-1);s.F(0);break}if("disconnected"==i.video.remote.state){r=function(r){i.player?xB(i.g,i.player.ie()==Bu&&r):xB(i.g,!1)};ta(s,7);if(-1==i.h){s.F(9);break}return D(s,i.video.remote.cancelWatchAvailability(i.h),10)}if(-1==i.h){s.F(0);break}return D(s,i.video.remote.cancelWatchAvailability(i.h),6);case 6:i.h=-1;s.F(0);break;case 10:i.h=-1;case 9:va(s,8);break;case 7:wa(s);case 8:return ta(s,11),D(s,i.video.remote.watchAvailability(r),13);case 13:o=s.h;i.h=o;va(s,0);break;case 11:wa(s),r(!0),F(s)}}))}function OD(i){var r=i.localization.resolve("CAST"),o=Rd();o&&13<=o&&(r=i.localization.resolve("AIRPLAY"));i.g.ariaLabel=r;i.l.textContent=r}L("shaka.ui.RemoteButton",ND);function QD(){}QD.prototype.create=function(i,r){return new ND(i,r)};HC("remote",new QD);eC("remote",new QD);function RD(r,o){YC.call(this||i,r,o,"settings");var s=this||i;(this||i).button.classList.add("shaka-resolution-button");(this||i).button.classList.add("shaka-tooltip-status");(this||i).menu.classList.add("shaka-resolutions");(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){SD(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){SD(s)}));(this||i).eventManager.o((this||i).player,"variantchanged",(function(){TD(s)}));(this||i).eventManager.o((this||i).player,"trackschanged",(function(){TD(s)}));(this||i).eventManager.o((this||i).player,"abrstatuschanged",(function(){TD(s)}));TD(this||i)}pa(RD,YC);function TD(i){var r=[];i.player.ie()!=Bu&&(r=i.player.mb());var o=r.find((function(i){return i.active}));o&&(r=r.filter((function(i){return i.language==o.language&&i.channelsCount==o.channelsCount})));r=r.filter((function(o,s){var p=-1;p=i.player.Pc()?r.findIndex((function(i){return i.bandwidth==o.bandwidth})):r.findIndex((function(i){return i.height==o.height&&i.frameRate==o.frameRate&&i.hdr==o.hdr&&i.videoLayout==o.videoLayout}));return p==s}));i.player.Pc()?r.sort((function(i,r){return r.bandwidth-i.bandwidth})):r.sort((function(i,r){return r.height-i.height}));var s=tB(i.menu);fl(i.menu);i.menu.appendChild(s);s=i.player.getConfiguration().abr.enabled;for(var p={},y=t(r),A=y.next();!A.done;p={Hb:p.Hb},A=y.next()){p.Hb=A.value;A=el();A.classList.add("explicit-resolution");i.eventManager.o(A,"click",function(r){return function(){var o=r.Hb;i.player.configure({abr:{enabled:!1}});i.player.Me(o,i.controls.g.clearBufferOnQualityChange)}}(p));var T=U("span");T.textContent=i.player.Pc()&&p.Hb.bandwidth?Math.round(p.Hb.bandwidth/1e3)+" kbits/s":p.Hb.height&&p.Hb.width?UD(p.Hb):"Unknown";A.appendChild(T);s||p.Hb!=o||(A.ariaSelected="true",A.appendChild(wB()),T.classList.add("shaka-chosen-item"),i.currentSelection.textContent=T.textContent);i.menu.appendChild(A)}p=el();p.classList.add("shaka-enable-abr-button");i.eventManager.o(p,"click",(function(){i.player.configure({abr:{enabled:!0}});TD(i)}));i.g=U("span");i.g.classList.add("shaka-auto-span");i.g.textContent=i.localization.resolve("AUTO_QUALITY");p.appendChild(i.g);s&&(p.ariaSelected="true",p.appendChild(wB()),i.g.classList.add("shaka-chosen-item"),i.currentSelection.textContent=i.localization.resolve("AUTO_QUALITY"));i.button.setAttribute("shaka-status",i.currentSelection.textContent);i.menu.appendChild(p);vB(i.menu);i.controls.dispatchEvent(new O("resolutionselectionupdated"));SD(i);xB(i.button,0<r.length)}function UD(i){var r=i.height||0,o=i.width||0,s=r;o/r>16/9&&(s=Math.round(9*o/16));r=s+"p";2160==s&&(r="4K");(s=i.frameRate)&&(50<=s||20>=s)&&(r+=Math.round(i.frameRate));"PQ"!=i.hdr&&"HLG"!=i.hdr||(r+=" (HDR)");"CH-STEREO"==i.videoLayout&&(r+=" (3D)");return r}function SD(i){var r=i.player.Pc()?"QUALITY":"RESOLUTION";i.button.ariaLabel=i.localization.resolve(r);i.backButton.ariaLabel=i.localization.resolve(r);i.backSpan.textContent=i.localization.resolve(r);i.nameSpan.textContent=i.localization.resolve(r);i.g.textContent=i.localization.resolve("AUTO_QUALITY");i.player.getConfiguration().abr.enabled&&(i.currentSelection.textContent=i.localization.resolve("AUTO_QUALITY"))}L("shaka.ui.ResolutionSelection",RD);function VD(){}VD.prototype.create=function(i,r){return new RD(i,r)};HC("quality",new VD);eC("quality",new VD);function WD(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).g=el();(this||i).g.classList.add("material-icons-round");(this||i).g.classList.add("shaka-rewind-button");(this||i).g.classList.add("shaka-tooltip-status");(this||i).g.setAttribute("shaka-status",(this||i).localization.resolve("OFF"));(this||i).g.textContent="fast_rewind";(this||i).parent.appendChild((this||i).g);XD(this||i);(this||i).h=(this||i).controls.g.rewindRates;(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){XD(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){XD(s)}));(this||i).eventManager.o((this||i).g,"click",(function(){if(s.video.duration){var i=s.h.indexOf(s.player.Nb())+1;i=i!=s.h.length?s.h[i]:s.h[0];s.player.Pd(i);s.g.setAttribute("shaka-status",i+"x")}}))}pa(WD,sB);function XD(i){i.g.ariaLabel=i.localization.resolve("REWIND")}L("shaka.ui.RewindButton",WD);function YD(){}YD.prototype.create=function(i,r){return new WD(i,r)};eC("rewind",new YD);function ZD(r,o){sB.call(this||i,r,o);var s=this||i;(this||i).j=U("div");(this||i).j.classList.add("shaka-skip-ad-container");(this||i).parent.appendChild((this||i).j);(this||i).h=U("div");(this||i).h.classList.add("shaka-skip-ad-counter");xB((this||i).h,!1);(this||i).j.appendChild((this||i).h);(this||i).g=el();(this||i).g.classList.add("shaka-skip-ad-button");(this||i).g.disabled=!0;xB((this||i).g,!1);(this||i).g.classList.add("shaka-no-propagation");(this||i).j.appendChild((this||i).g);$D(this||i);(this||i).i=new Dd((function(){var i=Math.round(s.ad.getTimeUntilSkippable());0<i?s.h.textContent=i:(s.i.stop(),xB(s.h,!1))}));(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){$D(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){$D(s)}));(this||i).eventManager.o((this||i).adManager,"ad-started",(function(){aE(s)}));(this||i).eventManager.o((this||i).adManager,"ad-skip-state-changed",(function(){s.ad.canSkipNow()&&(s.g.disabled=!1,s.i.stop(),xB(s.h,!1))}));(this||i).eventManager.o((this||i).adManager,"ad-stopped",(function(){s.i.stop();s.g.disabled=!0;xB(s.g,!1);xB(s.h,!1)}));(this||i).eventManager.o((this||i).g,"click",(function(){s.ad.skip()}));(this||i).ad&&aE(this||i)}pa(ZD,sB);ZD.prototype.release=function(){(this||i).i.stop();(this||i).i=null;sB.prototype.release.call(this||i)};function $D(i){i.g.textContent=i.localization.resolve("SKIP_AD")}function aE(i){i.ad.isSkippable()&&(xB(i.g,!0),xB(i.h,!0),i.h.textContent="",i.i.Qa(),i.i.za(.5))}L("shaka.ui.SkipAdButton",ZD);function bE(r,o){CB.call(this||i,r,o);(this||i).button.classList.add("shaka-small-play-button");(this||i).button.classList.add("material-icons-round");(this||i).button.classList.add("shaka-tooltip");this.h();this.g()}pa(bE,CB);bE.prototype.h=function(){this.isEnded()?(this||i).button.textContent="replay":(this||i).button.textContent=this.isPaused()?"play_arrow":"pause"};bE.prototype.g=function(){if(this.isEnded())(this||i).button.ariaLabel=(this||i).localization.resolve("REPLAY");else{var r=this.isPaused()?"PLAY":"PAUSE";(this||i).button.ariaLabel=(this||i).localization.resolve(r)}};L("shaka.ui.SmallPlayButton",bE);function cE(){}cE.prototype.create=function(i,r){return new bE(i,r)};eC("play_pause",new cE);function dE(r,o){sB.call(this||i,r,o);r=U("div");r.classList.add("shaka-spacer");r.ariaHidden="true";(this||i).parent.appendChild(r)}pa(dE,sB);L("shaka.ui.Spacer",dE);function eE(){}eE.prototype.create=function(i,r){return new dE(i,r)};eC("spacer",new eE);function fE(r,o){function c(i){return yB(s.h[i],!1)+" (m)"}function d(i){return Math.round(s.h[i]/1e3)+" (kbits/s)"}function e(i){return s.h[i].toFixed(2)+" (s)"}function f(i){return s.h[i]+" (frames)"}function g(i){return s.h[i]+" (px)"}sB.call(this||i,r,o);var s=this||i;(this||i).i=el();(this||i).i.classList.add("shaka-statistics-button");(this||i).j=U("i");(this||i).j.classList.add("material-icons-round");(this||i).j.textContent="insert_chart_outlined";(this||i).i.appendChild((this||i).j);r=U("label");r.classList.add("shaka-overflow-button-label");(this||i).s=U("span");r.appendChild((this||i).s);(this||i).m=U("span");(this||i).m.classList.add("shaka-current-selection-span");r.appendChild((this||i).m);(this||i).i.appendChild(r);(this||i).parent.appendChild((this||i).i);(this||i).g=U("div");(this||i).g.classList.add("shaka-no-propagation");(this||i).g.classList.add("shaka-show-controls-on-mouse-over");(this||i).g.classList.add("shaka-statistics-container");(this||i).g.classList.add("shaka-hidden");(this||i).controls.h.appendChild((this||i).g);(this||i).D=[];(this||i).G=["stateHistory","switchHistory"];(this||i).h=(this||i).player.getStats();(this||i).u={};(this||i).C={width:g,height:g,completionPercent:function(i){return s.h[i]+" (%)"},bufferingTime:e,drmTimeSeconds:e,licenseTime:e,liveLatency:e,loadLatency:e,manifestTimeSeconds:e,estimatedBandwidth:d,streamBandwidth:d,maxSegmentDuration:c,pauseTime:c,playTime:c,corruptedFrames:f,decodedFrames:f,droppedFrames:f,stallsDetected:function(i){return s.h[i]+" (stalls)"},gapsJumped:function(i){return s.h[i]+" (gaps)"}};(this||i).l=new Dd((function(){s.h=s.player.getStats();for(var i=t(s.D),r=i.next();!r.done;r=i.next())r=r.value,s.u[r].textContent=s.C[r](r)}));gE(this||i);hE(this||i);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){gE(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){gE(s)}));(this||i).eventManager.o((this||i).i,"click",(function(){xB(s.parent,!1);s.g.classList.contains("shaka-hidden")?(s.j.textContent="insert_chart",s.l.za(.1),xB(s.g,!0)):(s.j.textContent="insert_chart_outlined",s.l.stop(),xB(s.g,!1));gE(s)}))}pa(fE,sB);function gE(i){i.s.textContent=i.localization.resolve("STATISTICS");i.i.ariaLabel=i.localization.resolve("STATISTICS");i.m.textContent=i.localization.resolve(i.g.classList.contains("shaka-hidden")?"OFF":"ON")}function hE(i){for(var r=t(i.controls.g.statisticsList),o=r.next();!o.done;o=r.next())if(o=o.value,o in i.h&&!i.G.includes(o)){var s=i.g,p=s.appendChild,y=i,A=U("div"),T=U("label");T.textContent=o+":";A.appendChild(T);T=U("span");T.textContent=y.C[o](o);A.appendChild(T);y.u[o]=T;p.call(s,A);i.D.push(o)}else Ra("Unrecognized statistic element:",o)}fE.prototype.release=function(){(this||i).l.stop();(this||i).l=null;sB.prototype.release.call(this||i)};L("shaka.ui.StatisticsButton",fE);function iE(){}iE.prototype.create=function(i,r){return new fE(i,r)};HC("statistics",new iE);IB("statistics",new iE);function jE(r,o){YC.call(this||i,r,o,"closed_caption");var s=this||i;(this||i).button.classList.add("shaka-caption-button");(this||i).button.classList.add("shaka-tooltip-status");(this||i).menu.classList.add("shaka-text-languages");(this||i).player&&(this||i).player.xc()?(this||i).button.ariaPressed="true":(this||i).button.ariaPressed="false";kE(this||i);(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){lE(s);mE(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){lE(s);mE(s)}));(this||i).eventManager.o((this||i).player,"texttrackvisibility",(function(){nE(s);mE(s)}));(this||i).eventManager.o((this||i).player,"textchanged",(function(){mE(s)}));(this||i).eventManager.o((this||i).player,"trackschanged",(function(){oE(s)}));nE(this||i);lE(this||i);mE(this||i);oE(this||i)}pa(jE,YC);function kE(i){var r=el();r.ariaSelected="true";i.menu.appendChild(r);r.appendChild(wB());i.g=U("span");i.g.classList.add("shaka-auto-span");r.appendChild(i.g)}function nE(i){i.player.xc()?(i.icon.textContent="closed_caption",i.button.ariaPressed="true"):(i.icon.textContent="closed_caption_disabled",i.button.ariaPressed="false");i.controls.dispatchEvent(new O("captionselectionupdated"))}function mE(i){var r=i.player.bc();WC(r,i.menu,(function(r){return pE(i,r)}),i.player.xc(),i.currentSelection,i.localization,i.controls.g.trackLabelFormat,i.controls.g.showAudioChannelCountVariants);r=el();r.classList.add("shaka-turn-captions-off-button");i.eventManager.o(r,"click",(function(){i.player.Oe(!1);mE(i)}));r.appendChild(i.g);i.menu.appendChild(r);i.player.xc()||(r.ariaSelected="true",r.appendChild(wB()),i.g.classList.add("shaka-chosen-item"),i.currentSelection.textContent=i.localization.resolve("OFF"));i.button.setAttribute("shaka-status",i.currentSelection.textContent);vB(i.menu);i.controls.dispatchEvent(new O("captionselectionupdated"))}function pE(i,r){return K((function(o){i.player.jg(r);return D(o,i.player.Oe(!0),0)}))}function lE(i){i.button.ariaLabel=i.localization.resolve("CAPTIONS");i.backButton.ariaLabel=i.localization.resolve("BACK");i.nameSpan.textContent=i.localization.resolve("CAPTIONS");i.backSpan.textContent=i.localization.resolve("CAPTIONS");i.g.textContent=i.localization.resolve("OFF")}function oE(i){var r=0<i.player.bc().length;xB(i.button,r);mE(i)}L("shaka.ui.TextSelection",jE);function qE(){}qE.prototype.create=function(i,r){return new jE(i,r)};HC("captions",new qE);eC("captions",new qE);function rE(r,o){NB.call(this||i,r,o,["shaka-volume-bar-container"],["shaka-volume-bar"]);var s=this||i;(this||i).g=(this||i).controls.g;this.setRange(0,100);(this||i).eventManager.o((this||i).video,"volumechange",(function(){return sE(s)}));(this||i).eventManager.o((this||i).adManager,"ad-volume-changed",(function(){return tE(s)}));(this||i).eventManager.o((this||i).adManager,"ad-muted",(function(){return tE(s)}));(this||i).eventManager.o((this||i).adManager,"ad-stopped",(function(){return sE(s)}));(this||i).eventManager.o((this||i).localization,"locale-updated",(function(){return uE(s)}));(this||i).eventManager.o((this||i).localization,"locale-changed",(function(){return uE(s)}));sE(this||i);uE(this||i);(this||i).ad&&this.onChange()}pa(rE,NB);rE.prototype.onChange=function(){(this||i).ad&&(this||i).ad.isLinear()?(this||i).ad.setVolume(this.getValue()/100):((this||i).video.volume=this.getValue()/100,(this||i).video.muted=0==(this||i).video.volume)};function sE(i){i.video.muted?i.setValue(0):i.setValue(100*i.video.volume);vE(i)}function tE(i){var r=i.ad.getVolume();i.setValue(100*r);vE(i)}function vE(i){var r=i.g.volumeBarColors,o=["to right"];o.push(r.level+i.getValue()+"%");o.push(r.base+i.getValue()+"%");o.push(r.base+"100%");i.container.style.background="linear-gradient("+o.join(",")+")"}function uE(i){i.bar.ariaLabel=i.localization.resolve("VOLUME")}L("shaka.ui.VolumeBar",rE);function wE(){}wE.prototype.create=function(i,r){return new rE(i,r)};eC("volume",new wE)}).call(s,o,o,void 0);for(var p in s.shaka)r[p]=s.shaka[p]})();export{r as default};
//# sourceMappingURL=shaka-player.ui.js.map